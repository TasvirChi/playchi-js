{"version":3,"sources":["./core/webpack/universalModuleDefinition","./core/playkit.min.js","./core/webpack/bootstrap 04594fa48741fc933842","./core/./utils/logger.js","./core/./utils/util.js","./core/./event/fake-event.js","./core/./track/track.js","./core/./event/event-manager.js","./core/./event/events.js","./core/./track/video-track.js","./core/./track/audio-track.js","./core/./track/text-track.js","./core/./player.js","./core/./utils/env.js","./core/./utils/player-error.js","./core/./utils/multi-map.js","./core/./event/fake-event-target.js","./core/./plugin/base-plugin.js","./core/./middleware/base-middleware.js","./core/./state/state-types.js","./core/./engines/html5/media-source/media-source-provider.js","./core/./engines/html5/media-source/base-media-source-adapter.js","./core/./drm/base-drm-protocol.js","./core/./drm/drm-scheme.js","./core/./track/vtt-cue.js","./core/./track/text-track-display.js","./core/./plugin/plugin-manager.js","./core/./track/text-style.js","./core/./playkit.js","./core/../node_modules/ua-parser-js/src/ua-parser.js","./core/../node_modules/webpack/buildin/amd-options.js","./core/./utils/poster-manager.js","./core/./utils/locale.js","./core/../node_modules/js-logger/src/logger.js","./core/./engines/html5/html5.js","./core/./engines/html5/media-source/adapters/native-adapter.js","./core/./utils/resolution.js","./core/./drm/fairplay.js","./core/./drm/drm-support.js","./core/./engines/html5/capabilities/html5-autoplay.js","./core/./assets/encoding-sources.json","./core/./engines/html5/capabilities/html5-is-supported.js","./core/./state/state-manager.js","./core/./state/state.js","./core/./track/track-types.js","./core/./middleware/playback-middleware.js","./core/./middleware/middleware.js","./core/./player-config.json","webpack:///./assets/style.css?7d9b","./core/./assets/style.css","./core/../node_modules/css-loader/lib/css-base.js","./core/../node_modules/style-loader/lib/addStyles.js","./core/../node_modules/style-loader/lib/urls.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","value","LOG_LEVEL","undefined","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_jsLogger","JsLogger","obj","newObj","default","DEBUG","INFO","TIME","WARN","ERROR","OFF","LoggerFactory","options","useDefaults","lf","defaultLevel","_toConsumableArray","arr","Array","isArray","arr2","from","_defineProperty","_typeof","Symbol","iterator","constructor","_Number","isNumber","Number","isInt","isFloat","_String","capitlize","string","charAt","toUpperCase","slice","endsWith","searchString","indexOf","_Object","merge","objects","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","assign","err","return","isObject","item","mergeDeep","_len","arguments","sources","_key","source","shift","apply","concat","copyDeep","data","_this","node","forEach","e","keys","isEmptyObject","getPropertyPath","propertyPath","split","reduce","x","hasPropertyPath","properties","prop","defer","res","rej","promise","Promise","resolve","reject","bind","thisObj","fn","_Generator","uniqueId","to","Math","random","toString","substr","guid","S4","substring","_Dom","addClassName","element","className","classList","add","hasClassName","removeClassName","remove","replace","RegExp","test","setAttribute","removeAttribute","setStyle","style","getPropertyValue","setProperty","appendChild","parent","child","removeChild","prependTo","firstChild","insertBefore","getElementById","id","document","createElement","tagName","loadScriptAsync","url","_this2","r","t","getElementsByTagName","type","src","async","onload","onreadystatechange","readyState","onerror","onabort","parentNode","_Http","execute","params","method","headers","request","XMLHttpRequest","status","jsonResponse","JSON","parse","responseText","open","setRequestHeader","send","String","Generator","Dom","Http","FakeEvent","payload","bubbles","cancelable","defaultPrevented","timeStamp","window","performance","now","Date","isTrusted","currentTarget","stopped","Track","settings","_id","_active","active","_label","label","_language","language","_index","index","set","inputLang","trackLang","toLowerCase","startsWith","_interopRequireDefault","_multiMap","_multiMap2","_fakeEvent","EventManager","_bindingMap","removeAll","listener","oneListener","event","unlisten","listen","binding","Binding_","push","list","listeners","getAll","clear","addEventListener","removeEventListener","CUSTOM_EVENTS","HTML5_EVENTS","PLAYER_EVENTS","_util","Utils","ABORT","CAN_PLAY","CAN_PLAY_THROUGH","DURATION_CHANGE","EMPTIED","ENDED","LOADED_DATA","LOADED_METADATA","LOAD_START","PAUSE","PLAY","PLAYING","PROGRESS","RATE_CHANGE","SEEKED","SEEKING","STALLED","SUSPEND","TIME_UPDATE","VOLUME_CHANGE","WAITING","AUTOPLAY_FAILED","FALLBACK_TO_MUTED_AUTOPLAY","CHANGE_SOURCE_STARTED","CHANGE_SOURCE_ENDED","MUTE_CHANGE","VIDEO_TRACK_CHANGED","AUDIO_TRACK_CHANGED","TEXT_TRACK_CHANGED","TEXT_CUE_CHANGED","TRACKS_CHANGED","ABR_MODE_CHANGED","PLAYER_STATE_CHANGED","FIRST_PLAY","SOURCE_SELECTED","TEXT_STYLE_CHANGED","AD_LOADED","AD_STARTED","AD_RESUMED","AD_PAUSED","AD_CLICKED","AD_SKIPPED","AD_COMPLETED","AD_ERROR","ALL_ADS_COMPLETED","AD_BREAK_START","AD_BREAK_END","AD_FIRST_QUARTILE","AD_MIDPOINT","AD_THIRD_QUARTILE","USER_CLOSED_AD","AD_VOLUME_CHANGED","AD_MUTED","AD_PROGRESS","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","_track","_track2","VideoTrack","_Track","getPrototypeOf","_bandwidth","bandwidth","_width","width","_height","height","AudioTrack","TextTrack","_kind","kind","_env","_env2","_eventManager","_eventManager2","_posterManager","_posterManager2","_fakeEvent2","_fakeEventTarget","_fakeEventTarget2","_events","_stateTypes","_stateTypes2","_locale","_locale2","_logger","_logger2","_html","_html2","_pluginManager","_pluginManager2","_basePlugin","_stateManager","_stateManager2","_trackTypes","_trackTypes2","_videoTrack","_videoTrack2","_audioTrack","_audioTrack2","_textTrack","_textTrack2","_textStyle","_textStyle2","_textTrackDisplay","_playbackMiddleware","_playbackMiddleware2","_playerConfig","_playerConfig2","Player","_FakeEventTarget","config","_activeTextCues","_textDisplaySettings","_playbackAttributesState","muted","volume","rate","audioLanguage","textLanguage","_tracks","_firstPlay","_firstPlayInCurrentSession","_config","_defaultConfig","_createReadyPromise","_createPlayerContainer","_appendPosterEl","configure","debug","_engines","Engine","runCapabilities","engineType","_playerCapabilities","promises","getCapabilities","all","then","arrayOfResults","_configureOrLoadPlugins","plugins","receivedSourcesWhenHasEngine","_engine","_reset","dispatchEvent","_selectEngineByPriority","_appendEngineEl","setSrc","metadata","poster","show","_attachMedia","_handlePlaybackOptions","_handleAutoPlay","_readyPromise","startTime","playback","load","tracks","_addTextTrackOffOption","_setDefaultTracks","catch","error","play","_play","pause","_pause","_el","getVideoElement","destroy","_engineType","_streamType","isLive","dvr","seekToLiveEdge","_getTracksByType","video","VIDEO","find","track","audio","AUDIO","text","TEXT","selectVideoTrack","selectAudioTrack","hideTextTrack","selectTextTrack","_updateTextDisplay","textTracks","map","textTrack","selectedTextTrack","enableAdaptiveBitrate","isAdaptiveBitrateEnabled","_updateCueDisplaySettings","hasBeenReset","adsPlugin","skipAd","adTagUrl","playAdNow","el","_playerId","getElement","engineEl","classnameWithId","ENGINE_CLASS_NAME","_this3","plugin","updateConfig","getConfig","getMiddlewareImpl","use","_this4","_this5","streamPriority","preferNative","_ret","priority","engineId","engine","format","formatSources","canPlaySource","_loadEngine","selectedSource","v","warn","restore","createEngine","_this6","html5Event","browser","_removeTextCuePatch","_markActiveTrack","selectedVideoTrack","selectedAudioTrack","_onCueChange","_onPlay","_onEnded","playbackRate","_this7","filteredActiveTextCues","filter","textCue","cueEndTime","_endTime","cueStartTime","_startTime","currTime","currentTime","playsinline","_canPreload","autoplay","preload","ima","_this8","allowMutedAutoPlay","capabilities","ready","_this9","isDvr","hide","paused","reset","getTracks","cues","activeCues","cue","_textDisplayEl","processCues","activeTracks","getActiveTracks","playbackConfig","offTextTrack","langComparer","currentOrConfiguredTextLang","_getLanguage","currentOrConfiguredAudioLang","_setDefaultTrack","configuredLanguage","defaultTrack","localeTrack","selectTrack","boundedTo","duration","vol","boundedVol","seeking","mute","clientWidth","clientHeight","sessionId","session","Error","head","sheet","cssRules","deleteRule","useNativeTextTrack","insertRule","toCSS","message","clone","getLogger","_uaParserJs","_uaParserJs2","Env","getResult","PlayerError","param","TYPE","NOT_REGISTERED_PLUGIN","NOT_VALID_HANDLER","NOT_IMPLEMENTED_METHOD","MultiMap","_map","Map","has","values","splice","FakeEventTarget","_listeners","dispatchTarget","handleEvent","exception","_player","_playerError","_playerError2","BasePlugin","player","eventManager","logger","defaultConfig","getError","attr","update","BaseMiddleware","PLAYER_STATE_TYPES","IDLE","LOADING","PAUSED","BUFFERING","registerMediaSourceAdapter","_nativeAdapter","_nativeAdapter2","MediaSourceProvider","mediaSourceAdapter","_mediaSourceAdapters","includes","_orderMediaSourceAdapters","mediaSourceAdapters","mimetype","canPlayType","drmData","canPlayDrm","_selectedAdapter","mse","unshift","videoElement","createAdapter","register","BaseMediaSourceAdapter","_videoElement","_sourceObj","_trigger","CustomEvents","videoTrack","audioTrack","mimeType","_drmSupport","_drmSupport2","_drmScheme","BaseDrmProtocol","DrmSupport","DrmScheme","WIDEVINE","PLAYREADY","FAIRPLAY","findDirectionSetting","directionSetting","findAlignSetting","alignSetting","Cue","","lr","rl","start","middle","end","left","right","VTTCue","endTime","displayState","_pauseOnExit","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_positionAlign","_size","_align","_text","convertCueToDOMTree","resetCue","setting","SyntaxError","parseTimeStamp","input","computeSeconds","h","f","match","parseContent","unescape1","ESCAPE","rootDiv","current","tagStack","result","createTextNode","pop","ts","createProcessingInstruction","annotation","TAG_NAME","localName","TAG_ANNOTATION","trim","NEEDS_PARENT","isStrongRTLChar","charCode","strongRTLRanges","currentRange","determineBidi","cueDiv","pushNodes","nodeStack","childNodes","nextTextNode","textContent","innerText","charCodeAt","computeLinePos","line","snapToLines","textTrackList","mediaElement","trackList","count","mode","moveBoxToLinePosition","styleBox","containerBox","boxPositions","boxPosition","BoxPosition","linePos","axis","size","vertical","step","lineHeight","position","round","maxPosition","initialAxis","abs","ceil","reverse","move","calculatedPercentage","lineAlign","applyStyles","top","formatStyle","bestPosition","b","specifiedPosition","percentage","overlapsOppositeAxis","within","overlapsAny","intersectPercentage","toCSSCompatValues","cuetext","overlay","paddedOverlay","bottom","margin","CUE_BACKGROUND_PADDING","getSimpleBoxPosition","fontSize","FONT_SIZE_PERCENT","styleOptions","font","fontScale","FONT_STYLE","CueStyleBox","div","&amp;","&lt;","&gt;","&lrm;","&rlm;","&nbsp;","u","ruby","rt","lang","StyleBox","styles","val","unit","_StyleBox","isIE8","navigator","userAgent","color","backgroundColor","textShadow","WebVTTSet","fontSet","backgroundSet","edgeSet","display","writingMode","unicodeBidi","textAlign","align","whiteSpace","direction","stylesunicodeBidi","textPos","positionAlign","box","overlaps","b2","lh","offsetHeight","offsetWidth","offsetTop","rects","getClientRects","getBoundingClientRect","max","toMove","boxes","container","min","reference","registerPlugin","_basePlugin2","PluginManager","_plugins","_registry","pluginClass","isValid","createPlugin","_destroy","delete","handler","TextStyle","fontFamily","FontFamily","SANS_SERIF","fontColor","StandardColors","WHITE","fontOpacity","StandardOpacities","OPAQUE","BLACK","backgroundOpacity","fontEdge","EdgeStyles","NONE","attributes","_toRGBA","shadows","shadow","join","clonedTextStyle","opacity","ARIAL","HELVETICA","VERDANA","RED","GREEN","BLUE","YELLOW","MAGENTA","CYAN","SEMI_HIGH","SEMI_LOW","TRANSPARENT","RAISED","DEPRESSED","UNIFORM","DROP","FontSizes","loadPlayer","_player2","PLAYER_NAME","VERSION","_baseMediaSourceAdapter","_baseMediaSourceAdapter2","_mediaSourceProvider","_baseDrmProtocol","_baseDrmProtocol2","_baseMiddleware","_baseMiddleware2","log","__WEBPACK_AMD_DEFINE_RESULT__","MODEL","NAME","VENDOR","MOBILE","TABLET","util","extend","regexes","extensions","margedRegexes","str1","str2","lowerize","str","major","version","mapper","rgx","ua","arrays","j","k","q","matches","regex","exec","maps","oldsafari","1.0","1.2","1.3","2.0","2.0.2","2.0.3","2.0.4","?","device","amazon","model","Fire Phone","sprint","Evo Shift 4G","vendor","HTC","Sprint","os","windows","ME","NT 3.11","NT 4.0","2000","XP","Vista","7","8","8.1","10","RT","cpu","Browser","CPU","arch","Device","OS","UAParser","uastring","rgxmap","getBrowser","getCPU","getDevice","getEngine","getOS","getUA","setUA","BROWSER","MAJOR","ARCHITECTURE","DEVICE","CONSOLE","SMARTTV","WEARABLE","EMBEDDED","ENGINE","$","jQuery","Zepto","parser","__webpack_amd_options__","PosterManager","_createEl","posterUrl","_posterUrl","_removeEl","Locale","languages","userLanguage","__WEBPACK_AMD_DEFINE_FACTORY__","global","Logger","logHandler","contextualLoggersByNameMap","scope","func","args","defineLogLevel","ContextualLogger","defaultContext","context","setLevel","filterLevel","info","newLevel","enabledFor","lvl","invoke","time","timeEnd","level","msgArgs","globalLogger","L","setHandler","createDefaultHandler","formatter","messages","timerStartTimeByLabelMap","invokeConsoleMethod","hdlr","Function","console","timerLabel","getTime","_mediaSourceProvider2","_vttCue","_html5Autoplay","_html5Autoplay2","_html5IsSupported","_html5IsSupported2","Html5","_showTextTrackFirstTime","_createVideoElement","_init","_capabilities","capability","runCapability","getCapability","mergedResults","detach","_mediaSourceAdapter","_removeCueChangeListener","_addCueChangeListener","playPromise","_canLoadMediaSourceAdapterPromise","_loadMediaSourceAdapter","attach","controls","getMediaSourceAdapter","textTrackEl","_getSelectedTextTrackElement","oncuechange","TextTrackCue","parseInt","NaN","seekable","played","buffered","defaultMuted","loop","defaultPlaybackRate","ended","networkState","videoHeight","videoWidth","getAttribute","_get","receiver","desc","getOwnPropertyDescriptor","_resolution","_fairplay","_fairplay2","NativeAdapter","_BaseMediaSourceAdapt","_maybeSetDrmPlayback","_progressiveSources","progressive","TEST_VIDEO","_drmProtocols","drmProtocol","_drmProtocol","setDrmPlayback","suitableTrack","getSuitableSourceForResolution","_loadPromise","listenOnce","_getParsedTracks","_isProgressivePlayback","_setProgressiveSource","videoTracks","_getParsedVideoTracks","audioTracks","_getParsedAudioTracks","_getParsedTextTracks","_getParsedProgressiveVideoTracks","_getParsedAdaptiveVideoTracks","parsedTracks","selected","enabled","_filterVideoElementTextTracks","vidTextTrack","_selectProgressiveVideoTrack","selectAdaptiveVideoTrack","_onTrackChanged","_disableVideoTracks","_disableAudioTracks","_disableTextTracks","_getLiveEdge","Infinity","mostSuitableWidth","mostSuitableWidthTracks","minWidthDiff","widthDiff","videoRatio","mostSuitableWidthAndRatioTracks","minRatioDiff","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","ratioDiff","maxBandwidth","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","FairPlay","_BaseDrmProtocol","isProtocolSupported","_WebkitEvents","NEED_KEY","_onWebkitNeedKey","fpDrmData","drmEntry","scheme","_keySession","fpCertificate","certificate","initData","contentId","_extractContentId","aCertificate","_base64DecodeUint8Array","_concatInitDataIdAndCertificate","webkitKeys","keySystem","_selectKeySystem","webkitSetMediaKeys","WebKitMediaKeys","createSession","KEY_MESSAGE","_onWebkitKeyMessage","KEY_ADDED","_onWebkitKeyAdded","KEY_ERROR","_onWebkitKeyError","responseType","_licenseRequestLoaded","_licenseRequestFailed","_base64EncodeUint8Array","licenseUrl","keyText","responseObj","_validateResponse","valid","ckc","status_code","details","link","href","_arrayToString","hostname","isTypeSupported","_KeySystem","array","fromCharCode","Uint16Array","buffer","raw","atob","rawLength","Uint8Array","ArrayBuffer","cert","_stringToArray","offset","byteLength","dataView","DataView","setUint32","idArray","strLen","keyStr","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","NOT_SUPPORTED","_Browsers","drmScheme","Safari","Chrome","Firefox","Edge","IE","osVersion","parseFloat","_interopRequireWildcard","_encodingSources","EncodingSources","Html5AutoPlayCapability","_vid","Base64Mp4Source","_promise","Html5IsSupportedCapability","_result","isSupported","_state","_state2","StateManager","_PlayerStates$IDLE","_PlayerStates$LOADING","_PlayerStates$PAUSED","_PlayerStates$PLAYING","_PlayerStates$BUFFERI","_transitions","_updateState","_dispatchEvent","_prevState","_history","_curState","_attachListeners","_doTransition","transition","oldState","newState","State","_duration","_timestamp","TRACK_TYPES","_middleware","_middleware2","PlaybackMiddleware","Actions","middlewareInstance","callback","run","Middleware","actions","_actions","_middlewares","action","apiAction","middlewares","_executeMiddleware","reduceRight","html5","hls","dash","content","transform","locals","cssWithMappingToString","useSourceMap","cssMapping","btoa","sourceMapping","toComment","sourceRoot","sourceMap","unescape","encodeURIComponent","stringify","mediaQuery","alreadyImportedModules","addStylesToDom","domStyle","stylesInDom","refs","parts","addStyle","listToStyles","newStyles","base","css","media","part","insertStyleElement","insertInto","lastStyleElementInsertedAtTop","stylesInsertedAtTop","insertAt","nextSibling","removeStyleElement","idx","createStyleElement","attrs","addAttrs","createLinkElement","rel","singleton","styleIndex","singletonCounter","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","updateLink","applyToTag","styleSheet","cssText","replaceText","cssNode","autoFixUrls","convertToAbsoluteUrls","fixUrls","blob","oldSrc","isOldIE","memo","selector","querySelector","newList","mayRemove","textStore","replacement","Boolean","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","unquotedOrigUrl","$1","newUrl"],"mappings":"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","file":"playkit.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Playkit\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Playkit\"] = factory();\n\telse\n\t\troot[\"Playkit\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Playkit\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Playkit\"] = factory();\n\telse\n\t\troot[\"Playkit\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 25);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LOG_LEVEL = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _jsLogger = __webpack_require__(30);\n\nvar JsLogger = _interopRequireWildcard(_jsLogger);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LOG_LEVEL = {\n  \"DEBUG\": JsLogger.DEBUG,\n  \"INFO\": JsLogger.INFO,\n  \"TIME\": JsLogger.TIME,\n  \"WARN\": JsLogger.WARN,\n  \"ERROR\": JsLogger.ERROR,\n  \"OFF\": JsLogger.OFF\n};\n\nvar LoggerFactory = function () {\n  function LoggerFactory(options) {\n    _classCallCheck(this, LoggerFactory);\n\n    JsLogger.useDefaults(options || {});\n  }\n\n  _createClass(LoggerFactory, [{\n    key: \"getLogger\",\n    value: function getLogger(name) {\n      if (!name) {\n        return JsLogger;\n      }\n      return JsLogger.get(name);\n    }\n  }]);\n\n  return LoggerFactory;\n}();\n\nvar lf = new LoggerFactory({ defaultLevel: JsLogger.DEBUG });\n\nexports.default = lf;\nexports.LOG_LEVEL = LOG_LEVEL;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _Number = {\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a number\n   */\n  isNumber: function isNumber(n) {\n    return Number(n) === n;\n  },\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is an integer\n   */\n  isInt: function isInt(n) {\n    return this.isNumber(n) && n % 1 === 0;\n  },\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a float\n   */\n  isFloat: function isFloat(n) {\n    return this.isNumber(n) && n % 1 !== 0;\n  }\n};\n\nvar _String = {\n  /**\n   * Uppercase the first letter of a string\n   * @param  {String} string - String to be uppercased\n   * @return {String} - The uppercased string\n   * @public\n   * @method toTitleCase\n   */\n  capitlize: function capitlize(string) {\n    if (typeof string !== 'string') {\n      return string;\n    }\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  },\n\n  /**\n   * @param {string} string - Certain string\n   * @param {string} searchString - Certain string\n   * @returns {boolean} - Whether the string: string is ending with string: searchString\n   */\n  endsWith: function endsWith(string, searchString) {\n    if (typeof string !== 'string' || typeof searchString !== 'string') {\n      return false;\n    }\n    return string.indexOf(searchString, string.length - searchString.length) != -1;\n  }\n};\n\nvar _Object = {\n  /**\n   * @param {Array<Object>} objects - The objects to merge\n   * @returns {Object} - The merged object.\n   */\n  merge: function merge(objects) {\n    var target = {};\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = objects[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var obj = _step.value;\n\n        Object.assign(target, obj);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return target;\n  },\n\n  /**\n   * @param {any} item - The item to check.\n   * @returns {boolean} - Whether the item is an object.\n   */\n  isObject: function isObject(item) {\n    return item && (typeof item === 'undefined' ? 'undefined' : _typeof(item)) === 'object' && !Array.isArray(item);\n  },\n\n  /**\n   * @param {any} target - The target object.\n   * @param {any} sources - The objects to merge.\n   * @returns {Object} - The merged object.\n   */\n  mergeDeep: function mergeDeep(target) {\n    for (var _len = arguments.length, sources = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      sources[_key - 1] = arguments[_key];\n    }\n\n    if (!sources.length) {\n      return target;\n    }\n    var source = sources.shift();\n    if (this.isObject(target) && this.isObject(source)) {\n      for (var key in source) {\n        if (this.isObject(source[key])) {\n          if (!target[key]) Object.assign(target, _defineProperty({}, key, {}));\n          this.mergeDeep(target[key], source[key]);\n        } else {\n          Object.assign(target, _defineProperty({}, key, source[key]));\n        }\n      }\n    }\n    return this.mergeDeep.apply(this, [target].concat(_toConsumableArray(sources)));\n  },\n\n  /**\n   * @param {any} data - The data to copy.\n   * @returns {any} - The copied data.\n   */\n  copyDeep: function copyDeep(data) {\n    var _this = this;\n\n    var node = void 0;\n    if (Array.isArray(data)) {\n      node = data.length > 0 ? data.slice(0) : [];\n      node.forEach(function (e, i) {\n        if ((typeof e === 'undefined' ? 'undefined' : _typeof(e)) === \"object\" && e !== {} || Array.isArray(e) && e.length > 0) {\n          node[i] = _this.copyDeep(e);\n        }\n      });\n    } else if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === \"object\") {\n      node = Object.assign({}, data);\n      Object.keys(node).forEach(function (key) {\n        if (_typeof(node[key]) === \"object\" && node[key] !== {} || Array.isArray(node[key]) && node[key].length > 0) {\n          node[key] = _this.copyDeep(node[key]);\n        }\n      });\n    } else {\n      node = data;\n    }\n    return node;\n  },\n\n  /**\n   * Checks if an object is an empy object.\n   * @param {Object} obj - The object to check\n   * @returns {boolean} - Whether the object is empty.\n   */\n  isEmptyObject: function isEmptyObject(obj) {\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) return false;\n    }\n    return true;\n  },\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - The value in this path.\n   */\n  getPropertyPath: function getPropertyPath(obj, propertyPath) {\n    return propertyPath.split(\".\").reduce(function (o, x) {\n      return typeof o === \"undefined\" || o === null ? o : o[x];\n    }, obj);\n  },\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - Whether the path exists in the object.\n   */\n  hasPropertyPath: function hasPropertyPath(obj, propertyPath) {\n    if (!propertyPath) {\n      return false;\n    }\n    var properties = propertyPath.split('.');\n    for (var i = 0; i < properties.length; i++) {\n      var prop = properties[i];\n      if (!obj || !obj.hasOwnProperty(prop)) {\n        return false;\n      } else {\n        obj = obj[prop];\n      }\n    }\n    return true;\n  },\n\n  /**\n   * Creates deferred promise which can resolved/rejected outside the promise scope.\n   * @returns {DeferredPromise} - The promise with resolve and reject props.\n   */\n  defer: function defer() {\n    var res = void 0,\n        rej = void 0;\n    // $FlowFixMe\n    var promise = new Promise(function (resolve, reject) {\n      res = resolve;\n      rej = reject;\n    });\n    // $FlowFixMe\n    promise.resolve = res;\n    // $FlowFixMe\n    promise.reject = rej;\n    return promise;\n  },\n\n  /**\n   * Binds an handler to a desired context.\n   * @param {any} thisObj - The handler context.\n   * @param {Function} fn - The handler.\n   * @returns {Function} - The new bound function.\n   * @public\n   */\n  bind: function bind(thisObj, fn) {\n    return function () {\n      fn.apply(thisObj, arguments);\n    };\n  }\n};\n\nvar _Generator = {\n  /**\n   * Generates unique id.\n   * @param {number} length - The length of the id.\n   * @returns {string} - The generated id.\n   */\n  uniqueId: function uniqueId(length) {\n    var from = 2;\n    var to = from + (!length || length < 0 ? 0 : length - 2);\n    return '_' + Math.random().toString(36).substr(from, to);\n  },\n\n  /**\n   * Generates GUID.\n   * @return {string} - GUID\n   * @private\n   */\n  guid: function guid() {\n    var S4 = function S4() {\n      return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n    };\n    return S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4();\n  }\n};\n\nvar _Dom = {\n  /**\n   * Adds class name to an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  addClassName: function addClassName(element, className) {\n    if (element.classList) {\n      element.classList.add(className);\n    } else {\n      if (!_Dom.hasClassName(element, className)) {\n        element.className += className;\n      }\n    }\n  },\n\n\n  /**\n   * Removes class name from an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  removeClassName: function removeClassName(element, className) {\n    if (element.classList) {\n      element.classList.remove(className);\n    } else {\n      if (_Dom.hasClassName(element, className)) {\n        element.className = element.className.replace(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'), ' ').replace(/^\\s+|\\s+$/g, '');\n      }\n    }\n  },\n\n  /**\n   * Checks if an element has a class name\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {boolean} - weather an element contains a class name\n   */\n  hasClassName: function hasClassName(element, className) {\n    return element.className && new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(element.className);\n  },\n\n  /**\n   * Add element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @param {string} value - attribute value\n   * @returns {void}\n   */\n  setAttribute: function setAttribute(element, name, value) {\n    element.setAttribute(name, value);\n  },\n\n  /**\n   * Remove element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @returns {void}\n   */\n  removeAttribute: function removeAttribute(element, name) {\n    element.removeAttribute(name);\n  },\n\n  /**\n   * Set element style\n   * @param {Element} element - an HTML element\n   * @param {string} name - style name\n   * @param {string} value - style value\n   * @returns {void}\n   */\n  setStyle: function setStyle(element, name, value) {\n    if (element.style.getPropertyValue(name) !== undefined) {\n      element.style.setProperty(name, value);\n    }\n  },\n\n  /**\n   * Adds a node to the end of the list of children of a specified parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  appendChild: function appendChild(parent, child) {\n    if (parent && child && parent.appendChild) {\n      parent.appendChild(child);\n    }\n  },\n\n  /**\n   * Removes an element from his parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  removeChild: function removeChild(parent, child) {\n    if (parent && child && parent.removeChild) {\n      parent.removeChild(child);\n    }\n  },\n\n  /**\n   * Prepend HTML element\n   * @param {HTMLElement} child - the child to prepend\n   * @param {HTMLElement} parent - the parent to preprend to\n   * @returns {void}\n   */\n  prependTo: function prependTo(child, parent) {\n    if (parent.firstChild) {\n      parent.insertBefore(child, parent.firstChild);\n    } else {\n      parent.appendChild(child);\n    }\n  },\n\n  /**\n   * Returns a reference to the element by its ID.\n   * @param {string} id - The desired id.\n   * @returns {Element} - The element with the desired id.\n   */\n  getElementById: function getElementById(id) {\n    return document.getElementById(id);\n  },\n\n  /**\n   * Creates the HTML element specified by tagName.\n   * @param {string} tagName - The tag name.\n   * @returns {Element} - The element just created.\n   */\n  createElement: function createElement(tagName) {\n    return document.createElement(tagName);\n  },\n\n  /**\n   * Loads script asynchronously.\n   * @param {string} url - The url to load.\n   * @return {Promise} - The loading promise.\n   * @public\n   */\n  loadScriptAsync: function loadScriptAsync(url) {\n    var _this2 = this;\n\n    return new Promise(function (resolve, reject) {\n      var r = false,\n          t = document.getElementsByTagName(\"script\")[0],\n          s = _this2.createElement(\"script\");\n      s.type = \"text/javascript\";\n      s.src = url;\n      s.async = true;\n      s.onload = s.onreadystatechange = function () {\n        if (!r && (!this.readyState || this.readyState === \"complete\")) {\n          r = true;\n          resolve(this);\n        }\n      };\n      s.onerror = s.onabort = reject;\n      if (t && t.parentNode) {\n        t.parentNode.insertBefore(s, t);\n      }\n    });\n  }\n};\n\nvar _Http = {\n  execute: function execute(url, params) {\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"POST\";\n    var headers = arguments[3];\n\n    var request = new XMLHttpRequest();\n    return new Promise(function (resolve, reject) {\n      request.onreadystatechange = function () {\n        if (request.readyState === 4) {\n          if (request.status === 200) {\n            var jsonResponse = JSON.parse(request.responseText);\n            resolve(jsonResponse);\n          } else {\n            reject(request.responseText);\n          }\n        }\n      };\n      request.open(method, url);\n      if (headers) {\n        headers.forEach(function (value, key) {\n          request.setRequestHeader(key, value);\n        });\n      }\n      request.send(params);\n    });\n  }\n};\n\nexports.Number = _Number;\nexports.String = _String;\nexports.Object = _Object;\nexports.Generator = _Generator;\nexports.Dom = _Dom;\nexports.Http = _Http;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Create an Event work-alike object based on the dictionary.\n * The event should contain all of the same properties from the dict.\n * @param {string} type -\n * @param {Object=} opt_dict -\n * @constructor\n * @extends {Event}\n */\nvar FakeEvent = function () {\n\n  /**\n   * Non-standard property read by FakeEventTarget to stop processing listeners.\n   * @type {boolean}\n   */\n\n\n  /** @type {EventTarget} */\n\n\n  /** @const {string} */\n\n\n  /** @const {boolean} */\n\n  /** @const {boolean} */\n  function FakeEvent(type, payload) {\n    _classCallCheck(this, FakeEvent);\n\n    // These Properties below cannot be set by dict.  They are all provided for\n    // compatibility with native events.\n\n    /** @const {boolean} */\n    this.bubbles = false;\n\n    /** @const {boolean} */\n    this.cancelable = false;\n\n    /** @const {boolean} */\n    this.defaultPrevented = false;\n\n    /**\n     * According to MDN, Chrome uses high-res timers instead of epoch time.\n     * Follow suit so that timeStamps on FakeEvents use the same base as\n     * on native Events.\n     * @const {number}\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n     */\n    this.timeStamp = window.performance ? window.performance.now() : Date.now();\n\n    /** @const {string} */\n    this.type = type;\n\n    /** @const {boolean} */\n    this.isTrusted = false;\n\n    /** @type {EventTarget} */\n    this.currentTarget = null;\n\n    /** @type {EventTarget} */\n    this.target = null;\n\n    /**\n     * Non-standard property read by FakeEventTarget to stop processing listeners.\n     * @type {boolean}\n     */\n    this.stopped = false;\n\n    this.payload = payload;\n  }\n\n  /**\n   * Does nothing, since FakeEvents have no default.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n\n\n  /** @type {EventTarget} */\n\n\n  /** @const {boolean} */\n\n\n  /**\n   * According to MDN, Chrome uses high-res timers instead of epoch time.\n   * Follow suit so that timeStamps on FakeEvents use the same base as\n   * on native Events.\n   * @const {number}\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n   */\n\n\n  /** @const {boolean} */\n\n\n  _createClass(FakeEvent, [{\n    key: \"preventDefault\",\n    value: function preventDefault() {}\n\n    /**\n     * Stops processing event listeners for this event.  Provided for compatibility\n     * with native Events.\n     * @override\n     */\n\n  }, {\n    key: \"stopImmediatePropagation\",\n    value: function stopImmediatePropagation() {\n      this.stopped = true;\n    }\n\n    /**\n     * Does nothing, since FakeEvents do not bubble.  Provided for compatibility\n     * with native Events.\n     * @override\n     */\n\n  }, {\n    key: \"stopPropagation\",\n    value: function stopPropagation() {}\n  }]);\n\n  return FakeEvent;\n}();\n\nexports.default = FakeEvent;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * General track representation of the player.\n * @classdesc\n */\nvar Track = function () {\n  _createClass(Track, [{\n    key: \"id\",\n\n\n    /**\n     * Getter for the track id.\n     * @public\n     * @returns {?string} - The track id.\n     */\n    get: function get() {\n      return this._id;\n    }\n\n    /**\n     * Getter for the active mode of the track.\n     * @public\n     * @returns {boolean} - The active mode of the track.\n     */\n\n  }, {\n    key: \"active\",\n    get: function get() {\n      return this._active;\n    }\n\n    /**\n     * Setter for the active mode of the track.\n     * @public\n     * @param {boolean} value - Whether the track is active or not.\n     */\n    ,\n    set: function set(value) {\n      this._active = value;\n    }\n\n    /**\n     * Getter for the label of the track.\n     * @public\n     * @returns {string} - The label of the track.\n     */\n\n  }, {\n    key: \"label\",\n    get: function get() {\n      return this._label;\n    }\n\n    /**\n     * Getter for the language of the track.\n     * @public\n     * @returns {string} - The language of the track.\n     */\n\n  }, {\n    key: \"language\",\n    get: function get() {\n      return this._language;\n    }\n\n    /**\n     * Getter for the index of the track.\n     * @public\n     * @returns {number} - The index of the track.\n     */\n\n  }, {\n    key: \"index\",\n    get: function get() {\n      return this._index;\n    }\n\n    /**\n     * @constructor\n     * @param {Object} settings - The track settings object.\n     */\n\n  }], [{\n    key: \"langComparer\",\n\n    /**\n     * Comparing language strings.\n     * @param {string} inputLang - The configured language.\n     * @param {string} trackLang - The default track language.\n     * @returns {boolean} - Whether the strings are equal or starts with the same substring.\n     */\n    value: function langComparer(inputLang, trackLang) {\n      try {\n        inputLang = inputLang.toLowerCase();\n        trackLang = trackLang.toLowerCase();\n        return inputLang.startsWith(trackLang) || trackLang.startsWith(inputLang);\n      } catch (e) {\n        return false;\n      }\n    }\n\n    /**\n     * The id of the track.\n     * @member\n     * @type {string}\n     * @private\n     */\n\n    /**\n     * The active mode of the track.\n     * @member\n     * @type {boolean}\n     * @private\n     */\n\n    /**\n     * The label of the track.\n     * @member\n     * @type {string}\n     * @private\n     */\n\n    /**\n     * The language of the track.\n     * @member\n     * @type {string}\n     * @private\n     */\n\n    /**\n     * The index of the track.\n     * @member\n     * @type {number}\n     * @private\n     */\n\n  }]);\n\n  function Track() {\n    var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Track);\n\n    this._id = settings.id;\n    this._active = settings.active;\n    this._label = settings.label;\n    this._language = settings.language;\n    this._index = settings.index;\n  }\n\n  return Track;\n}();\n\nexports.default = Track;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _multiMap = __webpack_require__(12);\n\nvar _multiMap2 = _interopRequireDefault(_multiMap);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Creates a new EventManager. An EventManager maintains a collection of \"event\n * bindings\" between event targets and event listeners.\n *\n * @struct\n * @constructor\n * @implements {IDestroyable}\n */\nvar EventManager = function () {\n  function EventManager() {\n    _classCallCheck(this, EventManager);\n\n    /**\n     * Maps an event type to an array of event bindings.\n     * @private {MultiMap.<!EventManager.Binding_>}\n     */\n    this._bindingMap = new _multiMap2.default();\n  }\n\n  /**\n   * Detaches all event listeners.\n   * @override\n   */\n\n\n  _createClass(EventManager, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.removeAll();\n      this._bindingMap = null;\n      return Promise.resolve();\n    }\n\n    /**\n     * Attaches an event listener to an event target for only one time.\n     * @param {EventTarget} target - The event target.\n     * @param {string} type - The event type.\n     * @param {EventManager.ListenerType} listener - The event listener.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'listenOnce',\n    value: function listenOnce(target, type, listener) {\n      var _this = this;\n\n      var oneListener = function oneListener(event) {\n        _this.unlisten(target, type, oneListener);\n        listener.call(_this, event);\n      };\n      this.listen(target, type, oneListener);\n    }\n\n    /**\n     * Attaches an event listener to an event target.\n     * @param {EventTarget} target The event target.\n     * @param {string} type The event type.\n     * @param {EventManager.ListenerType} listener The event listener.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'listen',\n    value: function listen(target, type, listener) {\n      var binding = new Binding_(target, type, listener);\n      if (this._bindingMap) {\n        this._bindingMap.push(type, binding);\n      }\n    }\n\n    /**\n     * Detaches an event listener from an event target.\n     * @param {EventTarget} target The event target.\n     * @param {string} type The event type.\n     * @param {EventManager.ListenerType} [listener] The event listener to detach. If no given, detaches all event listeners of the target and type.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'unlisten',\n    value: function unlisten(target, type, listener) {\n      if (this._bindingMap) {\n        var list = this._bindingMap.get(type);\n\n        for (var i = 0; i < list.length; ++i) {\n          var binding = list[i];\n\n          if (binding.target === target && (binding.listener === listener || !listener)) {\n            binding.unlisten();\n            if (this._bindingMap) {\n              this._bindingMap.remove(type, binding);\n            }\n          }\n        }\n      }\n    }\n\n    /**\n     * Detaches all event listeners from all targets.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'removeAll',\n    value: function removeAll() {\n      if (this._bindingMap) {\n        var listeners = this._bindingMap.getAll();\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = listeners[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var listener = _step.value;\n\n            listener.unlisten();\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        if (this._bindingMap) {\n          this._bindingMap.clear();\n        }\n      }\n    }\n  }]);\n\n  return EventManager;\n}();\n\n/**\n * @typedef {function(!Event)}\n */\n\n\n/**\n * Creates a new Binding_ and attaches the event listener to the event target.\n * @param {EventTarget} target The event target.\n * @param {string} type The event type.\n * @param {EventManager.ListenerType} listener The event listener.\n * @constructor\n * @private\n */\nvar Binding_ = function () {\n  function Binding_(target, type, listener) {\n    _classCallCheck(this, Binding_);\n\n    /** @type {EventTarget} */\n    this.target = target;\n\n    /** @type {string} */\n    this.type = type;\n\n    /** @type {?EventManager.ListenerType} */\n    this.listener = listener;\n\n    this.target.addEventListener(type, listener, false);\n  }\n\n  /**\n   * Detaches the event listener from the event target. This does nothing if the\n   * event listener is already detached.\n   * @returns {void}\n   */\n\n\n  _createClass(Binding_, [{\n    key: 'unlisten',\n    value: function unlisten() {\n      if (!this.target) return;\n\n      this.target.removeEventListener(this.type, this.listener, false);\n\n      this.target = null;\n      this.listener = null;\n    }\n  }]);\n\n  return Binding_;\n}();\n\nexports.default = EventManager;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CUSTOM_EVENTS = exports.HTML5_EVENTS = exports.PLAYER_EVENTS = undefined;\n\nvar _util = __webpack_require__(1);\n\nvar Utils = _interopRequireWildcard(_util);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar HTML5_EVENTS = {\n  /**\n   * Fires when the loading of an audio/video is aborted\n   */\n  ABORT: 'abort',\n  /**\n   * Fires when the browser can start playing the audio/video\n   */\n  CAN_PLAY: 'canplay',\n  /**\n   * Fires when the browser can play through the audio/video without stopping for buffering\n   */\n  CAN_PLAY_THROUGH: 'canplaythrough',\n  /**\n   * Fires when the duration of the audio/video is changed\n   */\n  DURATION_CHANGE: 'durationchange',\n  /**\n   * Fires when the current playlist is empty\n   */\n  EMPTIED: 'emptied',\n  /**\n   * Fires when the current playlist is ended\n   */\n  ENDED: 'ended',\n  /**\n   * Fires when an error occurred during the loading of an audio/video\n   */\n  ERROR: 'error',\n  /**\n   * Fires when the browser has loaded the current frame of the audio/video\n   */\n  LOADED_DATA: 'loadeddata',\n  /**\n   * Fires when the browser has loaded meta data for the audio/video\n   */\n  LOADED_METADATA: 'loadedmetadata',\n  /**\n   * Fires when the browser starts looking for the audio/video\n   */\n  LOAD_START: 'loadstart',\n  /**\n   * Fires when the audio/video has been paused\n   */\n  PAUSE: 'pause',\n  /**\n   * Fires when the audio/video has been started or is no longer paused\n   */\n  PLAY: 'play',\n  /**\n   * Fires when the audio/video is playing after having been paused or stopped for buffering\n   */\n  PLAYING: 'playing',\n  /**\n   * Fires when the browser is downloading the audio/video\n   */\n  PROGRESS: 'progress',\n  /**\n   * Fires when the playing speed of the audio/video is changed\n   */\n  RATE_CHANGE: 'ratechange',\n  /**\n   * Fires when the user is finished moving/skipping to a new position in the audio/video\n   */\n  SEEKED: 'seeked',\n  /**\n   * Fires when the user starts moving/skipping to a new position in the audio/video\n   */\n  SEEKING: 'seeking',\n  /**\n   * Fires when the browser is trying to get media data, but data is not available\n   */\n  STALLED: 'stalled',\n  /**\n   * Fires when the browser is intentionally not getting media data\n   */\n  SUSPEND: 'suspend',\n  /**\n   * Fires when the current playback position has changed\n   */\n  TIME_UPDATE: 'timeupdate',\n  /**\n   * Fires when the volume has been changed\n   */\n  VOLUME_CHANGE: 'volumechange',\n  /**\n   * Fires when the video stops because it needs to buffer the next frame\n   */\n  WAITING: 'waiting'\n};\n\n\nvar CUSTOM_EVENTS = {\n  /**\n   * Fires when browser fails to autoplay with sound\n   */\n  AUTOPLAY_FAILED: 'autoplayfailed',\n  /**\n   * Fires when browser fails to autoplay with sound but start muted autoplay instead\n   */\n  FALLBACK_TO_MUTED_AUTOPLAY: 'fallbacktomutedautoplay',\n  /**\n   * Fires when change source flow started\n   */\n  CHANGE_SOURCE_STARTED: 'changesourcestarted',\n  /**\n   * Fires when change source flow ended\n   */\n  CHANGE_SOURCE_ENDED: 'changesourceended',\n  /**\n   * Fires when the volume has been muted/unmute\n   */\n  MUTE_CHANGE: 'mutechange',\n  /**\n   * Fires when the active video track has been changed\n   */\n  VIDEO_TRACK_CHANGED: 'videotrackchanged',\n  /**\n   * Fires when the active audio track has been changed\n   */\n  AUDIO_TRACK_CHANGED: 'audiotrackchanged',\n  /**\n   * Fires when the active text track has been changed\n   */\n  TEXT_TRACK_CHANGED: 'texttrackchanged',\n  /**\n   * Fires when the active text track cue has changed\n   */\n  TEXT_CUE_CHANGED: 'textcuechanged',\n  /**\n   * Fires when the player tracks have been changed\n   */\n  TRACKS_CHANGED: 'trackschanged',\n  /**\n   * Fires when the abr mode change from 'auto' to 'manual' or vice versa\n   */\n  ABR_MODE_CHANGED: 'abrmodechanged',\n  /**\n   * Fires when the player state has been changed\n   */\n  PLAYER_STATE_CHANGED: 'playerstatechanged',\n  /**\n   * Fires on the first play\n   */\n  FIRST_PLAY: 'firstplay',\n  /**\n   * Fires when the player has selected the source to play\n   */\n  SOURCE_SELECTED: 'sourceselected',\n  /**\n   * Fires when the text track style has changed\n   */\n  TEXT_STYLE_CHANGED: 'textstylechanged',\n  /**\n   * Fired when ad data is available.\n   */\n  AD_LOADED: 'adloaded',\n  /**\n   * Fired when the ad starts playing.\n   */\n  AD_STARTED: 'adstarted',\n  /**\n   * Fired when the ad is resumed.\n   */\n  AD_RESUMED: 'adresumed',\n  /**\n   * Fired when the ad is paused.\n   */\n  AD_PAUSED: 'adpaused',\n  /**\n   * Fired when the ad is clicked.\n   */\n  AD_CLICKED: 'adclicked',\n  /**\n   * Fired when the ad is skipped by the user.\n   */\n  AD_SKIPPED: 'adskipped',\n  /**\n   * Fired when the ad completes playing.\n   */\n  AD_COMPLETED: 'adcompleted',\n  /**\n   * Fired when an error occurred while the ad was loading or playing.\n   */\n  AD_ERROR: 'aderror',\n  /**\n   * Fired when the ads manager is done playing all the ads.\n   */\n  ALL_ADS_COMPLETED: 'alladscompleted',\n  /**\n   * Fired when content should be paused. This usually happens right before an ad is about to cover the content.\n   */\n  AD_BREAK_START: 'adbreakstart',\n  /**\n   * Fired when content should be resumed. This usually happens when an ad finishes or collapses.\n   */\n  AD_BREAK_END: 'adbreakend',\n  /**\n   * Fired when the ad playhead crosses first quartile.\n   */\n  AD_FIRST_QUARTILE: 'adfirstquartile',\n  /**\n   * Fired when the ad playhead crosses midpoint.\n   */\n  AD_MIDPOINT: 'admidpoint',\n  /**\n   * Fired when the ad playhead crosses third quartile.\n   */\n  AD_THIRD_QUARTILE: 'adthirdquartile',\n  /**\n   * Fired when the ad is closed by the user.\n   */\n  USER_CLOSED_AD: 'userclosedad',\n  /**\n   * Fired when the ad volume has changed.\n   */\n  AD_VOLUME_CHANGED: 'advolumechanged',\n  /**\n   * Fired when the ad volume has been muted.\n   */\n  AD_MUTED: 'admuted',\n  /**\n   * Fired on ad time progress.\n   */\n  AD_PROGRESS: 'adprogress'\n};\n\nvar PLAYER_EVENTS = Utils.Object.merge([HTML5_EVENTS, CUSTOM_EVENTS]);\n\nexports.PLAYER_EVENTS = PLAYER_EVENTS;\nexports.HTML5_EVENTS = HTML5_EVENTS;\nexports.CUSTOM_EVENTS = CUSTOM_EVENTS;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _track = __webpack_require__(3);\n\nvar _track2 = _interopRequireDefault(_track);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Video track representation of the player.\n * @classdesc\n */\nvar VideoTrack = function (_Track) {\n  _inherits(VideoTrack, _Track);\n\n  _createClass(VideoTrack, [{\n    key: 'bandwidth',\n\n\n    /**\n     * @public\n     * @returns {number} - The bandwidth of the video track\n     */\n\n\n    /**\n     * @member {number} _width - The width of the video track\n     * @type {number}\n     * @private\n     */\n    get: function get() {\n      return this._bandwidth;\n    }\n\n    /**\n     * @public\n     * @returns {number} - The width of the video track\n     */\n\n\n    /**\n     * @member {number} _height - The height of the video track\n     * @type {number}\n     * @private\n     */\n\n    /**\n     * @member {number} _bandwidth - The bandwidth of the video track\n     * @type {number}\n     * @private\n     */\n\n  }, {\n    key: 'width',\n    get: function get() {\n      return this._width;\n    }\n\n    /**\n     * @public\n     * @returns {number} - The height of the video track\n     */\n\n  }, {\n    key: 'height',\n    get: function get() {\n      return this._height;\n    }\n\n    /**\n     * @constructor\n     * @param {Object} settings - The track settings object\n     */\n\n  }]);\n\n  function VideoTrack() {\n    var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, VideoTrack);\n\n    var _this = _possibleConstructorReturn(this, (VideoTrack.__proto__ || Object.getPrototypeOf(VideoTrack)).call(this, settings));\n\n    _this._bandwidth = settings.bandwidth;\n    _this._width = settings.width;\n    _this._height = settings.height;\n    return _this;\n  }\n\n  return VideoTrack;\n}(_track2.default);\n\nexports.default = VideoTrack;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _track = __webpack_require__(3);\n\nvar _track2 = _interopRequireDefault(_track);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Audio track representation of the player.\n * @classdesc\n */\nvar AudioTrack = function (_Track) {\n  _inherits(AudioTrack, _Track);\n\n  function AudioTrack() {\n    _classCallCheck(this, AudioTrack);\n\n    return _possibleConstructorReturn(this, (AudioTrack.__proto__ || Object.getPrototypeOf(AudioTrack)).apply(this, arguments));\n  }\n\n  return AudioTrack;\n}(_track2.default);\n\nexports.default = AudioTrack;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TextTrack = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _track = __webpack_require__(3);\n\nvar _track2 = _interopRequireDefault(_track);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Text track representation of the player.\n * @classdesc\n */\nvar TextTrack = function (_Track) {\n  _inherits(TextTrack, _Track);\n\n  _createClass(TextTrack, [{\n    key: 'kind',\n\n\n    /**\n     * Getter for the kind of the text track.\n     * @public\n     * @returns {string} - The kind of the text track.\n     */\n    get: function get() {\n      return this._kind;\n    }\n\n    /**\n     * @constructor\n     * @param {Object} settings - The track settings object.\n     */\n\n    /**\n     * The kind of the text track:\n     * subtitles/captions/metadata.\n     * @member\n     * @type {string}\n     * @private\n     */\n\n  }]);\n\n  function TextTrack() {\n    var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, TextTrack);\n\n    var _this = _possibleConstructorReturn(this, (TextTrack.__proto__ || Object.getPrototypeOf(TextTrack)).call(this, settings));\n\n    _this._kind = settings.kind;\n    return _this;\n  }\n\n  return TextTrack;\n}(_track2.default);\n\nexports.default = TextTrack;\nexports.TextTrack = TextTrack;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _env = __webpack_require__(10);\n\nvar _env2 = _interopRequireDefault(_env);\n\nvar _eventManager = __webpack_require__(4);\n\nvar _eventManager2 = _interopRequireDefault(_eventManager);\n\nvar _posterManager = __webpack_require__(28);\n\nvar _posterManager2 = _interopRequireDefault(_posterManager);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _fakeEventTarget = __webpack_require__(13);\n\nvar _fakeEventTarget2 = _interopRequireDefault(_fakeEventTarget);\n\nvar _events = __webpack_require__(5);\n\nvar _stateTypes = __webpack_require__(16);\n\nvar _stateTypes2 = _interopRequireDefault(_stateTypes);\n\nvar _util = __webpack_require__(1);\n\nvar Utils = _interopRequireWildcard(_util);\n\nvar _locale = __webpack_require__(29);\n\nvar _locale2 = _interopRequireDefault(_locale);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _html = __webpack_require__(31);\n\nvar _html2 = _interopRequireDefault(_html);\n\nvar _pluginManager = __webpack_require__(23);\n\nvar _pluginManager2 = _interopRequireDefault(_pluginManager);\n\nvar _basePlugin = __webpack_require__(14);\n\nvar _basePlugin2 = _interopRequireDefault(_basePlugin);\n\nvar _stateManager = __webpack_require__(39);\n\nvar _stateManager2 = _interopRequireDefault(_stateManager);\n\nvar _trackTypes = __webpack_require__(41);\n\nvar _trackTypes2 = _interopRequireDefault(_trackTypes);\n\nvar _track = __webpack_require__(3);\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _videoTrack = __webpack_require__(6);\n\nvar _videoTrack2 = _interopRequireDefault(_videoTrack);\n\nvar _audioTrack = __webpack_require__(7);\n\nvar _audioTrack2 = _interopRequireDefault(_audioTrack);\n\nvar _textTrack = __webpack_require__(8);\n\nvar _textTrack2 = _interopRequireDefault(_textTrack);\n\nvar _textStyle = __webpack_require__(24);\n\nvar _textStyle2 = _interopRequireDefault(_textStyle);\n\nvar _vttCue = __webpack_require__(21);\n\nvar _textTrackDisplay = __webpack_require__(22);\n\nvar _playbackMiddleware = __webpack_require__(42);\n\nvar _playbackMiddleware2 = _interopRequireDefault(_playbackMiddleware);\n\nvar _playerConfig = __webpack_require__(44);\n\nvar _playerConfig2 = _interopRequireDefault(_playerConfig);\n\n__webpack_require__(45);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * The player container class name.\n * @type {string}\n * @const\n */\nvar CONTAINER_CLASS_NAME = 'playkit-container';\n\n/**\n /**\n * The player poster class name.\n * @type {string}\n * @const\n */\nvar POSTER_CLASS_NAME = 'playkit-poster';\n\n/**\n * The engine class name.\n * @type {string}\n * @const\n */\nvar ENGINE_CLASS_NAME = 'playkit-engine';\n\n/**\n * The text style id.\n * @type {string}\n * @const\n */\nvar SUBTITLES_STYLE_ID_NAME = 'playkit-subtitles-style';\n\n/**\n * The subtitles class name.\n * @type {string}\n * @const\n */\nvar SUBTITLES_CLASS_NAME = 'playkit-subtitles';\n\n/**\n * The live string.\n * @type {string}\n * @const\n */\nvar LIVE = 'Live';\n\n/**\n *  The auto string, for captions\n *  @type {string}\n *  @const\n */\nvar AUTO = 'auto';\n\n/**\n *  The off string, for captions\n *  @type {string}\n *  @const\n */\nvar OFF = 'off';\n\n/**\n *  The duration offset, for seeking to duration safety.\n *  @type {number}\n *  @const\n */\nvar DURATION_OFFSET = 0.1;\n\n/**\n * The HTML5 player class.\n * @classdesc\n */\n\nvar Player = function (_FakeEventTarget) {\n  _inherits(Player, _FakeEventTarget);\n\n  _createClass(Player, null, [{\n    key: 'runCapabilities',\n\n\n    /**\n     * Runs the engines capabilities tests.\n     * @returns {void}\n     * @public\n     * @static\n     */\n\n    /**\n     * The player capabilities result object.\n     * @type {Object}\n     * @private\n     * @static\n     */\n\n    /**\n     * The player class logger.\n     * @type {any}\n     * @static\n     * @private\n     */\n    value: function runCapabilities() {\n      Player._logger.debug(\"Running player capabilities\");\n      Player._engines.forEach(function (Engine) {\n        return Engine.runCapabilities();\n      });\n    }\n\n    /**\n     * Gets the engines capabilities.\n     * @param {?string} engineType - The engine type.\n     * @return {Promise<Object>} - The engines capabilities object.\n     * @public\n     * @static\n     */\n\n    /**\n     * The available engines of the player.\n     * @type {Array<typeof IEngine>}\n     * @private\n     * @static\n     */\n\n  }, {\n    key: 'getCapabilities',\n    value: function getCapabilities(engineType) {\n      Player._logger.debug(\"Get player capabilities\", engineType);\n      if (Player._playerCapabilities) {\n        return engineType ? Promise.resolve(Player._playerCapabilities[engineType]) : Promise.resolve(Player._playerCapabilities);\n      }\n      var promises = [];\n      Player._engines.forEach(function (Engine) {\n        return promises.push(Engine.getCapabilities());\n      });\n      return Promise.all(promises).then(function (arrayOfResults) {\n        Player._playerCapabilities = {};\n        arrayOfResults.forEach(function (res) {\n          return Object.assign(Player._playerCapabilities, res);\n        });\n        return engineType ? Promise.resolve(Player._playerCapabilities[engineType]) : Promise.resolve(Player._playerCapabilities);\n      });\n    }\n\n    /**\n     * The plugin manager of the player.\n     * @type {PluginManager}\n     * @private\n     */\n\n    /**\n     * The event manager of the player.\n     * @type {EventManager}\n     * @private\n     */\n\n    /**\n     * The poster manager of the player.\n     * @type {PosterManager}\n     * @private\n     */\n\n    /**\n     * The runtime configuration of the player.\n     * @type {Object}\n     * @private\n     */\n\n    /**\n     * The playback engine.\n     * @type {IEngine}\n     * @private\n     */\n\n    /**\n     * The state manager of the player.\n     * @type {StateManager}\n     * @private\n     */\n\n    /**\n     * The tracks of the player.\n     * @type {Array<Track>}\n     * @private\n     */\n\n    /**\n     * The player ready promise\n     * @type {Promise<*>}\n     * @private\n     */\n\n    /**\n     * Whether the play is the first or not\n     * @type {boolean}\n     * @private\n     */\n\n    /**\n     * The player DOM element container.\n     * @type {HTMLDivElement}\n     * @private\n     */\n\n    /**\n     * The player text DOM element container.\n     * @type {HTMLDivElement}\n     * @private\n     */\n\n    /**\n     * The player DOM id.\n     * @type {string}\n     * @private\n     */\n\n    /**\n     * The player last updated text cues list\n     * @type {Array<any>}\n     * @private\n     */\n\n    /**\n     * The player text disaply settings\n     * @type {Object}\n     * @private\n     */\n\n    /**\n     * The current playback attributes state\n     * @type {Object}\n     * @private\n     */\n\n    /**\n     * The player text style settings\n     * @type {TextStyle}\n     * @private\n     */\n\n    /**\n     * The playback middleware of the player.\n     * @type {PlaybackMiddleware}\n     * @private\n     */\n\n    /**\n     * The environment(os,device,browser) object of the player.\n     * @type {Object}\n     * @private\n     */\n\n    /**\n     * The currently selected engine type\n     * @type {string}\n     * @private\n     */\n\n    /**\n     * The currently selected stream type\n     * @type {string}\n     * @private\n     */\n\n    /**\n     * Flag to indicate whether is the first play in the current session.\n     * @type {boolean}\n     * @private\n     */\n\n  }]);\n\n  /**\n   * @param {Object} config - The configuration for the player instance.\n   * @constructor\n   */\n  function Player() {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Player);\n\n    var _this = _possibleConstructorReturn(this, (Player.__proto__ || Object.getPrototypeOf(Player)).call(this));\n\n    _this._activeTextCues = [];\n    _this._textDisplaySettings = {};\n    _this._playbackAttributesState = {\n      muted: undefined,\n      volume: undefined,\n      rate: undefined,\n      audioLanguage: \"\",\n      textLanguage: \"\"\n    };\n\n    _this._env = _env2.default;\n    _this._tracks = [];\n    _this._firstPlay = true;\n    _this._firstPlayInCurrentSession = true;\n    _this._config = Player._defaultConfig;\n    _this._eventManager = new _eventManager2.default();\n    _this._posterManager = new _posterManager2.default();\n    _this._stateManager = new _stateManager2.default(_this);\n    _this._pluginManager = new _pluginManager2.default();\n    _this._playbackMiddleware = new _playbackMiddleware2.default();\n    _this._textStyle = new _textStyle2.default();\n    _this._createReadyPromise();\n    _this._createPlayerContainer();\n    _this._appendPosterEl();\n    _this.configure(config);\n    return _this;\n  }\n\n  // <editor-fold desc=\"Public API\">\n\n  // <editor-fold desc=\"Playback API\">\n\n  /**\n   * Configures the player according to a given configuration.\n   * @param {Object} config - The configuration for the player instance.\n   * @returns {void}\n   */\n\n\n  _createClass(Player, [{\n    key: 'configure',\n    value: function configure(config) {\n      Utils.Object.mergeDeep(this._config, config);\n      this._configureOrLoadPlugins(config.plugins);\n      if (!Utils.Object.isEmptyObject(config.sources)) {\n        var receivedSourcesWhenHasEngine = !!this._engine;\n        if (receivedSourcesWhenHasEngine) {\n          this._reset();\n          Player._logger.debug('Change source started');\n          this.dispatchEvent(new _fakeEvent2.default(_events.CUSTOM_EVENTS.CHANGE_SOURCE_STARTED));\n        }\n        if (this._selectEngineByPriority()) {\n          this._appendEngineEl();\n          this._posterManager.setSrc(this._config.metadata.poster);\n          this._posterManager.show();\n          this._attachMedia();\n          this._handlePlaybackOptions();\n          this._handleAutoPlay();\n          if (receivedSourcesWhenHasEngine) {\n            Player._logger.debug('Change source ended');\n            this.dispatchEvent(new _fakeEvent2.default(_events.CUSTOM_EVENTS.CHANGE_SOURCE_ENDED));\n          }\n        }\n      }\n    }\n\n    /**\n     * The player readiness\n     * @public\n     * @returns {Promise<*>} - The ready promise\n     */\n\n  }, {\n    key: 'ready',\n    value: function ready() {\n      return this._readyPromise ? this._readyPromise : Promise.resolve();\n    }\n\n    /**\n     * Load media\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'load',\n    value: function load() {\n      var _this2 = this;\n\n      if (this._engine) {\n        var startTime = this._config.playback.startTime;\n        this._engine.load(startTime).then(function (data) {\n          _this2._tracks = data.tracks;\n          _this2._addTextTrackOffOption();\n          _this2._setDefaultTracks();\n          _this2.dispatchEvent(new _fakeEvent2.default(_events.CUSTOM_EVENTS.TRACKS_CHANGED, { tracks: _this2._tracks }));\n        }).catch(function (error) {\n          _this2.dispatchEvent(new _fakeEvent2.default(_events.HTML5_EVENTS.ERROR, error));\n        });\n      }\n    }\n\n    /**\n     * Start/resume playback.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'play',\n    value: function play() {\n      if (this._engine) {\n        this._playbackMiddleware.play(this._play.bind(this));\n      }\n    }\n\n    /**\n     * Pause playback.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'pause',\n    value: function pause() {\n      if (this._engine) {\n        this._playbackMiddleware.pause(this._pause.bind(this));\n      }\n    }\n\n    /**\n     * Gets the view of the player (i.e the dom container object).\n     * @return {HTMLElement} - The dom container.\n     * @public\n     */\n\n  }, {\n    key: 'getView',\n    value: function getView() {\n      return this._el;\n    }\n\n    /**\n     * @returns {HTMLVideoElement} - The video element.\n     * @public\n     */\n\n  }, {\n    key: 'getVideoElement',\n    value: function getVideoElement() {\n      if (this._engine) {\n        return this._engine.getVideoElement();\n      }\n    }\n\n    /**\n     * Destroys the player.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      if (this._engine) {\n        this._engine.destroy();\n      }\n      this._posterManager.destroy();\n      this._eventManager.destroy();\n      this._pluginManager.destroy();\n      this._stateManager.destroy();\n      this._activeTextCues = [];\n      this._textDisplaySettings = {};\n      this._config = {};\n      this._tracks = [];\n      this._engineType = '';\n      this._streamType = '';\n      this._readyPromise = null;\n      this._firstPlay = true;\n      this._playbackAttributesState = {};\n      if (this._el) {\n        Utils.Dom.removeChild(this._el.parentNode, this._el);\n      }\n    }\n  }, {\n    key: 'buffered',\n    value: function buffered() {}\n\n    /**\n     * Set the current time in seconds.\n     * @param {Number} to - The number to set in seconds.\n     * @public\n     */\n\n  }, {\n    key: 'isLive',\n\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Live API\">\n\n    /**\n     * Checking if the current playback is live.\n     * @function isLive\n     * @returns {boolean} - Whether playback is live.\n     * @public\n     */\n    value: function isLive() {\n      return !!(this._config.type === LIVE || this._engine && this._engine.isLive());\n    }\n\n    /**\n     * Checking if the current live playback has DVR window.\n     * @function isDvr\n     * @returns {boolean} - Whether live playback has DVR window.\n     * @public\n     */\n\n  }, {\n    key: 'isDvr',\n    value: function isDvr() {\n      return this.isLive() && this._config.dvr;\n    }\n\n    /**\n     * Seeking to live edge.\n     * @function seekToLiveEdge\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'seekToLiveEdge',\n    value: function seekToLiveEdge() {\n      if (this._engine && this.isLive()) {\n        this._engine.seekToLiveEdge();\n      }\n    }\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Tracks API\">\n\n    /**\n     * Returns the tracks according to the filter. if no filter given returns the all tracks.\n     * @function getTracks\n     * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n     * @returns {Array<Track>} - The parsed tracks.\n     * @public\n     */\n\n  }, {\n    key: 'getTracks',\n    value: function getTracks(type) {\n      return this._getTracksByType(type);\n    }\n\n    /**\n     * Get an object includes the active video/audio/text tracks\n     * @return {{video: VideoTrack, audio: AudioTrack, text: TextTrack}} - The active tracks object\n     */\n\n  }, {\n    key: 'getActiveTracks',\n    value: function getActiveTracks() {\n      return {\n        video: this._getTracksByType(_trackTypes2.default.VIDEO).find(function (track) {\n          return track.active;\n        }),\n        audio: this._getTracksByType(_trackTypes2.default.AUDIO).find(function (track) {\n          return track.active;\n        }),\n        text: this._getTracksByType(_trackTypes2.default.TEXT).find(function (track) {\n          return track.active;\n        })\n      };\n    }\n\n    /**\n     * Select a track\n     * @function selectTrack\n     * @param {?Track} track - the track to select\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'selectTrack',\n    value: function selectTrack(track) {\n      if (this._engine) {\n        if (track instanceof _videoTrack2.default) {\n          this._engine.selectVideoTrack(track);\n        } else if (track instanceof _audioTrack2.default) {\n          this._engine.selectAudioTrack(track);\n        } else if (track instanceof _textTrack2.default) {\n          if (track.language === OFF) {\n            this.hideTextTrack();\n            this._playbackAttributesState.textLanguage = OFF;\n          } else {\n            this._engine.selectTextTrack(track);\n          }\n        }\n      }\n    }\n\n    /**\n     * Hide the text track\n     * @function hideTextTrack\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'hideTextTrack',\n    value: function hideTextTrack() {\n      if (this._engine) {\n        this._engine.hideTextTrack();\n        this._updateTextDisplay([]);\n        var textTracks = this._getTracksByType(_trackTypes2.default.TEXT);\n        textTracks.map(function (track) {\n          return track.active = false;\n        });\n        var textTrack = textTracks.find(function (track) {\n          return track.language === OFF;\n        });\n        if (textTrack) {\n          textTrack.active = true;\n          this.dispatchEvent(new _fakeEvent2.default(_events.CUSTOM_EVENTS.TEXT_TRACK_CHANGED, { selectedTextTrack: textTrack }));\n        }\n      }\n    }\n\n    /**\n     * Enables adaptive bitrate switching.\n     * @function enableAdaptiveBitrate\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'enableAdaptiveBitrate',\n    value: function enableAdaptiveBitrate() {\n      if (this._engine) {\n        this._engine.enableAdaptiveBitrate();\n      }\n    }\n\n    /**\n     * Checking if adaptive bitrate switching is enabled.\n     * @function isAdaptiveBitrateEnabled\n     * @returns {boolean} - Whether adaptive bitrate is enabled.\n     * @public\n     */\n\n  }, {\n    key: 'isAdaptiveBitrateEnabled',\n    value: function isAdaptiveBitrateEnabled() {\n      if (this._engine) {\n        return this._engine.isAdaptiveBitrateEnabled();\n      }\n      return false;\n    }\n\n    /**\n     * update the text display settings\n     * @param {Object} settings - text cue display settings\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'setTextDisplaySettings',\n    value: function setTextDisplaySettings(settings) {\n      this._textDisplaySettings = settings;\n      this._updateCueDisplaySettings();\n      for (var i = 0; i < this._activeTextCues.length; i++) {\n        this._activeTextCues[i].hasBeenReset = true;\n      }\n      this._updateTextDisplay(this._activeTextCues);\n    }\n\n    /**\n     * Sets style attributes for text tracks.\n     * @param {TextStyle} style - text styling settings\n     * @returns {void}\n     */\n\n  }, {\n    key: 'skipAd',\n\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Ads API\">\n\n    /**\n     * Skip on an ad.\n     * @public\n     * @returns {void}\n     */\n    value: function skipAd() {\n      var adsPlugin = this._pluginManager.get('ima');\n      if (adsPlugin && typeof adsPlugin.skipAd === 'function') {\n        adsPlugin.skipAd();\n      }\n    }\n\n    /**\n     * Start to play ad on demand.\n     * @param {string} adTagUrl - The ad tag url to play.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'playAdNow',\n    value: function playAdNow(adTagUrl) {\n      var adsPlugin = this._pluginManager.get('ima');\n      if (adsPlugin && typeof adsPlugin.playAdNow === 'function') {\n        adsPlugin.playAdNow(adTagUrl);\n      }\n    }\n\n    // </editor-fold>\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Private Methods\">\n\n    // <editor-fold desc=\"Playback\">\n\n    /**\n     * Creates the player container.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_createPlayerContainer',\n    value: function _createPlayerContainer() {\n      var el = this._el = Utils.Dom.createElement(\"div\");\n      Utils.Dom.addClassName(el, CONTAINER_CLASS_NAME);\n      this._playerId = Utils.Generator.uniqueId(5);\n      Utils.Dom.setAttribute(el, \"id\", this._playerId);\n      Utils.Dom.setAttribute(el, \"tabindex\", '-1');\n    }\n\n    /**\n     * Appends the poster element to the player's div container.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_appendPosterEl',\n    value: function _appendPosterEl() {\n      if (this._el) {\n        var el = this._posterManager.getElement();\n        Utils.Dom.addClassName(el, POSTER_CLASS_NAME);\n        Utils.Dom.appendChild(this._el, el);\n      }\n    }\n\n    /**\n     * Appends the engine's video element to the player's div container.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_appendEngineEl',\n    value: function _appendEngineEl() {\n      if (this._el && this._engine) {\n        var engineEl = this._engine.getVideoElement();\n        var classname = '' + ENGINE_CLASS_NAME;\n        Utils.Dom.addClassName(engineEl, classname);\n        var classnameWithId = ENGINE_CLASS_NAME + '-' + this._engine.id;\n        Utils.Dom.addClassName(engineEl, classnameWithId);\n        Utils.Dom.prependTo(engineEl, this._el);\n      }\n    }\n\n    /**\n     * Configures or load the plugins defined in the configuration.\n     * @param {Object} plugins - The new received plugins configuration.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_configureOrLoadPlugins',\n    value: function _configureOrLoadPlugins() {\n      var _this3 = this;\n\n      var plugins = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (plugins) {\n        Object.keys(plugins).forEach(function (name) {\n          // If the plugin is already exists in the registry we are updating his config\n          var plugin = _this3._pluginManager.get(name);\n          if (plugin) {\n            plugin.updateConfig(plugins[name]);\n            _this3._config.plugins[name] = plugin.getConfig();\n          } else {\n            // We allow to load plugins as long as the player has no engine\n            if (!_this3._engine) {\n              _this3._pluginManager.load(name, _this3, plugins[name]);\n              var _plugin = _this3._pluginManager.get(name);\n              if (_plugin) {\n                _this3._config.plugins[name] = _plugin.getConfig();\n                if (typeof _plugin.getMiddlewareImpl === \"function\") {\n                  _this3._playbackMiddleware.use(_plugin.getMiddlewareImpl());\n                }\n              }\n            } else {\n              delete _this3._config.plugins[name];\n            }\n          }\n        });\n      }\n    }\n\n    /**\n     * Creates the ready promise.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_createReadyPromise',\n    value: function _createReadyPromise() {\n      var _this4 = this;\n\n      this._readyPromise = new Promise(function (resolve, reject) {\n        _this4._eventManager.listen(_this4, _events.CUSTOM_EVENTS.TRACKS_CHANGED, resolve);\n        _this4._eventManager.listen(_this4, _events.HTML5_EVENTS.ERROR, reject);\n      });\n    }\n\n    /**\n     * Selects an engine to play a source according to a given stream priority.\n     * @return {boolean} - Whether a proper engine was found to play the given sources\n     * according to the priority.\n     * @private\n     */\n\n  }, {\n    key: '_selectEngineByPriority',\n    value: function _selectEngineByPriority() {\n      var _this5 = this;\n\n      var streamPriority = this._config.playback.streamPriority;\n      var preferNative = this._config.playback.preferNative;\n      var sources = this._config.sources;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var priority = _step.value;\n\n          var engineId = typeof priority.engine === 'string' ? priority.engine.toLowerCase() : '';\n          var format = typeof priority.format === 'string' ? priority.format.toLowerCase() : '';\n          var Engine = Player._engines.find(function (Engine) {\n            return Engine.id === engineId;\n          });\n          if (Engine) {\n            var formatSources = sources[format];\n            if (formatSources && formatSources.length > 0) {\n              var source = formatSources[0];\n              if (Engine.canPlaySource(source, preferNative[format])) {\n                Player._logger.debug('Source selected: ', formatSources);\n                _this5._loadEngine(Engine, source);\n                _this5._engineType = engineId;\n                _this5._streamType = format;\n                _this5.dispatchEvent(new _fakeEvent2.default(_events.CUSTOM_EVENTS.SOURCE_SELECTED, { selectedSource: formatSources }));\n                return {\n                  v: true\n                };\n              }\n            }\n          }\n        };\n\n        for (var _iterator = streamPriority[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ret = _loop();\n\n          if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      Player._logger.warn(\"No playable engines was found to play the given sources\");\n      return false;\n    }\n\n    /**\n     * Loads the selected engine.\n     * @param {IEngine} Engine - The selected engine.\n     * @param {Source} source - The selected source object.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_loadEngine',\n    value: function _loadEngine(Engine, source) {\n      if (this._engine) {\n        if (this._engine.id === Engine.id) {\n          this._engine.restore(source, this._config);\n        } else {\n          this._engine.destroy();\n          this._engine = Engine.createEngine(source, this._config);\n        }\n      } else {\n        this._engine = Engine.createEngine(source, this._config);\n      }\n    }\n\n    /**\n     * Listen to all HTML5 defined events and trigger them on the player\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_attachMedia',\n    value: function _attachMedia() {\n      var _this6 = this;\n\n      if (this._engine) {\n        Object.keys(_events.HTML5_EVENTS).forEach(function (html5Event) {\n          _this6._eventManager.listen(_this6._engine, _events.HTML5_EVENTS[html5Event], function (event) {\n            return _this6.dispatchEvent(event);\n          });\n        });\n        this._eventManager.listen(this._engine, _events.HTML5_EVENTS.SEEKED, function () {\n          var browser = _this6._env.browser.name;\n          if (browser === 'Edge' || browser === 'IE') {\n            _this6._removeTextCuePatch();\n          }\n        });\n        this._eventManager.listen(this._engine, _events.CUSTOM_EVENTS.VIDEO_TRACK_CHANGED, function (event) {\n          _this6._markActiveTrack(event.payload.selectedVideoTrack);\n          return _this6.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._engine, _events.CUSTOM_EVENTS.AUDIO_TRACK_CHANGED, function (event) {\n          _this6._playbackAttributesState.audioLanguage = event.payload.selectedAudioTrack.language;\n          _this6._markActiveTrack(event.payload.selectedAudioTrack);\n          return _this6.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._engine, _events.CUSTOM_EVENTS.TEXT_TRACK_CHANGED, function (event) {\n          _this6._playbackAttributesState.textLanguage = event.payload.selectedTextTrack.language;\n          _this6._markActiveTrack(event.payload.selectedTextTrack);\n          return _this6.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._engine, _events.CUSTOM_EVENTS.TEXT_CUE_CHANGED, function (event) {\n          return _this6._onCueChange(event);\n        });\n        this._eventManager.listen(this._engine, _events.CUSTOM_EVENTS.ABR_MODE_CHANGED, function (event) {\n          return _this6.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._engine, _events.CUSTOM_EVENTS.AUTOPLAY_FAILED, function (event) {\n          _this6.pause();\n          _this6.dispatchEvent(event);\n        });\n        this._eventManager.listen(this, _events.HTML5_EVENTS.PLAY, this._onPlay.bind(this));\n        this._eventManager.listen(this, _events.HTML5_EVENTS.ENDED, this._onEnded.bind(this));\n        this._eventManager.listen(this, _events.CUSTOM_EVENTS.MUTE_CHANGE, function () {\n          _this6._playbackAttributesState.muted = _this6.muted;\n        });\n        this._eventManager.listen(this, _events.HTML5_EVENTS.VOLUME_CHANGE, function () {\n          _this6._playbackAttributesState.volume = _this6.volume;\n        });\n        this._eventManager.listen(this, _events.HTML5_EVENTS.RATE_CHANGE, function () {\n          _this6._playbackAttributesState.rate = _this6.playbackRate;\n        });\n      }\n    }\n\n    /**\n     * Handles the cue text removal issue, when seeking to a time without captions in IE \\ edge the previous captions\n     * are not removed\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_removeTextCuePatch',\n    value: function _removeTextCuePatch() {\n      var _this7 = this;\n\n      var filteredActiveTextCues = this._activeTextCues.filter(function (textCue) {\n        var cueEndTime = textCue._endTime;\n        var cueStartTime = textCue._startTime;\n        var currTime = _this7.currentTime;\n        if (currTime < cueEndTime && currTime > cueStartTime) {\n          return textCue;\n        }\n      });\n      this._updateTextDisplay(filteredActiveTextCues);\n    }\n\n    /**\n     * Handles the playback options, from current state or config.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_handlePlaybackOptions',\n    value: function _handlePlaybackOptions() {\n      this._config.playback = this._config.playback || {};\n      if (typeof this._playbackAttributesState.muted === 'boolean') {\n        this.muted = this._playbackAttributesState.muted;\n      } else if (typeof this._config.playback.muted === 'boolean') {\n        this.muted = this._config.playback.muted;\n      }\n      if (typeof this._playbackAttributesState.volume === 'number') {\n        this.volume = this._playbackAttributesState.volume;\n      } else if (typeof this._config.playback.volume === 'number') {\n        this.volume = this._config.playback.volume;\n      }\n      if (typeof this._config.playback.playsinline === 'boolean') {\n        this.playsinline = this._config.playback.playsinline;\n      }\n      if (this._canPreload()) {\n        this.load();\n      }\n    }\n\n    /**\n     * If ads plugin enabled it's his responsibility to preload the content player.\n     * So to avoid loading the player twice which can cause errors on MSEs we are not\n     * calling load from the player.\n     * TODO: Change it to check the ads configuration when we will develop the ads manager.\n     * @returns {boolean} - Whether the player should perform preload.\n     * @private\n     */\n\n  }, {\n    key: '_canPreload',\n    value: function _canPreload() {\n      return !this._config.playback.autoplay && this._config.playback.preload === \"auto\" && !this._config.plugins.ima;\n    }\n\n    /**\n     * Handles auto play.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_handleAutoPlay',\n    value: function _handleAutoPlay() {\n      var _this8 = this;\n\n      if (this._config.playback.autoplay === true) {\n        if (this.muted || !this._firstPlayInCurrentSession) {\n          this.play();\n        } else {\n          var allowMutedAutoPlay = this._config.playback.allowMutedAutoPlay;\n          Player.getCapabilities(this.engineType).then(function (capabilities) {\n            if (capabilities.autoplay) {\n              Player._logger.debug(\"Start autoplay\");\n              _this8.play();\n            } else {\n              if (allowMutedAutoPlay) {\n                Player._logger.debug(\"Fallback to muted autoplay\");\n                _this8.muted = true;\n                _this8.play();\n                _this8.dispatchEvent(new _fakeEvent2.default(_events.CUSTOM_EVENTS.FALLBACK_TO_MUTED_AUTOPLAY));\n              } else {\n                Player._logger.warn(\"Autoplay failed, pause player\");\n                _this8.load();\n                _this8.ready().then(function () {\n                  return _this8.pause();\n                });\n                _this8.dispatchEvent(new _fakeEvent2.default(_events.CUSTOM_EVENTS.AUTOPLAY_FAILED));\n              }\n            }\n          });\n        }\n      }\n    }\n\n    /**\n     * Start/resume the engine playback.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_play',\n    value: function _play() {\n      var _this9 = this;\n\n      if (this._engine.src) {\n        if (this.isLive() && !this.isDvr()) {\n          this.seekToLiveEdge();\n        }\n        this._engine.play();\n      } else {\n        this.load();\n        this.ready().then(function () {\n          _this9._engine.play();\n        });\n      }\n    }\n\n    /**\n     * Starts the engine pause.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_pause',\n    value: function _pause() {\n      this._engine.pause();\n    }\n\n    /**\n     * @function _onPlay\n     * @return {void}\n     * @private\n     */\n\n  }, {\n    key: '_onPlay',\n    value: function _onPlay() {\n      if (this._firstPlay) {\n        this._firstPlay = false;\n        this.dispatchEvent(new _fakeEvent2.default(_events.CUSTOM_EVENTS.FIRST_PLAY));\n        this._posterManager.hide();\n        if (typeof this._playbackAttributesState.rate === 'number') {\n          this.playbackRate = this._playbackAttributesState.rate;\n        }\n      }\n    }\n\n    /**\n     * @function _onEnded\n     * @return {void}\n     * @private\n     */\n\n  }, {\n    key: '_onEnded',\n    value: function _onEnded() {\n      if (!this.paused) {\n        this._pause();\n      }\n    }\n\n    /**\n     * Resets the necessary components before change media.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_reset',\n    value: function _reset() {\n      this.pause();\n      this._posterManager.reset();\n      this._stateManager.reset();\n      this._pluginManager.reset();\n      this._eventManager.removeAll();\n      this._activeTextCues = [];\n      this._tracks = [];\n      this._firstPlay = true;\n      this._firstPlayInCurrentSession = false;\n      this._engineType = '';\n      this._streamType = '';\n      this._createReadyPromise();\n    }\n\n    /**\n     * @returns {Object} - The default configuration of the player.\n     * @private\n     * @static\n     */\n\n  }, {\n    key: '_getTracksByType',\n\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Tracks\">\n\n    /**\n     * Returns the tracks according to the filter. if no filter given returns the all tracks.\n     * @function _getTracksByType\n     * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n     * @returns {Array<Track>} - The parsed tracks.\n     * @private\n     */\n    value: function _getTracksByType(type) {\n      return !type ? this._tracks : this._tracks.filter(function (track) {\n        if (type === _trackTypes2.default.VIDEO) {\n          return track instanceof _videoTrack2.default;\n        } else if (type === _trackTypes2.default.AUDIO) {\n          return track instanceof _audioTrack2.default;\n        } else if (type === _trackTypes2.default.TEXT) {\n          return track instanceof _textTrack2.default;\n        } else {\n          return true;\n        }\n      });\n    }\n\n    /**\n     * Mark the selected track as active\n     * @function _markActiveTrack\n     * @param {Track} track - the track to mark\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_markActiveTrack',\n    value: function _markActiveTrack(track) {\n      var type = void 0;\n      if (track instanceof _videoTrack2.default) {\n        type = _trackTypes2.default.VIDEO;\n      } else if (track instanceof _audioTrack2.default) {\n        type = _trackTypes2.default.AUDIO;\n      } else if (track instanceof _textTrack2.default) {\n        type = _trackTypes2.default.TEXT;\n      }\n      if (type) {\n        var tracks = this.getTracks(type);\n        for (var i = 0; i < tracks.length; i++) {\n          tracks[i].active = track.index === i;\n        }\n      }\n    }\n\n    /**\n     * handle text cue change\n     * @param {FakeEvent} event - the cue change event payload\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onCueChange',\n    value: function _onCueChange(event) {\n      Player._logger.debug('Text cue changed', event.payload.cues);\n      this._activeTextCues = event.payload.cues;\n      this._updateCueDisplaySettings();\n      this._updateTextDisplay(this._activeTextCues);\n    }\n\n    /**\n     * update the text cue display settings\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_updateCueDisplaySettings',\n    value: function _updateCueDisplaySettings() {\n      var activeCues = this._activeTextCues;\n      var settings = this._textDisplaySettings;\n      for (var i = 0; i < activeCues.length; i++) {\n        var cue = activeCues[i];\n        for (var name in settings) {\n          cue[name] = settings[name];\n        }\n      }\n    }\n\n    /**\n     * update the text display\n     * @param {Array<Cue>} cues - list of cues\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_updateTextDisplay',\n    value: function _updateTextDisplay(cues) {\n      if (this._textDisplayEl === undefined) {\n        this._textDisplayEl = Utils.Dom.createElement(\"div\");\n        Utils.Dom.addClassName(this._textDisplayEl, SUBTITLES_CLASS_NAME);\n        Utils.Dom.appendChild(this._el, this._textDisplayEl);\n      }\n      (0, _textTrackDisplay.processCues)(window, cues, this._textDisplayEl);\n    }\n\n    /**\n     * Add off text track if there are actual text tracks associated with media\n     * setting this track is the same as calling Player's hideTextTrack\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_addTextTrackOffOption',\n    value: function _addTextTrackOffOption() {\n      var textTracks = this.getTracks(_trackTypes2.default.TEXT);\n      if (textTracks && textTracks.length) {\n        this._tracks.push(new _textTrack2.default({\n          active: false,\n          index: textTracks.length,\n          kind: \"subtitles\",\n          label: \"Off\",\n          language: OFF\n        }));\n      }\n    }\n\n    /**\n     * Sets the default tracks defined in the player config.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_setDefaultTracks',\n    value: function _setDefaultTracks() {\n      var activeTracks = this.getActiveTracks();\n      var playbackConfig = this.config.playback;\n      var offTextTrack = this._getTracksByType(_trackTypes2.default.TEXT).find(function (track) {\n        return _textTrack2.default.langComparer(OFF, track.language);\n      });\n\n      this.hideTextTrack();\n\n      var currentOrConfiguredTextLang = this._playbackAttributesState.textLanguage || this._getLanguage(playbackConfig.textLanguage, activeTracks.text, _trackTypes2.default.TEXT);\n      var currentOrConfiguredAudioLang = this._playbackAttributesState.audioLanguage || playbackConfig.audioLanguage;\n      this._setDefaultTrack(_trackTypes2.default.TEXT, currentOrConfiguredTextLang, offTextTrack);\n      this._setDefaultTrack(_trackTypes2.default.AUDIO, currentOrConfiguredAudioLang, activeTracks.audio);\n    }\n\n    /**\n     * Gets the track language that should be set by default.\n     * @param {string} configuredLanguage - The configured language (can be also \"auto\").\n     * @param {Track} defaultTrack - The default track.\n     * @param {string} type - The track type.\n     * @private\n     * @returns {string} - The track language to set by default.\n     */\n\n  }, {\n    key: '_getLanguage',\n    value: function _getLanguage(configuredLanguage, defaultTrack, type) {\n      var language = configuredLanguage;\n      if (language === AUTO) {\n        var tracks = this._getTracksByType(type);\n        var localeTrack = tracks.find(function (track) {\n          return _track2.default.langComparer(_locale2.default.language, track.language);\n        });\n        if (localeTrack) {\n          language = localeTrack.language;\n        } else if (defaultTrack && defaultTrack.language !== OFF) {\n          language = defaultTrack.language;\n        } else if (tracks && tracks.length > 0) {\n          language = tracks[0].language;\n        }\n      }\n      return language;\n    }\n\n    /**\n     * Sets a specific default track.\n     * @param {string} type - The track type.\n     * @param {string} language - The track language.\n     * @param {?Track} defaultTrack - The default track to set in case there is no language configured.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_setDefaultTrack',\n    value: function _setDefaultTrack(type, language, defaultTrack) {\n      var track = this._getTracksByType(type).find(function (track) {\n        return _track2.default.langComparer(language, track.language);\n      });\n      if (track) {\n        this.selectTrack(track);\n      } else {\n        this.selectTrack(defaultTrack);\n      }\n    }\n\n    // </editor-fold>\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Enums\">\n\n    /**\n     * Get the player events.\n     * @returns {Object} - The events of the player.\n     * @public\n     */\n\n  }, {\n    key: 'currentTime',\n    set: function set(to) {\n      if (this._engine) {\n        if (Utils.Number.isNumber(to)) {\n          var boundedTo = to;\n          if (to < 0) {\n            boundedTo = 0;\n          }\n          if (boundedTo > this._engine.duration - DURATION_OFFSET) {\n            boundedTo = this._engine.duration - DURATION_OFFSET;\n          }\n          this._engine.currentTime = boundedTo;\n        }\n      }\n    }\n\n    /**\n     * Get the current time in seconds.\n     * @returns {?Number} - The playback current time.\n     * @public\n     */\n    ,\n    get: function get() {\n      if (this._engine) {\n        return this._engine.currentTime;\n      }\n    }\n\n    /**\n     * Get the duration in seconds.\n     * @returns {?Number} - The playback duration.\n     * @public\n     */\n\n  }, {\n    key: 'duration',\n    get: function get() {\n      if (this._engine) {\n        return this._engine.duration;\n      }\n    }\n\n    /**\n     * Set playback volume.\n     * @param {Number} vol - The volume to set.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'volume',\n    set: function set(vol) {\n      if (this._engine) {\n        if (Utils.Number.isFloat(vol) || vol === 0 || vol === 1) {\n          var boundedVol = vol;\n          if (boundedVol < 0) {\n            boundedVol = 0;\n          }\n          if (boundedVol > 1) {\n            boundedVol = 1;\n          }\n          this._engine.volume = boundedVol;\n        }\n      }\n    }\n\n    /**\n     * Get playback volume.\n     * @returns {?Number} - The playback volume.\n     * @public\n     */\n    ,\n    get: function get() {\n      if (this._engine) {\n        return this._engine.volume;\n      }\n    }\n\n    /**\n     * Get paused state.\n     * @returns {?boolean} - Whether the video is paused or not.\n     * @public\n     */\n\n  }, {\n    key: 'paused',\n    get: function get() {\n      if (this._engine) {\n        return this._engine.paused;\n      }\n    }\n\n    /**\n     * Get seeking state.\n     * @returns {?boolean} - Whether the video is seeking or not.\n     * @public\n     */\n\n  }, {\n    key: 'seeking',\n    get: function get() {\n      if (this._engine) {\n        return this._engine.seeking;\n      }\n    }\n\n    /**\n     * Set playsinline attribute.\n     * Relevant for iOS 10 and up:\n     * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n     * @param {boolean} playsinline - Whether the video should plays in line.\n     */\n\n  }, {\n    key: 'playsinline',\n    set: function set(playsinline) {\n      if (this._engine) {\n        this._engine.playsinline = playsinline;\n      }\n    }\n\n    /**\n     * Get playsinline attribute.\n     * Relevant for iOS 10 and up:\n     * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n     * @returns {boolean} - Whether the video plays in line.\n     */\n    ,\n    get: function get() {\n      if (this._engine) {\n        return this._engine.playsinline;\n      }\n    }\n\n    /**\n     * Set player muted state.\n     * @param {boolean} mute - The mute value.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'muted',\n    set: function set(mute) {\n      if (this._engine) {\n        this._engine.muted = mute;\n        this.dispatchEvent(new _fakeEvent2.default(_events.CUSTOM_EVENTS.MUTE_CHANGE, { mute: mute }));\n      }\n    }\n\n    /**\n     * Get player muted state.\n     * @returns {?boolean} - Whether the video is muted or not.\n     * @public\n     */\n    ,\n    get: function get() {\n      if (this._engine) {\n        return this._engine.muted;\n      }\n    }\n\n    /**\n     * Get the player source.\n     * @returns {?string} - The current source of the player.\n     * @public\n     */\n\n  }, {\n    key: 'src',\n    get: function get() {\n      if (this._engine) {\n        return this._engine.src;\n      }\n    }\n\n    /**\n     * Get the dimensions of the player.\n     * @returns {{width: number, height: number}} - The dimensions of the player.\n     * @public\n     */\n\n  }, {\n    key: 'dimensions',\n    get: function get() {\n      return {\n        width: this._el.clientWidth,\n        height: this._el.clientHeight\n      };\n    }\n\n    /**\n     * Get the poster source URL\n     * @returns {string} - the poster image URL\n     */\n\n  }, {\n    key: 'poster',\n    get: function get() {\n      return this._posterManager.src;\n    }\n\n    /**\n     * Sets the playbackRate property.\n     * @param {number} rate - The playback speed of the video.\n     */\n\n  }, {\n    key: 'playbackRate',\n    set: function set(rate) {\n      if (this._engine) {\n        this._engine.playbackRate = rate;\n      }\n    }\n\n    /**\n     * Gets the current playback speed of the video.\n     * @returns {number} - The current playback speed of the video.\n     */\n    ,\n    get: function get() {\n      if (this._engine) {\n        return this._engine.playbackRate;\n      }\n    }\n\n    /**\n     * get the engine type\n     * @returns {string} - html5\n     */\n\n  }, {\n    key: 'engineType',\n    get: function get() {\n      return this._engineType;\n    }\n\n    /**\n     * get the stream type\n     * @returns {string} - hls|dash|progressive\n     */\n\n  }, {\n    key: 'streamType',\n    get: function get() {\n      return this._streamType;\n    }\n\n    /**\n     * Getter for the environment of the player instance.\n     * @return {Object} - The current environment object.\n     * @public\n     */\n\n  }, {\n    key: 'env',\n    get: function get() {\n      return this._env;\n    }\n\n    /**\n     * Get the player config.\n     * @returns {Object} - A copy of the player configuration.\n     * @public\n     */\n\n  }, {\n    key: 'config',\n    get: function get() {\n      return Utils.Object.mergeDeep({}, this._config);\n    }\n\n    /**\n     * Set player session id\n     * @param {string} sessionId - the player session id to set\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'sessionId',\n    set: function set(sessionId) {\n      this._config.session = this._config.session || {};\n      this._config.session.id = sessionId;\n    }\n  }, {\n    key: 'textStyle',\n    set: function set(style) {\n      if (!(style instanceof _textStyle2.default)) {\n        throw new Error(\"Style must be instance of TextStyle\");\n      }\n      var element = Utils.Dom.getElementById(SUBTITLES_STYLE_ID_NAME);\n      if (!element) {\n        element = Utils.Dom.createElement('style');\n        Utils.Dom.setAttribute(element, 'id', SUBTITLES_STYLE_ID_NAME);\n        Utils.Dom.appendChild(document.head, element);\n      }\n      var sheet = element.sheet;\n\n      while (sheet.cssRules.length) {\n        sheet.deleteRule(0);\n      }\n\n      try {\n        if (this._config.playback.useNativeTextTrack) {\n          sheet.insertRule('video.' + ENGINE_CLASS_NAME + '::cue { ' + style.toCSS() + ' }', 0);\n        } else {\n          sheet.insertRule('#' + this._playerId + ' .' + SUBTITLES_CLASS_NAME + ' > div > div > div { ' + style.toCSS() + ' }', 0);\n        }\n        this._textStyle = style;\n        this.dispatchEvent(new _fakeEvent2.default(_events.CUSTOM_EVENTS.TEXT_STYLE_CHANGED));\n      } catch (e) {\n        Player._logger.error(e.message);\n      }\n    }\n\n    /**\n     * Gets style attributes for text tracks.\n     * @returns {?TextStyle} - the current style attribute\n     */\n    ,\n    get: function get() {\n      return this._textStyle.clone();\n    }\n  }, {\n    key: 'Event',\n    get: function get() {\n      return _events.PLAYER_EVENTS;\n    }\n\n    /**\n     * Get the player TextStyle.\n     * @returns {TextStyle} - The TextStyle class\n     * @public\n     */\n\n  }, {\n    key: 'TextStyle',\n    get: function get() {\n      return _textStyle2.default;\n    }\n\n    /**\n     * Get the player states.\n     * @returns {Object} - The states of the player.\n     * @public\n     */\n\n  }, {\n    key: 'State',\n    get: function get() {\n      return _stateTypes2.default;\n    }\n\n    /**\n     * Get the player tracks types.\n     * @returns {Object} - The tracks types of the player.\n     * @public\n     */\n\n  }, {\n    key: 'Track',\n    get: function get() {\n      return _trackTypes2.default;\n    }\n\n    // </editor-fold>\n\n  }], [{\n    key: '_defaultConfig',\n    get: function get() {\n      return Utils.Object.copyDeep(_playerConfig2.default);\n    }\n  }]);\n\n  return Player;\n}(_fakeEventTarget2.default);\n\nPlayer._logger = _logger2.default.getLogger('Player');\nPlayer._engines = [_html2.default];\nexports.default = Player;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _uaParserJs = __webpack_require__(26);\n\nvar _uaParserJs2 = _interopRequireDefault(_uaParserJs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Env = new _uaParserJs2.default().getResult();\nexports.default = Env;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PlayerError = function () {\n  function PlayerError(error, param) {\n    _classCallCheck(this, PlayerError);\n\n    this.name = error.name;\n    this.message = error.message(param);\n  }\n\n  _createClass(PlayerError, [{\n    key: \"getError\",\n    value: function getError() {\n      return {\n        name: this.name,\n        message: this.message\n      };\n    }\n  }]);\n\n  return PlayerError;\n}();\n\nPlayerError.TYPE = {\n  NOT_REGISTERED_PLUGIN: {\n    name: \"PluginNotRegisteredException\",\n    message: function message(name) {\n      return \"Cannot load \" + name + \" plugin. Name not found in the registry\";\n    }\n  },\n  NOT_VALID_HANDLER: {\n    name: \"PluginHandlerIsNotValidException\",\n    message: function message() {\n      return \"To activate plugin you must provide a class derived from BasePlugin\";\n    }\n  },\n  NOT_IMPLEMENTED_METHOD: {\n    name: \"NotImplementedException\",\n    message: function message(method) {\n      return method + \" method not implemented\";\n    }\n  }\n};\nexports.default = PlayerError;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * A simple multimap template.\n * @constructor\n * @struct\n * @template T\n */\nvar MultiMap = function () {\n  function MultiMap() {\n    _classCallCheck(this, MultiMap);\n\n    /** @private {!Object.<string, !Array.<T>>} */\n    this._map = new Map();\n  }\n\n  /**\n   * Add a key, value pair to the map.\n   * @param {string} key -\n   * @param {T} value  -\n   * @returns {void}\n   */\n\n\n  _createClass(MultiMap, [{\n    key: \"push\",\n    value: function push(key, value) {\n      if (this._map.has(key)) {\n        var list = this._map.get(key);\n        if (Array.isArray(list)) {\n          list.push(value);\n          this._map.set(key, list);\n        }\n      } else {\n        this._map.set(key, [value]);\n      }\n    }\n\n    /**\n     * Set an array of values for the key, overwriting any previous data.\n     * @param {string} key -\n     * @param {!Array.<T>} values -\n     * @returns {void}\n     */\n\n  }, {\n    key: \"set\",\n    value: function set(key, values) {\n      this._map.set(key, values);\n    }\n\n    /**\n     * Check for a key.\n     * @param {string} key -\n     * @return {boolean} true if the key exists.\n     */\n\n  }, {\n    key: \"has\",\n    value: function has(key) {\n      return this._map.has(key);\n    }\n\n    /**\n     * Get a list of values by key.\n     * @param {string} key -\n     * @return {Array.<T>} or null if no suZch key exists.\n     */\n\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      var list = this._map.get(key);\n      // slice() clones the list so that it and the map can each be modified\n      // without affecting the other.\n      return list ? list.slice() : [];\n    }\n\n    /**\n     * Get a list of all values.\n     * @returns {!Array.<T>} -\n     */\n\n  }, {\n    key: \"getAll\",\n    value: function getAll() {\n      var list = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this._map.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var value = _step.value;\n\n          list = list.concat(value);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return list;\n    }\n\n    /**\n     * Remove a specific value, if it exists.\n     * @param {string} key -\n     * @param {T} value -\n     * @returns {void}\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(key, value) {\n      if (!this._map.has(key)) return;\n      var list = this._map.get(key);\n      if (Array.isArray(list)) {\n        for (var i = 0; i < list.length; ++i) {\n          if (list[i] == value) {\n            list.splice(i, 1);\n            --i;\n          }\n        }\n      }\n    }\n\n    /**\n     * Get all keys from the multimap.\n     * @return {!Array.<string>}\n     */\n    // eslint-disable-next-line no-undef\n\n  }, {\n    key: \"keys\",\n    value: function keys() {\n      return this._map.keys();\n    }\n\n    /**\n     * Clear all keys and values from the multimap.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this._map.clear();\n    }\n  }]);\n\n  return MultiMap;\n}();\n\nexports.default = MultiMap;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _multiMap = __webpack_require__(12);\n\nvar _multiMap2 = _interopRequireDefault(_multiMap);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * A work-alike for EventTarget.  Only DOM elements may be true EventTargets,\n * but this can be used as a base class to provide event dispatch to non-DOM\n * classes.  Only FakeEvents should be dispatched.\n *\n * @struct\n * @constructor\n * @implements {EventTarget}\n * @export\n */\nvar FakeEventTarget = function () {\n  function FakeEventTarget() {\n    _classCallCheck(this, FakeEventTarget);\n\n    /**\n     * @private {!MultiMap.<FakeEventTarget.ListenerType>}\n     */\n    this._listeners = new _multiMap2.default();\n\n    /**\n     * The target of all dispatched events.  Defaults to |this|.\n     * @type {EventTarget}\n     */\n    this.dispatchTarget = this;\n  }\n\n  /**\n   * Add an event listener to this object.\n   *\n   * @param {string} type The event type to listen for.\n   * @param {FakeEventTarget.ListenerType} listener The callback or\n   *   listener object to invoke.\n   * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n   *   parents, so events neither capture nor bubble.\n   * @override\n   * @export\n   */\n\n\n  _createClass(FakeEventTarget, [{\n    key: 'addEventListener',\n    value: function addEventListener(type, listener) {\n      this._listeners.push(type, listener);\n    }\n\n    /**\n     * Remove an event listener from this object.\n     *\n     * @param {string} type The event type for which you wish to remove a listener.\n     * @param {FakeEventTarget.ListenerType} listener The callback or\n     *   listener object to remove.\n     * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n     *   parents, so events neither capture nor bubble.\n     * @override\n     * @export\n     */\n\n  }, {\n    key: 'removeEventListener',\n    value: function removeEventListener(type, listener) {\n      this._listeners.remove(type, listener);\n    }\n\n    /**\n     * Dispatch an event from this object.\n     *\n     * @param {!Event} event The event to be dispatched from this object.\n     * @return {boolean} True if the default action was prevented.\n     * @override\n     * @export\n     */\n\n  }, {\n    key: 'dispatchEvent',\n    value: function dispatchEvent(event) {\n      // In many browsers, it is complex to overwrite properties of actual Events.\n      // Here we expect only to dispatch FakeEvents, which are simpler.\n      //goog.asserts.assert(event instanceof FakeEvent,\n      //    'FakeEventTarget can only dispatch FakeEvents!');\n\n      var list = this._listeners.get(event.type) || [];\n\n      for (var i = 0; i < list.length; ++i) {\n        // Do this every time, since events can be re-dispatched from handlers.\n        event.target = this.dispatchTarget;\n        event.currentTarget = this.dispatchTarget;\n\n        var listener = list[i];\n        try {\n          if (listener.handleEvent) {\n            listener.handleEvent(event);\n          } else {\n            listener.call(this, event);\n          }\n        } catch (exception) {\n          // Exceptions during event handlers should not affect the caller,\n          // but should appear on the console as uncaught, according to MDN:\n          // http://goo.gl/N6Ff27\n          // TODO: add log\n        }\n\n        if (event.stopped) {\n          break;\n        }\n      }\n\n      return event.defaultPrevented;\n    }\n  }]);\n\n  return FakeEventTarget;\n}();\n\n/**\n * These are the listener types defined in the closure extern for EventTarget.\n * @typedef {EventListener|function(!Event):(boolean|undefined)}\n */\n\n\nexports.default = FakeEventTarget;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = __webpack_require__(9);\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _util = __webpack_require__(1);\n\nvar Utils = _interopRequireWildcard(_util);\n\nvar _eventManager = __webpack_require__(4);\n\nvar _eventManager2 = _interopRequireDefault(_eventManager);\n\nvar _playerError = __webpack_require__(11);\n\nvar _playerError2 = _interopRequireDefault(_playerError);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/** The BasePlugin responsible to implement the plugin interface.\n * Contains several default implementations.\n * Other plugins should extend this class.\n * @classdesc\n */\nvar BasePlugin = function () {\n  _createClass(BasePlugin, null, [{\n    key: 'createPlugin',\n\n\n    /**\n     * Factory method to create the actual plugin.\n     * @param {string} name - The plugin name\n     * @param {Player} player - The player reference\n     * @param {Object} config - The plugin configuration\n     * @returns {BasePlugin} - New runtime plugin instance\n     * @static\n     * @public\n     */\n\n    /**\n     * The event manager of the plugin.\n     * @member\n     */\n\n    /**\n     * The logger of the plugin.\n     * @member\n     */\n\n    /**\n     * The runtime configuration of the plugin.\n     * @member\n     */\n    value: function createPlugin(name, player) {\n      var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      return new this(name, player, config);\n    }\n\n    /**\n     * Returns under what conditions the plugin is valid.\n     * Plugin must implement this method.\n     * @returns {boolean} - Whether the plugin is valid and can be initiated. Default implementation is true\n     * @static\n     * @public\n     * @abstract\n     */\n\n    /**\n     * The default configuration of the plugin.\n     * Inherited plugins should override this property.\n     * @type {Object}\n     * @static\n     * @member\n     */\n\n    /**\n     * Reference to the actual player.\n     * @member\n     */\n\n    /**\n     * The name of the plugin.\n     * @member\n     */\n\n  }, {\n    key: 'isValid',\n    value: function isValid() {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'isValid()').getError();\n    }\n\n    /**\n     * constructor\n     * @param {string} name - The plugin name\n     * @param {Player} player - The player reference\n     * @param {Object} config - The plugin configuration\n     * @constructor\n     * @private\n     */\n\n  }]);\n\n  function BasePlugin(name, player, config) {\n    _classCallCheck(this, BasePlugin);\n\n    this.name = name;\n    this.player = player;\n    this.eventManager = new _eventManager2.default();\n    this.logger = _logger2.default.getLogger(Utils.String.capitlize(this.name));\n    this.config = {};\n    Utils.Object.mergeDeep(this.config, this.constructor.defaultConfig, config);\n  }\n\n  /**\n   * Getter for the configuration of the plugin.\n   * @param {string} attr - The key in the plugin configuration (optional).\n   * @returns {*} - If attribute is provided, returns its value. Else, Returns the config of the plugin.\n   * @public\n   */\n\n\n  _createClass(BasePlugin, [{\n    key: 'getConfig',\n    value: function getConfig(attr) {\n      if (attr) {\n        return Utils.Object.copyDeep(this.config[attr]);\n      }\n      return Utils.Object.copyDeep(this.config);\n    }\n\n    /**\n     * Updates the config of the plugin.\n     * @param {Object} update - The updated configuration.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'updateConfig',\n    value: function updateConfig(update) {\n      Utils.Object.mergeDeep(this.config, update);\n    }\n\n    /**\n     * Runs the destroy logic of the plugin.\n     * plugin must implement this method.\n     * @public\n     * @virtual\n     * @returns {void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {}\n\n    /**\n     * Runs the reset logic of the plugin.\n     * plugin must implement this method.\n     * @public\n     * @virtual\n     * @returns {void}\n     */\n\n  }, {\n    key: 'reset',\n    value: function reset() {}\n\n    /**\n     * Getter for the plugin's name.\n     * @returns {string} - The name of the plugin.\n     * @public\n     */\n\n  }, {\n    key: 'getName',\n    value: function getName() {\n      return this.name;\n    }\n\n    /**\n     * Dispatch an event via the plugin.\n     * @param {string} name - The event name.\n     * @param {any} payload - The event payload.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'dispatchEvent',\n    value: function dispatchEvent(name, payload) {\n      this.logger.debug(\"Fire event: \" + name, payload);\n      this.player.dispatchEvent(new _fakeEvent2.default(name, payload));\n    }\n  }]);\n\n  return BasePlugin;\n}();\n\nBasePlugin.defaultConfig = {};\nexports.default = BasePlugin;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Base middleware.\n * @classdesc\n */\nvar BaseMiddleware = function () {\n  function BaseMiddleware() {\n    _classCallCheck(this, BaseMiddleware);\n  }\n\n  _createClass(BaseMiddleware, [{\n    key: \"callNext\",\n\n\n    /**\n     * Calls the next handler in the middleware chain.\n     * @param {Function} next - The next handler in the middleware chain.\n     * @returns {void}\n     */\n    value: function callNext(next) {\n      if (next) {\n        next();\n      }\n    }\n    /**\n     * Id of the middleware instance.\n     * @public\n     */\n\n  }]);\n\n  return BaseMiddleware;\n}();\n\nexports.default = BaseMiddleware;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar PLAYER_STATE_TYPES = {\n  IDLE: \"idle\",\n  LOADING: \"loading\",\n  PLAYING: \"playing\",\n  PAUSED: \"paused\",\n  BUFFERING: \"buffering\"\n};\n\nexports.default = PLAYER_STATE_TYPES;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerMediaSourceAdapter = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _nativeAdapter = __webpack_require__(32);\n\nvar _nativeAdapter2 = _interopRequireDefault(_nativeAdapter);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Media source provider\n * @classdesc\n */\nvar MediaSourceProvider = function () {\n  function MediaSourceProvider() {\n    _classCallCheck(this, MediaSourceProvider);\n  }\n\n  _createClass(MediaSourceProvider, null, [{\n    key: 'register',\n\n\n    /**\n     * Add a media source adapter to the registry.\n     * @function register\n     * @param {IMediaSourceAdapter} mediaSourceAdapter - The media source adapter to register.\n     * @static\n     * @returns {void}\n     */\n\n    /**\n     * The media source adapter registry.\n     * @member {Array<IMediaSourceAdapter>} _mediaSourceAdapters\n     * @static\n     * @private\n     */\n    value: function register(mediaSourceAdapter) {\n      if (mediaSourceAdapter) {\n        if (!MediaSourceProvider._mediaSourceAdapters.includes(mediaSourceAdapter)) {\n          MediaSourceProvider._logger.debug('Adapter <' + mediaSourceAdapter.id + '> has been registered successfully');\n          MediaSourceProvider._mediaSourceAdapters.push(mediaSourceAdapter);\n        } else {\n          MediaSourceProvider._logger.debug('Adapter <' + mediaSourceAdapter.id + '> is already registered, do not register again');\n        }\n      }\n    }\n\n    /**\n     * Remove a media source adapter from the registry.\n     * @function unRegister\n     * @param {IMediaSourceAdapter} mediaSourceAdapter - The media source adapter to unRegister.\n     * @static\n     * @returns {void}\n     */\n\n    /**\n     * The selected adapter for playback.\n     * @type {null|IMediaSourceAdapter}\n     * @static\n     * @private\n     */\n\n    /**\n     * The logger of the media source provider.\n     * @member {any} _logger\n     * @static\n     * @private\n     */\n\n  }, {\n    key: 'unRegister',\n    value: function unRegister(mediaSourceAdapter) {\n      var index = MediaSourceProvider._mediaSourceAdapters.indexOf(mediaSourceAdapter);\n      if (index > -1) {\n        MediaSourceProvider._logger.debug('Unregistered <' + mediaSourceAdapter.id + '> adapter');\n        MediaSourceProvider._mediaSourceAdapters.splice(index, 1);\n      }\n    }\n\n    /**\n     * Checks if the a media source adapter can play a given source.\n     * @param {Source} source - The source object to check.\n     *  @param {boolean} [preferNative=true] - prefer native flag\n     * @returns {boolean} - Whether a media source adapter can play the source.\n     * @public\n     * @static\n     */\n\n  }, {\n    key: 'canPlaySource',\n    value: function canPlaySource(source) {\n      var preferNative = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      MediaSourceProvider._orderMediaSourceAdapters(preferNative);\n      var mediaSourceAdapters = MediaSourceProvider._mediaSourceAdapters;\n      if (source && source.mimetype) {\n        for (var i = 0; i < mediaSourceAdapters.length; i++) {\n          if (mediaSourceAdapters[i].canPlayType(source.mimetype) && (!source.drmData || mediaSourceAdapters[i].canPlayDrm(source.drmData))) {\n            MediaSourceProvider._selectedAdapter = mediaSourceAdapters[i];\n            MediaSourceProvider._logger.debug('Selected adapter is <' + MediaSourceProvider._selectedAdapter.id + '>');\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n\n    /**\n     * Orders the media source adapters array according to the preferNative value.\n     * @param {boolean} preferNative - Whether to prefer native playback.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_orderMediaSourceAdapters',\n    value: function _orderMediaSourceAdapters(preferNative) {\n      MediaSourceProvider._mediaSourceAdapters = MediaSourceProvider._mediaSourceAdapters.filter(function (mse) {\n        return mse.id !== 'NativeAdapter';\n      });\n      if (preferNative) {\n        MediaSourceProvider._mediaSourceAdapters.unshift(_nativeAdapter2.default);\n      } else {\n        MediaSourceProvider._mediaSourceAdapters.push(_nativeAdapter2.default);\n      }\n    }\n\n    /**\n     * Get the appropriate media source adapter to the video source.\n     * @function getMediaSourceAdapter\n     * @param {HTMLVideoElement} videoElement - The video element which requires adapter for a given mimeType.\n     * @param {Source} source - The selected source object.\n     * @param {Object} config - The player configuration.\n     * @returns {IMediaSourceAdapter|null} - The selected media source adapter, or null if such doesn't exists.\n     * @static\n     */\n\n  }, {\n    key: 'getMediaSourceAdapter',\n    value: function getMediaSourceAdapter(videoElement, source, config) {\n      if (videoElement && source && config) {\n        if (!MediaSourceProvider._selectedAdapter) {\n          MediaSourceProvider.canPlaySource(source, true);\n        }\n        return MediaSourceProvider._selectedAdapter ? MediaSourceProvider._selectedAdapter.createAdapter(videoElement, source, config) : null;\n      }\n      return null;\n    }\n\n    /**\n     * Destroys the media source adapter provider necessary props.\n     * @static\n     * @returns {void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      MediaSourceProvider._selectedAdapter = null;\n    }\n  }]);\n\n  return MediaSourceProvider;\n}();\n\nMediaSourceProvider._logger = _logger2.default.getLogger('MediaSourceProvider');\nMediaSourceProvider._mediaSourceAdapters = [_nativeAdapter2.default];\nMediaSourceProvider._selectedAdapter = null;\nexports.default = MediaSourceProvider;\n\n\nvar registerMediaSourceAdapter = MediaSourceProvider.register;\nexports.registerMediaSourceAdapter = registerMediaSourceAdapter;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _fakeEventTarget = __webpack_require__(13);\n\nvar _fakeEventTarget2 = _interopRequireDefault(_fakeEventTarget);\n\nvar _playerError = __webpack_require__(11);\n\nvar _playerError2 = _interopRequireDefault(_playerError);\n\nvar _events = __webpack_require__(5);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _track = __webpack_require__(3);\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _videoTrack = __webpack_require__(6);\n\nvar _videoTrack2 = _interopRequireDefault(_videoTrack);\n\nvar _audioTrack = __webpack_require__(7);\n\nvar _audioTrack2 = _interopRequireDefault(_audioTrack);\n\nvar _textTrack = __webpack_require__(8);\n\nvar _textTrack2 = _interopRequireDefault(_textTrack);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n/* eslint-disable no-unused-vars */\n\n\nvar BaseMediaSourceAdapter = function (_FakeEventTarget) {\n  _inherits(BaseMediaSourceAdapter, _FakeEventTarget);\n\n  _createClass(BaseMediaSourceAdapter, null, [{\n    key: 'isSupported',\n\n\n    /**\n     * Checks if the media source adapter is supported.\n     * @function isSupported\n     * @returns {boolean} - Whether the media source adapter is supported.\n     * @static\n     */\n\n\n    /**\n     * The adapter config.\n     * @member {Object} _config\n     * @private\n     */\n\n\n    /**\n     * The source object.\n     * @member {Source} _sourceObj\n     * @private\n     */\n\n\n    /**\n     * The dom video element.\n     * @member {HTMLVideoElement} _videoElement\n     * @private\n     */\n\n    /**\n     * Passing the custom events to the actual media source adapter.\n     * @static\n     */\n    value: function isSupported() {\n      return true;\n    }\n\n    /**\n     * @constructor\n     * @param {HTMLVideoElement} videoElement - The video element which bind to media source adapter.\n     * @param {Source} source - The source object.\n     * @param {Object} config - The media source adapter configuration.\n     */\n\n\n    /**\n     * Passing the getLogger function to the actual media source adapter.\n     * @type {Function}\n     * @static\n     */\n\n  }]);\n\n  function BaseMediaSourceAdapter(videoElement, source) {\n    var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, BaseMediaSourceAdapter);\n\n    var _this = _possibleConstructorReturn(this, (BaseMediaSourceAdapter.__proto__ || Object.getPrototypeOf(BaseMediaSourceAdapter)).call(this));\n\n    _this._videoElement = videoElement;\n    _this._sourceObj = source;\n    _this._config = config;\n    return _this;\n  }\n\n  /**\n   * Destroys the media source adapter.\n   * @function destroy\n   * @returns {void}\n   */\n\n\n  _createClass(BaseMediaSourceAdapter, [{\n    key: 'destroy',\n    value: function destroy() {\n      this._sourceObj = null;\n      this._config = null;\n      return Promise.resolve();\n    }\n\n    /**\n     * Triggers the appropriate track changed event.\n     * @param {Track} track - The selected track.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onTrackChanged',\n    value: function _onTrackChanged(track) {\n      if (track instanceof _videoTrack2.default) {\n        this._trigger(BaseMediaSourceAdapter.CustomEvents.VIDEO_TRACK_CHANGED, { selectedVideoTrack: track });\n      } else if (track instanceof _audioTrack2.default) {\n        this._trigger(BaseMediaSourceAdapter.CustomEvents.AUDIO_TRACK_CHANGED, { selectedAudioTrack: track });\n      } else if (track instanceof _textTrack2.default) {\n        this._trigger(BaseMediaSourceAdapter.CustomEvents.TEXT_TRACK_CHANGED, { selectedTextTrack: track });\n      }\n    }\n\n    /**\n     * Dispatch an adapter event forward.\n     * @param {string} name - The name of the event.\n     * @param {Object} payload - The event payload.\n     * @returns {void}\n     */\n\n  }, {\n    key: '_trigger',\n    value: function _trigger(name, payload) {\n      this.dispatchEvent(new _fakeEvent2.default(name, payload));\n    }\n\n    /** Must implemented methods by the derived media source adapter **/\n\n  }, {\n    key: 'load',\n    value: function load() {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'load').getError();\n    }\n  }, {\n    key: 'selectVideoTrack',\n    value: function selectVideoTrack(videoTrack) {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'selectVideoTrack').getError();\n    }\n  }, {\n    key: 'selectAudioTrack',\n    value: function selectAudioTrack(audioTrack) {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'selectAudioTrack').getError();\n    }\n  }, {\n    key: 'selectTextTrack',\n    value: function selectTextTrack(textTrack) {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'selectTextTrack').getError();\n    }\n  }, {\n    key: 'hideTextTrack',\n    value: function hideTextTrack() {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'hideTextTrack').getError();\n    }\n  }, {\n    key: 'enableAdaptiveBitrate',\n    value: function enableAdaptiveBitrate() {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'enableAdaptiveBitrate').getError();\n    }\n  }, {\n    key: 'isAdaptiveBitrateEnabled',\n    value: function isAdaptiveBitrateEnabled() {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'isAdaptiveBitrateEnabled').getError();\n    }\n  }, {\n    key: 'seekToLiveEdge',\n    value: function seekToLiveEdge() {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'seekToLiveEdge').getError();\n    }\n  }, {\n    key: 'isLive',\n    value: function isLive() {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'isLive').getError();\n    }\n  }, {\n    key: 'src',\n    get: function get() {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'get src').getError();\n    }\n\n    /**\n     * Get the current time in seconds.\n     * @returns {Number} - The current playback time.\n     * @public\n     */\n\n  }, {\n    key: 'currentTime',\n    get: function get() {\n      return this._videoElement.currentTime;\n    }\n\n    /**\n     * Set the current time in seconds.\n     * @param {Number} to - The number to set in seconds.\n     * @public\n     * @returns {void}\n     */\n    ,\n    set: function set(to) {\n      this._videoElement.currentTime = to;\n    }\n\n    /**\n     * Get the duration in seconds.\n     * @returns {Number} - The playback duration.\n     * @public\n     */\n\n  }, {\n    key: 'duration',\n    get: function get() {\n      return this._videoElement.duration;\n    }\n  }], [{\n    key: 'canPlayType',\n    value: function canPlayType(mimeType, preferNative) {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'static canPlayType').getError();\n    }\n  }]);\n\n  return BaseMediaSourceAdapter;\n}(_fakeEventTarget2.default);\n\nBaseMediaSourceAdapter.CustomEvents = _events.CUSTOM_EVENTS;\nBaseMediaSourceAdapter.getLogger = _logger2.default.getLogger;\nexports.default = BaseMediaSourceAdapter;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n/* eslint-disable no-unused-vars */\n\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _playerError = __webpack_require__(11);\n\nvar _playerError2 = _interopRequireDefault(_playerError);\n\nvar _drmSupport = __webpack_require__(35);\n\nvar _drmSupport2 = _interopRequireDefault(_drmSupport);\n\nvar _drmScheme = __webpack_require__(20);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BaseDrmProtocol = function () {\n  function BaseDrmProtocol() {\n    _classCallCheck(this, BaseDrmProtocol);\n  }\n\n  _createClass(BaseDrmProtocol, null, [{\n    key: 'canPlayDrm',\n    value: function canPlayDrm(drmData) {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'static canPlayDrm').getError();\n    }\n  }, {\n    key: 'setDrmPlayback',\n    value: function setDrmPlayback() {\n      throw new _playerError2.default(_playerError2.default.TYPE.NOT_IMPLEMENTED_METHOD, 'static setDrmPlayback').getError();\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {}\n  }]);\n\n  return BaseDrmProtocol;\n}();\n\nBaseDrmProtocol.getLogger = _logger2.default.getLogger;\nBaseDrmProtocol.DrmSupport = _drmSupport2.default;\nBaseDrmProtocol.DrmScheme = _drmScheme.DrmScheme;\nexports.default = BaseDrmProtocol;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar DrmScheme = exports.DrmScheme = {\n  WIDEVINE: 'com.widevine.alpha',\n  PLAYREADY: 'com.microsoft.playready',\n  FAIRPLAY: 'com.apple.fairplay'\n};\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Cue = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _textTrackDisplay = __webpack_require__(22);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar autoKeyword = \"auto\";\nvar directionSetting = {\n  \"\": true,\n  \"lr\": true,\n  \"rl\": true\n};\nvar alignSetting = {\n  \"start\": true,\n  \"middle\": true,\n  \"end\": true,\n  \"left\": true,\n  \"right\": true\n};\n\n/**\n * helper\n * @param {string} value - the string to find\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findDirectionSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  var dir = directionSetting[value.toLowerCase()];\n  return dir ? value.toLowerCase() : false;\n}\n\n/**\n * helper\n * @param {string} value - the string\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findAlignSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  var align = alignSetting[value.toLowerCase()];\n  return align ? value.toLowerCase() : false;\n}\n\n/**\n * VTTCue model\n * @class\n * @classdesc VTT Cue model to represent VTT cues internally\n */\n\nvar VTTCue = function () {\n  /**\n   * A number giving the size of the cue box, to be interpreted as a percentage of the video, as defined\n   * by the writing direction.\n   * @type {number}\n   * @private\n   */\n\n  /**\n   * The position defines the indent of the cue box in the direction defined by the writing direction\n   * @type {number}\n   * @private\n   */\n\n  /**\n   * The line defines positioning of the cue box.\n   * @type {string | number}\n   * @private\n   */\n\n  /**\n   * configures the cue to use vertical text layout rather than horizontal text layout.\n   * Vertical text layout is sometimes used in Japanese, for example. The default is horizontal layout\n   * @type {string}\n   * @private\n   */\n\n  /**\n   * A boolean indicating whether playback of the media resource is to pause when the end of the\n   * range to which the cue applies is reached.\n   * @type {boolean}\n   * @private\n   */\n\n\n  /**\n   * This is used as part of the rendering model, to keep cues in a consistent position.\n   * http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n   * @type {undefined}\n   */\n  function VTTCue(startTime, endTime, text) {\n    _classCallCheck(this, VTTCue);\n\n    this.hasBeenReset = false;\n    this.displayState = undefined;\n    this._id = \"\";\n    this._pauseOnExit = false;\n    this._region = null;\n    this._vertical = \"\";\n    this._snapToLines = true;\n    this._line = \"auto\";\n    this._lineAlign = \"start\";\n    this._position = 50;\n    this._positionAlign = \"middle\";\n    this._size = 50;\n    this._align = \"middle\";\n\n    this._startTime = startTime;\n    this._endTime = endTime;\n    this._text = text;\n    /**\n     * Other <track> spec defined properties\n     */\n  }\n  /**\n   * An alignment for all lines of text within the cue box, in the dimension of the writing direction\n   * @type {string}\n   * @private\n   */\n\n  /**\n   * An alignment for the cue box in the dimension of the writing direction, describing what the position\n   * is anchored to\n   * @type {string}\n   * @private\n   */\n\n  /**\n   * An alignment for the cue box’s line, one of start/center/end alignment\n   * @type {string}\n   * @private\n   */\n\n  /**\n   * A boolean indicating whether the line is an integer number of lines (using the line dimensions of\n   * the first line of the cue), or whether it is a percentage of the dimension of the video.\n   * The flag is set to true when lines are counted, and false otherwise.\n   * @type {boolean}\n   * @private\n   */\n\n  /**\n   * An optional WebVTT region to which a cue belongs.\n   * By default, the region is set to null.\n   * @type {null}\n   * @private\n   */\n\n  /**\n   * The time, in seconds and fractions of a second, that describes the beginning of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n\n  /**\n   * The time, in seconds and fractions of a second, that describes the end of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n\n  /**\n   * The raw text of the cue, and rules for its interpretation, allowing the text to be\n   * rendered and converted to a DOM fragment.\n   * @type {string}\n   * @private\n   */\n\n  /**\n   * VTTCue and TextTrackCue properties\n   * http://dev.w3.org/html5/webvtt/#vttcue-interface\n   */\n  /**\n   * An arbitrary string.\n   * @type {string}\n   * @private\n   */\n\n\n  /**\n   * // Lets us know when the VTTCue's data has changed in such a way that we need\n   * to recompute its display state. This lets us compute its display state lazily.\n   * @type {boolean}\n   */\n\n\n  _createClass(VTTCue, [{\n    key: \"resetCue\",\n    value: function resetCue() {\n      this.hasBeenReset = true;\n    }\n  }, {\n    key: \"getCueAsHTML\",\n    value: function getCueAsHTML() {\n      return (0, _textTrackDisplay.convertCueToDOMTree)(window, this.text);\n    }\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this._id;\n    },\n    set: function set(value) {\n      this._id = \"\" + value;\n    }\n  }, {\n    key: \"pauseOnExit\",\n    get: function get() {\n      return this._pauseOnExit;\n    },\n    set: function set(value) {\n      this._pauseOnExit = value;\n    }\n  }, {\n    key: \"startTime\",\n    get: function get() {\n      return this._endTime;\n    },\n    set: function set(value) {\n      if (typeof value !== \"number\") {\n        throw new TypeError(\"Start time must be set to a number.\");\n      }\n      this._endTime = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"endTime\",\n    get: function get() {\n      return this._endTime;\n    },\n    set: function set(value) {\n      if (typeof value !== \"number\") {\n        throw new TypeError(\"End time must be set to a number.\");\n      }\n      this._endTime = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"text\",\n    get: function get() {\n      return this._text;\n    },\n    set: function set(value) {\n      this._text = \"\" + value;\n      this.resetCue();\n    }\n  }, {\n    key: \"region\",\n    get: function get() {\n      return this._region;\n    },\n    set: function set(value) {\n      this._region = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"vertical\",\n    get: function get() {\n      return this._vertical;\n    },\n    set: function set(value) {\n      var setting = findDirectionSetting(value);\n      // Have to check for false because the setting an be an empty string.\n      if (setting === false) {\n        throw new SyntaxError(\"An invalid or illegal string was specified.\");\n      } else if (typeof setting === \"string\") {\n        this._vertical = setting;\n        this.resetCue();\n      }\n    }\n  }, {\n    key: \"snapToLines\",\n    get: function get() {\n      return this._snapToLines;\n    },\n    set: function set(value) {\n      this._snapToLines = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"line\",\n    get: function get() {\n      return this._line;\n    },\n    set: function set(value) {\n      if (typeof value !== \"number\" && value !== autoKeyword) {\n        throw new SyntaxError(\"An invalid number or illegal string was specified.\");\n      }\n      this._line = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"lineAlign\",\n    get: function get() {\n      return this._lineAlign;\n    },\n    set: function set(value) {\n      var setting = findAlignSetting(value);\n      if (!setting) {\n        throw new SyntaxError(\"An invalid or illegal string was specified.\");\n      } else if (typeof setting === \"string\") {\n        this._lineAlign = setting;\n        this.resetCue();\n      }\n    }\n  }, {\n    key: \"position\",\n    get: function get() {\n      return this._position;\n    },\n    set: function set(value) {\n      if (value < 0 || value > 100) {\n        throw new Error(\"Position must be between 0 and 100.\");\n      }\n      this._position = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"positionAlign\",\n    get: function get() {\n      return this._positionAlign;\n    },\n    set: function set(value) {\n      var setting = findAlignSetting(value);\n      if (!setting) {\n        throw new SyntaxError(\"An invalid or illegal string was specified.\");\n      } else if (typeof setting === \"string\") {\n        this._positionAlign = setting;\n        this.resetCue();\n      }\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return this._size;\n    },\n    set: function set(value) {\n      if (value < 0 || value > 100) {\n        throw new Error(\"Size must be between 0 and 100.\");\n      }\n      this._size = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"align\",\n    get: function get() {\n      return this._align;\n    },\n    set: function set(value) {\n      var setting = findAlignSetting(value);\n      if (!setting) {\n        throw new SyntaxError(\"An invalid or illegal string was specified.\");\n      } else if (typeof setting === \"string\") {\n        this._align = setting;\n        this.resetCue();\n      }\n    }\n  }]);\n\n  return VTTCue;\n}();\n\nvar Cue = void 0;\nif (typeof window !== 'undefined' && window.VTTCue) {\n  exports.Cue = Cue = window.VTTCue;\n} else {\n  exports.Cue = Cue = VTTCue;\n}\n\nexports.Cue = Cue;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable */\n/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n\nvar fontScale = 1;\n\n// Try to parse input as a time stamp.\nfunction parseTimeStamp(input) {\n\n  function computeSeconds(h, m, s, f) {\n    return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n  }\n\n  var m = input.match(/^(\\d+):(\\d{2})(:\\d{2})?\\.(\\d{3})/);\n  if (!m) {\n    return null;\n  }\n\n  if (m[3]) {\n    // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n    return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n  } else if (m[1] > 59) {\n    // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n    // First position is hours as it's over 59.\n    return computeSeconds(m[1], m[2], 0, m[4]);\n  } else {\n    // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n    return computeSeconds(0, m[1], m[2], m[4]);\n  }\n}\n\nvar ESCAPE = {\n  \"&amp;\": \"&\",\n  \"&lt;\": \"<\",\n  \"&gt;\": \">\",\n  \"&lrm;\": \"\\u200E\",\n  \"&rlm;\": \"\\u200F\",\n  \"&nbsp;\": \"\\xA0\"\n};\n\nvar TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\"\n};\n\nvar TAG_ANNOTATION = {\n  v: \"title\",\n  lang: \"lang\"\n};\n\nvar NEEDS_PARENT = {\n  rt: \"ruby\"\n};\n\n// Parse content into a document fragment.\nfunction parseContent(window, input) {\n  function nextToken() {\n    // Check for end-of-string.\n    if (!input) {\n      return null;\n    }\n\n    // Consume 'n' characters from the input.\n    function consume(result) {\n      input = input.substr(result.length);\n      return result;\n    }\n\n    var m = input.match(/^([^<]*)(<[^>]+>?)?/);\n    // If there is some text before the next tag, return it, otherwise return\n    // the tag.\n    return consume(m[1] ? m[1] : m[2]);\n  }\n\n  // Unescape a string 's'.\n  function unescape1(e) {\n    return ESCAPE[e];\n  }\n\n  function unescape(s) {\n    var m = void 0;\n    while (m = s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/)) {\n      s = s.replace(m[0], unescape1);\n    }\n    return s;\n  }\n\n  function shouldAdd(current, element) {\n    return !NEEDS_PARENT[element.localName] || NEEDS_PARENT[element.localName] === current.localName;\n  }\n\n  // Create an element for this tag.\n  function createElement(type, annotation) {\n    var tagName = TAG_NAME[type];\n    if (!tagName) {\n      return null;\n    }\n    var element = window.document.createElement(tagName);\n    element.localName = tagName;\n    var name = TAG_ANNOTATION[type];\n    if (name && annotation) {\n      element[name] = annotation.trim();\n    }\n    return element;\n  }\n\n  var rootDiv = window.document.createElement(\"div\"),\n      current = rootDiv,\n      t = void 0,\n      tagStack = [];\n\n  while ((t = nextToken()) !== null) {\n    if (t[0] === '<') {\n      if (t[1] === \"/\") {\n        // If the closing tag matches, move back up to the parent node.\n        if (tagStack.length && tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n          tagStack.pop();\n          current = current.parentNode;\n        }\n        // Otherwise just ignore the end tag.\n        continue;\n      }\n      var ts = parseTimeStamp(t.substr(1, t.length - 2));\n      var node = void 0;\n      if (ts) {\n        // Timestamps are lead nodes as well.\n        node = window.document.createProcessingInstruction(\"timestamp\", ts);\n        current.appendChild(node);\n        continue;\n      }\n      var m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/);\n      // If we can't parse the tag, skip to the next tag.\n      if (!m) {\n        continue;\n      }\n      // Try to construct an element, and ignore the tag if we couldn't.\n      node = createElement(m[1], m[3]);\n      if (!node) {\n        continue;\n      }\n      // Determine if the tag should be added based on the context of where it\n      // is placed in the cuetext.\n      if (!shouldAdd(current, node)) {\n        continue;\n      }\n      // Set the class list (as a list of classes, separated by space).\n      if (m[2]) {\n        node.className = m[2].substr(1).replace('.', ' ');\n      }\n      // Append the node to the current node, and enter the scope of the new\n      // node.\n      tagStack.push(m[1]);\n      current.appendChild(node);\n      current = node;\n      continue;\n    }\n\n    // Text nodes are leaf nodes.\n    current.appendChild(window.document.createTextNode(unescape(t)));\n  }\n\n  return rootDiv;\n}\n\n// This is a list of all the Unicode characters that have a strong\n// right-to-left category. What this means is that these characters are\n// written right-to-left for sure. It was generated by pulling all the strong\n// right-to-left characters out of the Unicode data table. That table can\n// found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\nvar strongRTLRanges = [[0x5be, 0x5be], [0x5c0, 0x5c0], [0x5c3, 0x5c3], [0x5c6, 0x5c6], [0x5d0, 0x5ea], [0x5f0, 0x5f4], [0x608, 0x608], [0x60b, 0x60b], [0x60d, 0x60d], [0x61b, 0x61b], [0x61e, 0x64a], [0x66d, 0x66f], [0x671, 0x6d5], [0x6e5, 0x6e6], [0x6ee, 0x6ef], [0x6fa, 0x70d], [0x70f, 0x710], [0x712, 0x72f], [0x74d, 0x7a5], [0x7b1, 0x7b1], [0x7c0, 0x7ea], [0x7f4, 0x7f5], [0x7fa, 0x7fa], [0x800, 0x815], [0x81a, 0x81a], [0x824, 0x824], [0x828, 0x828], [0x830, 0x83e], [0x840, 0x858], [0x85e, 0x85e], [0x8a0, 0x8a0], [0x8a2, 0x8ac], [0x200f, 0x200f], [0xfb1d, 0xfb1d], [0xfb1f, 0xfb28], [0xfb2a, 0xfb36], [0xfb38, 0xfb3c], [0xfb3e, 0xfb3e], [0xfb40, 0xfb41], [0xfb43, 0xfb44], [0xfb46, 0xfbc1], [0xfbd3, 0xfd3d], [0xfd50, 0xfd8f], [0xfd92, 0xfdc7], [0xfdf0, 0xfdfc], [0xfe70, 0xfe74], [0xfe76, 0xfefc], [0x10800, 0x10805], [0x10808, 0x10808], [0x1080a, 0x10835], [0x10837, 0x10838], [0x1083c, 0x1083c], [0x1083f, 0x10855], [0x10857, 0x1085f], [0x10900, 0x1091b], [0x10920, 0x10939], [0x1093f, 0x1093f], [0x10980, 0x109b7], [0x109be, 0x109bf], [0x10a00, 0x10a00], [0x10a10, 0x10a13], [0x10a15, 0x10a17], [0x10a19, 0x10a33], [0x10a40, 0x10a47], [0x10a50, 0x10a58], [0x10a60, 0x10a7f], [0x10b00, 0x10b35], [0x10b40, 0x10b55], [0x10b58, 0x10b72], [0x10b78, 0x10b7f], [0x10c00, 0x10c48], [0x1ee00, 0x1ee03], [0x1ee05, 0x1ee1f], [0x1ee21, 0x1ee22], [0x1ee24, 0x1ee24], [0x1ee27, 0x1ee27], [0x1ee29, 0x1ee32], [0x1ee34, 0x1ee37], [0x1ee39, 0x1ee39], [0x1ee3b, 0x1ee3b], [0x1ee42, 0x1ee42], [0x1ee47, 0x1ee47], [0x1ee49, 0x1ee49], [0x1ee4b, 0x1ee4b], [0x1ee4d, 0x1ee4f], [0x1ee51, 0x1ee52], [0x1ee54, 0x1ee54], [0x1ee57, 0x1ee57], [0x1ee59, 0x1ee59], [0x1ee5b, 0x1ee5b], [0x1ee5d, 0x1ee5d], [0x1ee5f, 0x1ee5f], [0x1ee61, 0x1ee62], [0x1ee64, 0x1ee64], [0x1ee67, 0x1ee6a], [0x1ee6c, 0x1ee72], [0x1ee74, 0x1ee77], [0x1ee79, 0x1ee7c], [0x1ee7e, 0x1ee7e], [0x1ee80, 0x1ee89], [0x1ee8b, 0x1ee9b], [0x1eea1, 0x1eea3], [0x1eea5, 0x1eea9], [0x1eeab, 0x1eebb], [0x10fffd, 0x10fffd]];\n\nfunction isStrongRTLChar(charCode) {\n  for (var i = 0; i < strongRTLRanges.length; i++) {\n    var currentRange = strongRTLRanges[i];\n    if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction determineBidi(cueDiv) {\n  var nodeStack = [],\n      text = \"\",\n      charCode = void 0;\n\n  if (!cueDiv || !cueDiv.childNodes) {\n    return \"ltr\";\n  }\n\n  function pushNodes(nodeStack, node) {\n    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n      nodeStack.push(node.childNodes[i]);\n    }\n  }\n\n  function nextTextNode(nodeStack) {\n    if (!nodeStack || !nodeStack.length) {\n      return null;\n    }\n\n    var node = nodeStack.pop(),\n        text = node.textContent || node.innerText;\n    if (text) {\n      // TODO: This should match all unicode type B characters (paragraph\n      // separator characters). See issue #115.\n      var m = text.match(/^.*(\\n|\\r)/);\n      if (m) {\n        nodeStack.length = 0;\n        return m[0];\n      }\n      return text;\n    }\n    if (node.tagName === \"ruby\") {\n      return nextTextNode(nodeStack);\n    }\n    if (node.childNodes) {\n      pushNodes(nodeStack, node);\n      return nextTextNode(nodeStack);\n    }\n  }\n\n  pushNodes(nodeStack, cueDiv);\n  while (text = nextTextNode(nodeStack)) {\n    for (var i = 0; i < text.length; i++) {\n      charCode = text.charCodeAt(i);\n      if (isStrongRTLChar(charCode)) {\n        return \"rtl\";\n      }\n    }\n  }\n  return \"ltr\";\n}\n\nfunction computeLinePos(cue) {\n  if (typeof cue.line === \"number\" && (cue.snapToLines || cue.line >= 0 && cue.line <= 100)) {\n    return cue.line;\n  }\n  if (!cue.track || !cue.track.textTrackList || !cue.track.textTrackList.mediaElement) {\n    return -1;\n  }\n  var track = cue.track;\n  var trackList = track.textTrackList;\n  var count = 0;\n  for (var i = 0; i < trackList.length && trackList[i] !== track; i++) {\n    if (trackList[i].mode === \"showing\") {\n      count++;\n    }\n  }\n  return ++count * -1;\n}\n\nvar StyleBox = function () {\n  function StyleBox() {\n    _classCallCheck(this, StyleBox);\n  }\n\n  // Apply styles to a div. If there is no div passed then it defaults to the\n  // div on 'this'.\n\n\n  _createClass(StyleBox, [{\n    key: \"applyStyles\",\n    value: function applyStyles(styles, div) {\n      div = div || this.div;\n      for (var prop in styles) {\n        if (styles.hasOwnProperty(prop)) {\n          div.style[prop] = styles[prop];\n        }\n      }\n    }\n  }, {\n    key: \"formatStyle\",\n    value: function formatStyle(val, unit) {\n      return val === 0 ? 0 : val + unit;\n    }\n  }]);\n\n  return StyleBox;\n}();\n\n// Constructs the computed display state of the cue (a div). Places the div\n// into the overlay which should be a block level element (usually a div).\n\n\nvar CueStyleBox = function (_StyleBox) {\n  _inherits(CueStyleBox, _StyleBox);\n\n  function CueStyleBox(window, cue, styleOptions) {\n    _classCallCheck(this, CueStyleBox);\n\n    var _this = _possibleConstructorReturn(this, (CueStyleBox.__proto__ || Object.getPrototypeOf(CueStyleBox)).call(this));\n\n    var isIE8 = typeof navigator !== \"undefined\" && /MSIE\\s8\\.0/.test(navigator.userAgent);\n    var color = \"rgba(255, 255, 255, 1)\";\n    var backgroundColor = \"rgba(0, 0, 0, 0.8)\";\n    var textShadow = \"\";\n\n    if (typeof WebVTTSet !== \"undefined\") {\n      color = WebVTTSet.fontSet;\n      backgroundColor = WebVTTSet.backgroundSet;\n      textShadow = WebVTTSet.edgeSet;\n    }\n\n    if (isIE8) {\n      color = \"rgb(255, 255, 255)\";\n      backgroundColor = \"rgb(0, 0, 0)\";\n    }\n\n    _this.cue = cue;\n\n    // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n    // have inline positioning and will function as the cue background box.\n    _this.cueDiv = parseContent(window, cue.text);\n    var styles = {\n      color: color,\n      backgroundColor: backgroundColor,\n      textShadow: textShadow,\n      position: \"relative\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      display: \"inline\"\n    };\n\n    if (!isIE8) {\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\";\n      styles.unicodeBidi = \"plaintext\";\n    }\n    _this.applyStyles(styles, _this.cueDiv);\n\n    // Create an absolutely positioned div that will be used to position the cue\n    // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n    // mirrors of them except \"middle\" which is \"center\" in CSS.\n    _this.div = window.document.createElement(\"div\");\n    styles = {\n      textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n      font: styleOptions.font,\n      whiteSpace: \"pre-line\",\n      position: \"absolute\"\n    };\n\n    if (!isIE8) {\n      styles.direction = determineBidi(_this.cueDiv);\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\".stylesunicodeBidi = \"plaintext\";\n    }\n\n    _this.applyStyles(styles);\n\n    _this.div.appendChild(_this.cueDiv);\n\n    // Calculate the distance from the reference edge of the viewport to the text\n    // position of the cue box. The reference edge will be resolved later when\n    // the box orientation styles are applied.\n    var textPos = 0;\n    switch (cue.positionAlign) {\n      case \"start\":\n        textPos = cue.position;\n        break;\n      case \"middle\":\n        textPos = cue.position - cue.size / 2;\n        break;\n      case \"end\":\n        textPos = cue.position - cue.size;\n        break;\n    }\n\n    // Horizontal box orientation; textPos is the distance from the left edge of the\n    // area to the left edge of the box and cue.size is the distance extending to\n    // the right from there.\n    if (cue.vertical === \"\") {\n      _this.applyStyles({\n        left: _this.formatStyle(textPos, \"%\"),\n        width: _this.formatStyle(cue.size, \"%\")\n      });\n      // Vertical box orientation; textPos is the distance from the top edge of the\n      // area to the top edge of the box and cue.size is the height extending\n      // downwards from there.\n    } else {\n      _this.applyStyles({\n        top: _this.formatStyle(textPos, \"%\"),\n        height: _this.formatStyle(cue.size, \"%\")\n      });\n    }\n\n    _this.move = function (box) {\n      this.applyStyles({\n        top: this.formatStyle(box.top, \"px\"),\n        bottom: this.formatStyle(box.bottom, \"px\"),\n        left: this.formatStyle(box.left, \"px\"),\n        right: this.formatStyle(box.right, \"px\"),\n        height: this.formatStyle(box.height, \"px\"),\n        width: this.formatStyle(box.width, \"px\")\n      });\n    };\n    return _this;\n  }\n\n  return CueStyleBox;\n}(StyleBox);\n\n// Represents the co-ordinates of an Element in a way that we can easily\n// compute things with such as if it overlaps or intersects with another Element.\n// Can initialize it with either a StyleBox or another BoxPosition.\n\n\nvar BoxPosition = function () {\n  function BoxPosition(obj) {\n    _classCallCheck(this, BoxPosition);\n\n    this.overlaps = function (b2) {\n      return this.left < b2.right && this.right > b2.left && this.top < b2.bottom && this.bottom > b2.top;\n    };\n\n    var isIE8 = typeof navigator !== \"undefined\" && /MSIE\\s8\\.0/.test(navigator.userAgent);\n\n    // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n    // was passed in and we need to copy the results of 'getBoundingClientRect'\n    // as the object returned is readonly. All co-ordinate values are in reference\n    // to the viewport origin (top left).\n    var lh = void 0,\n        height = void 0,\n        width = void 0,\n        top = void 0;\n    if (obj.div) {\n      height = obj.div.offsetHeight;\n      width = obj.div.offsetWidth;\n      top = obj.div.offsetTop;\n\n      var rects = (rects = obj.div.childNodes) && (rects = rects[0]) && rects.getClientRects && rects.getClientRects();\n      obj = obj.div.getBoundingClientRect();\n      // In certain cases the outter div will be slightly larger then the sum of\n      // the inner div's lines. This could be due to bold text, etc, on some platforms.\n      // In this case we should get the average line height and use that. This will\n      // result in the desired behaviour.\n      lh = rects ? Math.max(rects[0] && rects[0].height || 0, obj.height / rects.length) : 0;\n    }\n    this.left = obj.left;\n    this.right = obj.right;\n    this.top = obj.top || top;\n    this.height = obj.height || height;\n    this.bottom = obj.bottom || top + (obj.height || height);\n    this.width = obj.width || width;\n    this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n\n    if (isIE8 && !this.lineHeight) {\n      this.lineHeight = 13;\n    }\n  }\n\n  // Move the box along a particular axis. Optionally pass in an amount to move\n  // the box. If no amount is passed then the default is the line height of the\n  // box.\n\n\n  _createClass(BoxPosition, [{\n    key: \"move\",\n    value: function move(axis, toMove) {\n      toMove = toMove !== undefined ? toMove : this.lineHeight;\n      switch (axis) {\n        case \"+x\":\n          this.left += toMove;\n          this.right += toMove;\n          break;\n        case \"-x\":\n          this.left -= toMove;\n          this.right -= toMove;\n          break;\n        case \"+y\":\n          this.top += toMove;\n          this.bottom += toMove;\n          break;\n        case \"-y\":\n          this.top -= toMove;\n          this.bottom -= toMove;\n          break;\n      }\n    }\n\n    // Check if this box overlaps another box, b2.\n\n  }, {\n    key: \"overlapsAny\",\n\n\n    // Check if this box overlaps any other boxes in boxes.\n    value: function overlapsAny(boxes) {\n      for (var i = 0; i < boxes.length; i++) {\n        if (this.overlaps(boxes[i])) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    // Check if this box is within another box.\n\n  }, {\n    key: \"within\",\n    value: function within(container) {\n      return this.top >= container.top && this.bottom <= container.bottom && this.left >= container.left && this.right <= container.right;\n    }\n\n    // Check if this box is entirely within the container or it is overlapping\n    // on the edge opposite of the axis direction passed. For example, if \"+x\" is\n    // passed and the box is overlapping on the left edge of the container, then\n    // return true.\n\n  }, {\n    key: \"overlapsOppositeAxis\",\n    value: function overlapsOppositeAxis(container, axis) {\n      switch (axis) {\n        case \"+x\":\n          return this.left < container.left;\n        case \"-x\":\n          return this.right > container.right;\n        case \"+y\":\n          return this.top < container.top;\n        case \"-y\":\n          return this.bottom > container.bottom;\n      }\n    }\n\n    // Find the percentage of the area that this box is overlapping with another\n    // box.\n\n  }, {\n    key: \"intersectPercentage\",\n    value: function intersectPercentage(b2) {\n      var x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n          y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n          intersectArea = x * y;\n      return intersectArea / (this.height * this.width);\n    }\n\n    // Convert the positions from this box to CSS compatible positions using\n    // the reference container's positions. This has to be done because this\n    // box's positions are in reference to the viewport origin, whereas, CSS\n    // values are in referecne to their respective edges.\n\n  }, {\n    key: \"toCSSCompatValues\",\n    value: function toCSSCompatValues(reference) {\n      return {\n        top: this.top - reference.top,\n        bottom: reference.bottom - this.bottom,\n        left: this.left - reference.left,\n        right: reference.right - this.right,\n        height: this.height,\n        width: this.width\n      };\n    }\n\n    // Get an object that represents the box's position without anything extra.\n    // Can pass a StyleBox, HTMLElement, or another BoxPositon.\n\n  }], [{\n    key: \"getSimpleBoxPosition\",\n    value: function getSimpleBoxPosition(obj) {\n      var height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n      var width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n      var top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n\n      obj = obj.div ? obj.div.getBoundingClientRect() : obj.tagName ? obj.getBoundingClientRect() : obj;\n      return {\n        left: obj.left,\n        right: obj.right,\n        top: obj.top || top,\n        height: obj.height || height,\n        bottom: obj.bottom || top + (obj.height || height),\n        width: obj.width || width\n      };\n    }\n  }]);\n\n  return BoxPosition;\n}();\n\n// Move a StyleBox to its specified, or next best, position. The containerBox\n// is the box that contains the StyleBox, such as a div. boxPositions are\n// a list of other boxes that the styleBox can't overlap with.\n\n\nfunction moveBoxToLinePosition(styleBox, containerBox, boxPositions) {\n\n  // Find the best position for a cue box, b, on the video. The axis parameter\n  // is a list of axis, the order of which, it will move the box along. For example:\n  // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n  // direction. If it doesn't find a good position for it there it will then move\n  // it along the x axis in the negative direction.\n  function findBestPosition(b, axis) {\n    var bestPosition = void 0,\n        specifiedPosition = new BoxPosition(b),\n        percentage = 1; // Highest possible so the first thing we get is better.\n\n    for (var i = 0; i < axis.length; i++) {\n      while (b.overlapsOppositeAxis(containerBox, axis[i]) || b.within(containerBox) && b.overlapsAny(boxPositions)) {\n        b.move(axis[i]);\n      }\n      // We found a spot where we aren't overlapping anything. This is our\n      // best position.\n      if (b.within(containerBox)) {\n        return b;\n      }\n      var p = b.intersectPercentage(containerBox);\n      // If we're outside the container box less then we were on our last try\n      // then remember this position as the best position.\n      if (percentage > p) {\n        bestPosition = new BoxPosition(b);\n        percentage = p;\n      }\n      // Reset the box position to the specified position.\n      b = new BoxPosition(specifiedPosition);\n    }\n    return bestPosition || specifiedPosition;\n  }\n\n  var boxPosition = new BoxPosition(styleBox),\n      cue = styleBox.cue,\n      linePos = computeLinePos(cue),\n      axis = [];\n\n  // If we have a line number to align the cue to.\n  if (cue.snapToLines) {\n    var size = void 0;\n    switch (cue.vertical) {\n      case \"\":\n        axis = [\"+y\", \"-y\"];\n        size = \"height\";\n        break;\n      case \"rl\":\n        axis = [\"+x\", \"-x\"];\n        size = \"width\";\n        break;\n      case \"lr\":\n        axis = [\"-x\", \"+x\"];\n        size = \"width\";\n        break;\n    }\n\n    var step = boxPosition.lineHeight,\n        position = step * Math.round(linePos),\n        maxPosition = containerBox[size] + step,\n        initialAxis = axis[0];\n\n    // If the specified intial position is greater then the max position then\n    // clamp the box to the amount of steps it would take for the box to\n    // reach the max position.\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    }\n\n    // If computed line position returns negative then line numbers are\n    // relative to the bottom of the video instead of the top. Therefore, we\n    // need to increase our initial position by the length or width of the\n    // video, depending on the writing direction, and reverse our axis directions.\n    if (linePos < 0) {\n      position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n      axis = axis.reverse();\n    }\n\n    // Move the box to the specified position. This may not be its best\n    // position.\n    boxPosition.move(initialAxis, position);\n  } else {\n    // If we have a percentage line value for the cue.\n    var calculatedPercentage = boxPosition.lineHeight / containerBox.height * 100;\n\n    switch (cue.lineAlign) {\n      case \"middle\":\n        linePos -= calculatedPercentage / 2;\n        break;\n      case \"end\":\n        linePos -= calculatedPercentage;\n        break;\n    }\n\n    // Apply initial line position to the cue box.\n    switch (cue.vertical) {\n      case \"\":\n        styleBox.applyStyles({\n          top: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"rl\":\n        styleBox.applyStyles({\n          left: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"lr\":\n        styleBox.applyStyles({\n          right: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n    }\n\n    axis = [\"+y\", \"-x\", \"+x\", \"-y\"];\n\n    // Get the box position again after we've applied the specified positioning\n    // to it.\n    boxPosition = new BoxPosition(styleBox);\n  }\n\n  var bestPosition = findBestPosition(boxPosition, axis);\n  styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n}\n\nfunction convertCueToDOMTree(window, cuetext) {\n  if (!window || !cuetext) {\n    return null;\n  }\n  return parseContent(window, cuetext);\n}\n\nvar FONT_SIZE_PERCENT = 0.05;\nvar FONT_STYLE = \"sans-serif\";\nvar CUE_BACKGROUND_PADDING = \"1.5%\";\n\n// Runs the processing model over the cues and regions passed to it.\n// @param overlay A block level element (usually a div) that the computed cues\n//                and regions will be placed into.\nfunction processCues(window, cues, overlay) {\n  if (!window || !cues || !overlay) {\n    return null;\n  }\n\n  // Remove all previous children.\n  while (overlay.firstChild) {\n    overlay.removeChild(overlay.firstChild);\n  }\n\n  var paddedOverlay = window.document.createElement(\"div\");\n  paddedOverlay.style.position = \"absolute\";\n  paddedOverlay.style.left = \"0\";\n  paddedOverlay.style.right = \"0\";\n  paddedOverlay.style.top = \"0\";\n  paddedOverlay.style.bottom = \"0\";\n  paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n  overlay.appendChild(paddedOverlay);\n\n  // Determine if we need to compute the display states of the cues. This could\n  // be the case if a cue's state has been changed since the last computation or\n  // if it has not been computed yet.\n  function shouldCompute(cues) {\n    for (var i = 0; i < cues.length; i++) {\n      if (cues[i].hasBeenReset || !cues[i].displayState) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // We don't need to recompute the cues' display states. Just reuse them.\n  if (!shouldCompute(cues)) {\n    for (var i = 0; i < cues.length; i++) {\n      paddedOverlay.appendChild(cues[i].displayState);\n    }\n    return;\n  }\n\n  var boxPositions = [],\n      containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n      fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n  var styleOptions = {\n    font: fontSize * fontScale + \"px \" + FONT_STYLE\n  };\n\n  (function () {\n    var styleBox = void 0,\n        cue = void 0;\n\n    for (var _i = 0; _i < cues.length; _i++) {\n      cue = cues[_i];\n\n      // Compute the intial position and styles of the cue div.\n      styleBox = new CueStyleBox(window, cue, styleOptions);\n      paddedOverlay.appendChild(styleBox.div);\n\n      // Move the cue div to it's correct line position.\n      moveBoxToLinePosition(styleBox, containerBox, boxPositions);\n\n      // Remember the computed div so that we don't have to recompute it later\n      // if we don't have too.\n      cue.displayState = styleBox.div;\n\n      boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n    }\n  })();\n};\n\nexports.processCues = processCues;\nexports.convertCueToDOMTree = convertCueToDOMTree;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerPlugin = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _basePlugin = __webpack_require__(14);\n\nvar _basePlugin2 = _interopRequireDefault(_basePlugin);\n\nvar _playerError = __webpack_require__(11);\n\nvar _playerError2 = _interopRequireDefault(_playerError);\n\nvar _player = __webpack_require__(9);\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * The logger of the PluginManager class.\n * @private\n * @const\n */\nvar logger = _logger2.default.getLogger(\"PluginManager\");\n\n/** The PluginManager responsible for register plugins definitions and store plugins instances.\n * @classdesc\n */\n\nvar PluginManager = function () {\n  function PluginManager() {\n    _classCallCheck(this, PluginManager);\n\n    this._plugins = new Map();\n  }\n  /**\n   * The registry of the plugins.\n   * Maps plugin's name to his class.\n   * @type {Map}\n   * @static\n   * @private\n   */\n\n  /**\n   * The active plugins in the player.\n   * Maps plugin's name to his instance.\n   * @type {Map}\n   * @private\n   */\n\n\n  _createClass(PluginManager, [{\n    key: 'load',\n\n\n    /**\n     * Creates and store new instance of the plugin in case isValid() of the plugin returns true.\n     * @param {string} name - The plugin name\n     * @param {Player} player - The player reference\n     * @param {Object} [config={}] - The plugin configuration\n     * @returns {boolean} - Whether the plugin load was successful\n     * @public\n     */\n    value: function load(name, player) {\n      var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (!PluginManager._registry.has(name)) {\n        throw new _playerError2.default(_playerError2.default.TYPE.NOT_REGISTERED_PLUGIN, name).getError();\n      }\n      var pluginClass = PluginManager._registry.get(name);\n      if (pluginClass && pluginClass.isValid()) {\n        this._plugins.set(name, pluginClass.createPlugin(name, player, config));\n        logger.debug('Plugin <' + name + '> has been loaded');\n        return true;\n      }\n      logger.debug('Plugin <' + name + '> isn\\'t loaded, isValid()=false');\n      return false;\n    }\n\n    /**\n     * Iterates over all the plugins and calls private _destroy.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._plugins.forEach(this._destroy.bind(this));\n    }\n\n    /**\n     * Iterates over all the plugins and calls reset() method of the plugin's impl.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this._plugins.forEach(function (plugin) {\n        plugin.reset();\n      });\n    }\n\n    /**\n     * Calls destroy() method of the plugin's impl.\n     * @param {BasePlugin} plugin - The plugin instance\n     * @param {string} name - The plugin name\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_destroy',\n    value: function _destroy(plugin, name) {\n      plugin.destroy();\n      this._plugins.delete(name);\n    }\n\n    /**\n     * Returns the plugin's instance.\n     * @param {string} name - The plugin name\n     * @returns {BasePlugin} - The plugin instance\n     * @public\n     */\n\n  }, {\n    key: 'get',\n    value: function get(name) {\n      return this._plugins.get(name);\n    }\n  }], [{\n    key: 'register',\n\n\n    /**\n     * Writes the plugin in the registry.\n     * Maps: plugin name -> plugin class.\n     * @param {string} name - The plugin name\n     * @param {Function} handler - The plugin class\n     * @returns {boolean} - If the registration request succeeded\n     * @static\n     * @public\n     */\n    value: function register(name, handler) {\n      if (typeof handler !== 'function' || handler.prototype instanceof _basePlugin2.default === false) {\n        throw new _playerError2.default(_playerError2.default.TYPE.NOT_VALID_HANDLER).getError();\n      }\n      if (!PluginManager._registry.has(name)) {\n        PluginManager._registry.set(name, handler);\n        logger.debug('Plugin <' + name + '> has been registered successfully');\n        return true;\n      }\n      logger.debug('Plugin <' + name + '> is already registered, do not register again');\n      return false;\n    }\n\n    /**\n     * Removes the plugin from the registry.\n     * @param {string} name - The plugin name\n     * @static\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'unRegister',\n    value: function unRegister(name) {\n      if (PluginManager._registry.has(name)) {\n        PluginManager._registry.delete(name);\n        logger.debug('Unregistered <' + name + '> plugin.');\n      }\n    }\n  }]);\n\n  return PluginManager;\n}();\n\n/**\n * Export the register method.\n * @type {function}\n * @constant\n */\n\n\nPluginManager._registry = new Map();\nexports.default = PluginManager;\nvar registerPlugin = PluginManager.register;\nexports.registerPlugin = registerPlugin;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Creates a TextStyle object.\n *\n * <p><i>\n * Note that although this API is based on FCC guidelines, we cannot guarantee\n * that your application is in compliance with this or any other guideline.\n * </i></p>\n *\n * @constructor\n * @struct\n * @export\n */\nvar TextStyle = function () {\n  function TextStyle() {\n    _classCallCheck(this, TextStyle);\n\n    this.fontSize = '100%';\n    this.fontFamily = TextStyle.FontFamily.SANS_SERIF;\n    this.fontColor = TextStyle.StandardColors.WHITE;\n    this.fontOpacity = TextStyle.StandardOpacities.OPAQUE;\n    this.backgroundColor = TextStyle.StandardColors.BLACK;\n    this.backgroundOpacity = TextStyle.StandardOpacities.OPAQUE;\n    this.fontEdge = TextStyle.EdgeStyles.NONE;\n  }\n\n  /**\n   * Defined set of font families\n   * @enum {Object.<string, string>}}\n   * @export\n   */\n\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111, footnote\n   * 448.  Each value is an array of the three RGB values for that color.\n   * @enum {Object.<string, Array.<number>>}}\n   * @export\n   */\n\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * @enum {Object.<string, number>}}\n   * @export\n   */\n\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * The styles to achieve these effects are not specified anywhere.\n   *\n   * Each inner array represents a shadow, and is composed of RGB values for the\n   * shadow color, followed by pixel values for x-offset, y-offset, and blur.\n   *\n   * @enum {!Array.<!Array.<number>>}\n   * @export\n   */\n\n\n  _createClass(TextStyle, [{\n    key: \"toCSS\",\n\n\n    /**\n     * Compute the CSS text necessary to represent this TextStyle.\n     * Output does not contain any selectors.\n     *\n     * @return {string} - ::CUE CSS string\n     */\n    value: function toCSS() {\n      var attributes = [];\n\n      attributes.push('font-family: ' + this.fontFamily);\n      attributes.push('font-size: ' + this.fontSize);\n      attributes.push('color: ' + TextStyle._toRGBA(this.fontColor, this.fontOpacity));\n      attributes.push('background-color: ' + TextStyle._toRGBA(this.backgroundColor, this.backgroundOpacity));\n\n      // A given edge effect may be implemented with multiple shadows.\n      // Collect them all into an array, then combine into one attribute.\n      var shadows = [];\n      for (var i = 0; i < this.fontEdge.length; i++) {\n        // shaka.asserts.assert(this.fontEdge[i].length == 6);\n        var color = this.fontEdge[i].slice(0, 3);\n        var shadow = this.fontEdge[i].slice(3, 6);\n        shadows.push(TextStyle._toRGBA(color, this.fontOpacity) + ' ' + shadow.join('px ') + 'px');\n      }\n      attributes.push('text-shadow: ' + shadows.join(','));\n\n      return attributes.join('!important; ');\n    }\n\n    /**\n     * clones the textStyle object\n     * @returns {TextStyle} the cloned textStyle object\n     */\n\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var clonedTextStyle = new TextStyle();\n      clonedTextStyle.fontEdge = this.fontEdge;\n      clonedTextStyle.fontSize = this.fontSize;\n      clonedTextStyle.fontColor = this.fontColor;\n      clonedTextStyle.fontOpacity = this.fontOpacity;\n      clonedTextStyle.backgroundColor = this.backgroundColor;\n      clonedTextStyle.backgroundOpacity = this.backgroundOpacity;\n      return clonedTextStyle;\n    }\n  }], [{\n    key: \"_toRGBA\",\n\n\n    /**\n     * Creates a CSS RGBA sctring for a given color and opacity values\n     * @param {TextStyle.StandardColors} color - color value in RGB\n     * @param {TextStyle.StandardOpacities} opacity - opacity value\n     * @return {string} - CSS rgba string\n     * @private\n     */\n    value: function _toRGBA(color, opacity) {\n      // shaka.asserts.assert(color.length == 3);\n      return 'rgba(' + color.concat(opacity).join(',') + ')';\n    }\n\n    /**\n     * Font size, such as 50%, 75%, 100%, 200%, or 300%.\n     * @type {string}\n     */\n\n\n    /**\n     * @type {TextStyle.FontFamily}\n     */\n\n\n    /**\n     * @type {TextStyle.StandardColors}\n     */\n\n\n    /**\n     * @type {TextStyle.StandardOpacities}\n     * @expose\n     */\n\n\n    /**\n     * @type {TextStyle.StandardColors}\n     */\n\n\n    /**\n     * @type {TextStyle.StandardOpacities}\n     */\n\n\n    /**\n     * @type {TextStyle.EdgeStyles}\n     * @expose\n     */\n\n  }]);\n\n  return TextStyle;\n}();\n\nTextStyle.FontFamily = {\n  \"ARIAL\": \"Arial\",\n  \"HELVETICA\": \"Helvetica\",\n  \"VERDANA\": \"Verdana\",\n  \"SANS_SERIF\": \"sans-serif\"\n};\nTextStyle.StandardColors = {\n  'WHITE': [255, 255, 255],\n  'BLACK': [0, 0, 0],\n  'RED': [255, 0, 0],\n  'GREEN': [0, 255, 0],\n  'BLUE': [0, 0, 255],\n  'YELLOW': [255, 255, 0],\n  'MAGENTA': [255, 0, 255],\n  'CYAN': [0, 255, 255]\n};\nTextStyle.StandardOpacities = {\n  'OPAQUE': 1,\n  'SEMI_HIGH': 0.75,\n  'SEMI_LOW': 0.25,\n  'TRANSPARENT': 0\n};\nTextStyle.EdgeStyles = {\n  'NONE': [],\n  'RAISED': [[34, 34, 34, 1, 1, 0], [34, 34, 34, 2, 2, 0], [34, 34, 34, 3, 3, 0]],\n  'DEPRESSED': [[204, 204, 204, 1, 1, 0], [204, 204, 204, 0, 1, 0], [34, 34, 34, -1, -1, 0], [34, 34, 34, 0, -1, 0]],\n  'UNIFORM': [[34, 34, 34, 0, 0, 4], [34, 34, 34, 0, 0, 4], [34, 34, 34, 0, 0, 4], [34, 34, 34, 0, 0, 4]],\n  'DROP': [[34, 34, 34, 2, 2, 3], [34, 34, 34, 2, 2, 4], [34, 34, 34, 2, 2, 5]]\n};\nTextStyle.FontSizes = [\"50%\", \"75%\", \"100%\", \"200%\", \"300%\", \"400%\"];\nexports.default = TextStyle;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCapabilities = exports.BaseDrmProtocol = exports.Env = exports.PLAYER_NAME = exports.VERSION = exports.Utils = exports.TextStyle = exports.TextTrack = exports.AudioTrack = exports.VideoTrack = exports.Track = exports.BaseMiddleware = exports.BasePlugin = exports.registerPlugin = exports.BaseMediaSourceAdapter = exports.registerMediaSourceAdapter = undefined;\nexports.loadPlayer = loadPlayer;\n\nvar _player = __webpack_require__(9);\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _baseMediaSourceAdapter = __webpack_require__(18);\n\nvar _baseMediaSourceAdapter2 = _interopRequireDefault(_baseMediaSourceAdapter);\n\nvar _mediaSourceProvider = __webpack_require__(17);\n\nvar _pluginManager = __webpack_require__(23);\n\nvar _baseDrmProtocol = __webpack_require__(19);\n\nvar _baseDrmProtocol2 = _interopRequireDefault(_baseDrmProtocol);\n\nvar _baseMiddleware = __webpack_require__(15);\n\nvar _baseMiddleware2 = _interopRequireDefault(_baseMiddleware);\n\nvar _basePlugin = __webpack_require__(14);\n\nvar _basePlugin2 = _interopRequireDefault(_basePlugin);\n\nvar _track = __webpack_require__(3);\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _videoTrack = __webpack_require__(6);\n\nvar _videoTrack2 = _interopRequireDefault(_videoTrack);\n\nvar _audioTrack = __webpack_require__(7);\n\nvar _audioTrack2 = _interopRequireDefault(_audioTrack);\n\nvar _textTrack = __webpack_require__(8);\n\nvar _textTrack2 = _interopRequireDefault(_textTrack);\n\nvar _textStyle = __webpack_require__(24);\n\nvar _textStyle2 = _interopRequireDefault(_textStyle);\n\nvar _env = __webpack_require__(10);\n\nvar _env2 = _interopRequireDefault(_env);\n\nvar _util = __webpack_require__(1);\n\nvar Utils = _interopRequireWildcard(_util);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_player2.default.runCapabilities();\n\n\n_logger2.default.getLogger().log('%c ' + \"playkit-js\" + ' ' + \"0.14.1\", \"color: #98ff98;  font-size: large\");\n_logger2.default.getLogger().log('%c For more details see ' + \"https://github.com/kaltura/playkit-js\", \"color: #98ff98;\");\n\n/**\n * @param {Object} config - The configuration of the player\n * @returns {Player} - The player instance\n */\nfunction loadPlayer(config) {\n  return new _player2.default(config || {});\n}\n\n// Export the media source adapters necessary utils\nexports.registerMediaSourceAdapter = _mediaSourceProvider.registerMediaSourceAdapter;\nexports.BaseMediaSourceAdapter = _baseMediaSourceAdapter2.default;\n\n// Export the plugin framework\n\nexports.registerPlugin = _pluginManager.registerPlugin;\nexports.BasePlugin = _basePlugin2.default;\nexports.BaseMiddleware = _baseMiddleware2.default;\n\n// Export the tracks classes\n\nexports.Track = _track2.default;\nexports.VideoTrack = _videoTrack2.default;\nexports.AudioTrack = _audioTrack2.default;\nexports.TextTrack = _textTrack2.default;\nexports.TextStyle = _textStyle2.default;\n\n// Export utils library\n\nexports.Utils = Utils;\n\n// Export version\n\nexports.VERSION = \"0.14.1\";\n\n// Export player name\n\nexports.PLAYER_NAME = \"playkit-js\";\n\n// Export environment data\n\nexports.Env = _env2.default;\n\n// Export base DRM protocol\n\nexports.BaseDrmProtocol = _baseDrmProtocol2.default;\n\n// Export the player capabilities\n\nvar getCapabilities = _player2.default.getCapabilities;\nexports.getCapabilities = getCapabilities;\nexports.default = loadPlayer;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_RESULT__;/**\n * UAParser.js v0.7.13\n * Lightweight JavaScript-based User-Agent string parser\n * https://github.com/faisalman/ua-parser-js\n *\n * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>\n * Dual licensed under GPLv2 & MIT\n */\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '0.7.13',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major', // deprecated\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded';\n\n\n    ///////////\n    // Helper\n    //////////\n\n\n    var util = {\n        extend : function (regexes, extensions) {\n            var margedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    margedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    margedRegexes[i] = regexes[i];\n                }\n            }\n            return margedRegexes;\n        },\n        has : function (str1, str2) {\n          if (typeof str1 === \"string\") {\n            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n          } else {\n            return false;\n          }\n        },\n        lowerize : function (str) {\n            return str.toLowerCase();\n        },\n        major : function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g,'').split(\".\")[0] : undefined;\n        },\n        trim : function (str) {\n          return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n        }\n    };\n\n\n    ///////////////\n    // Map helper\n    //////////////\n\n\n    var mapper = {\n\n        rgx : function (ua, arrays) {\n\n            //var result = {},\n            var i = 0, j, k, p, q, matches, match;//, args = arguments;\n\n            /*// construct object barebones\n            for (p = 0; p < args[1].length; p++) {\n                q = args[1][p];\n                result[typeof q === OBJ_TYPE ? q[0] : q] = undefined;\n            }*/\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length == 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length == 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length == 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n            //console.log(this);\n            //return this;\n        },\n\n        str : function (str, map) {\n\n            for (var i in map) {\n                // check if array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (util.has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (util.has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n        }\n    };\n\n\n    ///////////////\n    // String map\n    //////////////\n\n\n    var maps = {\n\n        browser : {\n            oldsafari : {\n                version : {\n                    '1.0'   : '/8',\n                    '1.2'   : '/1',\n                    '1.3'   : '/3',\n                    '2.0'   : '/412',\n                    '2.0.2' : '/416',\n                    '2.0.3' : '/417',\n                    '2.0.4' : '/419',\n                    '?'     : '/'\n                }\n            }\n        },\n\n        device : {\n            amazon : {\n                model : {\n                    'Fire Phone' : ['SD', 'KF']\n                }\n            },\n            sprint : {\n                model : {\n                    'Evo Shift 4G' : '7373KT'\n                },\n                vendor : {\n                    'HTC'       : 'APA',\n                    'Sprint'    : 'Sprint'\n                }\n            }\n        },\n\n        os : {\n            windows : {\n                version : {\n                    'ME'        : '4.90',\n                    'NT 3.11'   : 'NT3.51',\n                    'NT 4.0'    : 'NT4.0',\n                    '2000'      : 'NT 5.0',\n                    'XP'        : ['NT 5.1', 'NT 5.2'],\n                    'Vista'     : 'NT 6.0',\n                    '7'         : 'NT 6.1',\n                    '8'         : 'NT 6.2',\n                    '8.1'       : 'NT 6.3',\n                    '10'        : ['NT 6.4', 'NT 10.0'],\n                    'RT'        : 'ARM'\n                }\n            }\n        }\n    };\n\n\n    //////////////\n    // Regex map\n    /////////////\n\n\n    var regexes = {\n\n        browser : [[\n\n            // Presto based\n            /(opera\\smini)\\/([\\w\\.-]+)/i,                                       // Opera Mini\n            /(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i,                      // Opera Mobi/Tablet\n            /(opera).+version\\/([\\w\\.]+)/i,                                     // Opera > 9.80\n            /(opera)[\\/\\s]+([\\w\\.]+)/i                                          // Opera < 9.80\n            ], [NAME, VERSION], [\n\n            /(opios)[\\/\\s]+([\\w\\.]+)/i                                          // Opera mini on iphone >= 8.0\n            ], [[NAME, 'Opera Mini'], VERSION], [\n\n            /\\s(opr)\\/([\\w\\.]+)/i                                               // Opera Webkit\n            ], [[NAME, 'Opera'], VERSION], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]+)*/i,\n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n            // Trident based\n            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,\n                                                                                // Avant/IEMobile/SlimBrowser/Baidu\n            /(?:ms|\\()(ie)\\s([\\w\\.]+)/i,                                        // Internet Explorer\n\n            // Webkit/KHTML based\n            /(rekonq)\\/([\\w\\.]+)*/i,                                            // Rekonq\n            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\\/([\\w\\.-]+)/i\n                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser\n            ], [NAME, VERSION], [\n\n            /(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i                         // IE11\n            ], [[NAME, 'IE'], VERSION], [\n\n            /(edge)\\/((\\d+)?[\\w\\.]+)/i                                          // Microsoft Edge\n            ], [NAME, VERSION], [\n\n            /(yabrowser)\\/([\\w\\.]+)/i                                           // Yandex\n            ], [[NAME, 'Yandex'], VERSION], [\n\n            /(puffin)\\/([\\w\\.]+)/i                                              // Puffin\n            ], [[NAME, 'Puffin'], VERSION], [\n\n            /(uc\\s?browser)[\\/\\s]?([\\w\\.]+)/i,\n            /ucweb.+(ucbrowser)[\\/\\s]?([\\w\\.]+)/i,\n            /juc.+(ucweb)[\\/\\s]?([\\w\\.]+)/i,\n            /(ucbrowser)\\/([\\w\\.]+)/i\n                                                                                // UCBrowser\n            ], [[NAME, 'UCBrowser'], VERSION], [\n\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(micromessenger)\\/([\\w\\.]+)/i                                      // WeChat\n            ], [[NAME, 'WeChat'], VERSION], [\n\n            /m?(qqbrowser)[\\/\\s]?([\\w\\.]+)/i                                    // QQBrowser\n            ], [NAME, VERSION], [\n\n            /xiaomi\\/miuibrowser\\/([\\w\\.]+)/i                                   // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI Browser']], [\n\n            /;fbav\\/([\\w\\.]+);/i                                                // Facebook App for iOS & Android\n            ], [VERSION, [NAME, 'Facebook']], [\n\n            /(headlesschrome) ([\\w\\.]+)/i                                       // Chrome Headless\n            ], [VERSION, [NAME, 'Chrome Headless']], [\n\n            /\\swv\\).+(chrome)\\/([\\w\\.]+)/i                                      // Chrome WebView\n            ], [[NAME, /(.+)/, '$1 WebView'], VERSION], [\n\n            /android.+samsungbrowser\\/([\\w\\.]+)/i,\n            /android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)*/i        // Android Browser\n            ], [VERSION, [NAME, 'Android Browser']], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i\n                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /(dolfin)\\/([\\w\\.]+)/i                                              // Dolphin\n            ], [[NAME, 'Dolphin'], VERSION], [\n\n            /((?:android.+)crmo|crios)\\/([\\w\\.]+)/i                             // Chrome for Android/iOS\n            ], [[NAME, 'Chrome'], VERSION], [\n\n            /(coast)\\/([\\w\\.]+)/i                                               // Opera Coast\n            ], [[NAME, 'Opera Coast'], VERSION], [\n\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, 'Firefox']], [\n\n            /version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                       // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n\n            /version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i                    // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n\n            /webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i                     // Safari < 3.0\n            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [\n\n            /(konqueror)\\/([\\w\\.]+)/i,                                          // Konqueror\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape)\\/([\\w\\.-]+)/i                                 // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\\/([\\w\\.-]+)/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                          // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\n            /(links)\\s\\(([\\w\\.]+)/i,                                            // Links\n            /(gobrowser)\\/?([\\w\\.]+)*/i,                                        // GoBrowser\n            /(ice\\s?browser)\\/v?([\\w\\._]+)/i,                                   // ICE Browser\n            /(mosaic)[\\/\\s]([\\w\\.]+)/i                                          // Mosaic\n            ], [NAME, VERSION]\n\n            /* /////////////////////\n            // Media players BEGIN\n            ////////////////////////\n\n            , [\n\n            /(apple(?:coremedia|))\\/((\\d+)[\\w\\._]+)/i,                          // Generic Apple CoreMedia\n            /(coremedia) v((\\d+)[\\w\\._]+)/i\n            ], [NAME, VERSION], [\n\n            /(aqualung|lyssna|bsplayer)\\/((\\d+)?[\\w\\.-]+)/i                     // Aqualung/Lyssna/BSPlayer\n            ], [NAME, VERSION], [\n\n            /(ares|ossproxy)\\s((\\d+)[\\w\\.-]+)/i                                 // Ares/OSSProxy\n            ], [NAME, VERSION], [\n\n            /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\\/((\\d+)[\\w\\.-]+)/i,\n                                                                                // Audacious/AudiMusicStream/Amarok/BASS/OpenCORE/Dalvik/GnomeMplayer/MoC\n                                                                                // NSPlayer/PSP-InternetRadioPlayer/Videos\n            /(clementine|music player daemon)\\s((\\d+)[\\w\\.-]+)/i,               // Clementine/MPD\n            /(lg player|nexplayer)\\s((\\d+)[\\d\\.]+)/i,\n            /player\\/(nexplayer|lg player)\\s((\\d+)[\\w\\.-]+)/i                   // NexPlayer/LG Player\n            ], [NAME, VERSION], [\n            /(nexplayer)\\s((\\d+)[\\w\\.-]+)/i                                     // Nexplayer\n            ], [NAME, VERSION], [\n\n            /(flrp)\\/((\\d+)[\\w\\.-]+)/i                                          // Flip Player\n            ], [[NAME, 'Flip Player'], VERSION], [\n\n            /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i\n                                                                                // FStream/NativeHost/QuerySeekSpider/IA Archiver/facebookexternalhit\n            ], [NAME], [\n\n            /(gstreamer) souphttpsrc (?:\\([^\\)]+\\)){0,1} libsoup\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // Gstreamer\n            ], [NAME, VERSION], [\n\n            /(htc streaming player)\\s[\\w_]+\\s\\/\\s((\\d+)[\\d\\.]+)/i,              // HTC Streaming Player\n            /(java|python-urllib|python-requests|wget|libcurl)\\/((\\d+)[\\w\\.-_]+)/i,\n                                                                                // Java/urllib/requests/wget/cURL\n            /(lavf)((\\d+)[\\d\\.]+)/i                                             // Lavf (FFMPEG)\n            ], [NAME, VERSION], [\n\n            /(htc_one_s)\\/((\\d+)[\\d\\.]+)/i                                      // HTC One S\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(mplayer)(?:\\s|\\/)(?:(?:sherpya-){0,1}svn)(?:-|\\s)(r\\d+(?:-\\d+[\\w\\.-]+){0,1})/i\n                                                                                // MPlayer SVN\n            ], [NAME, VERSION], [\n\n            /(mplayer)(?:\\s|\\/|[unkow-]+)((\\d+)[\\w\\.-]+)/i                      // MPlayer\n            ], [NAME, VERSION], [\n\n            /(mplayer)/i,                                                       // MPlayer (no other info)\n            /(yourmuze)/i,                                                      // YourMuze\n            /(media player classic|nero showtime)/i                             // Media Player Classic/Nero ShowTime\n            ], [NAME], [\n\n            /(nero (?:home|scout))\\/((\\d+)[\\w\\.-]+)/i                           // Nero Home/Nero Scout\n            ], [NAME, VERSION], [\n\n            /(nokia\\d+)\\/((\\d+)[\\w\\.-]+)/i                                      // Nokia\n            ], [NAME, VERSION], [\n\n            /\\s(songbird)\\/((\\d+)[\\w\\.-]+)/i                                    // Songbird/Philips-Songbird\n            ], [NAME, VERSION], [\n\n            /(winamp)3 version ((\\d+)[\\w\\.-]+)/i,                               // Winamp\n            /(winamp)\\s((\\d+)[\\w\\.-]+)/i,\n            /(winamp)mpeg\\/((\\d+)[\\w\\.-]+)/i\n            ], [NAME, VERSION], [\n\n            /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i  // OCMS-bot/tap in radio/tunein/unknown/winamp (no other info)\n                                                                                // inlight radio\n            ], [NAME], [\n\n            /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // QuickTime/RealMedia/RadioApp/RadioClientApplication/\n                                                                                // SoundTap/Totem/Stagefright/Streamium\n            ], [NAME, VERSION], [\n\n            /(smp)((\\d+)[\\d\\.]+)/i                                              // SMP\n            ], [NAME, VERSION], [\n\n            /(vlc) media player - version ((\\d+)[\\w\\.]+)/i,                     // VLC Videolan\n            /(vlc)\\/((\\d+)[\\w\\.-]+)/i,\n            /(xbmc|gvfs|xine|xmms|irapp)\\/((\\d+)[\\w\\.-]+)/i,                    // XBMC/gvfs/Xine/XMMS/irapp\n            /(foobar2000)\\/((\\d+)[\\d\\.]+)/i,                                    // Foobar2000\n            /(itunes)\\/((\\d+)[\\d\\.]+)/i                                         // iTunes\n            ], [NAME, VERSION], [\n\n            /(wmplayer)\\/((\\d+)[\\w\\.-]+)/i,                                     // Windows Media Player\n            /(windows-media-player)\\/((\\d+)[\\w\\.-]+)/i\n            ], [[NAME, /-/g, ' '], VERSION], [\n\n            /windows\\/((\\d+)[\\w\\.-]+) upnp\\/[\\d\\.]+ dlnadoc\\/[\\d\\.]+ (home media server)/i\n                                                                                // Windows Media Server\n            ], [VERSION, [NAME, 'Windows']], [\n\n            /(com\\.riseupradioalarm)\\/((\\d+)[\\d\\.]*)/i                          // RiseUP Radio Alarm\n            ], [NAME, VERSION], [\n\n            /(rad.io)\\s((\\d+)[\\d\\.]+)/i,                                        // Rad.io\n            /(radio.(?:de|at|fr))\\s((\\d+)[\\d\\.]+)/i\n            ], [[NAME, 'rad.io'], VERSION]\n\n            //////////////////////\n            // Media players END\n            ////////////////////*/\n\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i                     // AMD64\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, util.lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows\\s(ce|mobile);\\sppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i                           // PowerPC\n            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+;))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, util.lowerize]]\n        ],\n\n        device : [[\n\n            /\\((ipad|playbook);[\\w\\s\\);-]+(rim|apple)/i                         // iPad/PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/                                  // iPad\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [\n\n            /(apple\\s{0,1}tv)/i                                                 // Apple TV\n            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [\n\n            /(archos)\\s(gamepad2?)/i,                                           // Archos\n            /(hp).+(touchpad)/i,                                                // HP TouchPad\n            /(hp).+(tablet)/i,                                                  // HP Tablet\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /\\s(nook)[\\w\\s]+build\\/(\\w+)/i,                                     // Nook\n            /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i                                  // Dell Streak\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(kf[A-z]+)\\sbuild\\/[\\w\\.]+.*silk\\//i                               // Kindle Fire HD\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n            /(sd|kf)[0349hijorstuw]+\\sbuild\\/[\\w\\.]+.*silk\\//i                  // Fire Phone\n            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [\n\n            /\\((ip[honed|\\s\\w*]+);.+(apple)/i                                   // iPod/iPhone\n            ], [MODEL, VENDOR, [TYPE, MOBILE]], [\n            /\\((ip[honed|\\s\\w*]+);/i                                            // iPod/iPhone\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [\n\n            /(blackberry)[\\s-]?(\\w+)/i,                                         // BlackBerry\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\\s_-]?([\\w-]+)*/i,\n                                                                                // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Huawei/Meizu/Motorola/Polytron\n            /(hp)\\s([\\w\\s]+\\w)/i,                                               // HP iPAQ\n            /(asus)-?(\\w+)/i                                                    // Asus\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /\\(bb10;\\s(\\w+)/i                                                   // BlackBerry 10\n            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\n                                                                                // Asus Tablets\n            /android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7|padfone)/i\n            ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [\n\n            /(sony)\\s(tablet\\s[ps])\\sbuild\\//i,                                  // Sony\n            /(sony)?(?:sgp.+)\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [\n            /(?:sony)?(?:(?:(?:c|d)\\d{4})|(?:so[-l].+))\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Phone'], [TYPE, MOBILE]], [\n\n            /\\s(ouya)\\s/i,                                                      // Ouya\n            /(nintendo)\\s([wids3u]+)/i                                          // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n\n            /android.+;\\s(shield)\\sbuild/i                                      // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n\n            /(playstation\\s[34portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [\n\n            /(sprint\\s(\\w+))/i                                                  // Sprint Phones\n            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [\n\n            /(lenovo)\\s?(S(?:5000|6000)+(?:[-][\\w+]))/i                         // Lenovo tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(htc)[;_\\s-]+([\\w\\s]+(?=\\))|\\w+)*/i,                               // HTC\n            /(zte)-(\\w+)*/i,                                                    // ZTE\n            /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]+)*/i\n                                                                                // Alcatel/GeeksPhone/Huawei/Lenovo/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            /(nexus\\s9)/i                                                       // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n\n            /(nexus\\s6p)/i                                                      // Huawei Nexus 6P\n            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [\n\n            /(microsoft);\\s(lumia[\\s\\w]+)/i                                     // Microsoft Lumia\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i                                   // Microsoft Xbox\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\n\n                                                                                // Motorola\n            /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?(:?\\s4g)?)[\\w\\s]+build\\//i,\n            /mot[\\s-]?(\\w+)*/i,\n            /(XT\\d{3,4}) build\\//i,\n            /(nexus\\s6)/i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [\n            /android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [\n\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i            // HbbTV devices\n            ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [\n\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [\n\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n\n            /android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n\\d+|sgh-t8[56]9|nexus 10))/i,\n            /((SM-T\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung\n            /smart-tv.+(samsung)/i\n            ], [VENDOR, [TYPE, SMARTTV], MODEL], [\n            /((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-\\w[\\w\\d]+))/i,\n            /(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)*/i,\n            /sec-((sgh\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [\n\n            /sie-(\\w+)*/i                                                       // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n\n            /(maemo|nokia).*(n900|lumia\\s\\d+)/i,                                // Nokia\n            /(nokia)[\\s_-]?([\\w-]+)*/i\n            ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(a\\d{3})/i                                 // Acer\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet\n            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [\n            /(lg) netcast\\.tv/i                                                 // LG SmartTV\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /(nexus\\s[45])/i,                                                   // LG\n            /lg[e;\\s\\/-]+(\\w+)*/i\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [\n\n            /android.+(ideatab[a-z0-9\\-\\s]+)/i                                  // Lenovo\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            /linux;.+((jolla));/i                                               // Jolla\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /((pebble))app\\/[\\d\\.]+\\s/i                                         // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n\n            /android.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i                            // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, 'Chromecast'], [VENDOR, 'Google']], [\n\n            /android.+;\\s(glass)\\s\\d/i                                          // Google Glass\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [\n\n            /android.+;\\s(pixel c)\\s/i                                          // Google Pixel C\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [\n\n            /android.+;\\s(pixel xl|pixel)\\s/i                                   // Google Pixel\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [\n\n            /android.+(\\w+)\\s+build\\/hm\\1/i,                                    // Xiaomi Hongmi 'numeric' models\n            /android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i,               // Xiaomi Hongmi\n            /android.+(mi[\\s\\-_]*(?:one|one[\\s_]plus|note lte)?[\\s_]*(?:\\d\\w)?)\\s+build/i    // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [\n\n            /android.+a000(1)\\s+build/i                                         // OnePlus\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            /\\s(tablet)[;\\/]/i,                                                 // Unidentifiable Tablet\n            /\\s(mobile)(?:[;\\/]|\\ssafari)/i                                     // Unidentifiable Mobile\n            ], [[TYPE, util.lowerize], VENDOR, MODEL]\n\n            /*//////////////////////////\n            // TODO: move to string map\n            ////////////////////////////\n\n            /(C6603)/i                                                          // Sony Xperia Z C6603\n            ], [[MODEL, 'Xperia Z C6603'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n            /(C6903)/i                                                          // Sony Xperia Z 1\n            ], [[MODEL, 'Xperia Z 1'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n            /(SM-G900[F|H])/i                                                   // Samsung Galaxy S5\n            ], [[MODEL, 'Galaxy S5'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G7102)/i                                                       // Samsung Galaxy Grand 2\n            ], [[MODEL, 'Galaxy Grand 2'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G530H)/i                                                       // Samsung Galaxy Grand Prime\n            ], [[MODEL, 'Galaxy Grand Prime'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G313HZ)/i                                                      // Samsung Galaxy V\n            ], [[MODEL, 'Galaxy V'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T805)/i                                                        // Samsung Galaxy Tab S 10.5\n            ], [[MODEL, 'Galaxy Tab S 10.5'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n            /(SM-G800F)/i                                                       // Samsung Galaxy S5 Mini\n            ], [[MODEL, 'Galaxy S5 Mini'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T311)/i                                                        // Samsung Galaxy Tab 3 8.0\n            ], [[MODEL, 'Galaxy Tab 3 8.0'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n\n            /(T3C)/i                                                            // Advan Vandroid T3C\n            ], [MODEL, [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN T1J\\+)/i                                                    // Advan Vandroid T1J+\n            ], [[MODEL, 'Vandroid T1J+'], [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN S4A)/i                                                      // Advan Vandroid S4A\n            ], [[MODEL, 'Vandroid S4A'], [VENDOR, 'Advan'], [TYPE, MOBILE]], [\n\n            /(V972M)/i                                                          // ZTE V972M\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n\n            /(i-mobile)\\s(IQ\\s[\\d\\.]+)/i                                        // i-mobile IQ\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(IQ6.3)/i                                                          // i-mobile IQ IQ 6.3\n            ], [[MODEL, 'IQ 6.3'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n            /(i-mobile)\\s(i-style\\s[\\d\\.]+)/i                                   // i-mobile i-STYLE\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(i-STYLE2.1)/i                                                     // i-mobile i-STYLE 2.1\n            ], [[MODEL, 'i-STYLE 2.1'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n\n            /(mobiistar touch LAI 512)/i                                        // mobiistar touch LAI 512\n            ], [[MODEL, 'Touch LAI 512'], [VENDOR, 'mobiistar'], [TYPE, MOBILE]], [\n\n            /////////////\n            // END TODO\n            ///////////*/\n\n        ],\n\n        engine : [[\n\n            /windows.+\\sedge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, 'EdgeHTML']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i,     // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\n            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]+).*(gecko)/i                                           // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows based\n            /microsoft\\s(windows)\\s(vista|xp)/i                                 // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n            /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s]+\\w)*/i,                  // Windows Phone\n            /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\n            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\n            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n            // Mobile/Embedded OS\n            /\\((bb)(10);/i                                                      // BlackBerry 10\n            ], [[NAME, 'BlackBerry'], VERSION], [\n            /(blackberry)\\w*\\/?([\\w\\.]+)*/i,                                    // Blackberry\n            /(tizen)[\\/\\s]([\\w\\.]+)/i,                                          // Tizen\n            /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|contiki)[\\/\\s-]?([\\w\\.]+)*/i,\n                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki\n            /linux;.+(sailfish);/i                                              // Sailfish OS\n            ], [NAME, VERSION], [\n            /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]+)*/i                 // Symbian\n            ], [[NAME, 'Symbian'], VERSION], [\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME], [\n            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n            ], [[NAME, 'Firefox OS'], VERSION], [\n\n            // Console\n            /(nintendo|playstation)\\s([wids34portablevu]+)/i,                   // Nintendo/Playstation\n\n            // GNU/Linux based\n            /(mint)[\\/\\s\\(]?(\\w+)*/i,                                           // Mint\n            /(mageia|vectorlinux)[;\\s]/i,                                       // Mageia/VectorLinux\n            /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?(?!chrom)([\\w\\.-]+)*/i,\n                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n            /(hurd|linux)\\s?([\\w\\.]+)*/i,                                       // Hurd/Linux\n            /(gnu)\\s?([\\w\\.]+)*/i                                               // GNU\n            ], [NAME, VERSION], [\n\n            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Solaris\n            /(sunos)\\s?([\\w\\.]+\\d)*/i                                           // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n\n            // BSD based\n            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]+)*/i                   // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n            ], [NAME, VERSION],[\n\n            /(haiku)\\s(\\w+)/i                                                  // Haiku\n            ], [NAME, VERSION],[\n\n            /(ip[honead]+)(?:.*os\\s([\\w]+)*\\slike\\smac|;\\sopera)/i              // iOS\n            ], [[NAME, 'iOS'], [VERSION, /_/g, '.']], [\n\n            /(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*/i,\n            /(macintosh|mac(?=_powerpc)\\s)/i                                    // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Other\n            /((?:open)?solaris)[\\/\\s-]?([\\w\\.]+)*/i,                            // Solaris\n            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.]*)*/i,                               // AIX\n            /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms)/i,\n                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS\n            /(unix)\\s?([\\w\\.]+)*/i                                              // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var Browser = function (name, version) {\n        this[NAME] = name;\n        this[VERSION] = version;\n    };\n    var CPU = function (arch) {\n        this[ARCHITECTURE] = arch;\n    };\n    var Device = function (vendor, model, type) {\n        this[VENDOR] = vendor;\n        this[MODEL] = model;\n        this[TYPE] = type;\n    };\n    var Engine = Browser;\n    var OS = Browser;\n\n    var UAParser = function (uastring, extensions) {\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(uastring, extensions).getResult();\n        }\n\n        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n        var browser = new Browser();\n        var cpu = new CPU();\n        var device = new Device();\n        var engine = new Engine();\n        var os = new OS();\n\n        this.getBrowser = function () {\n            mapper.rgx.call(browser, ua, rgxmap.browser);\n            browser.major = util.major(browser.version); // deprecated\n            return browser;\n        };\n        this.getCPU = function () {\n            mapper.rgx.call(cpu, ua, rgxmap.cpu);\n            return cpu;\n        };\n        this.getDevice = function () {\n            mapper.rgx.call(device, ua, rgxmap.device);\n            return device;\n        };\n        this.getEngine = function () {\n            mapper.rgx.call(engine, ua, rgxmap.engine);\n            return engine;\n        };\n        this.getOS = function () {\n            mapper.rgx.call(os, ua, rgxmap.os);\n            return os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return ua;\n        };\n        this.setUA = function (uastring) {\n            ua = uastring;\n            browser = new Browser();\n            cpu = new CPU();\n            device = new Device();\n            engine = new Engine();\n            os = new OS();\n            return this;\n        };\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER = {\n        NAME    : NAME,\n        MAJOR   : MAJOR, // deprecated\n        VERSION : VERSION\n    };\n    UAParser.CPU = {\n        ARCHITECTURE : ARCHITECTURE\n    };\n    UAParser.DEVICE = {\n        MODEL   : MODEL,\n        VENDOR  : VENDOR,\n        TYPE    : TYPE,\n        CONSOLE : CONSOLE,\n        MOBILE  : MOBILE,\n        SMARTTV : SMARTTV,\n        TABLET  : TABLET,\n        WEARABLE: WEARABLE,\n        EMBEDDED: EMBEDDED\n    };\n    UAParser.ENGINE = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    UAParser.OS = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    //UAParser.Utils = util;\n\n    ///////////\n    // Export\n    //////////\n\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (\"function\" === FUNC_TYPE && __webpack_require__(27)) {\n            !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n                return UAParser;\n            }.call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n        } else {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = window.jQuery || window.Zepto;\n    if (typeof $ !== UNDEF_TYPE) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (uastring) {\n            parser.setUA(uastring);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\n/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n/* WEBPACK VAR INJECTION */}.call(exports, {}))\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = __webpack_require__(1);\n\nvar Utils = _interopRequireWildcard(_util);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PosterManager = function () {\n  /**\n   * Poster image URL\n   * @type {string}\n   * @private\n   */\n  function PosterManager() {\n    _classCallCheck(this, PosterManager);\n\n    this._createEl();\n  }\n\n  /**\n   * Set the poster source URL\n   * @param {string} posterUrl - the poster image URL\n   * @public\n   * @returns {void}\n   */\n\n  /**\n   * The poster HTML Div element.\n   * @type {HTMLDivElement}\n   * @private\n   */\n\n\n  _createClass(PosterManager, [{\n    key: \"setSrc\",\n    value: function setSrc(posterUrl) {\n      if (posterUrl) {\n        this._posterUrl = posterUrl;\n        Utils.Dom.setStyle(this._el, \"background-image\", \"url(\\\"\" + this._posterUrl + \"\\\")\");\n      }\n    }\n\n    /**\n     * Get the poster source URL\n     * @public\n     * @returns {string} - the poster image URL\n     */\n\n  }, {\n    key: \"getElement\",\n\n\n    /**\n     * Get the poster HTML Div element\n     * @public\n     * @returns {HTMLDivElement} - Poster HTML Dom element\n     */\n    value: function getElement() {\n      return this._el;\n    }\n\n    /**\n     * Create the HTML Div element of the poster\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"_createEl\",\n    value: function _createEl() {\n      if (!this._el) {\n        var el = this._el = Utils.Dom.createElement(\"div\");\n        Utils.Dom.setAttribute(el, \"id\", Utils.Generator.uniqueId(5));\n        Utils.Dom.setAttribute(el, \"tabindex\", '-1');\n      }\n    }\n\n    /**\n     * Removes the poster element from the dom\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"_removeEl\",\n    value: function _removeEl() {\n      if (this._el) {\n        Utils.Dom.removeChild(this._el.parentNode, this._el);\n      }\n    }\n\n    /**\n     * Show the poster image\n     * @public\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"show\",\n    value: function show() {\n      Utils.Dom.setStyle(this._el, \"display\", \"\");\n    }\n\n    /**\n     * Hide the poster image\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      Utils.Dom.setStyle(this._el, \"display\", \"none\");\n    }\n\n    /**\n     * Resets the poster url and the background image\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._posterUrl = '';\n      Utils.Dom.setStyle(this._el, \"background-image\", '');\n    }\n\n    /**\n     * Destroys the poster element\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.reset();\n      this._removeEl();\n    }\n  }, {\n    key: \"src\",\n    get: function get() {\n      return this._posterUrl;\n    }\n  }]);\n\n  return PosterManager;\n}();\n\nexports.default = PosterManager;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Locale class\n * @class\n *\n */\nvar Locale = function () {\n  function Locale() {\n    _classCallCheck(this, Locale);\n  }\n\n  _createClass(Locale, null, [{\n    key: \"language\",\n\n\n    /**\n     * tries to return the locale language in IOS-693-1 format(two-letter codes, one per language for)\n     * @returns {string} - the IOS-693-1 language string\n     * @static\n     */\n    get: function get() {\n      var lang = void 0;\n\n      if (navigator.languages && navigator.languages.length) {\n        // latest versions of Chrome and Firefox set this correctly\n        lang = navigator.languages[0];\n      } else if (navigator.userLanguage) {\n        // IE only\n        //$FlowFixMe - userLanguage is IE specific and flow doesn't have it in definitions\n        lang = navigator.userLanguage;\n      } else {\n        // latest versions of Chrome, Firefox, and Safari set this correctly\n        lang = navigator.language;\n      }\n\n      if (lang && lang.match(\"-\")) {\n        lang = lang.split(\"-\")[0];\n      }\n\n      return lang;\n    }\n  }]);\n\n  return Locale;\n}();\n\nexports.default = Locale;\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\r\n * js-logger - http://github.com/jonnyreeves/js-logger\r\n * Jonny Reeves, http://jonnyreeves.co.uk/\r\n * js-logger may be freely distributed under the MIT license.\r\n */\r\n(function (global) {\r\n\t\"use strict\";\r\n\r\n\t// Top level module for the global, static logger instance.\r\n\tvar Logger = { };\r\n\r\n\t// For those that are at home that are keeping score.\r\n\tLogger.VERSION = \"1.3.0\";\r\n\r\n\t// Function which handles all incoming log messages.\r\n\tvar logHandler;\r\n\r\n\t// Map of ContextualLogger instances by name; used by Logger.get() to return the same named instance.\r\n\tvar contextualLoggersByNameMap = {};\r\n\r\n\t// Polyfill for ES5's Function.bind.\r\n\tvar bind = function(scope, func) {\r\n\t\treturn function() {\r\n\t\t\treturn func.apply(scope, arguments);\r\n\t\t};\r\n\t};\r\n\r\n\t// Super exciting object merger-matron 9000 adding another 100 bytes to your download.\r\n\tvar merge = function () {\r\n\t\tvar args = arguments, target = args[0], key, i;\r\n\t\tfor (i = 1; i < args.length; i++) {\r\n\t\t\tfor (key in args[i]) {\r\n\t\t\t\tif (!(key in target) && args[i].hasOwnProperty(key)) {\r\n\t\t\t\t\ttarget[key] = args[i][key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t};\r\n\r\n\t// Helper to define a logging level object; helps with optimisation.\r\n\tvar defineLogLevel = function(value, name) {\r\n\t\treturn { value: value, name: name };\r\n\t};\r\n\r\n\t// Predefined logging levels.\r\n\tLogger.DEBUG = defineLogLevel(1, 'DEBUG');\r\n\tLogger.INFO = defineLogLevel(2, 'INFO');\r\n\tLogger.TIME = defineLogLevel(3, 'TIME');\r\n\tLogger.WARN = defineLogLevel(4, 'WARN');\r\n\tLogger.ERROR = defineLogLevel(8, 'ERROR');\r\n\tLogger.OFF = defineLogLevel(99, 'OFF');\r\n\r\n\t// Inner class which performs the bulk of the work; ContextualLogger instances can be configured independently\r\n\t// of each other.\r\n\tvar ContextualLogger = function(defaultContext) {\r\n\t\tthis.context = defaultContext;\r\n\t\tthis.setLevel(defaultContext.filterLevel);\r\n\t\tthis.log = this.info;  // Convenience alias.\r\n\t};\r\n\r\n\tContextualLogger.prototype = {\r\n\t\t// Changes the current logging level for the logging instance.\r\n\t\tsetLevel: function (newLevel) {\r\n\t\t\t// Ensure the supplied Level object looks valid.\r\n\t\t\tif (newLevel && \"value\" in newLevel) {\r\n\t\t\t\tthis.context.filterLevel = newLevel;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Is the logger configured to output messages at the supplied level?\r\n\t\tenabledFor: function (lvl) {\r\n\t\t\tvar filterLevel = this.context.filterLevel;\r\n\t\t\treturn lvl.value >= filterLevel.value;\r\n\t\t},\r\n\r\n\t\tdebug: function () {\r\n\t\t\tthis.invoke(Logger.DEBUG, arguments);\r\n\t\t},\r\n\r\n\t\tinfo: function () {\r\n\t\t\tthis.invoke(Logger.INFO, arguments);\r\n\t\t},\r\n\r\n\t\twarn: function () {\r\n\t\t\tthis.invoke(Logger.WARN, arguments);\r\n\t\t},\r\n\r\n\t\terror: function () {\r\n\t\t\tthis.invoke(Logger.ERROR, arguments);\r\n\t\t},\r\n\r\n\t\ttime: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'start' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttimeEnd: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'end' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Invokes the logger callback if it's not being filtered.\r\n\t\tinvoke: function (level, msgArgs) {\r\n\t\t\tif (logHandler && this.enabledFor(level)) {\r\n\t\t\t\tlogHandler(msgArgs, merge({ level: level }, this.context));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Protected instance which all calls to the to level `Logger` module will be routed through.\r\n\tvar globalLogger = new ContextualLogger({ filterLevel: Logger.OFF });\r\n\r\n\t// Configure the global Logger instance.\r\n\t(function() {\r\n\t\t// Shortcut for optimisers.\r\n\t\tvar L = Logger;\r\n\r\n\t\tL.enabledFor = bind(globalLogger, globalLogger.enabledFor);\r\n\t\tL.debug = bind(globalLogger, globalLogger.debug);\r\n\t\tL.time = bind(globalLogger, globalLogger.time);\r\n\t\tL.timeEnd = bind(globalLogger, globalLogger.timeEnd);\r\n\t\tL.info = bind(globalLogger, globalLogger.info);\r\n\t\tL.warn = bind(globalLogger, globalLogger.warn);\r\n\t\tL.error = bind(globalLogger, globalLogger.error);\r\n\r\n\t\t// Don't forget the convenience alias!\r\n\t\tL.log = L.info;\r\n\t}());\r\n\r\n\t// Set the global logging handler.  The supplied function should expect two arguments, the first being an arguments\r\n\t// object with the supplied log messages and the second being a context object which contains a hash of stateful\r\n\t// parameters which the logging function can consume.\r\n\tLogger.setHandler = function (func) {\r\n\t\tlogHandler = func;\r\n\t};\r\n\r\n\t// Sets the global logging filter level which applies to *all* previously registered, and future Logger instances.\r\n\t// (note that named loggers (retrieved via `Logger.get`) can be configured independently if required).\r\n\tLogger.setLevel = function(level) {\r\n\t\t// Set the globalLogger's level.\r\n\t\tglobalLogger.setLevel(level);\r\n\r\n\t\t// Apply this level to all registered contextual loggers.\r\n\t\tfor (var key in contextualLoggersByNameMap) {\r\n\t\t\tif (contextualLoggersByNameMap.hasOwnProperty(key)) {\r\n\t\t\t\tcontextualLoggersByNameMap[key].setLevel(level);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Retrieve a ContextualLogger instance.  Note that named loggers automatically inherit the global logger's level,\r\n\t// default context and log handler.\r\n\tLogger.get = function (name) {\r\n\t\t// All logger instances are cached so they can be configured ahead of use.\r\n\t\treturn contextualLoggersByNameMap[name] ||\r\n\t\t\t(contextualLoggersByNameMap[name] = new ContextualLogger(merge({ name: name }, globalLogger.context)));\r\n\t};\r\n\r\n\t// CreateDefaultHandler returns a handler function which can be passed to `Logger.setHandler()` which will\r\n\t// write to the window's console object (if present); the optional options object can be used to customise the\r\n\t// formatter used to format each log message.\r\n\tLogger.createDefaultHandler = function (options) {\r\n\t\toptions = options || {};\r\n\r\n\t\toptions.formatter = options.formatter || function defaultMessageFormatter(messages, context) {\r\n\t\t\t// Prepend the logger's name to the log message for easy identification.\r\n\t\t\tif (context.name) {\r\n\t\t\t\tmessages.unshift(\"[\" + context.name + \"]\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Map of timestamps by timer labels used to track `#time` and `#timeEnd()` invocations in environments\r\n\t\t// that don't offer a native console method.\r\n\t\tvar timerStartTimeByLabelMap = {};\r\n\r\n\t\t// Support for IE8+ (and other, slightly more sane environments)\r\n\t\tvar invokeConsoleMethod = function (hdlr, messages) {\r\n\t\t\tFunction.prototype.apply.call(hdlr, console, messages);\r\n\t\t};\r\n\r\n\t\t// Check for the presence of a logger.\r\n\t\tif (typeof console === \"undefined\") {\r\n\t\t\treturn function () { /* no console */ };\r\n\t\t}\r\n\r\n\t\treturn function(messages, context) {\r\n\t\t\t// Convert arguments object to Array.\r\n\t\t\tmessages = Array.prototype.slice.call(messages);\r\n\r\n\t\t\tvar hdlr = console.log;\r\n\t\t\tvar timerLabel;\r\n\r\n\t\t\tif (context.level === Logger.TIME) {\r\n\t\t\t\ttimerLabel = (context.name ? '[' + context.name + '] ' : '') + messages[0];\r\n\r\n\t\t\t\tif (messages[1] === 'start') {\r\n\t\t\t\t\tif (console.time) {\r\n\t\t\t\t\t\tconsole.time(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttimerStartTimeByLabelMap[timerLabel] = new Date().getTime();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (console.timeEnd) {\r\n\t\t\t\t\t\tconsole.timeEnd(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tinvokeConsoleMethod(hdlr, [ timerLabel + ': ' +\r\n\t\t\t\t\t\t\t(new Date().getTime() - timerStartTimeByLabelMap[timerLabel]) + 'ms' ]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Delegate through to custom warn/error loggers if present on the console.\r\n\t\t\t\tif (context.level === Logger.WARN && console.warn) {\r\n\t\t\t\t\thdlr = console.warn;\r\n\t\t\t\t} else if (context.level === Logger.ERROR && console.error) {\r\n\t\t\t\t\thdlr = console.error;\r\n\t\t\t\t} else if (context.level === Logger.INFO && console.info) {\r\n\t\t\t\t\thdlr = console.info;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.formatter(messages, context);\r\n\t\t\t\tinvokeConsoleMethod(hdlr, messages);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// Configure and example a Default implementation which writes to the `window.console` (if present).  The\r\n\t// `options` hash can be used to configure the default logLevel and provide a custom message formatter.\r\n\tLogger.useDefaults = function(options) {\r\n\t\tLogger.setLevel(options && options.defaultLevel || Logger.DEBUG);\r\n\t\tLogger.setHandler(Logger.createDefaultHandler(options));\r\n\t};\r\n\r\n\t// Export to popular environments boilerplate.\r\n\tif (true) {\r\n\t\t!(__WEBPACK_AMD_DEFINE_FACTORY__ = (Logger),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t}\r\n\telse if (typeof module !== 'undefined' && module.exports) {\r\n\t\tmodule.exports = Logger;\r\n\t}\r\n\telse {\r\n\t\tLogger._prevLogger = global.Logger;\r\n\r\n\t\tLogger.noConflict = function () {\r\n\t\t\tglobal.Logger = Logger._prevLogger;\r\n\t\t\treturn Logger;\r\n\t\t};\r\n\r\n\t\tglobal.Logger = Logger;\r\n\t}\r\n}(this));\r\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _fakeEventTarget = __webpack_require__(13);\n\nvar _fakeEventTarget2 = _interopRequireDefault(_fakeEventTarget);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _eventManager = __webpack_require__(4);\n\nvar _eventManager2 = _interopRequireDefault(_eventManager);\n\nvar _events = __webpack_require__(5);\n\nvar _mediaSourceProvider = __webpack_require__(17);\n\nvar _mediaSourceProvider2 = _interopRequireDefault(_mediaSourceProvider);\n\nvar _videoTrack = __webpack_require__(6);\n\nvar _videoTrack2 = _interopRequireDefault(_videoTrack);\n\nvar _audioTrack = __webpack_require__(7);\n\nvar _audioTrack2 = _interopRequireDefault(_audioTrack);\n\nvar _textTrack = __webpack_require__(8);\n\nvar _vttCue = __webpack_require__(21);\n\nvar _util = __webpack_require__(1);\n\nvar Utils = _interopRequireWildcard(_util);\n\nvar _html5Autoplay = __webpack_require__(36);\n\nvar _html5Autoplay2 = _interopRequireDefault(_html5Autoplay);\n\nvar _html5IsSupported = __webpack_require__(38);\n\nvar _html5IsSupported2 = _interopRequireDefault(_html5IsSupported);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Html5 engine for playback.\n * @classdesc\n */\nvar Html5 = function (_FakeEventTarget) {\n  _inherits(Html5, _FakeEventTarget);\n\n  _createClass(Html5, null, [{\n    key: 'createEngine',\n\n\n    /**\n     * Factory method to create an engine.\n     * @param {Source} source - The selected source object.\n     * @param {Object} config - The player configuration.\n     * @returns {IEngine} - New instance of the run time engine.\n     * @public\n     * @static\n     */\n\n\n    /**\n     * The html5 capabilities handlers.\n     * @private\n     * @static\n     */\n\n    /**\n     * Promise to indicate when a media source adapter can be loaded.\n     * @type {Promise<*>}\n     * @private\n     */\n\n    /**\n     * The player config object.\n     * @type {Object}\n     * @private\n     */\n\n    /**\n     * The event manager of the engine.\n     * @type {EventManager}\n     * @private\n     */\n    value: function createEngine(source, config) {\n      return new this(source, config);\n    }\n\n    /**\n     * Checks if the engine can play a given source.\n     * @param {Source} source - The source object to check.\n     * @param {boolean} preferNative - prefer native flag\n     * @returns {boolean} - Whether the engine can play the source.\n     * @public\n     * @static\n     */\n\n\n    /**\n     * @type {string} - The engine id.\n     * @public\n     * @static\n     */\n\n    /**\n     * Flag to indicate first time text track cue change.\n     * @type {Object<number, boolean>}\n     * @private\n     */\n\n    /**\n     * The selected media source adapter of the engine.\n     * @type {?IMediaSourceAdapter}\n     * @private\n     */\n\n    /**\n     * The video element.\n     * @type {HTMLVideoElement}\n     * @private\n     */\n\n  }, {\n    key: 'canPlaySource',\n    value: function canPlaySource(source, preferNative) {\n      return _mediaSourceProvider2.default.canPlaySource(source, preferNative);\n    }\n\n    /**\n     * Runs the html5 capabilities tests.\n     * @returns {void}\n     * @public\n     * @static\n     */\n\n  }, {\n    key: 'runCapabilities',\n    value: function runCapabilities() {\n      Html5._capabilities.forEach(function (capability) {\n        return capability.runCapability();\n      });\n    }\n\n    /**\n     * Gets the html5 capabilities.\n     * @return {Promise<Object>} - The html5 capabilities object.\n     * @public\n     * @static\n     */\n\n  }, {\n    key: 'getCapabilities',\n    value: function getCapabilities() {\n      var promises = [];\n      Html5._capabilities.forEach(function (capability) {\n        return promises.push(capability.getCapability());\n      });\n      return Promise.all(promises).then(function (arrayOfResults) {\n        var mergedResults = {};\n        arrayOfResults.forEach(function (res) {\n          return Object.assign(mergedResults, res);\n        });\n        return _defineProperty({}, Html5.id, mergedResults);\n      });\n    }\n\n    /**\n     * @constructor\n     * @param {Source} source - The selected source object.\n     * @param {Object} config - The player configuration.\n     */\n\n  }]);\n\n  function Html5(source, config) {\n    _classCallCheck(this, Html5);\n\n    var _this = _possibleConstructorReturn(this, (Html5.__proto__ || Object.getPrototypeOf(Html5)).call(this));\n\n    _this._showTextTrackFirstTime = {};\n\n    _this._eventManager = new _eventManager2.default();\n    _this._createVideoElement();\n    _this._init(source, config);\n    return _this;\n  }\n\n  /**\n   * Restores the engine.\n   * @param {Source} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {void}\n   */\n\n\n  _createClass(Html5, [{\n    key: 'restore',\n    value: function restore(source, config) {\n      this.detach();\n      this._eventManager.removeAll();\n      if (this._el) {\n        Utils.Dom.removeAttribute(this._el, 'src');\n      }\n      this._init(source, config);\n    }\n\n    /**\n     * Destroys the engine.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.detach();\n      if (this._el) {\n        this.pause();\n        Utils.Dom.removeAttribute(this._el, 'src');\n        Utils.Dom.removeChild(this._el.parentNode, this._el);\n      }\n      this._showTextTrackFirstTime = {};\n      this._eventManager.destroy();\n      _mediaSourceProvider2.default.destroy();\n      this._mediaSourceAdapter = null;\n    }\n\n    /**\n     * Get the engine's id\n     * @public\n     * @returns {string} the engine's id\n     */\n\n  }, {\n    key: 'attach',\n\n\n    /**\n     * Listen to the video element events and triggers them from the engine.\n     * @public\n     * @returns {void}\n     */\n    value: function attach() {\n      var _this2 = this;\n\n      Object.keys(_events.HTML5_EVENTS).forEach(function (html5Event) {\n        _this2._eventManager.listen(_this2._el, _events.HTML5_EVENTS[html5Event], function () {\n          _this2.dispatchEvent(new _fakeEvent2.default(_events.HTML5_EVENTS[html5Event]));\n        });\n      });\n      if (this._mediaSourceAdapter) {\n        this._eventManager.listen(this._mediaSourceAdapter, _events.CUSTOM_EVENTS.VIDEO_TRACK_CHANGED, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _events.CUSTOM_EVENTS.AUDIO_TRACK_CHANGED, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _events.CUSTOM_EVENTS.TEXT_TRACK_CHANGED, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _events.CUSTOM_EVENTS.ABR_MODE_CHANGED, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _events.CUSTOM_EVENTS.TEXT_CUE_CHANGED, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n      }\n    }\n\n    /**\n     * Remove the listeners of the video element events.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'detach',\n    value: function detach() {\n      var _this3 = this;\n\n      Object.keys(_events.HTML5_EVENTS).forEach(function (html5Event) {\n        _this3._eventManager.unlisten(_this3._el, _events.HTML5_EVENTS[html5Event]);\n      });\n      if (this._mediaSourceAdapter) {\n        this._eventManager.unlisten(this._mediaSourceAdapter, _events.CUSTOM_EVENTS.VIDEO_TRACK_CHANGED);\n        this._eventManager.unlisten(this._mediaSourceAdapter, _events.CUSTOM_EVENTS.AUDIO_TRACK_CHANGED);\n        this._eventManager.unlisten(this._mediaSourceAdapter, _events.CUSTOM_EVENTS.TEXT_TRACK_CHANGED);\n        this._eventManager.unlisten(this._mediaSourceAdapter, _events.CUSTOM_EVENTS.TEXT_CUE_CHANGED);\n      }\n    }\n\n    /**\n     * @returns {HTMLVideoElement} - The video element.\n     * @public\n     */\n\n  }, {\n    key: 'getVideoElement',\n    value: function getVideoElement() {\n      return this._el;\n    }\n\n    /**\n     * Select a new video track.\n     * @param {VideoTrack} videoTrack - The video track object to set.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'selectVideoTrack',\n    value: function selectVideoTrack(videoTrack) {\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.selectVideoTrack(videoTrack);\n      }\n    }\n\n    /**\n     * Select a new audio track.\n     * @param {AudioTrack} audioTrack - The video track object to set.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'selectAudioTrack',\n    value: function selectAudioTrack(audioTrack) {\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.selectAudioTrack(audioTrack);\n      }\n    }\n\n    /**\n     * Select a new text track.\n     * @param {PKTextTrack} textTrack - The playkit text track object to set.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'selectTextTrack',\n    value: function selectTextTrack(textTrack) {\n      this._removeCueChangeListener();\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.selectTextTrack(textTrack);\n      }\n      this._addCueChangeListener(textTrack);\n    }\n\n    /**\n     * Hide the text track\n     * @function hideTextTrack\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'hideTextTrack',\n    value: function hideTextTrack() {\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.hideTextTrack();\n      }\n      this._removeCueChangeListener();\n    }\n\n    /**\n     * Enables adaptive bitrate switching according to the media source extension logic.\n     * @function enableAdaptiveBitrate\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'enableAdaptiveBitrate',\n    value: function enableAdaptiveBitrate() {\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.enableAdaptiveBitrate();\n      }\n    }\n\n    /**\n     * Checking if adaptive bitrate switching is enabled.\n     * @function isAdaptiveBitrateEnabled\n     * @returns {boolean} - Whether adaptive bitrate is enabled.\n     * @public\n     */\n\n  }, {\n    key: 'isAdaptiveBitrateEnabled',\n    value: function isAdaptiveBitrateEnabled() {\n      if (this._mediaSourceAdapter) {\n        return this._mediaSourceAdapter.isAdaptiveBitrateEnabled();\n      }\n      return false;\n    }\n\n    /**\n     * Seeking to live edge.\n     * @function seekToLiveEdge\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'seekToLiveEdge',\n    value: function seekToLiveEdge() {\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.seekToLiveEdge();\n      }\n    }\n\n    /**\n     * Checking if the current playback is live.\n     * @function isLive\n     * @returns {boolean} - Whether playback is live.\n     * @public\n     */\n\n  }, {\n    key: 'isLive',\n    value: function isLive() {\n      return this._mediaSourceAdapter ? this._mediaSourceAdapter.isLive() : false;\n    }\n\n    /**\n     * Start/resume playback.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'play',\n    value: function play() {\n      var _this4 = this;\n\n      var playPromise = this._el.play();\n      if (playPromise) {\n        playPromise.catch(function () {\n          return _this4.dispatchEvent(new _fakeEvent2.default(_events.CUSTOM_EVENTS.AUTOPLAY_FAILED));\n        });\n      }\n    }\n\n    /**\n     * Pause playback.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'pause',\n    value: function pause() {\n      return this._el.pause();\n    }\n\n    /**\n     * Load media.\n     * @param {number} startTime - Optional time to start the video from.\n     * @public\n     * @returns {Promise<Object>} - The loaded data\n     */\n\n  }, {\n    key: 'load',\n    value: function load(startTime) {\n      var _this5 = this;\n\n      this._el.load();\n      return this._canLoadMediaSourceAdapterPromise.then(function () {\n        if (_this5._mediaSourceAdapter) {\n          return _this5._mediaSourceAdapter.load(startTime);\n        }\n        return Promise.resolve({});\n      });\n    }\n\n    /**\n     * Set a source.\n     * @param {string} source - Source to set.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'ready',\n    value: function ready() {}\n\n    /**\n     * Get paused state.\n     * @returns {boolean} - The paused value of the video element.\n     * @public\n     */\n\n  }, {\n    key: '_init',\n\n\n    /**\n     * Initializes the engine.\n     * @param {Source} source - The selected source object.\n     * @param {Object} config - The player configuration.\n     * @private\n     * @returns {void}\n     */\n    value: function _init(source, config) {\n      this._config = config;\n      this._canLoadMediaSourceAdapterPromise = this._mediaSourceAdapter ? this._mediaSourceAdapter.destroy() : Promise.resolve();\n      this._mediaSourceAdapter = null;\n      this._loadMediaSourceAdapter(source);\n      this.attach();\n    }\n\n    /**\n     * Creates a video element dom object.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_createVideoElement',\n    value: function _createVideoElement() {\n      this._el = Utils.Dom.createElement(\"video\");\n      this._el.id = Utils.Generator.uniqueId(5);\n      this._el.controls = false;\n    }\n\n    /**\n     * Loads the appropriate media source extension adapter.\n     * @param {Source} source - The selected source object.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_loadMediaSourceAdapter',\n    value: function _loadMediaSourceAdapter(source) {\n      this._mediaSourceAdapter = _mediaSourceProvider2.default.getMediaSourceAdapter(this.getVideoElement(), source, this._config);\n    }\n\n    /**\n     * Add cuechange listener to active textTrack.\n     * @param {PKTextTrack} textTrack - The playkit text track object to set.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_addCueChangeListener',\n    value: function _addCueChangeListener(textTrack) {\n      var _this6 = this;\n\n      var textTrackEl = this._getSelectedTextTrackElement();\n      if (textTrackEl) {\n        /*\n         There's a quirk in TextTrackAPI that a text track added to video element will not fire cuechange event if it\n         didn't have it's mode set to showing for at least until a single cue has been change.\n         After first time it seems there's time tracking which allows the cuechange to fire even though the track mode\n         is set to hidden\n         This is not the case with a track DOM element added to a video element where cuechange will be fired even if\n         track mode is set only to hidden and was never set to showing\n         */\n        if (this._config.playback.useNativeTextTrack) {\n          textTrackEl.mode = \"showing\";\n        } else {\n          textTrackEl.mode = this._showTextTrackFirstTime[textTrack.index] ? \"hidden\" : \"showing\";\n          this._showTextTrackFirstTime[textTrack.index] = true;\n          textTrackEl.oncuechange = function (e) {\n            return _this6._onCueChange(e);\n          };\n        }\n      }\n    }\n\n    /**\n     * Remove cuechange listener to active textTrack\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_removeCueChangeListener',\n    value: function _removeCueChangeListener() {\n      var textTrackEl = this._getSelectedTextTrackElement();\n      if (textTrackEl) {\n        textTrackEl.oncuechange = null;\n      }\n    }\n\n    /**\n     * oncuechange event handler.\n     * @param {FakeEvent} e - The event arg.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_onCueChange',\n    value: function _onCueChange(e) {\n      var textTrack = e.currentTarget;\n      var activeCues = [];\n      textTrack.mode = 'hidden';\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = textTrack.activeCues[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var cue = _step.value;\n\n          //Normalize cues to be of type of VTT model\n          if (window.VTTCue && cue instanceof window.VTTCue) {\n            activeCues.push(cue);\n          } else if (window.TextTrackCue && cue instanceof window.TextTrackCue) {\n            activeCues.push(new _vttCue.Cue(cue.startTime, cue.endTime, cue.text));\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.dispatchEvent(new _fakeEvent2.default(_events.CUSTOM_EVENTS.TEXT_CUE_CHANGED, { cues: activeCues }));\n    }\n\n    /**\n     * Get currently selected text track\n     * @returns {?TextTrack} - returns the active text track element if available\n     * @private\n     */\n\n  }, {\n    key: '_getSelectedTextTrackElement',\n    value: function _getSelectedTextTrackElement() {\n      var textTracks = this._el.textTracks;\n      for (var track in textTracks) {\n        if (textTracks.hasOwnProperty(track)) {\n          var textTrack = textTracks[parseInt(track)];\n          if (textTrack && textTrack.mode !== \"disabled\") {\n            return textTrack;\n          }\n        }\n      }\n      return null;\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return Html5.id;\n    }\n  }, {\n    key: 'src',\n    set: function set(source) {\n      this._el.src = source;\n    }\n\n    /**\n     * Get the source url.\n     * @returns {string} - The source url.\n     * @public\n     */\n    ,\n    get: function get() {\n      if (this._mediaSourceAdapter) {\n        return this._mediaSourceAdapter.src;\n      }\n      return \"\";\n    }\n\n    /**\n     * Get the current time in seconds.\n     * @returns {Number} - The current playback time.\n     * @public\n     */\n\n  }, {\n    key: 'currentTime',\n    get: function get() {\n      return this._mediaSourceAdapter ? this._mediaSourceAdapter.currentTime : 0;\n    }\n\n    /**\n     * Set the current time in seconds.\n     * @param {Number} to - The number to set in seconds.\n     * @public\n     * @returns {void}\n     */\n    ,\n    set: function set(to) {\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.currentTime = to;\n      }\n    }\n\n    /**\n     * Get the duration in seconds.\n     * @returns {Number} - The playback duration.\n     * @public\n     */\n\n  }, {\n    key: 'duration',\n    get: function get() {\n      return this._mediaSourceAdapter ? this._mediaSourceAdapter.duration : NaN;\n    }\n\n    /**\n     * Set playback volume.\n     * @param {Number} vol - The volume to set.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'volume',\n    set: function set(vol) {\n      this._el.volume = vol;\n    }\n\n    /**\n     * Get playback volume.\n     * @returns {Number} - The volume value of the video element.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.volume;\n    }\n  }, {\n    key: 'paused',\n    get: function get() {\n      return this._el.paused;\n    }\n\n    /**\n     * Get seeking state.\n     * @returns {boolean} - The seeking value of the video element.\n     * @public\n     */\n\n  }, {\n    key: 'seeking',\n    get: function get() {\n      return this._el.seeking;\n    }\n\n    /**\n     * Get the first seekable range (part) of the video in seconds.\n     * @returns {TimeRanges} - First seekable range (part) of the video in seconds.\n     * @public\n     */\n\n  }, {\n    key: 'seekable',\n    get: function get() {\n      return this._el.seekable;\n    }\n\n    /**\n     * Get the first played range (part) of the video in seconds.\n     * @returns {TimeRanges} - First played range (part) of the video in seconds.\n     * @public\n     */\n\n  }, {\n    key: 'played',\n    get: function get() {\n      return this._el.played;\n    }\n\n    /**\n     * Get the first buffered range (part) of the video in seconds.\n     * @returns {TimeRanges} - First buffered range (part) of the video in seconds.\n     * @public\n     */\n\n  }, {\n    key: 'buffered',\n    get: function get() {\n      return this._el.buffered;\n    }\n\n    /**\n     * Set player muted state.\n     * @param {boolean} mute - The new mute value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'muted',\n    set: function set(mute) {\n      this._el.muted = mute;\n    }\n\n    /**\n     * Get player muted state.\n     * @returns {boolean} - The muted value of the video element.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.muted;\n    }\n\n    /**\n     * Get the default mute value.\n     * @returns {boolean} - The defaultMuted of the video element.\n     * @public\n     */\n\n  }, {\n    key: 'defaultMuted',\n    get: function get() {\n      return this._el.defaultMuted;\n    }\n\n    /**\n     * Sets an image to be shown while the video is downloading, or until the user hits the play button.\n     * @param {string} poster - The image url to be shown.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'poster',\n    set: function set(poster) {\n      this._el.poster = poster;\n    }\n\n    /**\n     * Gets an image to be shown while the video is downloading, or until the user hits the play button.\n     * @returns {poster} - The image url.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.poster;\n    }\n\n    /**\n     * Specifies if and how the author thinks that the video should be loaded when the page loads.\n     * @param {string} preload - The preload value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'preload',\n    set: function set(preload) {\n      this._el.preload = preload;\n    }\n\n    /**\n     * Gets the preload value of the video element.\n     * @returns {string} - The preload value.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.preload;\n    }\n\n    /**\n     * Set if the video will automatically start playing as soon as it can do so without stopping.\n     * @param {boolean} autoplay - The autoplay value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'autoplay',\n    set: function set(autoplay) {\n      this._el.autoplay = autoplay;\n    }\n\n    /**\n     * Gets the autoplay value of the video element.\n     * @returns {boolean} - The autoplay value.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.autoplay;\n    }\n\n    /**\n     * Set to specifies that the video will start over again, every time it is finished.\n     * @param {boolean} loop - the loop value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'loop',\n    set: function set(loop) {\n      this._el.loop = loop;\n    }\n\n    /**\n     * Gets the loop value of the video element.\n     * @returns {boolean} - The loop value.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.loop;\n    }\n\n    /**\n     * Set to specifies that video controls should be displayed.\n     * @param {boolean} controls - the controls value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'controls',\n    set: function set(controls) {\n      this._el.controls = controls;\n    }\n\n    /**\n     * Gets the controls value of the video element.\n     * @returns {boolean} - The controls value.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.controls;\n    }\n\n    /**\n     * Sets the current playback speed of the audio/video.\n     * @param {Number} playbackRate - The playback speed value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'playbackRate',\n    set: function set(playbackRate) {\n      this._el.playbackRate = playbackRate;\n    }\n\n    /**\n     * Gets the current playback speed of the audio/video.\n     * @returns {Number} - The current playback speed value.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.playbackRate;\n    }\n\n    /**\n     * Sets the default playback speed of the audio/video.\n     * @param {Number} defaultPlaybackRate - The default playback speed value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'defaultPlaybackRate',\n    set: function set(defaultPlaybackRate) {\n      this._el.defaultPlaybackRate = defaultPlaybackRate;\n    }\n\n    /**\n     * Gets the default playback speed of the audio/video.\n     * @returns {Number} - The default playback speed value.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.defaultPlaybackRate;\n    }\n\n    /**\n     * The ended property returns whether the playback of the audio/video has ended.\n     * @returns {boolean} - The ended value.\n     * @public\n     */\n\n  }, {\n    key: 'ended',\n    get: function get() {\n      return this._el.ended;\n    }\n\n    /**\n     * The error property returns a MediaError object.\n     * @returns {MediaError} - The MediaError object has a code property containing the error state of the audio/video.\n     * @public\n     */\n\n  }, {\n    key: 'error',\n    get: function get() {\n      return this._el.error;\n    }\n\n    /**\n     * @returns {Number} - The current network state (activity) of the audio/video.\n     * @public\n     */\n\n  }, {\n    key: 'networkState',\n    get: function get() {\n      return this._el.networkState;\n    }\n\n    /**\n     * Indicates if the audio/video is ready to play or not.\n     * @returns {Number} - The current ready state of the audio/video.\n     * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready.\n     * 1 = HAVE_METADATA - metadata for the audio/video is ready.\n     * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond.\n     * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available.\n     * 4 = HAVE_ENOUGH_DATA - enough data available to start playing.\n     */\n\n  }, {\n    key: 'readyState',\n    get: function get() {\n      return this._el.readyState;\n    }\n\n    /**\n     * @returns {Number} - The height of the video player, in pixels.\n     * @public\n     */\n\n  }, {\n    key: 'videoHeight',\n    get: function get() {\n      return this._el.videoHeight;\n    }\n\n    /**\n     * @returns {Number} - The width of the video player, in pixels.\n     * @public\n     */\n\n  }, {\n    key: 'videoWidth',\n    get: function get() {\n      return this._el.videoWidth;\n    }\n\n    /**\n     * @param {boolean} playsinline - Whether to set on the video tag the playsinline attribute.\n     */\n\n  }, {\n    key: 'playsinline',\n    set: function set(playsinline) {\n      if (playsinline) {\n        this._el.setAttribute('playsinline', '');\n      } else {\n        this._el.removeAttribute('playsinline');\n      }\n    }\n\n    /**\n     * @returns {boolean} - Whether the video tag has an attribute of playsinline.\n     */\n    ,\n    get: function get() {\n      return this._el.getAttribute('playsinline') === '';\n    }\n  }]);\n\n  return Html5;\n}(_fakeEventTarget2.default);\n\nHtml5._capabilities = [_html5Autoplay2.default, _html5IsSupported2.default];\nHtml5.id = \"html5\";\nexports.default = Html5;\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _eventManager = __webpack_require__(4);\n\nvar _eventManager2 = _interopRequireDefault(_eventManager);\n\nvar _events = __webpack_require__(5);\n\nvar _track = __webpack_require__(3);\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _videoTrack = __webpack_require__(6);\n\nvar _videoTrack2 = _interopRequireDefault(_videoTrack);\n\nvar _audioTrack = __webpack_require__(7);\n\nvar _audioTrack2 = _interopRequireDefault(_audioTrack);\n\nvar _textTrack = __webpack_require__(8);\n\nvar _baseMediaSourceAdapter = __webpack_require__(18);\n\nvar _baseMediaSourceAdapter2 = _interopRequireDefault(_baseMediaSourceAdapter);\n\nvar _resolution = __webpack_require__(33);\n\nvar _util = __webpack_require__(1);\n\nvar Utils = _interopRequireWildcard(_util);\n\nvar _fairplay = __webpack_require__(34);\n\nvar _fairplay2 = _interopRequireDefault(_fairplay);\n\nvar _env = __webpack_require__(10);\n\nvar _env2 = _interopRequireDefault(_env);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * An illustration of media source extension for progressive download\n * @classdesc\n * @implements {IMediaSourceAdapter}\n */\nvar NativeAdapter = function (_BaseMediaSourceAdapt) {\n  _inherits(NativeAdapter, _BaseMediaSourceAdapt);\n\n  _createClass(NativeAdapter, null, [{\n    key: 'canPlayType',\n\n\n    /**\n     * Checks if NativeAdapter can play a given mime type.\n     * @function canPlayType\n     * @param {string} mimeType - The mime type to check\n     * @returns {boolean} - Whether the native adapter can play a specific mime type\n     * @static\n     */\n\n    /**\n     * The event manager of the class.\n     * @member {EventManager} - _eventManager\n     * @type {EventManager}\n     * @private\n     */\n\n    /**\n     * The load promise\n     * @member {Promise<Object>} - _loadPromise\n     * @type {Promise<Object>}\n     * @private\n     */\n\n    /**\n     * The original progressive sources\n     * @member {Array<Object>} - _progressiveSources\n     * @private\n     */\n\n    /**\n     * The DRM protocols implementations for native adapter.\n     * @type {Array<Function>}\n     * @private\n     * @static\n     */\n\n\n    /**\n     * The adapter logger\n     * @member {any} _logger\n     * @private\n     * @static\n     */\n    value: function canPlayType(mimeType) {\n      var canPlayType = false;\n      if (typeof mimeType === 'string') {\n        canPlayType = !!NativeAdapter.TEST_VIDEO.canPlayType(mimeType.toLowerCase());\n      }\n      NativeAdapter._logger.debug('canPlayType result for mimeType:' + mimeType + ' is ' + canPlayType.toString());\n      return canPlayType;\n    }\n\n    /**\n     * Checks if NativeAdapter can play a given drm data.\n     * @function canPlayDrm\n     * @param {Array<Object>} drmData - The drm data to check.\n     * @returns {boolean} - Whether the native adapter can play a specific drm data.\n     * @static\n     */\n\n    /**\n     * The DRM protocol for the current playback.\n     * @type {?Function}\n     * @private\n     * @static\n     */\n\n    /**\n     * static video element for canPlayType testing\n     * @member {} TEST_VIDEO\n     * @type {HTMLVideoElement}\n     * @static\n     */\n\n    /**\n     * The id of the Adapter\n     * @member {string} id\n     * @static\n     * @public\n     */\n\n  }, {\n    key: 'canPlayDrm',\n    value: function canPlayDrm(drmData) {\n      var canPlayDrm = false;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = NativeAdapter._drmProtocols[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var drmProtocol = _step.value;\n\n          if (drmProtocol.canPlayDrm(drmData)) {\n            NativeAdapter._drmProtocol = drmProtocol;\n            canPlayDrm = true;\n            break;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      NativeAdapter._logger.debug('canPlayDrm result is ' + canPlayDrm.toString(), drmData);\n      return canPlayDrm;\n    }\n\n    /**\n     * Factory method to create media source adapter.\n     * @function createAdapter\n     * @param {HTMLVideoElement} videoElement - The video element that the media source adapter work with.\n     * @param {Object} source - The source Object.\n     * @param {Object} config - The player configuration.\n     * @returns {IMediaSourceAdapter} - New instance of the run time media source adapter.\n     * @static\n     */\n\n  }, {\n    key: 'createAdapter',\n    value: function createAdapter(videoElement, source, config) {\n      return new this(videoElement, source, config);\n    }\n\n    /**\n     * @constructor\n     * @param {HTMLVideoElement} videoElement - The video element which bind to NativeAdapter\n     * @param {Source} source - The source object\n     * @param {Object} config - The player configuration\n     */\n\n  }]);\n\n  function NativeAdapter(videoElement, source, config) {\n    _classCallCheck(this, NativeAdapter);\n\n    NativeAdapter._logger.debug('Creating adapter');\n\n    var _this = _possibleConstructorReturn(this, (NativeAdapter.__proto__ || Object.getPrototypeOf(NativeAdapter)).call(this, videoElement, source));\n\n    _this._maybeSetDrmPlayback();\n    _this._eventManager = new _eventManager2.default();\n    _this._progressiveSources = config.sources.progressive;\n    return _this;\n  }\n\n  /**\n   * Sets the DRM playback in case such needed.\n   * @private\n   * @returns {void}\n   */\n\n\n  _createClass(NativeAdapter, [{\n    key: '_maybeSetDrmPlayback',\n    value: function _maybeSetDrmPlayback() {\n      if (NativeAdapter._drmProtocol && this._sourceObj && this._sourceObj.drmData) {\n        NativeAdapter._drmProtocol.setDrmPlayback(this._videoElement, this._sourceObj.drmData);\n      }\n    }\n\n    /**\n     * Set the suitable progressive source according the current resolution\n     * @function _setProgressiveSource\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_setProgressiveSource',\n    value: function _setProgressiveSource() {\n      var suitableTrack = (0, _resolution.getSuitableSourceForResolution)(this._progressiveSources, this._videoElement.offsetWidth, this._videoElement.offsetHeight);\n      if (suitableTrack) {\n        this._sourceObj = suitableTrack;\n      }\n    }\n\n    /**\n     * Checks if the playback source is progressive\n     * @function _isProgressivePlayback\n     * @returns {boolean} - is progressive source\n     * @private\n     */\n\n  }, {\n    key: '_isProgressivePlayback',\n    value: function _isProgressivePlayback() {\n      return this._sourceObj ? this._sourceObj.mimetype === 'video/mp4' : false;\n    }\n\n    /**\n     * Load the video source\n     * @param {number} startTime - Optional time to start the video from.\n     * @function load\n     * @returns {Promise<Object>} - The loaded data\n     */\n\n  }, {\n    key: 'load',\n    value: function load(startTime) {\n      var _this2 = this;\n\n      if (!this._loadPromise) {\n        this._loadPromise = new Promise(function (resolve, reject) {\n          // We're using 'loadeddata' event for native hls (on 'loadedmetadata' native hls doesn't have tracks yet).\n          _this2._eventManager.listenOnce(_this2._videoElement, _events.HTML5_EVENTS.LOADED_DATA, function () {\n            var data = { tracks: _this2._getParsedTracks() };\n            NativeAdapter._logger.debug('The source has been loaded successfully');\n            resolve(data);\n          });\n          _this2._eventManager.listenOnce(_this2._videoElement, _events.HTML5_EVENTS.ERROR, function (error) {\n            NativeAdapter._logger.error(error);\n            reject(error);\n          });\n          if (_this2._isProgressivePlayback()) {\n            _this2._setProgressiveSource();\n          }\n          if (_this2._sourceObj && _this2._sourceObj.url) {\n            _this2._videoElement.src = _this2._sourceObj.url;\n            _this2._trigger(_baseMediaSourceAdapter2.default.CustomEvents.ABR_MODE_CHANGED, { mode: _this2._isProgressivePlayback() ? 'manual' : 'auto' });\n          }\n          if (startTime) {\n            _this2._videoElement.currentTime = startTime;\n          }\n          _this2._videoElement.load();\n        });\n      }\n      return this._loadPromise;\n    }\n\n    /**\n     * Destroys the native adapter.\n     * @function destroy\n     * @returns {Promise<*>} - The destroy promise.\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var _this3 = this;\n\n      NativeAdapter._logger.debug('destroy');\n      return _get(NativeAdapter.prototype.__proto__ || Object.getPrototypeOf(NativeAdapter.prototype), 'destroy', this).call(this).then(function () {\n        _this3._eventManager.destroy();\n        _this3._progressiveSources = [];\n        _this3._loadPromise = null;\n        if (NativeAdapter._drmProtocol) {\n          NativeAdapter._drmProtocol.destroy();\n          NativeAdapter._drmProtocol = null;\n        }\n      });\n    }\n\n    /**\n     * Get the parsed tracks\n     * @function _getParsedTracks\n     * @returns {Array<Track>} - The parsed tracks\n     * @private\n     */\n\n  }, {\n    key: '_getParsedTracks',\n    value: function _getParsedTracks() {\n      var videoTracks = this._getParsedVideoTracks();\n      var audioTracks = this._getParsedAudioTracks();\n      var textTracks = this._getParsedTextTracks();\n      return videoTracks.concat(audioTracks).concat(textTracks);\n    }\n\n    /**\n     * Get the parsed video tracks\n     * @function _getParsedVideoTracks\n     * @returns {Array<Track>} - The parsed video tracks\n     * @private\n     */\n\n  }, {\n    key: '_getParsedVideoTracks',\n    value: function _getParsedVideoTracks() {\n      if (this._isProgressivePlayback()) {\n        return this._getParsedProgressiveVideoTracks();\n      } else {\n        return this._getParsedAdaptiveVideoTracks();\n      }\n    }\n\n    /**\n     * Get the parsed progressive video tracks\n     * @function _getParsedProgressiveVideoTracks\n     * @returns {Array<Track>} - The parsed progressive video tracks\n     * @private\n     */\n\n  }, {\n    key: '_getParsedProgressiveVideoTracks',\n    value: function _getParsedProgressiveVideoTracks() {\n      var videoTracks = this._progressiveSources;\n      var parsedTracks = [];\n      if (videoTracks) {\n        for (var i = 0; i < videoTracks.length; i++) {\n          var settings = {\n            id: videoTracks[i].id,\n            bandwidth: videoTracks[i].bandwidth,\n            width: videoTracks[i].width,\n            height: videoTracks[i].height,\n            active: this._sourceObj ? videoTracks[i].id === this._sourceObj.id : false,\n            index: i\n          };\n          parsedTracks.push(new _videoTrack2.default(settings));\n        }\n      }\n      return parsedTracks;\n    }\n\n    /**\n     * Get the parsed adaptive video tracks\n     * @function _getParsedAdaptiveVideoTracks\n     * @returns {Array<Track>} - The parsed adaptive video tracks\n     * @private\n     */\n\n  }, {\n    key: '_getParsedAdaptiveVideoTracks',\n    value: function _getParsedAdaptiveVideoTracks() {\n      //TODO check adaptation in safari hls\n      var videoTracks = this._videoElement.videoTracks;\n      var parsedTracks = [];\n      if (videoTracks) {\n        for (var i = 0; i < videoTracks.length; i++) {\n          var settings = {\n            //TODO calculate width/height/bandwidth\n            id: videoTracks[i].id,\n            active: videoTracks[i].selected,\n            label: videoTracks[i].label,\n            language: videoTracks[i].language,\n            index: i\n          };\n          parsedTracks.push(new _videoTrack2.default(settings));\n        }\n      }\n      return parsedTracks;\n    }\n\n    /**\n     * Get the parsed audio tracks\n     * @function _getParsedAudioTracks\n     * @returns {Array<Track>} - The parsed audio tracks\n     * @private\n     */\n\n  }, {\n    key: '_getParsedAudioTracks',\n    value: function _getParsedAudioTracks() {\n      var audioTracks = this._videoElement.audioTracks;\n      var parsedTracks = [];\n      if (audioTracks) {\n        for (var i = 0; i < audioTracks.length; i++) {\n          var settings = {\n            id: audioTracks[i].id,\n            active: audioTracks[i].enabled,\n            label: audioTracks[i].label,\n            language: audioTracks[i].language,\n            index: i\n          };\n          parsedTracks.push(new _audioTrack2.default(settings));\n        }\n      }\n      return parsedTracks;\n    }\n\n    /**\n     * Get the parsed text tracks\n     * @function _getParsedTextTracks\n     * @returns {Array<Track>} - The parsed text tracks\n     * @private\n     */\n\n  }, {\n    key: '_getParsedTextTracks',\n    value: function _getParsedTextTracks() {\n      var textTracks = this._filterVideoElementTextTracks();\n      var parsedTracks = [];\n      if (textTracks) {\n        for (var i = 0; i < textTracks.length; i++) {\n          var settings = {\n            kind: textTracks[i].kind,\n            active: textTracks[i].mode === 'showing',\n            label: textTracks[i].label,\n            language: textTracks[i].language,\n            index: i\n          };\n          parsedTracks.push(new _textTrack.TextTrack(settings));\n        }\n      }\n      return parsedTracks;\n    }\n\n    /**\n     * Filtered empty text tracks from the video element.\n     * @returns {Array} - The filtered text tracks array.\n     * @private\n     */\n\n  }, {\n    key: '_filterVideoElementTextTracks',\n    value: function _filterVideoElementTextTracks() {\n      var textTracks = [];\n      for (var i = 0; i < this._videoElement.textTracks.length; i++) {\n        var vidTextTrack = this._videoElement.textTracks[i];\n        if (vidTextTrack.language || vidTextTrack.label) {\n          textTracks.push(vidTextTrack);\n        }\n      }\n      return textTracks;\n    }\n\n    /**\n     * Select a video track\n     * @function selectVideoTrack\n     * @param {VideoTrack} videoTrack - the track to select\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'selectVideoTrack',\n    value: function selectVideoTrack(videoTrack) {\n      if (this._isProgressivePlayback()) {\n        this._selectProgressiveVideoTrack(videoTrack);\n      } else {\n        this.selectAdaptiveVideoTrack(videoTrack);\n      }\n    }\n\n    /**\n     * Select a progressive video track\n     * @function _selectProgressiveVideoTrack\n     * @param {VideoTrack} videoTrack - the track to select\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: '_selectProgressiveVideoTrack',\n    value: function _selectProgressiveVideoTrack(videoTrack) {\n      var _this4 = this;\n\n      var videoTracks = this._progressiveSources;\n      if (videoTrack instanceof _videoTrack2.default && videoTracks && videoTracks[videoTrack.index]) {\n        var currentTime = this._videoElement.currentTime;\n        var paused = this._videoElement.paused;\n        this._sourceObj = videoTracks[videoTrack.index];\n        this._eventManager.listenOnce(this._videoElement, _events.HTML5_EVENTS.LOADED_DATA, function () {\n          if (_env2.default.browser.name === 'Android Browser') {\n            // In android browser we have to seek only after some playback.\n            _this4._eventManager.listenOnce(_this4._videoElement, _events.HTML5_EVENTS.DURATION_CHANGE, function () {\n              _this4._videoElement.currentTime = currentTime;\n            });\n            _this4._eventManager.listenOnce(_this4._videoElement, _events.HTML5_EVENTS.SEEKED, function () {\n              _this4._onTrackChanged(videoTrack);\n              if (paused) {\n                _this4._videoElement.pause();\n              }\n            });\n            _this4._videoElement.play();\n          } else {\n            _this4._eventManager.listenOnce(_this4._videoElement, _events.HTML5_EVENTS.SEEKED, function () {\n              _this4._onTrackChanged(videoTrack);\n            });\n            _this4._videoElement.currentTime = currentTime;\n            if (!paused) {\n              _this4._videoElement.play();\n            }\n          }\n        });\n        this._videoElement.src = this._sourceObj ? this._sourceObj.url : \"\";\n      }\n    }\n\n    /**\n     * Select a native video track\n     * @function selectAdaptiveVideoTrack\n     * @param {VideoTrack} videoTrack - the track to select\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'selectAdaptiveVideoTrack',\n    value: function selectAdaptiveVideoTrack(videoTrack) {\n      var videoTracks = this._videoElement.videoTracks;\n      if (videoTrack instanceof _videoTrack2.default && videoTracks && videoTracks[videoTrack.index]) {\n        this._disableVideoTracks();\n        videoTracks[videoTrack.index].selected = true;\n        this._onTrackChanged(videoTrack);\n      }\n    }\n\n    /**\n     * Select an audio track\n     * @function selectAudioTrack\n     * @param {AudioTrack} audioTrack - the  audio track to select\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'selectAudioTrack',\n    value: function selectAudioTrack(audioTrack) {\n      var audioTracks = this._videoElement.audioTracks;\n      if (audioTrack instanceof _audioTrack2.default && audioTracks && audioTracks[audioTrack.index]) {\n        this._disableAudioTracks();\n        audioTracks[audioTrack.index].enabled = true;\n        this._onTrackChanged(audioTrack);\n      }\n    }\n\n    /**\n     * Select a text track\n     * @function selectTextTrack\n     * @param {PKTextTrack} textTrack - The playkit text track\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'selectTextTrack',\n    value: function selectTextTrack(textTrack) {\n      var textTracks = this._videoElement.textTracks;\n      if (textTrack instanceof _textTrack.TextTrack && (textTrack.kind === 'subtitles' || textTrack.kind === 'captions') && textTracks && textTracks[textTrack.index]) {\n        this._disableTextTracks();\n        textTracks[textTrack.index].mode = 'hidden';\n        NativeAdapter._logger.debug('Text track changed', textTrack);\n        this._onTrackChanged(textTrack);\n      }\n    }\n\n    /**\n     * Hide the text track\n     * @function hideTextTrack\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'hideTextTrack',\n    value: function hideTextTrack() {\n      this._disableTextTracks();\n    }\n\n    /**\n     * Enables adaptive bitrate\n     * @function enableAdaptiveBitrate\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'enableAdaptiveBitrate',\n    value: function enableAdaptiveBitrate() {\n      NativeAdapter._logger.warn('Enabling adaptive bitrate is not supported for native playback');\n    }\n\n    /**\n     * Checking if adaptive bitrate switching is enabled.\n     * For progressive playback will always returns false.\n     * For adaptive playback will always returns true.\n     * @function isAdaptiveBitrateEnabled\n     * @returns {boolean} - Whether adaptive bitrate is enabled.\n     * @public\n     */\n\n  }, {\n    key: 'isAdaptiveBitrateEnabled',\n    value: function isAdaptiveBitrateEnabled() {\n      return !this._isProgressivePlayback();\n    }\n\n    /**\n     * Disables all the existing video tracks.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_disableVideoTracks',\n    value: function _disableVideoTracks() {\n      var videoTracks = this._videoElement.videoTracks;\n      if (videoTracks) {\n        for (var i = 0; i < videoTracks.length; i++) {\n          videoTracks[i].selected = false;\n        }\n      }\n    }\n\n    /**\n     * Disables all the existing audio tracks.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_disableAudioTracks',\n    value: function _disableAudioTracks() {\n      var audioTracks = this._videoElement.audioTracks;\n      if (audioTracks) {\n        for (var i = 0; i < audioTracks.length; i++) {\n          audioTracks[i].enabled = false;\n        }\n      }\n    }\n\n    /**\n     * Disables all the existing text tracks.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_disableTextTracks',\n    value: function _disableTextTracks() {\n      var textTracks = this._videoElement.textTracks;\n      if (textTracks) {\n        for (var i = 0; i < textTracks.length; i++) {\n          textTracks[i].mode = 'disabled';\n        }\n      }\n    }\n\n    /**\n     * Returns the live edge\n     * @returns {number} - live edge\n     * @private\n     */\n\n  }, {\n    key: '_getLiveEdge',\n    value: function _getLiveEdge() {\n      if (this._videoElement.seekable.length) {\n        return this._videoElement.seekable.end(this._videoElement.seekable.length - 1);\n      } else if (this._videoElement.buffered.length) {\n        return this._videoElement.buffered.end(this._videoElement.buffered.length - 1);\n      } else {\n        return this._videoElement.duration;\n      }\n    }\n\n    /**\n     * Seeking to live edge.\n     * @function seekToLiveEdge\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'seekToLiveEdge',\n    value: function seekToLiveEdge() {\n      try {\n        this._videoElement.currentTime = this._getLiveEdge();\n      } catch (e) {\n        return;\n      }\n    }\n\n    /**\n     * Checking if the current playback is live.\n     * @function isLive\n     * @returns {boolean} - Whether playback is live.\n     * @public\n     */\n\n  }, {\n    key: 'isLive',\n    value: function isLive() {\n      return this._videoElement.duration === Infinity;\n    }\n\n    /**\n     * Getter for the src that the adapter plays on the video element.\n     * @public\n     * @returns {string} - The src url.\n     */\n\n  }, {\n    key: 'src',\n    get: function get() {\n      return this._videoElement.src;\n    }\n\n    /**\n     * Get the duration in seconds.\n     * @returns {Number} - The playback duration.\n     * @public\n     */\n\n  }, {\n    key: 'duration',\n    get: function get() {\n      if (this.isLive()) {\n        return this._getLiveEdge();\n      } else {\n        return _get(NativeAdapter.prototype.__proto__ || Object.getPrototypeOf(NativeAdapter.prototype), 'duration', this);\n      }\n    }\n  }]);\n\n  return NativeAdapter;\n}(_baseMediaSourceAdapter2.default);\n\nNativeAdapter.id = 'NativeAdapter';\nNativeAdapter._logger = _baseMediaSourceAdapter2.default.getLogger(NativeAdapter.id);\nNativeAdapter.TEST_VIDEO = Utils.Dom.createElement(\"video\");\nNativeAdapter._drmProtocols = [_fairplay2.default];\nNativeAdapter._drmProtocol = null;\nexports.default = NativeAdapter;\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\n/**\n * Calculates the most suitable source to the container size\n * @function getSuitableSourceForResolution\n * @param {Array<Object>} tracks - The tracks\n * @param {number} width - The width to calculate with\n * @param {number} height - The height to calculate with\n * @returns {Object} - The most suitable source to the container size\n */\nfunction getSuitableSourceForResolution(tracks, width, height) {\n  var mostSuitableWidth = null;\n  if (height && tracks) {\n    var mostSuitableWidthTracks = [];\n    var minWidthDiff = Infinity;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = tracks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var track = _step.value;\n        // first filter the most width suitable\n        var widthDiff = Math.abs(track.width - width);\n        if (widthDiff < minWidthDiff) {\n          minWidthDiff = widthDiff;\n          mostSuitableWidthTracks = [track];\n        } else if (widthDiff === minWidthDiff) {\n          mostSuitableWidthTracks.push(track);\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    var videoRatio = width / height;\n    var mostSuitableWidthAndRatioTracks = mostSuitableWidthTracks;\n    var minRatioDiff = Infinity;\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = mostSuitableWidthTracks[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var _track = _step2.value;\n        // filter the most ratio suitable from the width filter results\n        if (_track.height) {\n          var ratioDiff = Math.abs(_track.width / _track.height - videoRatio);\n          if (ratioDiff < minRatioDiff) {\n            minRatioDiff = ratioDiff;\n            mostSuitableWidthAndRatioTracks = [_track];\n          } else if (ratioDiff === minRatioDiff) {\n            mostSuitableWidthAndRatioTracks.push(_track);\n          }\n        }\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    var maxBandwidth = 0;\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n      for (var _iterator3 = mostSuitableWidthAndRatioTracks[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n        var _track2 = _step3.value;\n        // select the top bitrate from the ratio filter results\n        if (_track2.bandwidth > maxBandwidth || !_track2.bandwidth) {\n          maxBandwidth = _track2.bandwidth || maxBandwidth;\n          mostSuitableWidth = _track2;\n        }\n      }\n    } catch (err) {\n      _didIteratorError3 = true;\n      _iteratorError3 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion3 && _iterator3.return) {\n          _iterator3.return();\n        }\n      } finally {\n        if (_didIteratorError3) {\n          throw _iteratorError3;\n        }\n      }\n    }\n  }\n  return mostSuitableWidth;\n}\n\nexports.getSuitableSourceForResolution = getSuitableSourceForResolution;\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _baseDrmProtocol = __webpack_require__(19);\n\nvar _baseDrmProtocol2 = _interopRequireDefault(_baseDrmProtocol);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FairPlay = function (_BaseDrmProtocol) {\n  _inherits(FairPlay, _BaseDrmProtocol);\n\n  function FairPlay() {\n    _classCallCheck(this, FairPlay);\n\n    return _possibleConstructorReturn(this, (FairPlay.__proto__ || Object.getPrototypeOf(FairPlay)).apply(this, arguments));\n  }\n\n  _createClass(FairPlay, null, [{\n    key: 'canPlayDrm',\n\n\n    /**\n     * FairPlay playback supports in case 2 conditions are met:\n     * 1. The environment supports FairPlay playback.\n     * 2. The drm data of the source object contains entry with FairPlay scheme.\n     * @param {Array<Object>} drmData - The drm data to check.\n     * @return {boolean} - Whether FairPlay can be play on the current environment.\n     */\n    value: function canPlayDrm(drmData) {\n      FairPlay._logger.debug(\"Can play DRM scheme of: \" + _baseDrmProtocol2.default.DrmScheme.FAIRPLAY);\n      return _baseDrmProtocol2.default.DrmSupport.isProtocolSupported(_baseDrmProtocol2.default.DrmScheme.FAIRPLAY, drmData);\n    }\n\n    /**\n     * Sets the FairPlay playback.\n     * @param {HTMLVideoElement} videoElement - The video element to manipulate.\n     * @param {Array<Object>} drmData - The drm data.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'setDrmPlayback',\n    value: function setDrmPlayback(videoElement) {\n      var drmData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      FairPlay._logger.debug(\"Sets DRM playback\");\n      videoElement.addEventListener(FairPlay._WebkitEvents.NEED_KEY, FairPlay._onWebkitNeedKey.bind(null, drmData), false);\n    }\n  }, {\n    key: '_onWebkitNeedKey',\n    value: function _onWebkitNeedKey(drmData, event) {\n      FairPlay._logger.debug(\"Webkit need key triggered\");\n      var fpDrmData = drmData.find(function (drmEntry) {\n        return drmEntry.scheme === _baseDrmProtocol2.default.DrmScheme.FAIRPLAY;\n      });\n      if (!fpDrmData || FairPlay._keySession) {\n        return;\n      }\n\n      var fpCertificate = fpDrmData.certificate;\n      var videoElement = event.target;\n      var initData = event.initData;\n      var contentId = FairPlay._extractContentId(initData);\n      var aCertificate = FairPlay._base64DecodeUint8Array(fpCertificate);\n\n      initData = FairPlay._concatInitDataIdAndCertificate(initData, contentId, aCertificate);\n\n      if (!videoElement.webkitKeys) {\n        var keySystem = FairPlay._selectKeySystem();\n        FairPlay._logger.debug(\"Sets media keys\");\n        videoElement.webkitSetMediaKeys(new window.WebKitMediaKeys(keySystem));\n      }\n      if (!videoElement.webkitKeys) {\n        throw new Error(\"Could not create MediaKeys\");\n      }\n      FairPlay._logger.debug(\"Creates session\");\n      FairPlay._keySession = videoElement.webkitKeys.createSession('video/mp4', initData);\n      if (!FairPlay._keySession) {\n        throw new Error(\"Could not create key session\");\n      }\n      FairPlay._keySession.contentId = contentId;\n      FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_MESSAGE, FairPlay._onWebkitKeyMessage.bind(null, fpDrmData), false);\n      FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_ADDED, FairPlay._onWebkitKeyAdded, false);\n      FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_ERROR, FairPlay._onWebkitKeyError, false);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      FairPlay._keySession = null;\n    }\n  }, {\n    key: '_onWebkitKeyMessage',\n    value: function _onWebkitKeyMessage(drmData, event) {\n      FairPlay._logger.debug(\"Webkit key message triggered\");\n      var message = event.message;\n      var request = new XMLHttpRequest();\n      request.responseType = \"text\";\n      request.addEventListener(\"load\", FairPlay._licenseRequestLoaded, false);\n      request.addEventListener(\"error\", FairPlay._licenseRequestFailed, false);\n      var params = FairPlay._base64EncodeUint8Array(message);\n      request.open('POST', drmData.licenseUrl, true);\n      request.setRequestHeader(\"Content-type\", \"application/json\");\n      FairPlay._logger.debug(\"Ready for license request\");\n      request.send(params);\n    }\n  }, {\n    key: '_onWebkitKeyAdded',\n    value: function _onWebkitKeyAdded() {\n      FairPlay._logger.debug(\"Decryption key was added to session\");\n    }\n  }, {\n    key: '_onWebkitKeyError',\n    value: function _onWebkitKeyError() {\n      FairPlay._logger.error(\"A decryption key error was encountered\");\n    }\n  }, {\n    key: '_licenseRequestLoaded',\n    value: function _licenseRequestLoaded(event) {\n      FairPlay._logger.debug(\"License request loaded\");\n      var request = event.target;\n      var keyText = request.responseText.trim();\n      var responseObj = {};\n      try {\n        responseObj = JSON.parse(keyText);\n      } catch (error) {\n        FairPlay._licenseRequestFailed();\n      }\n      var isValidResponse = FairPlay._validateResponse(responseObj);\n      if (isValidResponse.valid) {\n        var key = FairPlay._base64DecodeUint8Array(responseObj.ckc);\n        FairPlay._keySession.update(key);\n      } else {\n        FairPlay._licenseRequestFailed();\n      }\n    }\n  }, {\n    key: '_validateResponse',\n    value: function _validateResponse(responseObj) {\n      if (responseObj.message && responseObj.message.indexOf(\"error\") > 0 || responseObj.reference === null || responseObj.status_code === 500) {\n        return { //todo: create & edit an error object\n          valid: false,\n          details: \"internal server error\" // would be ERROR.INTERNAL or something like that\n        };\n      } else if (responseObj.ckc === \"\") {\n        return {\n          valid: false,\n          details: \"ckc is missing\" // would be ERROR.MISSING_CKC or something like that\n        };\n      } else {\n        return {\n          valid: true\n        };\n      }\n    }\n  }, {\n    key: '_licenseRequestFailed',\n    value: function _licenseRequestFailed() {\n      throw new Error(\"License request failed\");\n    }\n  }, {\n    key: '_extractContentId',\n    value: function _extractContentId(initData) {\n      var link = document.createElement('a');\n      link.href = FairPlay._arrayToString(initData);\n      return link.hostname;\n    }\n  }, {\n    key: '_selectKeySystem',\n    value: function _selectKeySystem() {\n      var keySystem = null;\n      if (window.WebKitMediaKeys.isTypeSupported(FairPlay._KeySystem, \"video/mp4\")) {\n        keySystem = FairPlay._KeySystem;\n      } else {\n        FairPlay._logger.warn(\"Key System not supported\");\n      }\n      return keySystem;\n    }\n  }, {\n    key: '_arrayToString',\n    value: function _arrayToString(array) {\n      return String.fromCharCode.apply(null, new Uint16Array(array.buffer));\n    }\n  }, {\n    key: '_base64DecodeUint8Array',\n    value: function _base64DecodeUint8Array(input) {\n      var raw = window.atob(input);\n      var rawLength = raw.length;\n      var array = new Uint8Array(new ArrayBuffer(rawLength));\n      for (var i = 0; i < rawLength; i++) {\n        array[i] = raw.charCodeAt(i);\n      }\n      return array;\n    }\n  }, {\n    key: '_concatInitDataIdAndCertificate',\n    value: function _concatInitDataIdAndCertificate(initData, id, cert) {\n      if (typeof id === \"string\") {\n        id = FairPlay._stringToArray(id);\n      }\n      var offset = 0;\n      var buffer = new ArrayBuffer(initData.byteLength + 4 + id.byteLength + 4 + cert.byteLength);\n      var dataView = new DataView(buffer);\n\n      var initDataArray = new Uint8Array(buffer, offset, initData.byteLength);\n      initDataArray.set(initData);\n      offset += initData.byteLength;\n\n      dataView.setUint32(offset, id.byteLength, true);\n      offset += 4;\n\n      var idArray = new Uint8Array(buffer, offset, id.byteLength);\n      idArray.set(id);\n      offset += idArray.byteLength;\n\n      dataView.setUint32(offset, cert.byteLength, true);\n      offset += 4;\n\n      var certArray = new Uint8Array(buffer, offset, cert.byteLength);\n      certArray.set(cert);\n\n      return new Uint8Array(buffer, 0, buffer.byteLength);\n    }\n  }, {\n    key: '_stringToArray',\n    value: function _stringToArray(string) {\n      var buffer = new ArrayBuffer(string.length * 2);\n      var array = new Uint16Array(buffer);\n      for (var i = 0, strLen = string.length; i < strLen; i++) {\n        array[i] = string.charCodeAt(i);\n      }\n      return array;\n    }\n  }, {\n    key: '_base64EncodeUint8Array',\n    value: function _base64EncodeUint8Array(input) {\n      var keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n      var output = \"\";\n      var chr1 = void 0,\n          chr2 = void 0,\n          chr3 = void 0,\n          enc1 = void 0,\n          enc2 = void 0,\n          enc3 = void 0,\n          enc4 = void 0;\n      var i = 0;\n      while (i < input.length) {\n        chr1 = input[i++];\n        chr2 = i < input.length ? input[i++] : Number.NaN;\n        chr3 = i < input.length ? input[i++] : Number.NaN;\n\n        enc1 = chr1 >> 2;\n        enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n        enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n        enc4 = chr3 & 63;\n\n        if (isNaN(chr2)) {\n          enc3 = enc4 = 64;\n        } else if (isNaN(chr3)) {\n          enc4 = 64;\n        }\n        output += keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);\n      }\n      return output;\n    }\n  }]);\n\n  return FairPlay;\n}(_baseDrmProtocol2.default);\n\nFairPlay._logger = _baseDrmProtocol2.default.getLogger('FairPlay');\nFairPlay._KeySystem = \"com.apple.fps.1_0\";\nFairPlay._WebkitEvents = {\n  NEED_KEY: 'webkitneedkey',\n  KEY_MESSAGE: 'webkitkeymessage',\n  KEY_ADDED: 'webkitkeyadded',\n  KEY_ERROR: 'webkitkeyerror'\n};\nexports.default = FairPlay;\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _env = __webpack_require__(10);\n\nvar _env2 = _interopRequireDefault(_env);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _drmScheme = __webpack_require__(20);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NOT_SUPPORTED = 'not_supported_drm_playback';\n\nvar DrmSupport = function () {\n  function DrmSupport() {\n    _classCallCheck(this, DrmSupport);\n  }\n\n  _createClass(DrmSupport, null, [{\n    key: 'isProtocolSupported',\n\n\n    /**\n     * Checks if a certain DRM scheme is supported in the current environment.\n     * @param {string} scheme - The drm scheme.\n     * @param {Array<Object>} drmData - The drm data to check.\n     * @return {boolean} - Whether scheme can be play on the current environment.\n     */\n    value: function isProtocolSupported(scheme, drmData) {\n      var browser = _env2.default.browser.name;\n      if (typeof DrmSupport._Browsers[browser] === 'function') {\n        var drmScheme = DrmSupport._Browsers[browser]();\n        DrmSupport._logger.debug(\"Supported DRM scheme for current environment is: \" + drmScheme);\n        return drmScheme === scheme && !!drmData.find(function (drmEntry) {\n          return drmEntry.scheme === scheme;\n        });\n      }\n      return false;\n    }\n  }]);\n\n  return DrmSupport;\n}();\n\nDrmSupport._logger = _logger2.default.getLogger('DrmSupport');\nDrmSupport._Browsers = {\n  Safari: function Safari() {\n    var device = _env2.default.device.type;\n    var os = _env2.default.os.name;\n    if (!device && os === 'Mac OS') {\n      return _drmScheme.DrmScheme.FAIRPLAY;\n    }\n    return NOT_SUPPORTED;\n  },\n  Chrome: function Chrome() {\n    var device = _env2.default.device.type;\n    var os = _env2.default.os.name;\n    if (!device || os === 'Android') {\n      return _drmScheme.DrmScheme.WIDEVINE;\n    }\n    return NOT_SUPPORTED;\n  },\n  Firefox: function Firefox() {\n    var device = _env2.default.device.type;\n    if (!device) {\n      return _drmScheme.DrmScheme.WIDEVINE;\n    }\n    return NOT_SUPPORTED;\n  },\n  Edge: function Edge() {\n    var device = _env2.default.device.type;\n    if (!device) {\n      return _drmScheme.DrmScheme.PLAYREADY;\n    }\n    return NOT_SUPPORTED;\n  },\n  IE: function IE() {\n    var device = _env2.default.device.type;\n    var os = _env2.default.os.name;\n    var osVersion = _env2.default.os.version;\n    if (!device && os === 'Windows' && Number.parseFloat(osVersion) >= 8.1) {\n      return _drmScheme.DrmScheme.PLAYREADY;\n    }\n    return NOT_SUPPORTED;\n  }\n};\nexports.default = DrmSupport;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = __webpack_require__(1);\n\nvar Utils = _interopRequireWildcard(_util);\n\nvar _encodingSources = __webpack_require__(37);\n\nvar EncodingSources = _interopRequireWildcard(_encodingSources);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Html5AutoPlayCapability = function () {\n  function Html5AutoPlayCapability() {\n    _classCallCheck(this, Html5AutoPlayCapability);\n  }\n\n  _createClass(Html5AutoPlayCapability, null, [{\n    key: 'runCapability',\n\n\n    /***\n     * Runs the test for autoplay capability.\n     * @public\n     * @static\n     * @returns {void}\n     */\n    value: function runCapability() {\n      try {\n        Html5AutoPlayCapability._vid.src = EncodingSources.Base64Mp4Source;\n        Html5AutoPlayCapability._promise = Html5AutoPlayCapability._vid.play() || Promise.resolve();\n      } catch (e) {\n        Html5AutoPlayCapability._promise = Promise.reject();\n      }\n    }\n\n    /**\n     * Gets the test result for autoplay capability.\n     * @returns {Promise<CapabilityResult>} - The result object for autoplay capability.\n     * @static\n     * @public\n     */\n\n  }, {\n    key: 'getCapability',\n    value: function getCapability() {\n      return Html5AutoPlayCapability._promise.then(function () {\n        return { autoplay: true };\n      }).catch(function () {\n        return { autoplay: false };\n      });\n    }\n  }]);\n\n  return Html5AutoPlayCapability;\n}();\n\nHtml5AutoPlayCapability._vid = Utils.Dom.createElement('video');\nexports.default = Html5AutoPlayCapability;\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t\"Base64Mp4Source\": \"data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAABPptZGF0AAACrQYF//+p3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjcyMSA3MmQ1M2FiIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNiAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD00IHRocmVhZHM9MSBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MiBrZXlpbnQ9MjUwIGtleWludF9taW49MjUgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIzLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IGlwX3JhdGlvPTEuNDAgYXE9MToxLjAwAIAAAAAQZYiEADf//vaH+BTZWBP/gd4CAExhdmM1Ny42NC4xMDAAQiAIwRg4AAAACEGaJGxDf/7gAAAACEGeQniFf8SBIRAEYIwcAAAACAGeYXRCf8eAIRAEYIwcAAAACAGeY2pCf8eBIRAEYIwcAAAADkGaaEmoQWiZTAhv//7hAAAACkGehkURLCv/xIEhEARgjBwAAAAIAZ6ldEJ/x4EhEARg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\"\n};\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = __webpack_require__(1);\n\nvar Utils = _interopRequireWildcard(_util);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Html5IsSupportedCapability = function () {\n  function Html5IsSupportedCapability() {\n    _classCallCheck(this, Html5IsSupportedCapability);\n  }\n\n  _createClass(Html5IsSupportedCapability, null, [{\n    key: 'runCapability',\n\n\n    /***\n     * Runs the test for isSupported capability.\n     * @public\n     * @static\n     * @returns {void}\n     */\n    value: function runCapability() {\n      try {\n        Html5IsSupportedCapability._vid.volume = 0.5;\n        Html5IsSupportedCapability._result = !!Html5IsSupportedCapability._vid.canPlayType;\n      } catch (e) {\n        Html5IsSupportedCapability._result = false;\n      }\n    }\n\n    /**\n     * Gets the test result for isSupported capability.\n     * @returns {Promise<CapabilityResult>} - The result object for isSupported capability.\n     * @static\n     * @public\n     */\n\n  }, {\n    key: 'getCapability',\n    value: function getCapability() {\n      return Promise.resolve({ isSupported: Html5IsSupportedCapability._result });\n    }\n  }]);\n\n  return Html5IsSupportedCapability;\n}();\n\nHtml5IsSupportedCapability._vid = Utils.Dom.createElement('video');\nexports.default = Html5IsSupportedCapability;\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = __webpack_require__(9);\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _eventManager = __webpack_require__(4);\n\nvar _eventManager2 = _interopRequireDefault(_eventManager);\n\nvar _state = __webpack_require__(40);\n\nvar _state2 = _interopRequireDefault(_state);\n\nvar _stateTypes = __webpack_require__(16);\n\nvar _stateTypes2 = _interopRequireDefault(_stateTypes);\n\nvar _events = __webpack_require__(5);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * This class responsible to manage all the state machine of the player.\n * @classdesc\n */\nvar StateManager = function () {\n\n  /**\n   * @constructor\n   * @param {Player} player - Reference to the player.\n   */\n\n  /**\n   * Holds the state history of the player.\n   * @member\n   * @type {Array<State>}\n   * @private\n   */\n\n  /**\n   * Holds the current state of the player.\n   * @member\n   * @type {State}\n   * @private\n   */\n\n  /**\n   * Reference to the actual player.\n   * @member\n   * @type {Player}\n   * @private\n   */\n  function StateManager(player) {\n    var _this = this,\n        _PlayerStates$IDLE,\n        _PlayerStates$LOADING,\n        _PlayerStates$PAUSED,\n        _PlayerStates$PLAYING,\n        _PlayerStates$BUFFERI,\n        _transitions;\n\n    _classCallCheck(this, StateManager);\n\n    this._transitions = (_transitions = {}, _defineProperty(_transitions, _stateTypes2.default.IDLE, (_PlayerStates$IDLE = {}, _defineProperty(_PlayerStates$IDLE, _events.HTML5_EVENTS.LOAD_START, function () {\n      _this._updateState(_stateTypes2.default.LOADING);\n      _this._dispatchEvent();\n    }), _defineProperty(_PlayerStates$IDLE, _events.HTML5_EVENTS.PLAY, function () {\n      _this._updateState(_stateTypes2.default.BUFFERING);\n      _this._dispatchEvent();\n    }), _PlayerStates$IDLE)), _defineProperty(_transitions, _stateTypes2.default.LOADING, (_PlayerStates$LOADING = {}, _defineProperty(_PlayerStates$LOADING, _events.HTML5_EVENTS.LOADED_METADATA, function () {\n      _this._updateState(_stateTypes2.default.PAUSED);\n      _this._dispatchEvent();\n    }), _defineProperty(_PlayerStates$LOADING, _events.HTML5_EVENTS.ERROR, function () {\n      _this._updateState(_stateTypes2.default.IDLE);\n      _this._dispatchEvent();\n    }), _PlayerStates$LOADING)), _defineProperty(_transitions, _stateTypes2.default.PAUSED, (_PlayerStates$PAUSED = {}, _defineProperty(_PlayerStates$PAUSED, _events.HTML5_EVENTS.PLAY, function () {\n      _this._updateState(_stateTypes2.default.PLAYING);\n      _this._dispatchEvent();\n    }), _defineProperty(_PlayerStates$PAUSED, _events.HTML5_EVENTS.PLAYING, function () {\n      _this._updateState(_stateTypes2.default.PLAYING);\n      _this._dispatchEvent();\n    }), _defineProperty(_PlayerStates$PAUSED, _events.HTML5_EVENTS.ENDED, function () {\n      _this._updateState(_stateTypes2.default.IDLE);\n      _this._dispatchEvent();\n    }), _PlayerStates$PAUSED)), _defineProperty(_transitions, _stateTypes2.default.PLAYING, (_PlayerStates$PLAYING = {}, _defineProperty(_PlayerStates$PLAYING, _events.HTML5_EVENTS.PAUSE, function () {\n      _this._updateState(_stateTypes2.default.PAUSED);\n      _this._dispatchEvent();\n    }), _defineProperty(_PlayerStates$PLAYING, _events.HTML5_EVENTS.WAITING, function () {\n      _this._updateState(_stateTypes2.default.BUFFERING);\n      _this._dispatchEvent();\n    }), _defineProperty(_PlayerStates$PLAYING, _events.HTML5_EVENTS.ENDED, function () {\n      _this._updateState(_stateTypes2.default.IDLE);\n      _this._dispatchEvent();\n    }), _defineProperty(_PlayerStates$PLAYING, _events.HTML5_EVENTS.ERROR, function () {\n      _this._updateState(_stateTypes2.default.IDLE);\n      _this._dispatchEvent();\n    }), _PlayerStates$PLAYING)), _defineProperty(_transitions, _stateTypes2.default.BUFFERING, (_PlayerStates$BUFFERI = {}, _defineProperty(_PlayerStates$BUFFERI, _events.HTML5_EVENTS.PLAYING, function () {\n      _this._updateState(_stateTypes2.default.PLAYING);\n      _this._dispatchEvent();\n    }), _defineProperty(_PlayerStates$BUFFERI, _events.HTML5_EVENTS.PAUSE, function () {\n      _this._updateState(_stateTypes2.default.PAUSED);\n      _this._dispatchEvent();\n    }), _defineProperty(_PlayerStates$BUFFERI, _events.HTML5_EVENTS.SEEKED, function () {\n      if (_this._prevState && _this._prevState.type === _stateTypes2.default.PLAYING) {\n        _this._updateState(_stateTypes2.default.PLAYING);\n        _this._dispatchEvent();\n      }\n    }), _PlayerStates$BUFFERI)), _transitions);\n\n    this._player = player;\n    this._logger = _logger2.default.getLogger(\"StateManager\");\n    this._eventManager = new _eventManager2.default();\n    this._history = [];\n    this._prevState = null;\n    this._curState = new _state2.default(_stateTypes2.default.IDLE);\n    this._attachListeners();\n  }\n\n  /**\n   * Register to all necessary events which impacts on the player state.\n   * @private\n   * @returns {void}\n   */\n\n  /**\n   * The possible transitions from one state to another.\n   * @type {Array<Transition>}\n   * @private\n   */\n\n  /**\n   * Holds the previous state of the player.\n   * @member\n   * @type {State | null}\n   * @private\n   */\n\n  /**\n   * The event manager of the class.\n   * @member\n   * @type {EventManager}\n   * @private\n   */\n\n  /**\n   * The logger of the class.\n   * @member\n   * @type {any}\n   * @private\n   */\n\n\n  _createClass(StateManager, [{\n    key: '_attachListeners',\n    value: function _attachListeners() {\n      this._eventManager.listen(this._player, _events.HTML5_EVENTS.ERROR, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _events.HTML5_EVENTS.ENDED, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _events.HTML5_EVENTS.PLAY, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _events.HTML5_EVENTS.LOAD_START, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _events.HTML5_EVENTS.PLAYING, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _events.HTML5_EVENTS.LOADED_METADATA, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _events.HTML5_EVENTS.PAUSE, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _events.HTML5_EVENTS.WAITING, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _events.HTML5_EVENTS.SEEKED, this._doTransition.bind(this));\n    }\n\n    /**\n     * Performs a state transition depends on the event which occurs in the player system.\n     * @param {FakeEvent} event - The event occurs in the player system.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_doTransition',\n    value: function _doTransition(event) {\n      this._logger.debug('Do transition request', event.type);\n      var transition = this._transitions[this._curState.type];\n      if (typeof transition[event.type] === 'function') {\n        transition[event.type]();\n      }\n    }\n\n    /**\n     * Updates the player's state.\n     * @param {string} type - The type of the new state.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_updateState',\n    value: function _updateState(type) {\n      if (this._curState.type !== type) {\n        this._curState.duration = Date.now() / 1000;\n        this._history.push(this._curState);\n        this._prevState = this._curState;\n        this._curState = new _state2.default(type);\n        this._logger.debug('Switch player state: from ' + this._prevState.type + ' to ' + this._curState.type);\n      }\n    }\n\n    /**\n     * Fires the playerStateChanged event after state has been changed.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_dispatchEvent',\n    value: function _dispatchEvent() {\n      var event = new _fakeEvent2.default(_events.CUSTOM_EVENTS.PLAYER_STATE_CHANGED, {\n        'oldState': this._prevState,\n        'newState': this._curState\n      });\n      this._player.dispatchEvent(event);\n    }\n\n    /**\n     * Destroys the state manager.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._history = [];\n      this._eventManager.destroy();\n    }\n\n    /**\n     * Resets the state manager.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this._history = [];\n    }\n\n    /**\n     * Getter to the current state of the player.\n     * @public\n     * @returns {State} - The current state object\n     */\n\n  }, {\n    key: 'currentState',\n    get: function get() {\n      return this._curState;\n    }\n\n    /**\n     * Getter to the previous state of the player.\n     * @public\n     * @returns {State|null} - The previous state object, or null if such doesn't exists\n     */\n\n  }, {\n    key: 'previousState',\n    get: function get() {\n      return this._prevState;\n    }\n\n    /**\n     * Getter to the state history of the player.\n     * @public\n     * @returns {Array.<State>} - The full states history objects\n     */\n\n  }, {\n    key: 'history',\n    get: function get() {\n      return this._history;\n    }\n  }]);\n\n  return StateManager;\n}();\n\nexports.default = StateManager;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * This class describes a player state.\n * @classdesc\n */\nvar State = function () {\n\n  /**\n   * @constructor\n   * @param {string} type - The type of the state.\n   */\n\n  /**\n   * The duration that the player was in this state.\n   * @member\n   * @type {number}\n   * @private\n   */\n  function State(type) {\n    _classCallCheck(this, State);\n\n    this.type = type;\n    this._duration = 0;\n    this._timestamp = Date.now() / 1000;\n  }\n\n  /**\n   * Getter for the duration of the state.\n   * @returns {number} - The duration of the state\n   */\n\n  /**\n   * The timestamp that this state started.\n   * @member\n   * @type {number}\n   * @private\n   */\n\n  /**\n   * The type of the state.\n   * Can be one of those describes in states.js\n   * @member\n   * @type {string}\n   * @public\n   */\n\n\n  _createClass(State, [{\n    key: \"duration\",\n    get: function get() {\n      return this._duration;\n    }\n\n    /**\n     * Setter for the duration of the state.\n     * @param {number} endTime - The timestamp of the next state.\n     */\n    ,\n    set: function set(endTime) {\n      this._duration = endTime - this._timestamp;\n    }\n  }]);\n\n  return State;\n}();\n\nexports.default = State;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar TRACK_TYPES = {\n  VIDEO: \"video\",\n  AUDIO: \"audio\",\n  TEXT: \"text\"\n};\n\nexports.default = TRACK_TYPES;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _middleware = __webpack_require__(43);\n\nvar _middleware2 = _interopRequireDefault(_middleware);\n\nvar _baseMiddleware = __webpack_require__(15);\n\nvar _baseMiddleware2 = _interopRequireDefault(_baseMiddleware);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * The playback middleware.\n */\nvar PlaybackMiddleware = function () {\n\n  /**\n   * @constructor\n   */\n\n  /**\n   * The middleware implementation.\n   * @private\n   * @member\n   */\n  function PlaybackMiddleware() {\n    _classCallCheck(this, PlaybackMiddleware);\n\n    this._middleware = new _middleware2.default(PlaybackMiddleware.Actions);\n  }\n\n  /**\n   * Registers a playback middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n\n  /**\n   * The actions of the playback middleware.\n   * @static\n   */\n\n\n  _createClass(PlaybackMiddleware, [{\n    key: 'use',\n    value: function use(middlewareInstance) {\n      this._middleware.use(middlewareInstance);\n    }\n\n    /**\n     * Runs a play chain.\n     * @param {Function} callback - The last play handler in the chain.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'play',\n    value: function play(callback) {\n      this._middleware.run(PlaybackMiddleware.Actions.PLAY, callback);\n    }\n\n    /**\n     * Runs a pause chain.\n     * @param {Function} callback - The last pause handler in the chain.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'pause',\n    value: function pause(callback) {\n      this._middleware.run(PlaybackMiddleware.Actions.PAUSE, callback);\n    }\n  }]);\n\n  return PlaybackMiddleware;\n}();\n\nPlaybackMiddleware.Actions = {\n  PLAY: 'play',\n  PAUSE: 'pause'\n};\nexports.default = PlaybackMiddleware;\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _multiMap = __webpack_require__(12);\n\nvar _multiMap2 = _interopRequireDefault(_multiMap);\n\nvar _baseMiddleware = __webpack_require__(15);\n\nvar _baseMiddleware2 = _interopRequireDefault(_baseMiddleware);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Generic middleware implementation.\n */\nvar Middleware = function () {\n\n  /**\n   * @constructor\n   * @param {Object} actions - The actions for the middleware.\n   */\n\n  /**\n   * The actions supported by the middleware.\n   * @private\n   * @member\n   */\n  function Middleware(actions) {\n    _classCallCheck(this, Middleware);\n\n    this._actions = actions;\n    this._middlewares = new _multiMap2.default();\n    this._logger = _logger2.default.getLogger(\"Middleware\");\n  }\n\n  /**\n   * Registers a middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n\n  /**\n   * The logger of the middleware.\n   * @private\n   * @member\n   */\n\n  /**\n   * The registered middlewares.\n   * @private\n   * @member\n   */\n\n\n  _createClass(Middleware, [{\n    key: 'use',\n    value: function use(middlewareInstance) {\n      for (var _action in this._actions) {\n        var apiAction = this._actions[_action];\n        // $FlowFixMe\n        if (typeof middlewareInstance[apiAction] === 'function') {\n          this._logger.debug('Register <' + middlewareInstance.id + '> for action ' + apiAction);\n          // $FlowFixMe\n          this._middlewares.push(apiAction, middlewareInstance[apiAction].bind(middlewareInstance));\n        }\n      }\n    }\n\n    /**\n     * Runs a middleware chain for a specific action.\n     * @param {string} action - The action to run.\n     * @param {Function} callback - The callback function.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'run',\n    value: function run(action, callback) {\n      var _this = this;\n\n      this._logger.debug(\"Start middleware chain for action \" + action);\n      var middlewares = this._middlewares.get(action);\n      this._executeMiddleware(middlewares, function () {\n        _this._logger.debug(\"Finish middleware chain for action \" + action);\n        callback();\n      });\n    }\n\n    /**\n     * Executes all the middlewares one by one.\n     * @param {Array<Function>} middlewares - The middlewares for a specific action.\n     * @param {Function} callback - The callback function.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_executeMiddleware',\n    value: function _executeMiddleware(middlewares, callback) {\n      // eslint-disable-next-line no-unused-vars\n      var composition = middlewares.reduceRight(function (next, fn) {\n        return function (v) {\n          fn(next);\n        };\n      }, callback);\n      composition();\n    }\n  }]);\n\n  return Middleware;\n}();\n\nexports.default = Middleware;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t\"sources\": {},\n\t\"plugins\": {},\n\t\"metadata\": {\n\t\t\"poster\": \"\"\n\t},\n\t\"playback\": {\n\t\t\"audioLanguage\": \"\",\n\t\t\"textLanguage\": \"\",\n\t\t\"useNativeTextTrack\": false,\n\t\t\"volume\": 1,\n\t\t\"playsinline\": true,\n\t\t\"preload\": \"none\",\n\t\t\"autoplay\": false,\n\t\t\"allowMutedAutoPlay\": true,\n\t\t\"muted\": false,\n\t\t\"options\": {\n\t\t\t\"html5\": {\n\t\t\t\t\"hls\": {},\n\t\t\t\t\"dash\": {}\n\t\t\t}\n\t\t},\n\t\t\"preferNative\": {\n\t\t\t\"hls\": false,\n\t\t\t\"dash\": false\n\t\t},\n\t\t\"streamPriority\": [\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"hls\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"dash\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"progressive\"\n\t\t\t}\n\t\t]\n\t}\n};\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(46);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(48)(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./style.css\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(47)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".playkit-container {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  color: #fff;\\n  outline: none;\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  -webkit-tap-highlight-color: transparent;\\n}\\n\\n.playkit-engine {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  object-fit: contain;\\n}\\n\\n.playkit-engine video::-webkit-media-controls-panel,\\n.playkit-engine video::-webkit-media-controls-panel-container,\\n.playkit-engine video::-webkit-media-controls-start-playback-button,\\n.playkit-engine video::-webkit-media-controls-play-button {\\n  display: none;\\n  -webkit-appearance: none\\n}\\n\\n.playkit-poster {\\n  position: absolute;\\n  display: block;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background-size: contain;\\n  background-position: center center;\\n  background-repeat: no-repeat;\\n}\\n\\n.playkit-subtitles {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  right: 0;\\n  left: 0;\\n}\\n\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(49);\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports) {\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// playkit.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 25);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 04594fa48741fc933842","//@flow\nimport * as JsLogger from 'js-logger';\n\nconst LOG_LEVEL: { [level: string]: Object } = {\n  \"DEBUG\": JsLogger.DEBUG,\n  \"INFO\": JsLogger.INFO,\n  \"TIME\": JsLogger.TIME,\n  \"WARN\": JsLogger.WARN,\n  \"ERROR\": JsLogger.ERROR,\n  \"OFF\": JsLogger.OFF\n};\n\nclass LoggerFactory {\n  constructor(options?: Object) {\n    JsLogger.useDefaults(options || {});\n  }\n\n  getLogger(name?: string) {\n    if (!name) {\n      return JsLogger;\n    }\n    return JsLogger.get(name);\n  }\n}\n\nconst lf = new LoggerFactory({defaultLevel: JsLogger.DEBUG});\n\nexport default lf;\nexport {LOG_LEVEL};\n\n\n\n// WEBPACK FOOTER //\n// ./utils/logger.js","//@flow\n\"use strict\";\n\nconst _Number = {\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a number\n   */\n  isNumber: function (n: number): boolean {\n    return Number(n) === n;\n  },\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is an integer\n   */\n  isInt: function (n: number): boolean {\n    return this.isNumber(n) && n % 1 === 0;\n  },\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a float\n   */\n  isFloat: function (n: number): boolean {\n    return this.isNumber(n) && n % 1 !== 0;\n  }\n};\n\nconst _String = {\n  /**\n   * Uppercase the first letter of a string\n   * @param  {String} string - String to be uppercased\n   * @return {String} - The uppercased string\n   * @public\n   * @method toTitleCase\n   */\n  capitlize: function (string: string): string {\n    if (typeof string !== 'string') {\n      return string;\n    }\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  },\n\n  /**\n   * @param {string} string - Certain string\n   * @param {string} searchString - Certain string\n   * @returns {boolean} - Whether the string: string is ending with string: searchString\n   */\n  endsWith: function (string: string, searchString: string): boolean {\n    if (typeof string !== 'string' || typeof searchString !== 'string') {\n      return false;\n    }\n    return string.indexOf(searchString, string.length - searchString.length) != -1;\n  }\n};\n\nconst _Object = {\n  /**\n   * @param {Array<Object>} objects - The objects to merge\n   * @returns {Object} - The merged object.\n   */\n  merge: function (objects: Array<Object>): Object {\n    let target = {};\n    for (let obj of objects) {\n      Object.assign(target, obj);\n    }\n    return target;\n  },\n\n  /**\n   * @param {any} item - The item to check.\n   * @returns {boolean} - Whether the item is an object.\n   */\n  isObject: function (item: any) {\n    return (item && typeof item === 'object' && !Array.isArray(item));\n  },\n\n  /**\n   * @param {any} target - The target object.\n   * @param {any} sources - The objects to merge.\n   * @returns {Object} - The merged object.\n   */\n  mergeDeep: function (target: any, ...sources: any): Object {\n    if (!sources.length) {\n      return target;\n    }\n    const source = sources.shift();\n    if (this.isObject(target) && this.isObject(source)) {\n      for (const key in source) {\n        if (this.isObject(source[key])) {\n          if (!target[key]) Object.assign(target, {[key]: {}});\n          this.mergeDeep(target[key], source[key]);\n        } else {\n          Object.assign(target, {[key]: source[key]});\n        }\n      }\n    }\n    return this.mergeDeep(target, ...sources);\n  },\n\n  /**\n   * @param {any} data - The data to copy.\n   * @returns {any} - The copied data.\n   */\n  copyDeep: function (data: any): any {\n    let node;\n    if (Array.isArray(data)) {\n      node = data.length > 0 ? data.slice(0) : [];\n      node.forEach((e, i) => {\n        if (\n          (typeof e === \"object\" && e !== {}) ||\n          (Array.isArray(e) && e.length > 0)\n        ) {\n          node[i] = this.copyDeep(e);\n        }\n      });\n    } else if (typeof data === \"object\") {\n      node = Object.assign({}, data);\n      Object.keys(node).forEach((key) => {\n        if (\n          (typeof node[key] === \"object\" && node[key] !== {}) ||\n          (Array.isArray(node[key]) && node[key].length > 0)\n        ) {\n          node[key] = this.copyDeep(node[key]);\n        }\n      });\n    } else {\n      node = data;\n    }\n    return node;\n  },\n\n  /**\n   * Checks if an object is an empy object.\n   * @param {Object} obj - The object to check\n   * @returns {boolean} - Whether the object is empty.\n   */\n  isEmptyObject: function (obj: Object): boolean {\n    for (let key in obj) {\n      if (obj.hasOwnProperty(key))\n        return false;\n    }\n    return true;\n  },\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - The value in this path.\n   */\n  getPropertyPath: function (obj: Object, propertyPath: string): any {\n    return propertyPath.split(\".\").reduce(function (o, x) {\n      return (typeof o === \"undefined\" || o === null) ? o : o[x];\n    }, obj);\n  },\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - Whether the path exists in the object.\n   */\n  hasPropertyPath: function (obj: Object, propertyPath: string): boolean {\n    if (!propertyPath) {\n      return false;\n    }\n    let properties = propertyPath.split('.');\n    for (let i = 0; i < properties.length; i++) {\n      let prop = properties[i];\n      if (!obj || !obj.hasOwnProperty(prop)) {\n        return false;\n      } else {\n        obj = obj[prop];\n      }\n    }\n    return true;\n  },\n\n  /**\n   * Creates deferred promise which can resolved/rejected outside the promise scope.\n   * @returns {DeferredPromise} - The promise with resolve and reject props.\n   */\n  defer: function (): DeferredPromise {\n    let res, rej;\n    // $FlowFixMe\n    let promise = new Promise((resolve, reject) => {\n      res = resolve;\n      rej = reject;\n    });\n    // $FlowFixMe\n    promise.resolve = res;\n    // $FlowFixMe\n    promise.reject = rej;\n    return promise;\n  },\n\n  /**\n   * Binds an handler to a desired context.\n   * @param {any} thisObj - The handler context.\n   * @param {Function} fn - The handler.\n   * @returns {Function} - The new bound function.\n   * @public\n   */\n  bind: function (thisObj: any, fn: Function): Function {\n    return function () {\n      fn.apply(thisObj, arguments);\n    };\n  }\n};\n\nconst _Generator = {\n  /**\n   * Generates unique id.\n   * @param {number} length - The length of the id.\n   * @returns {string} - The generated id.\n   */\n  uniqueId: function (length: ?number) {\n    let from = 2;\n    let to = from + ((!length || length < 0) ? 0 : length - 2);\n    return '_' + Math.random().toString(36).substr(from, to);\n  },\n\n  /**\n   * Generates GUID.\n   * @return {string} - GUID\n   * @private\n   */\n  guid: function (): string {\n    let S4 = () => {\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    };\n    return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\n  }\n};\n\nconst _Dom = {\n  /**\n   * Adds class name to an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  addClassName(element: HTMLElement, className: string): void {\n    if (element.classList) {\n      element.classList.add(className);\n    } else {\n      if (!_Dom.hasClassName(element, className)) {\n        element.className += className;\n      }\n    }\n  },\n\n  /**\n   * Removes class name from an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  removeClassName(element: HTMLElement, className: string): void {\n    if (element.classList) {\n      element.classList.remove(className);\n    } else {\n      if (_Dom.hasClassName(element, className)) {\n        element.className = element.className.replace(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'), ' ').replace(/^\\s+|\\s+$/g, '');\n      }\n    }\n  },\n  /**\n   * Checks if an element has a class name\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {boolean} - weather an element contains a class name\n   */\n  hasClassName(element: HTMLElement, className: string) {\n    return element.className && new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(element.className);\n  },\n  /**\n   * Add element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @param {string} value - attribute value\n   * @returns {void}\n   */\n  setAttribute(element: HTMLElement, name: string, value: string): void {\n    element.setAttribute(name, value);\n  },\n  /**\n   * Remove element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @returns {void}\n   */\n  removeAttribute(element: HTMLElement, name: string): void {\n    element.removeAttribute(name);\n  },\n  /**\n   * Set element style\n   * @param {Element} element - an HTML element\n   * @param {string} name - style name\n   * @param {string} value - style value\n   * @returns {void}\n   */\n  setStyle(element: HTMLElement, name: string, value: string): void {\n    if (element.style.getPropertyValue(name) !== undefined) {\n      element.style.setProperty(name, value);\n    }\n  },\n  /**\n   * Adds a node to the end of the list of children of a specified parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  appendChild(parent: ?Element, child: ?Element): void {\n    if (parent && child && parent.appendChild) {\n      parent.appendChild(child);\n    }\n  },\n  /**\n   * Removes an element from his parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  removeChild(parent: ?Node, child: ?Element): void {\n    if (parent && child && parent.removeChild) {\n      parent.removeChild(child);\n    }\n  },\n  /**\n   * Prepend HTML element\n   * @param {HTMLElement} child - the child to prepend\n   * @param {HTMLElement} parent - the parent to preprend to\n   * @returns {void}\n   */\n  prependTo(child: HTMLElement, parent: HTMLElement): void {\n    if (parent.firstChild) {\n      parent.insertBefore(child, parent.firstChild);\n    } else {\n      parent.appendChild(child);\n    }\n  },\n  /**\n   * Returns a reference to the element by its ID.\n   * @param {string} id - The desired id.\n   * @returns {Element} - The element with the desired id.\n   */\n  getElementById(id: string): any {\n    return document.getElementById(id);\n  },\n  /**\n   * Creates the HTML element specified by tagName.\n   * @param {string} tagName - The tag name.\n   * @returns {Element} - The element just created.\n   */\n  createElement(tagName: string): any {\n    return document.createElement(tagName);\n  },\n  /**\n   * Loads script asynchronously.\n   * @param {string} url - The url to load.\n   * @return {Promise} - The loading promise.\n   * @public\n   */\n  loadScriptAsync(url: string): Promise<*> {\n    return new Promise((resolve, reject) => {\n      let r = false,\n        t = document.getElementsByTagName(\"script\")[0],\n        s = this.createElement(\"script\");\n      s.type = \"text/javascript\";\n      s.src = url;\n      s.async = true;\n      s.onload = s.onreadystatechange = function () {\n        if (!r && (!this.readyState || this.readyState === \"complete\")) {\n          r = true;\n          resolve(this);\n        }\n      };\n      s.onerror = s.onabort = reject;\n      if (t && t.parentNode) {\n        t.parentNode.insertBefore(s, t);\n      }\n    });\n  }\n};\n\nconst _Http = {\n  execute: function (url: string, params: any, method: string = \"POST\", headers?: Map<string, string>): Promise<any> {\n    let request = new XMLHttpRequest();\n    return new Promise((resolve, reject) => {\n      request.onreadystatechange = function () {\n        if (request.readyState === 4) {\n          if (request.status === 200) {\n            let jsonResponse = JSON.parse(request.responseText);\n            resolve(jsonResponse);\n          } else {\n            reject(request.responseText);\n          }\n        }\n      };\n      request.open(method, url);\n      if (headers) {\n        headers.forEach((value, key) => {\n          request.setRequestHeader(key, value);\n        });\n      }\n      request.send(params);\n    });\n  }\n};\n\nexport {\n  _Number as Number,\n  _String as String,\n  _Object as Object,\n  _Generator as Generator,\n  _Dom as Dom,\n  _Http as Http\n};\n\n\n\n// WEBPACK FOOTER //\n// ./utils/util.js","//@flow\n/**\n * Create an Event work-alike object based on the dictionary.\n * The event should contain all of the same properties from the dict.\n * @param {string} type -\n * @param {Object=} opt_dict -\n * @constructor\n * @extends {Event}\n */\nclass FakeEvent {\n  /** @const {boolean} */\n  bubbles: boolean;\n\n  /** @const {boolean} */\n  cancelable: boolean;\n\n  /** @const {boolean} */\n  defaultPrevented: boolean;\n\n  /**\n   * According to MDN, Chrome uses high-res timers instead of epoch time.\n   * Follow suit so that timeStamps on FakeEvents use the same base as\n   * on native Events.\n   * @const {number}\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n   */\n  timeStamp: number | Date;\n\n  /** @const {string} */\n  type: string;\n\n  /** @const {boolean} */\n  isTrusted: boolean;\n\n  /** @type {EventTarget} */\n  currentTarget: any;\n\n  /** @type {EventTarget} */\n  target: any;\n\n  /**\n   * Non-standard property read by FakeEventTarget to stop processing listeners.\n   * @type {boolean}\n   */\n  stopped: boolean;\n\n  payload: any;\n\n  constructor(type: string, payload: any) {\n    // These Properties below cannot be set by dict.  They are all provided for\n    // compatibility with native events.\n\n    /** @const {boolean} */\n    this.bubbles = false;\n\n    /** @const {boolean} */\n    this.cancelable = false;\n\n    /** @const {boolean} */\n    this.defaultPrevented = false;\n\n    /**\n     * According to MDN, Chrome uses high-res timers instead of epoch time.\n     * Follow suit so that timeStamps on FakeEvents use the same base as\n     * on native Events.\n     * @const {number}\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n     */\n    this.timeStamp = window.performance ? window.performance.now() : Date.now();\n\n    /** @const {string} */\n    this.type = type;\n\n    /** @const {boolean} */\n    this.isTrusted = false;\n\n    /** @type {EventTarget} */\n    this.currentTarget = null;\n\n    /** @type {EventTarget} */\n    this.target = null;\n\n\n    /**\n     * Non-standard property read by FakeEventTarget to stop processing listeners.\n     * @type {boolean}\n     */\n    this.stopped = false;\n\n    this.payload = payload;\n  }\n\n  /**\n   * Does nothing, since FakeEvents have no default.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  preventDefault() {\n  }\n\n  /**\n   * Stops processing event listeners for this event.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  stopImmediatePropagation() {\n    this.stopped = true;\n  }\n\n  /**\n   * Does nothing, since FakeEvents do not bubble.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  stopPropagation() {\n  }\n}\n\nexport default FakeEvent;\n\n\n\n// WEBPACK FOOTER //\n// ./event/fake-event.js","//@flow\n\n/**\n * General track representation of the player.\n * @classdesc\n */\nexport default class Track {\n  /**\n   * Comparing language strings.\n   * @param {string} inputLang - The configured language.\n   * @param {string} trackLang - The default track language.\n   * @returns {boolean} - Whether the strings are equal or starts with the same substring.\n   */\n  static langComparer(inputLang: string, trackLang: string): boolean {\n    try {\n      inputLang = inputLang.toLowerCase();\n      trackLang = trackLang.toLowerCase();\n      return inputLang.startsWith(trackLang) || trackLang.startsWith(inputLang);\n    } catch (e) {\n      return false;\n    }\n  }\n\n  /**\n   * The id of the track.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _id: ?string;\n  /**\n   * The active mode of the track.\n   * @member\n   * @type {boolean}\n   * @private\n   */\n  _active: boolean;\n  /**\n   * The label of the track.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _label: string;\n  /**\n   * The language of the track.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _language: string;\n  /**\n   * The index of the track.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _index: number;\n\n  /**\n   * Getter for the track id.\n   * @public\n   * @returns {?string} - The track id.\n   */\n  get id(): ?string {\n    return this._id;\n  }\n\n  /**\n   * Getter for the active mode of the track.\n   * @public\n   * @returns {boolean} - The active mode of the track.\n   */\n  get active(): boolean {\n    return this._active;\n  }\n\n  /**\n   * Setter for the active mode of the track.\n   * @public\n   * @param {boolean} value - Whether the track is active or not.\n   */\n  set active(value: boolean) {\n    this._active = value;\n  }\n\n  /**\n   * Getter for the label of the track.\n   * @public\n   * @returns {string} - The label of the track.\n   */\n  get label(): string {\n    return this._label;\n  }\n\n  /**\n   * Getter for the language of the track.\n   * @public\n   * @returns {string} - The language of the track.\n   */\n  get language(): string {\n    return this._language;\n  }\n\n  /**\n   * Getter for the index of the track.\n   * @public\n   * @returns {number} - The index of the track.\n   */\n  get index(): number {\n    return this._index;\n  }\n\n  /**\n   * @constructor\n   * @param {Object} settings - The track settings object.\n   */\n  constructor(settings: Object = {}) {\n    this._id = settings.id;\n    this._active = settings.active;\n    this._label = settings.label;\n    this._language = settings.language;\n    this._index = settings.index;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./track/track.js","//@flow\nimport MultiMap from '../utils/multi-map'\nimport FakeEvent from './fake-event'\n\n/**\n * Creates a new EventManager. An EventManager maintains a collection of \"event\n * bindings\" between event targets and event listeners.\n *\n * @struct\n * @constructor\n * @implements {IDestroyable}\n */\nclass EventManager {\n  _bindingMap: MultiMap<Binding_> | null;\n\n  constructor() {\n    /**\n     * Maps an event type to an array of event bindings.\n     * @private {MultiMap.<!EventManager.Binding_>}\n     */\n    this._bindingMap = new MultiMap();\n  }\n\n  /**\n   * Detaches all event listeners.\n   * @override\n   */\n  destroy() {\n    this.removeAll();\n    this._bindingMap = null;\n    return Promise.resolve();\n  }\n\n  /**\n   * Attaches an event listener to an event target for only one time.\n   * @param {EventTarget} target - The event target.\n   * @param {string} type - The event type.\n   * @param {EventManager.ListenerType} listener - The event listener.\n   * @returns {void}\n   */\n  listenOnce(target: any, type: string, listener: ListenerType): void {\n    let oneListener = (event) => {\n      this.unlisten(target, type, oneListener);\n      listener.call(this, event)\n    };\n    this.listen(target, type, oneListener);\n  }\n\n\n  /**\n   * Attaches an event listener to an event target.\n   * @param {EventTarget} target The event target.\n   * @param {string} type The event type.\n   * @param {EventManager.ListenerType} listener The event listener.\n   * @returns {void}\n   */\n  listen(target: any, type: string, listener: ListenerType): void {\n    let binding = new Binding_(target, type, listener);\n    if (this._bindingMap) {\n      this._bindingMap.push(type, binding);\n    }\n  }\n\n\n  /**\n   * Detaches an event listener from an event target.\n   * @param {EventTarget} target The event target.\n   * @param {string} type The event type.\n   * @param {EventManager.ListenerType} [listener] The event listener to detach. If no given, detaches all event listeners of the target and type.\n   * @returns {void}\n   */\n  unlisten(target: any, type: string, listener: ?ListenerType): void {\n    if (this._bindingMap) {\n      let list = this._bindingMap.get(type);\n\n      for (let i = 0; i < list.length; ++i) {\n        let binding = list[i];\n\n        if (binding.target === target && (binding.listener === listener || !listener)) {\n          binding.unlisten();\n          if (this._bindingMap) {\n            this._bindingMap.remove(type, binding);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Detaches all event listeners from all targets.\n   * @returns {void}\n   */\n  removeAll(): void {\n    if (this._bindingMap) {\n      let listeners = this._bindingMap.getAll();\n\n      for (let listener of listeners) {\n        listener.unlisten();\n      }\n      if (this._bindingMap) {\n        this._bindingMap.clear();\n      }\n    }\n  }\n}\n\n/**\n * @typedef {function(!Event)}\n */\ntype ListenerType = (event: FakeEvent) => any;\n\n/**\n * Creates a new Binding_ and attaches the event listener to the event target.\n * @param {EventTarget} target The event target.\n * @param {string} type The event type.\n * @param {EventManager.ListenerType} listener The event listener.\n * @constructor\n * @private\n */\nclass Binding_ {\n  target: any;\n  type: string;\n  listener: ?ListenerType;\n\n  constructor(target, type, listener) {\n    /** @type {EventTarget} */\n    this.target = target;\n\n    /** @type {string} */\n    this.type = type;\n\n    /** @type {?EventManager.ListenerType} */\n    this.listener = listener;\n\n    this.target.addEventListener(type, listener, false);\n  }\n\n\n  /**\n   * Detaches the event listener from the event target. This does nothing if the\n   * event listener is already detached.\n   * @returns {void}\n   */\n  unlisten(): void {\n    if (!this.target)\n      return;\n\n    this.target.removeEventListener(this.type, this.listener, false);\n\n    this.target = null;\n    this.listener = null;\n  }\n}\n\nexport default EventManager;\n\n\n\n// WEBPACK FOOTER //\n// ./event/event-manager.js","//@flow\nimport * as Utils from '../utils/util'\n\nconst HTML5_EVENTS: { [event: string]: string } = {\n  /**\n   * Fires when the loading of an audio/video is aborted\n   */\n  ABORT: 'abort',\n  /**\n   * Fires when the browser can start playing the audio/video\n   */\n  CAN_PLAY: 'canplay',\n  /**\n   * Fires when the browser can play through the audio/video without stopping for buffering\n   */\n  CAN_PLAY_THROUGH: 'canplaythrough',\n  /**\n   * Fires when the duration of the audio/video is changed\n   */\n  DURATION_CHANGE: 'durationchange',\n  /**\n   * Fires when the current playlist is empty\n   */\n  EMPTIED: 'emptied',\n  /**\n   * Fires when the current playlist is ended\n   */\n  ENDED: 'ended',\n  /**\n   * Fires when an error occurred during the loading of an audio/video\n   */\n  ERROR: 'error',\n  /**\n   * Fires when the browser has loaded the current frame of the audio/video\n   */\n  LOADED_DATA: 'loadeddata',\n  /**\n   * Fires when the browser has loaded meta data for the audio/video\n   */\n  LOADED_METADATA: 'loadedmetadata',\n  /**\n   * Fires when the browser starts looking for the audio/video\n   */\n  LOAD_START: 'loadstart',\n  /**\n   * Fires when the audio/video has been paused\n   */\n  PAUSE: 'pause',\n  /**\n   * Fires when the audio/video has been started or is no longer paused\n   */\n  PLAY: 'play',\n  /**\n   * Fires when the audio/video is playing after having been paused or stopped for buffering\n   */\n  PLAYING: 'playing',\n  /**\n   * Fires when the browser is downloading the audio/video\n   */\n  PROGRESS: 'progress',\n  /**\n   * Fires when the playing speed of the audio/video is changed\n   */\n  RATE_CHANGE: 'ratechange',\n  /**\n   * Fires when the user is finished moving/skipping to a new position in the audio/video\n   */\n  SEEKED: 'seeked',\n  /**\n   * Fires when the user starts moving/skipping to a new position in the audio/video\n   */\n  SEEKING: 'seeking',\n  /**\n   * Fires when the browser is trying to get media data, but data is not available\n   */\n  STALLED: 'stalled',\n  /**\n   * Fires when the browser is intentionally not getting media data\n   */\n  SUSPEND: 'suspend',\n  /**\n   * Fires when the current playback position has changed\n   */\n  TIME_UPDATE: 'timeupdate',\n  /**\n   * Fires when the volume has been changed\n   */\n  VOLUME_CHANGE: 'volumechange',\n  /**\n   * Fires when the video stops because it needs to buffer the next frame\n   */\n  WAITING: 'waiting'\n};\n\nconst CUSTOM_EVENTS: { [event: string]: string } = {\n  /**\n   * Fires when browser fails to autoplay with sound\n   */\n  AUTOPLAY_FAILED: 'autoplayfailed',\n  /**\n   * Fires when browser fails to autoplay with sound but start muted autoplay instead\n   */\n  FALLBACK_TO_MUTED_AUTOPLAY: 'fallbacktomutedautoplay',\n  /**\n   * Fires when change source flow started\n   */\n  CHANGE_SOURCE_STARTED: 'changesourcestarted',\n  /**\n   * Fires when change source flow ended\n   */\n  CHANGE_SOURCE_ENDED: 'changesourceended',\n  /**\n   * Fires when the volume has been muted/unmute\n   */\n  MUTE_CHANGE: 'mutechange',\n  /**\n   * Fires when the active video track has been changed\n   */\n  VIDEO_TRACK_CHANGED: 'videotrackchanged',\n  /**\n   * Fires when the active audio track has been changed\n   */\n  AUDIO_TRACK_CHANGED: 'audiotrackchanged',\n  /**\n   * Fires when the active text track has been changed\n   */\n  TEXT_TRACK_CHANGED: 'texttrackchanged',\n  /**\n   * Fires when the active text track cue has changed\n   */\n  TEXT_CUE_CHANGED: 'textcuechanged',\n  /**\n   * Fires when the player tracks have been changed\n   */\n  TRACKS_CHANGED: 'trackschanged',\n  /**\n   * Fires when the abr mode change from 'auto' to 'manual' or vice versa\n   */\n  ABR_MODE_CHANGED: 'abrmodechanged',\n  /**\n   * Fires when the player state has been changed\n   */\n  PLAYER_STATE_CHANGED: 'playerstatechanged',\n  /**\n   * Fires on the first play\n   */\n  FIRST_PLAY: 'firstplay',\n  /**\n   * Fires when the player has selected the source to play\n   */\n  SOURCE_SELECTED: 'sourceselected',\n  /**\n   * Fires when the text track style has changed\n   */\n  TEXT_STYLE_CHANGED: 'textstylechanged',\n  /**\n   * Fired when ad data is available.\n   */\n  AD_LOADED: 'adloaded',\n  /**\n   * Fired when the ad starts playing.\n   */\n  AD_STARTED: 'adstarted',\n  /**\n   * Fired when the ad is resumed.\n   */\n  AD_RESUMED: 'adresumed',\n  /**\n   * Fired when the ad is paused.\n   */\n  AD_PAUSED: 'adpaused',\n  /**\n   * Fired when the ad is clicked.\n   */\n  AD_CLICKED: 'adclicked',\n  /**\n   * Fired when the ad is skipped by the user.\n   */\n  AD_SKIPPED: 'adskipped',\n  /**\n   * Fired when the ad completes playing.\n   */\n  AD_COMPLETED: 'adcompleted',\n  /**\n   * Fired when an error occurred while the ad was loading or playing.\n   */\n  AD_ERROR: 'aderror',\n  /**\n   * Fired when the ads manager is done playing all the ads.\n   */\n  ALL_ADS_COMPLETED: 'alladscompleted',\n  /**\n   * Fired when content should be paused. This usually happens right before an ad is about to cover the content.\n   */\n  AD_BREAK_START: 'adbreakstart',\n  /**\n   * Fired when content should be resumed. This usually happens when an ad finishes or collapses.\n   */\n  AD_BREAK_END: 'adbreakend',\n  /**\n   * Fired when the ad playhead crosses first quartile.\n   */\n  AD_FIRST_QUARTILE: 'adfirstquartile',\n  /**\n   * Fired when the ad playhead crosses midpoint.\n   */\n  AD_MIDPOINT: 'admidpoint',\n  /**\n   * Fired when the ad playhead crosses third quartile.\n   */\n  AD_THIRD_QUARTILE: 'adthirdquartile',\n  /**\n   * Fired when the ad is closed by the user.\n   */\n  USER_CLOSED_AD: 'userclosedad',\n  /**\n   * Fired when the ad volume has changed.\n   */\n  AD_VOLUME_CHANGED: 'advolumechanged',\n  /**\n   * Fired when the ad volume has been muted.\n   */\n  AD_MUTED: 'admuted',\n  /**\n   * Fired on ad time progress.\n   */\n  AD_PROGRESS: 'adprogress'\n};\n\nconst PLAYER_EVENTS: { [event: string]: string } = Utils.Object.merge([HTML5_EVENTS, CUSTOM_EVENTS]);\n\nexport {PLAYER_EVENTS, HTML5_EVENTS, CUSTOM_EVENTS};\n\n\n\n// WEBPACK FOOTER //\n// ./event/events.js","//@flow\nimport Track from './track'\n\n/**\n * Video track representation of the player.\n * @classdesc\n */\nexport default class VideoTrack extends Track {\n  /**\n   * @member {number} _bandwidth - The bandwidth of the video track\n   * @type {number}\n   * @private\n   */\n  _bandwidth: number;\n\n  /**\n   * @member {number} _width - The width of the video track\n   * @type {number}\n   * @private\n   */\n  _width: number;\n\n  /**\n   * @member {number} _height - The height of the video track\n   * @type {number}\n   * @private\n   */\n  _height: number;\n\n  /**\n   * @public\n   * @returns {number} - The bandwidth of the video track\n   */\n  get bandwidth(): number {\n    return this._bandwidth;\n  }\n\n  /**\n   * @public\n   * @returns {number} - The width of the video track\n   */\n  get width(): number {\n    return this._width;\n  }\n\n  /**\n   * @public\n   * @returns {number} - The height of the video track\n   */\n  get height(): number {\n    return this._height;\n  }\n\n  /**\n   * @constructor\n   * @param {Object} settings - The track settings object\n   */\n  constructor(settings: Object = {}) {\n    super(settings);\n    this._bandwidth = settings.bandwidth;\n    this._width = settings.width;\n    this._height = settings.height;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./track/video-track.js","//@flow\nimport Track from './track'\n\n/**\n * Audio track representation of the player.\n * @classdesc\n */\nexport default class AudioTrack extends Track {}\n\n\n\n// WEBPACK FOOTER //\n// ./track/audio-track.js","//@flow\nimport Track from './track'\n\n/**\n * Text track representation of the player.\n * @classdesc\n */\nexport default class TextTrack extends Track {\n  /**\n   * The kind of the text track:\n   * subtitles/captions/metadata.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _kind: string;\n\n  /**\n   * Getter for the kind of the text track.\n   * @public\n   * @returns {string} - The kind of the text track.\n   */\n  get kind(): string {\n    return this._kind;\n  }\n\n  /**\n   * @constructor\n   * @param {Object} settings - The track settings object.\n   */\n  constructor(settings: Object = {}) {\n    super(settings);\n    this._kind = settings.kind;\n  }\n}\n\nexport {TextTrack};\n\n\n\n// WEBPACK FOOTER //\n// ./track/text-track.js","//@flow\nimport Env from './utils/env'\nimport EventManager from './event/event-manager'\nimport PosterManager from './utils/poster-manager'\nimport FakeEvent from './event/fake-event'\nimport FakeEventTarget from './event/fake-event-target'\nimport {PLAYER_EVENTS as PlayerEvents, HTML5_EVENTS as Html5Events, CUSTOM_EVENTS as CustomEvents} from './event/events'\nimport PlayerStates from './state/state-types'\nimport * as Utils from './utils/util'\nimport Locale from './utils/locale'\nimport LoggerFactory from './utils/logger'\nimport Html5 from './engines/html5/html5'\nimport PluginManager from './plugin/plugin-manager'\nimport BasePlugin from './plugin/base-plugin'\nimport StateManager from './state/state-manager'\nimport TrackTypes from './track/track-types'\nimport Track from './track/track'\nimport VideoTrack from './track/video-track'\nimport AudioTrack from './track/audio-track'\nimport TextTrack from './track/text-track'\nimport TextStyle from './track/text-style'\nimport {Cue} from './track/vtt-cue'\nimport {processCues} from './track/text-track-display'\nimport PlaybackMiddleware from './middleware/playback-middleware'\nimport DefaultPlayerConfig from './player-config.json'\nimport './assets/style.css'\n\n/**\n * The player container class name.\n * @type {string}\n * @const\n */\nconst CONTAINER_CLASS_NAME: string = 'playkit-container';\n\n/**\n /**\n * The player poster class name.\n * @type {string}\n * @const\n */\nconst POSTER_CLASS_NAME: string = 'playkit-poster';\n\n/**\n * The engine class name.\n * @type {string}\n * @const\n */\nconst ENGINE_CLASS_NAME: string = 'playkit-engine';\n\n/**\n * The text style id.\n * @type {string}\n * @const\n */\nconst SUBTITLES_STYLE_ID_NAME: string = 'playkit-subtitles-style';\n\n/**\n * The subtitles class name.\n * @type {string}\n * @const\n */\nconst SUBTITLES_CLASS_NAME: string = 'playkit-subtitles';\n\n/**\n * The live string.\n * @type {string}\n * @const\n */\nconst LIVE: string = 'Live';\n\n/**\n *  The auto string, for captions\n *  @type {string}\n *  @const\n */\nconst AUTO: string = 'auto';\n\n/**\n *  The off string, for captions\n *  @type {string}\n *  @const\n */\nconst OFF: string = 'off';\n\n/**\n *  The duration offset, for seeking to duration safety.\n *  @type {number}\n *  @const\n */\nconst DURATION_OFFSET: number = 0.1;\n\n/**\n * The HTML5 player class.\n * @classdesc\n */\nexport default class Player extends FakeEventTarget {\n  /**\n   * The player class logger.\n   * @type {any}\n   * @static\n   * @private\n   */\n  static _logger: any = LoggerFactory.getLogger('Player');\n  /**\n   * The available engines of the player.\n   * @type {Array<typeof IEngine>}\n   * @private\n   * @static\n   */\n  static _engines: Array<typeof IEngine> = [Html5];\n  /**\n   * The player capabilities result object.\n   * @type {Object}\n   * @private\n   * @static\n   */\n  static _playerCapabilities: Object;\n\n  /**\n   * Runs the engines capabilities tests.\n   * @returns {void}\n   * @public\n   * @static\n   */\n  static runCapabilities(): void {\n    Player._logger.debug(\"Running player capabilities\");\n    Player._engines.forEach(Engine => Engine.runCapabilities());\n  }\n\n  /**\n   * Gets the engines capabilities.\n   * @param {?string} engineType - The engine type.\n   * @return {Promise<Object>} - The engines capabilities object.\n   * @public\n   * @static\n   */\n  static getCapabilities(engineType: ?string): Promise<Object> {\n    Player._logger.debug(\"Get player capabilities\", engineType);\n    if (Player._playerCapabilities) {\n      return (engineType ? Promise.resolve(Player._playerCapabilities[engineType]) : Promise.resolve(Player._playerCapabilities));\n    }\n    let promises = [];\n    Player._engines.forEach(Engine => promises.push(Engine.getCapabilities()));\n    return Promise.all(promises)\n      .then((arrayOfResults) => {\n        Player._playerCapabilities = {};\n        arrayOfResults.forEach(res => Object.assign(Player._playerCapabilities, res));\n        return (engineType ? Promise.resolve(Player._playerCapabilities[engineType]) : Promise.resolve(Player._playerCapabilities));\n      });\n  }\n\n  /**\n   * The plugin manager of the player.\n   * @type {PluginManager}\n   * @private\n   */\n  _pluginManager: PluginManager;\n  /**\n   * The event manager of the player.\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The poster manager of the player.\n   * @type {PosterManager}\n   * @private\n   */\n  _posterManager: PosterManager;\n  /**\n   * The runtime configuration of the player.\n   * @type {Object}\n   * @private\n   */\n  _config: Object;\n  /**\n   * The playback engine.\n   * @type {IEngine}\n   * @private\n   */\n  _engine: IEngine;\n  /**\n   * The state manager of the player.\n   * @type {StateManager}\n   * @private\n   */\n  _stateManager: StateManager;\n  /**\n   * The tracks of the player.\n   * @type {Array<Track>}\n   * @private\n   */\n  _tracks: Array<Track>;\n  /**\n   * The player ready promise\n   * @type {Promise<*>}\n   * @private\n   */\n  _readyPromise: ?Promise<*>;\n  /**\n   * Whether the play is the first or not\n   * @type {boolean}\n   * @private\n   */\n  _firstPlay: boolean;\n  /**\n   * The player DOM element container.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _el: HTMLDivElement;\n  /**\n   * The player text DOM element container.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _textDisplayEl: HTMLDivElement;\n  /**\n   * The player DOM id.\n   * @type {string}\n   * @private\n   */\n  _playerId: string;\n  /**\n   * The player last updated text cues list\n   * @type {Array<any>}\n   * @private\n   */\n  _activeTextCues: Array<any> = [];\n  /**\n   * The player text disaply settings\n   * @type {Object}\n   * @private\n   */\n  _textDisplaySettings: Object = {};\n  /**\n   * The player text style settings\n   * @type {TextStyle}\n   * @private\n   */\n  _textStyle: TextStyle;\n  /**\n   * The playback middleware of the player.\n   * @type {PlaybackMiddleware}\n   * @private\n   */\n  _playbackMiddleware: PlaybackMiddleware;\n  /**\n   * The environment(os,device,browser) object of the player.\n   * @type {Object}\n   * @private\n   */\n  _env: Object;\n  /**\n   * The currently selected engine type\n   * @type {string}\n   * @private\n   */\n  _engineType: string;\n  /**\n   * The currently selected stream type\n   * @type {string}\n   * @private\n   */\n  _streamType: string;\n  /**\n   * Flag to indicate whether is the first play in the current session.\n   * @type {boolean}\n   * @private\n   */\n  _firstPlayInCurrentSession: boolean;\n  /**\n   * The current playback attributes state\n   * @type {Object}\n   * @private\n   */\n  _playbackAttributesState: { [attribute: string]: any } = {\n    muted: undefined,\n    volume: undefined,\n    rate: undefined,\n    audioLanguage: \"\",\n    textLanguage: \"\"\n  };\n\n  /**\n   * @param {Object} config - The configuration for the player instance.\n   * @constructor\n   */\n  constructor(config: Object = {}) {\n    super();\n    this._env = Env;\n    this._tracks = [];\n    this._firstPlay = true;\n    this._firstPlayInCurrentSession = true;\n    this._config = Player._defaultConfig;\n    this._eventManager = new EventManager();\n    this._posterManager = new PosterManager();\n    this._stateManager = new StateManager(this);\n    this._pluginManager = new PluginManager();\n    this._playbackMiddleware = new PlaybackMiddleware();\n    this._textStyle = new TextStyle();\n    this._createReadyPromise();\n    this._createPlayerContainer();\n    this._appendPosterEl();\n    this.configure(config);\n  }\n\n  // <editor-fold desc=\"Public API\">\n\n  // <editor-fold desc=\"Playback API\">\n\n  /**\n   * Configures the player according to a given configuration.\n   * @param {Object} config - The configuration for the player instance.\n   * @returns {void}\n   */\n  configure(config: Object): void {\n    Utils.Object.mergeDeep(this._config, config);\n    this._configureOrLoadPlugins(config.plugins);\n    if (!Utils.Object.isEmptyObject(config.sources)) {\n      const receivedSourcesWhenHasEngine: boolean = !!this._engine;\n      if (receivedSourcesWhenHasEngine) {\n        this._reset();\n        Player._logger.debug('Change source started');\n        this.dispatchEvent(new FakeEvent(CustomEvents.CHANGE_SOURCE_STARTED));\n      }\n      if (this._selectEngineByPriority()) {\n        this._appendEngineEl();\n        this._posterManager.setSrc(this._config.metadata.poster);\n        this._posterManager.show();\n        this._attachMedia();\n        this._handlePlaybackOptions();\n        this._handleAutoPlay();\n        if (receivedSourcesWhenHasEngine) {\n          Player._logger.debug('Change source ended');\n          this.dispatchEvent(new FakeEvent(CustomEvents.CHANGE_SOURCE_ENDED));\n        }\n      }\n    }\n  }\n\n  /**\n   * The player readiness\n   * @public\n   * @returns {Promise<*>} - The ready promise\n   */\n  ready(): Promise<*> {\n    return this._readyPromise ? this._readyPromise : Promise.resolve();\n  }\n\n  /**\n   * Load media\n   * @public\n   * @returns {void}\n   */\n  load(): void {\n    if (this._engine) {\n      let startTime = this._config.playback.startTime;\n      this._engine.load(startTime).then((data) => {\n        this._tracks = data.tracks;\n        this._addTextTrackOffOption();\n        this._setDefaultTracks();\n        this.dispatchEvent(new FakeEvent(CustomEvents.TRACKS_CHANGED, {tracks: this._tracks}));\n      }).catch((error) => {\n        this.dispatchEvent(new FakeEvent(Html5Events.ERROR, error));\n      });\n    }\n  }\n\n  /**\n   * Start/resume playback.\n   * @returns {void}\n   * @public\n   */\n  play(): void {\n    if (this._engine) {\n      this._playbackMiddleware.play(this._play.bind(this));\n    }\n  }\n\n  /**\n   * Pause playback.\n   * @returns {void}\n   * @public\n   */\n  pause(): void {\n    if (this._engine) {\n      this._playbackMiddleware.pause(this._pause.bind(this));\n    }\n  }\n\n  /**\n   * Gets the view of the player (i.e the dom container object).\n   * @return {HTMLElement} - The dom container.\n   * @public\n   */\n  getView(): HTMLElement {\n    return this._el;\n  }\n\n  /**\n   * @returns {HTMLVideoElement} - The video element.\n   * @public\n   */\n  getVideoElement(): ?HTMLVideoElement {\n    if (this._engine) {\n      return this._engine.getVideoElement();\n    }\n  }\n\n  /**\n   * Destroys the player.\n   * @returns {void}\n   * @public\n   */\n  destroy(): void {\n    if (this._engine) {\n      this._engine.destroy();\n    }\n    this._posterManager.destroy();\n    this._eventManager.destroy();\n    this._pluginManager.destroy();\n    this._stateManager.destroy();\n    this._activeTextCues = [];\n    this._textDisplaySettings = {};\n    this._config = {};\n    this._tracks = [];\n    this._engineType = '';\n    this._streamType = '';\n    this._readyPromise = null;\n    this._firstPlay = true;\n    this._playbackAttributesState = {};\n    if (this._el) {\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n  }\n\n  buffered(): void {\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   */\n  set currentTime(to: number): void {\n    if (this._engine) {\n      if (Utils.Number.isNumber(to)) {\n        let boundedTo = to;\n        if (to < 0) {\n          boundedTo = 0;\n        }\n        if (boundedTo > this._engine.duration - DURATION_OFFSET) {\n          boundedTo = this._engine.duration - DURATION_OFFSET;\n        }\n        this._engine.currentTime = boundedTo;\n      }\n    }\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {?Number} - The playback current time.\n   * @public\n   */\n  get currentTime(): ?number {\n    if (this._engine) {\n      return this._engine.currentTime;\n    }\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {?Number} - The playback duration.\n   * @public\n   */\n  get duration(): ?number {\n    if (this._engine) {\n      return this._engine.duration;\n    }\n  }\n\n  /**\n   * Set playback volume.\n   * @param {Number} vol - The volume to set.\n   * @returns {void}\n   * @public\n   */\n  set volume(vol: number): void {\n    if (this._engine) {\n      if (Utils.Number.isFloat(vol) || (vol === 0) || (vol === 1)) {\n        let boundedVol = vol;\n        if (boundedVol < 0) {\n          boundedVol = 0;\n        }\n        if (boundedVol > 1) {\n          boundedVol = 1;\n        }\n        this._engine.volume = boundedVol;\n      }\n    }\n  }\n\n  /**\n   * Get playback volume.\n   * @returns {?Number} - The playback volume.\n   * @public\n   */\n  get volume(): ?number {\n    if (this._engine) {\n      return this._engine.volume;\n    }\n  }\n\n  /**\n   * Get paused state.\n   * @returns {?boolean} - Whether the video is paused or not.\n   * @public\n   */\n  get paused(): ?boolean {\n    if (this._engine) {\n      return this._engine.paused;\n    }\n  }\n\n  /**\n   * Get seeking state.\n   * @returns {?boolean} - Whether the video is seeking or not.\n   * @public\n   */\n  get seeking(): ?boolean {\n    if (this._engine) {\n      return this._engine.seeking;\n    }\n  }\n\n  /**\n   * Set playsinline attribute.\n   * Relevant for iOS 10 and up:\n   * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n   * @param {boolean} playsinline - Whether the video should plays in line.\n   */\n  set playsinline(playsinline: boolean): void {\n    if (this._engine) {\n      this._engine.playsinline = playsinline;\n    }\n  }\n\n  /**\n   * Get playsinline attribute.\n   * Relevant for iOS 10 and up:\n   * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n   * @returns {boolean} - Whether the video plays in line.\n   */\n  get playsinline(): ?boolean {\n    if (this._engine) {\n      return this._engine.playsinline;\n    }\n  }\n\n  /**\n   * Set player muted state.\n   * @param {boolean} mute - The mute value.\n   * @returns {void}\n   * @public\n   */\n  set muted(mute: boolean): void {\n    if (this._engine) {\n      this._engine.muted = mute;\n      this.dispatchEvent(new FakeEvent(CustomEvents.MUTE_CHANGE, {mute: mute}));\n    }\n  }\n\n  /**\n   * Get player muted state.\n   * @returns {?boolean} - Whether the video is muted or not.\n   * @public\n   */\n  get muted(): ?boolean {\n    if (this._engine) {\n      return this._engine.muted;\n    }\n  }\n\n  /**\n   * Get the player source.\n   * @returns {?string} - The current source of the player.\n   * @public\n   */\n  get src(): ?string {\n    if (this._engine) {\n      return this._engine.src;\n    }\n  }\n\n  /**\n   * Get the dimensions of the player.\n   * @returns {{width: number, height: number}} - The dimensions of the player.\n   * @public\n   */\n  get dimensions(): Object {\n    return {\n      width: this._el.clientWidth,\n      height: this._el.clientHeight\n    };\n  }\n\n  /**\n   * Get the poster source URL\n   * @returns {string} - the poster image URL\n   */\n  get poster(): string {\n    return this._posterManager.src;\n  }\n\n  /**\n   * Sets the playbackRate property.\n   * @param {number} rate - The playback speed of the video.\n   */\n  set playbackRate(rate: number): void {\n    if (this._engine) {\n      this._engine.playbackRate = rate;\n    }\n  }\n\n  /**\n   * Gets the current playback speed of the video.\n   * @returns {number} - The current playback speed of the video.\n   */\n  get playbackRate(): ?number {\n    if (this._engine) {\n      return this._engine.playbackRate;\n    }\n  }\n\n  /**\n   * get the engine type\n   * @returns {string} - html5\n   */\n  get engineType(): ?string {\n    return this._engineType;\n  }\n\n  /**\n   * get the stream type\n   * @returns {string} - hls|dash|progressive\n   */\n  get streamType(): ?string {\n    return this._streamType;\n  }\n\n  /**\n   * Getter for the environment of the player instance.\n   * @return {Object} - The current environment object.\n   * @public\n   */\n  get env(): Object {\n    return this._env;\n  }\n\n  /**\n   * Get the player config.\n   * @returns {Object} - A copy of the player configuration.\n   * @public\n   */\n  get config(): Object {\n    return Utils.Object.mergeDeep({}, this._config);\n  }\n\n  /**\n   * Set player session id\n   * @param {string} sessionId - the player session id to set\n   * @returns {void}\n   * @public\n   */\n  set sessionId(sessionId: string): void {\n    this._config.session = this._config.session || {};\n    this._config.session.id = sessionId;\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Live API\">\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return !!(this._config.type === LIVE || (this._engine && this._engine.isLive()));\n  }\n\n  /**\n   * Checking if the current live playback has DVR window.\n   * @function isDvr\n   * @returns {boolean} - Whether live playback has DVR window.\n   * @public\n   */\n  isDvr(): boolean {\n    return this.isLive() && this._config.dvr;\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    if (this._engine && this.isLive()) {\n      this._engine.seekToLiveEdge();\n    }\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Tracks API\">\n\n  /**\n   * Returns the tracks according to the filter. if no filter given returns the all tracks.\n   * @function getTracks\n   * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n   * @returns {Array<Track>} - The parsed tracks.\n   * @public\n   */\n  getTracks(type?: string): Array<Track> {\n    return this._getTracksByType(type);\n  }\n\n  /**\n   * Get an object includes the active video/audio/text tracks\n   * @return {{video: VideoTrack, audio: AudioTrack, text: TextTrack}} - The active tracks object\n   */\n  getActiveTracks(): Object {\n    return {\n      video: this._getTracksByType(TrackTypes.VIDEO).find(track => track.active),\n      audio: this._getTracksByType(TrackTypes.AUDIO).find(track => track.active),\n      text: this._getTracksByType(TrackTypes.TEXT).find(track => track.active),\n    };\n  }\n\n  /**\n   * Select a track\n   * @function selectTrack\n   * @param {?Track} track - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectTrack(track: ?Track): void {\n    if (this._engine) {\n      if (track instanceof VideoTrack) {\n        this._engine.selectVideoTrack(track);\n      } else if (track instanceof AudioTrack) {\n        this._engine.selectAudioTrack(track);\n      } else if (track instanceof TextTrack) {\n        if (track.language === OFF) {\n          this.hideTextTrack();\n          this._playbackAttributesState.textLanguage = OFF;\n        } else {\n          this._engine.selectTextTrack(track);\n        }\n      }\n    }\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    if (this._engine) {\n      this._engine.hideTextTrack();\n      this._updateTextDisplay([]);\n      const textTracks = this._getTracksByType(TrackTypes.TEXT);\n      textTracks.map(track => track.active = false);\n      const textTrack = textTracks.find(track => track.language === OFF);\n      if (textTrack) {\n        textTrack.active = true;\n        this.dispatchEvent(new FakeEvent(CustomEvents.TEXT_TRACK_CHANGED, {selectedTextTrack: textTrack}))\n      }\n    }\n  }\n\n  /**\n   * Enables adaptive bitrate switching.\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    if (this._engine) {\n      this._engine.enableAdaptiveBitrate();\n    }\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    if (this._engine) {\n      return this._engine.isAdaptiveBitrateEnabled();\n    }\n    return false;\n  }\n\n  /**\n   * update the text display settings\n   * @param {Object} settings - text cue display settings\n   * @public\n   * @returns {void}\n   */\n  setTextDisplaySettings(settings: Object): void {\n    this._textDisplaySettings = settings;\n    this._updateCueDisplaySettings();\n    for (let i = 0; i < this._activeTextCues.length; i++) {\n      this._activeTextCues[i].hasBeenReset = true;\n    }\n    this._updateTextDisplay(this._activeTextCues);\n  }\n\n  /**\n   * Sets style attributes for text tracks.\n   * @param {TextStyle} style - text styling settings\n   * @returns {void}\n   */\n  set textStyle(style: TextStyle): void {\n    if (!(style instanceof TextStyle)) {\n      throw new Error(\"Style must be instance of TextStyle\");\n    }\n    let element = Utils.Dom.getElementById(SUBTITLES_STYLE_ID_NAME);\n    if (!element) {\n      element = Utils.Dom.createElement('style');\n      Utils.Dom.setAttribute(element, 'id', SUBTITLES_STYLE_ID_NAME);\n      Utils.Dom.appendChild(document.head, element);\n    }\n    let sheet = element.sheet;\n\n    while (sheet.cssRules.length) {\n      sheet.deleteRule(0);\n    }\n\n    try {\n      if (this._config.playback.useNativeTextTrack) {\n        sheet.insertRule(`video.${ENGINE_CLASS_NAME}::cue { ${style.toCSS()} }`, 0);\n      } else {\n        sheet.insertRule(`#${this._playerId} .${SUBTITLES_CLASS_NAME} > div > div > div { ${style.toCSS()} }`, 0);\n      }\n      this._textStyle = style;\n      this.dispatchEvent(new FakeEvent(CustomEvents.TEXT_STYLE_CHANGED));\n    } catch (e) {\n      Player._logger.error(e.message);\n    }\n  }\n\n  /**\n   * Gets style attributes for text tracks.\n   * @returns {?TextStyle} - the current style attribute\n   */\n  get textStyle(): ?TextStyle {\n    return this._textStyle.clone();\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Ads API\">\n\n  /**\n   * Skip on an ad.\n   * @public\n   * @returns {void}\n   */\n  skipAd(): void {\n    let adsPlugin: ?BasePlugin = this._pluginManager.get('ima');\n    if (adsPlugin && typeof adsPlugin.skipAd === 'function') {\n      adsPlugin.skipAd();\n    }\n  }\n\n  /**\n   * Start to play ad on demand.\n   * @param {string} adTagUrl - The ad tag url to play.\n   * @public\n   * @returns {void}\n   */\n  playAdNow(adTagUrl: string): void {\n    let adsPlugin: ?BasePlugin = this._pluginManager.get('ima');\n    if (adsPlugin && typeof adsPlugin.playAdNow === 'function') {\n      adsPlugin.playAdNow(adTagUrl);\n    }\n  }\n\n  // </editor-fold>\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Private Methods\">\n\n  // <editor-fold desc=\"Playback\">\n\n  /**\n   * Creates the player container.\n   * @private\n   * @returns {void}\n   */\n  _createPlayerContainer(): void {\n    const el = this._el = Utils.Dom.createElement(\"div\");\n    Utils.Dom.addClassName(el, CONTAINER_CLASS_NAME);\n    this._playerId = Utils.Generator.uniqueId(5);\n    Utils.Dom.setAttribute(el, \"id\", this._playerId);\n    Utils.Dom.setAttribute(el, \"tabindex\", '-1');\n  }\n\n  /**\n   * Appends the poster element to the player's div container.\n   * @private\n   * @returns {void}\n   */\n  _appendPosterEl(): void {\n    if (this._el) {\n      let el: HTMLDivElement = this._posterManager.getElement();\n      Utils.Dom.addClassName(el, POSTER_CLASS_NAME);\n      Utils.Dom.appendChild(this._el, el);\n    }\n  }\n\n  /**\n   * Appends the engine's video element to the player's div container.\n   * @private\n   * @returns {void}\n   */\n  _appendEngineEl(): void {\n    if (this._el && this._engine) {\n      let engineEl = this._engine.getVideoElement();\n      const classname = `${ENGINE_CLASS_NAME}`;\n      Utils.Dom.addClassName(engineEl, classname);\n      const classnameWithId = `${ENGINE_CLASS_NAME}-${this._engine.id}`;\n      Utils.Dom.addClassName(engineEl, classnameWithId);\n      Utils.Dom.prependTo(engineEl, this._el);\n    }\n  }\n\n  /**\n   * Configures or load the plugins defined in the configuration.\n   * @param {Object} plugins - The new received plugins configuration.\n   * @private\n   * @returns {void}\n   */\n  _configureOrLoadPlugins(plugins: Object = {}): void {\n    if (plugins) {\n      Object.keys(plugins).forEach((name) => {\n        // If the plugin is already exists in the registry we are updating his config\n        const plugin = this._pluginManager.get(name);\n        if (plugin) {\n          plugin.updateConfig(plugins[name]);\n          this._config.plugins[name] = plugin.getConfig();\n        } else {\n          // We allow to load plugins as long as the player has no engine\n          if (!this._engine) {\n            this._pluginManager.load(name, this, plugins[name]);\n            let plugin = this._pluginManager.get(name);\n            if (plugin) {\n              this._config.plugins[name] = plugin.getConfig();\n              if (typeof plugin.getMiddlewareImpl === \"function\") {\n                this._playbackMiddleware.use(plugin.getMiddlewareImpl());\n              }\n            }\n          } else {\n            delete this._config.plugins[name];\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Creates the ready promise.\n   * @private\n   * @returns {void}\n   */\n  _createReadyPromise(): void {\n    this._readyPromise = new Promise((resolve, reject) => {\n      this._eventManager.listen(this, CustomEvents.TRACKS_CHANGED, resolve);\n      this._eventManager.listen(this, Html5Events.ERROR, reject);\n    });\n  }\n\n  /**\n   * Selects an engine to play a source according to a given stream priority.\n   * @return {boolean} - Whether a proper engine was found to play the given sources\n   * according to the priority.\n   * @private\n   */\n  _selectEngineByPriority(): boolean {\n    const streamPriority = this._config.playback.streamPriority;\n    const preferNative = this._config.playback.preferNative;\n    const sources = this._config.sources;\n    for (let priority of streamPriority) {\n      const engineId = (typeof priority.engine === 'string') ? priority.engine.toLowerCase() : '';\n      const format = (typeof priority.format === 'string') ? priority.format.toLowerCase() : '';\n      const Engine = Player._engines.find((Engine) => Engine.id === engineId);\n      if (Engine) {\n        const formatSources = sources[format];\n        if (formatSources && formatSources.length > 0) {\n          const source = formatSources[0];\n          if (Engine.canPlaySource(source, preferNative[format])) {\n            Player._logger.debug('Source selected: ', formatSources);\n            this._loadEngine(Engine, source);\n            this._engineType = engineId;\n            this._streamType = format;\n            this.dispatchEvent(new FakeEvent(CustomEvents.SOURCE_SELECTED, {selectedSource: formatSources}));\n            return true;\n          }\n        }\n      }\n    }\n    Player._logger.warn(\"No playable engines was found to play the given sources\");\n    return false;\n  }\n\n  /**\n   * Loads the selected engine.\n   * @param {IEngine} Engine - The selected engine.\n   * @param {Source} source - The selected source object.\n   * @private\n   * @returns {void}\n   */\n  _loadEngine(Engine: typeof IEngine, source: Source) {\n    if (this._engine) {\n      if (this._engine.id === Engine.id) {\n        this._engine.restore(source, this._config);\n      } else {\n        this._engine.destroy();\n        this._engine = Engine.createEngine(source, this._config);\n      }\n    } else {\n      this._engine = Engine.createEngine(source, this._config);\n    }\n  }\n\n  /**\n   * Listen to all HTML5 defined events and trigger them on the player\n   * @private\n   * @returns {void}\n   */\n  _attachMedia(): void {\n    if (this._engine) {\n      Object.keys(Html5Events).forEach((html5Event) => {\n        this._eventManager.listen(this._engine, Html5Events[html5Event], (event: FakeEvent) => {\n          return this.dispatchEvent(event);\n        });\n      });\n      this._eventManager.listen(this._engine, Html5Events.SEEKED, () => {\n        const browser = this._env.browser.name;\n        if (browser === 'Edge' || browser === 'IE') {\n          this._removeTextCuePatch();\n        }\n      });\n      this._eventManager.listen(this._engine, CustomEvents.VIDEO_TRACK_CHANGED, (event: FakeEvent) => {\n        this._markActiveTrack(event.payload.selectedVideoTrack);\n        return this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEvents.AUDIO_TRACK_CHANGED, (event: FakeEvent) => {\n        this._playbackAttributesState.audioLanguage = event.payload.selectedAudioTrack.language;\n        this._markActiveTrack(event.payload.selectedAudioTrack);\n        return this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEvents.TEXT_TRACK_CHANGED, (event: FakeEvent) => {\n        this._playbackAttributesState.textLanguage = event.payload.selectedTextTrack.language;\n        this._markActiveTrack(event.payload.selectedTextTrack);\n        return this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEvents.TEXT_CUE_CHANGED, (event: FakeEvent) => this._onCueChange(event));\n      this._eventManager.listen(this._engine, CustomEvents.ABR_MODE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEvents.AUTOPLAY_FAILED, (event: FakeEvent) => {\n        this.pause();\n        this.dispatchEvent(event)\n      });\n      this._eventManager.listen(this, Html5Events.PLAY, this._onPlay.bind(this));\n      this._eventManager.listen(this, Html5Events.ENDED, this._onEnded.bind(this));\n      this._eventManager.listen(this, CustomEvents.MUTE_CHANGE, () => {\n        this._playbackAttributesState.muted = this.muted;\n      });\n      this._eventManager.listen(this, Html5Events.VOLUME_CHANGE, () => {\n        this._playbackAttributesState.volume = this.volume;\n      });\n      this._eventManager.listen(this, Html5Events.RATE_CHANGE, () => {\n        this._playbackAttributesState.rate = this.playbackRate;\n      });\n    }\n  }\n\n  /**\n   * Handles the cue text removal issue, when seeking to a time without captions in IE \\ edge the previous captions\n   * are not removed\n   * @returns {void}\n   * @private\n   */\n  _removeTextCuePatch(): void {\n    let filteredActiveTextCues = this._activeTextCues.filter((textCue) => {\n      const cueEndTime = textCue._endTime;\n      const cueStartTime = textCue._startTime;\n      const currTime = this.currentTime;\n      if (currTime < cueEndTime && currTime > cueStartTime) {\n        return textCue;\n      }\n    });\n    this._updateTextDisplay(filteredActiveTextCues);\n  }\n\n  /**\n   * Handles the playback options, from current state or config.\n   * @returns {void}\n   * @private\n   */\n  _handlePlaybackOptions(): void {\n    this._config.playback = this._config.playback || {};\n    if (typeof this._playbackAttributesState.muted === 'boolean') {\n      this.muted = this._playbackAttributesState.muted;\n    } else if (typeof this._config.playback.muted === 'boolean') {\n      this.muted = this._config.playback.muted;\n    }\n    if (typeof this._playbackAttributesState.volume === 'number') {\n      this.volume = this._playbackAttributesState.volume;\n    } else if (typeof this._config.playback.volume === 'number') {\n      this.volume = this._config.playback.volume;\n    }\n    if (typeof this._config.playback.playsinline === 'boolean') {\n      this.playsinline = this._config.playback.playsinline;\n    }\n    if (this._canPreload()) {\n      this.load();\n    }\n  }\n\n  /**\n   * If ads plugin enabled it's his responsibility to preload the content player.\n   * So to avoid loading the player twice which can cause errors on MSEs we are not\n   * calling load from the player.\n   * TODO: Change it to check the ads configuration when we will develop the ads manager.\n   * @returns {boolean} - Whether the player should perform preload.\n   * @private\n   */\n  _canPreload(): boolean {\n    return (!this._config.playback.autoplay && this._config.playback.preload === \"auto\" && !this._config.plugins.ima);\n  }\n\n  /**\n   * Handles auto play.\n   * @returns {void}\n   * @private\n   */\n  _handleAutoPlay(): void {\n    if (this._config.playback.autoplay === true) {\n      if (this.muted || !this._firstPlayInCurrentSession) {\n        this.play();\n      } else {\n        const allowMutedAutoPlay = this._config.playback.allowMutedAutoPlay;\n        Player.getCapabilities(this.engineType)\n          .then((capabilities) => {\n            if (capabilities.autoplay) {\n              Player._logger.debug(\"Start autoplay\");\n              this.play();\n            } else {\n              if (allowMutedAutoPlay) {\n                Player._logger.debug(\"Fallback to muted autoplay\");\n                this.muted = true;\n                this.play();\n                this.dispatchEvent(new FakeEvent(CustomEvents.FALLBACK_TO_MUTED_AUTOPLAY));\n              } else {\n                Player._logger.warn(\"Autoplay failed, pause player\");\n                this.load();\n                this.ready().then(() => this.pause());\n                this.dispatchEvent(new FakeEvent(CustomEvents.AUTOPLAY_FAILED));\n              }\n            }\n          });\n      }\n    }\n  }\n\n  /**\n   * Start/resume the engine playback.\n   * @private\n   * @returns {void}\n   */\n  _play(): void {\n    if (this._engine.src) {\n      if (this.isLive() && !this.isDvr()) {\n        this.seekToLiveEdge();\n      }\n      this._engine.play();\n    } else {\n      this.load();\n      this.ready().then(() => {\n        this._engine.play();\n      });\n    }\n  }\n\n  /**\n   * Starts the engine pause.\n   * @private\n   * @returns {void}\n   */\n  _pause(): void {\n    this._engine.pause();\n  }\n\n  /**\n   * @function _onPlay\n   * @return {void}\n   * @private\n   */\n  _onPlay(): void {\n    if (this._firstPlay) {\n      this._firstPlay = false;\n      this.dispatchEvent(new FakeEvent(CustomEvents.FIRST_PLAY));\n      this._posterManager.hide();\n      if (typeof this._playbackAttributesState.rate === 'number') {\n        this.playbackRate = this._playbackAttributesState.rate;\n      }\n    }\n  }\n\n  /**\n   * @function _onEnded\n   * @return {void}\n   * @private\n   */\n  _onEnded(): void {\n    if (!this.paused) {\n      this._pause();\n    }\n  }\n\n  /**\n   * Resets the necessary components before change media.\n   * @private\n   * @returns {void}\n   */\n  _reset(): void {\n    this.pause();\n    this._posterManager.reset();\n    this._stateManager.reset();\n    this._pluginManager.reset();\n    this._eventManager.removeAll();\n    this._activeTextCues = [];\n    this._tracks = [];\n    this._firstPlay = true;\n    this._firstPlayInCurrentSession = false;\n    this._engineType = '';\n    this._streamType = '';\n    this._createReadyPromise();\n  }\n\n  /**\n   * @returns {Object} - The default configuration of the player.\n   * @private\n   * @static\n   */\n  static get _defaultConfig(): Object {\n    return Utils.Object.copyDeep(DefaultPlayerConfig);\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Tracks\">\n\n  /**\n   * Returns the tracks according to the filter. if no filter given returns the all tracks.\n   * @function _getTracksByType\n   * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n   * @returns {Array<Track>} - The parsed tracks.\n   * @private\n   */\n  _getTracksByType(type?: string): Array<Track> {\n    return !type ? this._tracks : this._tracks.filter((track: Track) => {\n      if (type === TrackTypes.VIDEO) {\n        return track instanceof VideoTrack;\n      } else if (type === TrackTypes.AUDIO) {\n        return track instanceof AudioTrack;\n      } else if (type === TrackTypes.TEXT) {\n        return track instanceof TextTrack;\n      } else {\n        return true;\n      }\n    });\n  }\n\n  /**\n   * Mark the selected track as active\n   * @function _markActiveTrack\n   * @param {Track} track - the track to mark\n   * @returns {void}\n   * @private\n   */\n  _markActiveTrack(track: Track): void {\n    let type;\n    if (track instanceof VideoTrack) {\n      type = TrackTypes.VIDEO;\n    } else if (track instanceof AudioTrack) {\n      type = TrackTypes.AUDIO;\n    } else if (track instanceof TextTrack) {\n      type = TrackTypes.TEXT;\n    }\n    if (type) {\n      let tracks = this.getTracks(type);\n      for (let i = 0; i < tracks.length; i++) {\n        tracks[i].active = track.index === i;\n      }\n    }\n  }\n\n  /**\n   * handle text cue change\n   * @param {FakeEvent} event - the cue change event payload\n   * @private\n   * @returns {void}\n   */\n  _onCueChange(event: FakeEvent): void {\n    Player._logger.debug('Text cue changed', event.payload.cues);\n    this._activeTextCues = event.payload.cues;\n    this._updateCueDisplaySettings();\n    this._updateTextDisplay(this._activeTextCues)\n  }\n\n  /**\n   * update the text cue display settings\n   * @private\n   * @returns {void}\n   */\n  _updateCueDisplaySettings(): void {\n    const activeCues = this._activeTextCues;\n    const settings = this._textDisplaySettings;\n    for (let i = 0; i < activeCues.length; i++) {\n      let cue = activeCues[i];\n      for (let name in settings) {\n        cue[name] = settings[name];\n      }\n    }\n  }\n\n  /**\n   * update the text display\n   * @param {Array<Cue>} cues - list of cues\n   * @private\n   * @returns {void}\n   */\n  _updateTextDisplay(cues: Array<Cue>): void {\n    if (this._textDisplayEl === undefined) {\n      this._textDisplayEl = Utils.Dom.createElement(\"div\");\n      Utils.Dom.addClassName(this._textDisplayEl, SUBTITLES_CLASS_NAME);\n      Utils.Dom.appendChild(this._el, this._textDisplayEl);\n    }\n    processCues(window, cues, this._textDisplayEl);\n  }\n\n  /**\n   * Add off text track if there are actual text tracks associated with media\n   * setting this track is the same as calling Player's hideTextTrack\n   * @private\n   * @returns {void}\n   */\n  _addTextTrackOffOption(): void {\n    const textTracks = this.getTracks(TrackTypes.TEXT);\n    if (textTracks && textTracks.length) {\n      this._tracks.push(new TextTrack({\n        active: false,\n        index: textTracks.length,\n        kind: \"subtitles\",\n        label: \"Off\",\n        language: OFF\n      }));\n    }\n  }\n\n  /**\n   * Sets the default tracks defined in the player config.\n   * @returns {void}\n   * @private\n   */\n  _setDefaultTracks(): void {\n    const activeTracks = this.getActiveTracks();\n    const playbackConfig = this.config.playback;\n    const offTextTrack: ?Track = this._getTracksByType(TrackTypes.TEXT).find(track => TextTrack.langComparer(OFF, track.language));\n\n    this.hideTextTrack();\n\n    let currentOrConfiguredTextLang = this._playbackAttributesState.textLanguage || this._getLanguage(playbackConfig.textLanguage, activeTracks.text, TrackTypes.TEXT);\n    let currentOrConfiguredAudioLang = this._playbackAttributesState.audioLanguage || playbackConfig.audioLanguage;\n    this._setDefaultTrack(TrackTypes.TEXT, currentOrConfiguredTextLang, offTextTrack);\n    this._setDefaultTrack(TrackTypes.AUDIO, currentOrConfiguredAudioLang, activeTracks.audio);\n  }\n\n  /**\n   * Gets the track language that should be set by default.\n   * @param {string} configuredLanguage - The configured language (can be also \"auto\").\n   * @param {Track} defaultTrack - The default track.\n   * @param {string} type - The track type.\n   * @private\n   * @returns {string} - The track language to set by default.\n   */\n  _getLanguage(configuredLanguage: string, defaultTrack: ?Track, type: string): string {\n    let language = configuredLanguage;\n    if (language === AUTO) {\n      const tracks = this._getTracksByType(type);\n      const localeTrack: ?Track = tracks.find(track => Track.langComparer(Locale.language, track.language));\n      if (localeTrack) {\n        language = localeTrack.language;\n      } else if (defaultTrack && defaultTrack.language !== OFF) {\n        language = defaultTrack.language;\n      } else if (tracks && tracks.length > 0) {\n        language = tracks[0].language;\n      }\n    }\n    return language;\n  }\n\n  /**\n   * Sets a specific default track.\n   * @param {string} type - The track type.\n   * @param {string} language - The track language.\n   * @param {?Track} defaultTrack - The default track to set in case there is no language configured.\n   * @returns {void}\n   * @private\n   */\n  _setDefaultTrack(type: string, language: string, defaultTrack: ?Track): void {\n    const track: ?Track = this._getTracksByType(type).find(track => Track.langComparer(language, track.language));\n    if (track) {\n      this.selectTrack(track);\n    } else {\n      this.selectTrack(defaultTrack);\n    }\n  }\n\n  // </editor-fold>\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Enums\">\n\n  /**\n   * Get the player events.\n   * @returns {Object} - The events of the player.\n   * @public\n   */\n  get Event(): { [event: string]: string } {\n    return PlayerEvents;\n  }\n\n  /**\n   * Get the player TextStyle.\n   * @returns {TextStyle} - The TextStyle class\n   * @public\n   */\n  get TextStyle(): typeof TextStyle {\n    return TextStyle;\n  }\n\n  /**\n   * Get the player states.\n   * @returns {Object} - The states of the player.\n   * @public\n   */\n  get State(): { [state: string]: string } {\n    return PlayerStates;\n  }\n\n  /**\n   * Get the player tracks types.\n   * @returns {Object} - The tracks types of the player.\n   * @public\n   */\n  get Track(): { [track: string]: string } {\n    return TrackTypes;\n  }\n\n  // </editor-fold>\n}\n\n\n\n// WEBPACK FOOTER //\n// ./player.js","// @flow\nimport UAParser from 'ua-parser-js'\nconst Env = new UAParser().getResult();\nexport default Env;\n\n\n\n// WEBPACK FOOTER //\n// ./utils/env.js","//@flow\nexport default class PlayerError {\n  static TYPE: {[name: string]: Object} = {\n    NOT_REGISTERED_PLUGIN: {\n      name: \"PluginNotRegisteredException\",\n      message: function (name) {\n        return `Cannot load ${name} plugin. Name not found in the registry`;\n      }\n    },\n    NOT_VALID_HANDLER: {\n      name: \"PluginHandlerIsNotValidException\",\n      message: function () {\n        return \"To activate plugin you must provide a class derived from BasePlugin\";\n      }\n    },\n    NOT_IMPLEMENTED_METHOD: {\n      name: \"NotImplementedException\",\n      message: function (method) {\n        return `${method} method not implemented`;\n      }\n    }\n  };\n\n  name: string;\n  message: string;\n\n  constructor(error: Object, param?: any) {\n    this.name = error.name;\n    this.message = error.message(param);\n  }\n\n  getError() {\n    return {\n      name: this.name,\n      message: this.message\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/player-error.js","//@flow\n\n/**\n * A simple multimap template.\n * @constructor\n * @struct\n * @template T\n */\nclass MultiMap<T> {\n  _map: Map<string, T[]>;\n\n  constructor() {\n    /** @private {!Object.<string, !Array.<T>>} */\n    this._map = new Map();\n  }\n\n  /**\n   * Add a key, value pair to the map.\n   * @param {string} key -\n   * @param {T} value  -\n   * @returns {void}\n   */\n  push(key: string, value: T): void {\n    if (this._map.has(key)) {\n      let list = this._map.get(key);\n      if (Array.isArray(list)) {\n        list.push(value);\n        this._map.set(key, list);\n      }\n    } else {\n      this._map.set(key, [value]);\n    }\n  }\n\n  /**\n   * Set an array of values for the key, overwriting any previous data.\n   * @param {string} key -\n   * @param {!Array.<T>} values -\n   * @returns {void}\n   */\n  set(key: string, values: T[]): void {\n    this._map.set(key, values);\n  }\n\n  /**\n   * Check for a key.\n   * @param {string} key -\n   * @return {boolean} true if the key exists.\n   */\n  has(key: string): boolean {\n    return this._map.has(key);\n  }\n\n  /**\n   * Get a list of values by key.\n   * @param {string} key -\n   * @return {Array.<T>} or null if no suZch key exists.\n   */\n  get(key: string): Array<T> {\n    let list = this._map.get(key);\n    // slice() clones the list so that it and the map can each be modified\n    // without affecting the other.\n    return list ? list.slice() : [];\n  }\n\n  /**\n   * Get a list of all values.\n   * @returns {!Array.<T>} -\n   */\n  getAll(): T[] {\n    let list: T[] = [];\n    for (var value of this._map.values()) {\n      list = list.concat(value);\n    }\n    return list;\n  }\n\n  /**\n   * Remove a specific value, if it exists.\n   * @param {string} key -\n   * @param {T} value -\n   * @returns {void}\n   */\n  remove(key: string, value: T): void {\n    if (!this._map.has(key)) return;\n    let list = this._map.get(key);\n    if (Array.isArray(list)) {\n      for (let i = 0; i < list.length; ++i) {\n        if (list[i] == value) {\n          list.splice(i, 1);\n          --i;\n        }\n      }\n    }\n  }\n\n  /**\n   * Get all keys from the multimap.\n   * @return {!Array.<string>}\n   */\n  // eslint-disable-next-line no-undef\n  keys(): Iterator<string> {\n    return this._map.keys();\n  }\n\n\n  /**\n   * Clear all keys and values from the multimap.\n   * @returns {void}\n   */\n  clear(): void {\n    this._map.clear();\n  }\n}\n\nexport default MultiMap;\n\n\n\n// WEBPACK FOOTER //\n// ./utils/multi-map.js","//@flow\nimport FakeEvent from './fake-event'\nimport MultiMap from '../utils/multi-map'\n\n/**\n * A work-alike for EventTarget.  Only DOM elements may be true EventTargets,\n * but this can be used as a base class to provide event dispatch to non-DOM\n * classes.  Only FakeEvents should be dispatched.\n *\n * @struct\n * @constructor\n * @implements {EventTarget}\n * @export\n */\nclass FakeEventTarget {\n  _listeners: MultiMap<ListenerType>;\n  dispatchTarget: FakeEventTarget;\n\n  constructor() {\n    /**\n     * @private {!MultiMap.<FakeEventTarget.ListenerType>}\n     */\n    this._listeners = new MultiMap();\n\n    /**\n     * The target of all dispatched events.  Defaults to |this|.\n     * @type {EventTarget}\n     */\n    this.dispatchTarget = this;\n  }\n\n  /**\n   * Add an event listener to this object.\n   *\n   * @param {string} type The event type to listen for.\n   * @param {FakeEventTarget.ListenerType} listener The callback or\n   *   listener object to invoke.\n   * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n   *   parents, so events neither capture nor bubble.\n   * @override\n   * @export\n   */\n  addEventListener(type: string, listener: ListenerType) {\n    this._listeners.push(type, listener);\n  }\n\n  /**\n   * Remove an event listener from this object.\n   *\n   * @param {string} type The event type for which you wish to remove a listener.\n   * @param {FakeEventTarget.ListenerType} listener The callback or\n   *   listener object to remove.\n   * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n   *   parents, so events neither capture nor bubble.\n   * @override\n   * @export\n   */\n  removeEventListener(type: string, listener: ListenerType) {\n    this._listeners.remove(type, listener);\n  }\n\n  /**\n   * Dispatch an event from this object.\n   *\n   * @param {!Event} event The event to be dispatched from this object.\n   * @return {boolean} True if the default action was prevented.\n   * @override\n   * @export\n   */\n  dispatchEvent(event: FakeEvent) {\n    // In many browsers, it is complex to overwrite properties of actual Events.\n    // Here we expect only to dispatch FakeEvents, which are simpler.\n    //goog.asserts.assert(event instanceof FakeEvent,\n    //    'FakeEventTarget can only dispatch FakeEvents!');\n\n    let list = this._listeners.get(event.type) || [];\n\n    for (let i = 0; i < list.length; ++i) {\n      // Do this every time, since events can be re-dispatched from handlers.\n      event.target = this.dispatchTarget;\n      event.currentTarget = this.dispatchTarget;\n\n      let listener = list[i];\n      try {\n        if (listener.handleEvent) {\n          listener.handleEvent(event);\n        } else {\n          listener.call(this, event);\n        }\n      } catch (exception) {\n        // Exceptions during event handlers should not affect the caller,\n        // but should appear on the console as uncaught, according to MDN:\n        // http://goo.gl/N6Ff27\n        // TODO: add log\n      }\n\n      if (event.stopped) {\n        break;\n      }\n    }\n\n    return event.defaultPrevented;\n  }\n}\n\n/**\n * These are the listener types defined in the closure extern for EventTarget.\n * @typedef {EventListener|function(!Event):(boolean|undefined)}\n */\ndeclare function ListenerType(event: FakeEvent): (boolean | void);\n\nexport default FakeEventTarget;\n\n\n\n// WEBPACK FOOTER //\n// ./event/fake-event-target.js","//@flow\nimport Player from '../player'\nimport LoggerFactory from '../utils/logger'\nimport * as Utils from '../utils/util'\nimport EventManager from '../event/event-manager'\nimport PlayerError from '../utils/player-error'\nimport FakeEvent from '../event/fake-event'\n\n/** The BasePlugin responsible to implement the plugin interface.\n * Contains several default implementations.\n * Other plugins should extend this class.\n * @classdesc\n */\nexport default class BasePlugin implements IPlugin {\n  /**\n   * The runtime configuration of the plugin.\n   * @member\n   */\n  config: Object;\n  /**\n   * The name of the plugin.\n   * @member\n   */\n  name: string;\n  /**\n   * The logger of the plugin.\n   * @member\n   */\n  logger: any;\n  /**\n   * Reference to the actual player.\n   * @member\n   */\n  player: Player;\n  /**\n   * The event manager of the plugin.\n   * @member\n   */\n  eventManager: EventManager;\n  /**\n   * The default configuration of the plugin.\n   * Inherited plugins should override this property.\n   * @type {Object}\n   * @static\n   * @member\n   */\n  static defaultConfig: Object = {};\n\n  /**\n   * Factory method to create the actual plugin.\n   * @param {string} name - The plugin name\n   * @param {Player} player - The player reference\n   * @param {Object} config - The plugin configuration\n   * @returns {BasePlugin} - New runtime plugin instance\n   * @static\n   * @public\n   */\n  static createPlugin(name: string, player: Player, config: Object = {}): BasePlugin {\n    return new this(name, player, config);\n  }\n\n  /**\n   * Returns under what conditions the plugin is valid.\n   * Plugin must implement this method.\n   * @returns {boolean} - Whether the plugin is valid and can be initiated. Default implementation is true\n   * @static\n   * @public\n   * @abstract\n   */\n  static isValid(): boolean {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'isValid()').getError();\n  }\n\n  /**\n   * constructor\n   * @param {string} name - The plugin name\n   * @param {Player} player - The player reference\n   * @param {Object} config - The plugin configuration\n   * @constructor\n   * @private\n   */\n  constructor(name: string, player: Player, config: Object) {\n    this.name = name;\n    this.player = player;\n    this.eventManager = new EventManager();\n    this.logger = LoggerFactory.getLogger(Utils.String.capitlize(this.name));\n    this.config = {};\n    Utils.Object.mergeDeep(this.config, this.constructor.defaultConfig, config);\n  }\n\n  /**\n   * Getter for the configuration of the plugin.\n   * @param {string} attr - The key in the plugin configuration (optional).\n   * @returns {*} - If attribute is provided, returns its value. Else, Returns the config of the plugin.\n   * @public\n   */\n  getConfig(attr?: string): any {\n    if (attr) {\n      return Utils.Object.copyDeep(this.config[attr]);\n    }\n    return Utils.Object.copyDeep(this.config);\n  }\n\n  /**\n   * Updates the config of the plugin.\n   * @param {Object} update - The updated configuration.\n   * @public\n   * @returns {void}\n   */\n  updateConfig(update: Object): void {\n    Utils.Object.mergeDeep(this.config, update);\n  }\n\n  /**\n   * Runs the destroy logic of the plugin.\n   * plugin must implement this method.\n   * @public\n   * @virtual\n   * @returns {void}\n   */\n  destroy(): void {\n  }\n\n  /**\n   * Runs the reset logic of the plugin.\n   * plugin must implement this method.\n   * @public\n   * @virtual\n   * @returns {void}\n   */\n  reset(): void {\n  }\n\n  /**\n   * Getter for the plugin's name.\n   * @returns {string} - The name of the plugin.\n   * @public\n   */\n  getName(): string {\n    return this.name;\n  }\n\n  /**\n   * Dispatch an event via the plugin.\n   * @param {string} name - The event name.\n   * @param {any} payload - The event payload.\n   * @returns {void}\n   */\n  dispatchEvent(name: string, payload: any): void {\n    this.logger.debug(\"Fire event: \" + name, payload);\n    this.player.dispatchEvent(new FakeEvent(name, payload));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./plugin/base-plugin.js","// @flow\n\n/**\n * Base middleware.\n * @classdesc\n */\nexport default class BaseMiddleware {\n  /**\n   * Id of the middleware instance.\n   * @public\n   */\n  id: string;\n\n  /**\n   * Calls the next handler in the middleware chain.\n   * @param {Function} next - The next handler in the middleware chain.\n   * @returns {void}\n   */\n  callNext(next: Function): void {\n    if (next) {\n      next();\n    }\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/base-middleware.js","//@flow\n\n/**\n * The possible player state types.\n * @const\n * @type {{IDLE: string, LOADING: string, PLAYING: string, PAUSED: string, BUFFERING: string}}\n */\nconst PLAYER_STATE_TYPES: { [state: string]: string } = {\n  IDLE: \"idle\",\n  LOADING: \"loading\",\n  PLAYING: \"playing\",\n  PAUSED: \"paused\",\n  BUFFERING: \"buffering\"\n};\n\nexport default PLAYER_STATE_TYPES;\n\n\n\n// WEBPACK FOOTER //\n// ./state/state-types.js","//@flow\nimport NativeAdapter from './adapters/native-adapter'\nimport LoggerFactory from '../../../utils/logger'\n\n/**\n * Media source provider\n * @classdesc\n */\nexport default class MediaSourceProvider {\n  /**\n   * The logger of the media source provider.\n   * @member {any} _logger\n   * @static\n   * @private\n   */\n  static _logger: any = LoggerFactory.getLogger('MediaSourceProvider');\n  /**\n   * The media source adapter registry.\n   * @member {Array<IMediaSourceAdapter>} _mediaSourceAdapters\n   * @static\n   * @private\n   */\n  static _mediaSourceAdapters: Array<typeof IMediaSourceAdapter> = [NativeAdapter];\n  /**\n   * The selected adapter for playback.\n   * @type {null|IMediaSourceAdapter}\n   * @static\n   * @private\n   */\n  static _selectedAdapter: ?(typeof IMediaSourceAdapter) = null;\n\n  /**\n   * Add a media source adapter to the registry.\n   * @function register\n   * @param {IMediaSourceAdapter} mediaSourceAdapter - The media source adapter to register.\n   * @static\n   * @returns {void}\n   */\n  static register(mediaSourceAdapter: typeof IMediaSourceAdapter): void {\n    if (mediaSourceAdapter) {\n      if (!MediaSourceProvider._mediaSourceAdapters.includes(mediaSourceAdapter)) {\n        MediaSourceProvider._logger.debug(`Adapter <${mediaSourceAdapter.id}> has been registered successfully`);\n        MediaSourceProvider._mediaSourceAdapters.push(mediaSourceAdapter);\n      } else {\n        MediaSourceProvider._logger.debug(`Adapter <${mediaSourceAdapter.id}> is already registered, do not register again`);\n      }\n    }\n  }\n\n  /**\n   * Remove a media source adapter from the registry.\n   * @function unRegister\n   * @param {IMediaSourceAdapter} mediaSourceAdapter - The media source adapter to unRegister.\n   * @static\n   * @returns {void}\n   */\n  static unRegister(mediaSourceAdapter: typeof IMediaSourceAdapter): void {\n    let index = MediaSourceProvider._mediaSourceAdapters.indexOf(mediaSourceAdapter);\n    if (index > -1) {\n      MediaSourceProvider._logger.debug(`Unregistered <${mediaSourceAdapter.id}> adapter`);\n      MediaSourceProvider._mediaSourceAdapters.splice(index, 1);\n    }\n  }\n\n  /**\n   * Checks if the a media source adapter can play a given source.\n   * @param {Source} source - The source object to check.\n   *  @param {boolean} [preferNative=true] - prefer native flag\n   * @returns {boolean} - Whether a media source adapter can play the source.\n   * @public\n   * @static\n   */\n  static canPlaySource(source: Source, preferNative: boolean = true): boolean {\n    MediaSourceProvider._orderMediaSourceAdapters(preferNative);\n    let mediaSourceAdapters = MediaSourceProvider._mediaSourceAdapters;\n    if (source && source.mimetype) {\n      for (let i = 0; i < mediaSourceAdapters.length; i++) {\n        if (mediaSourceAdapters[i].canPlayType(source.mimetype) && (!source.drmData || mediaSourceAdapters[i].canPlayDrm(source.drmData))) {\n          MediaSourceProvider._selectedAdapter = mediaSourceAdapters[i];\n          MediaSourceProvider._logger.debug(`Selected adapter is <${MediaSourceProvider._selectedAdapter.id}>`);\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Orders the media source adapters array according to the preferNative value.\n   * @param {boolean} preferNative - Whether to prefer native playback.\n   * @private\n   * @returns {void}\n   */\n  static _orderMediaSourceAdapters(preferNative: boolean): void {\n    MediaSourceProvider._mediaSourceAdapters =\n      MediaSourceProvider._mediaSourceAdapters.filter(mse => mse.id !== 'NativeAdapter');\n    if (preferNative) {\n      MediaSourceProvider._mediaSourceAdapters.unshift(NativeAdapter);\n    } else {\n      MediaSourceProvider._mediaSourceAdapters.push(NativeAdapter);\n    }\n  }\n\n  /**\n   * Get the appropriate media source adapter to the video source.\n   * @function getMediaSourceAdapter\n   * @param {HTMLVideoElement} videoElement - The video element which requires adapter for a given mimeType.\n   * @param {Source} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {IMediaSourceAdapter|null} - The selected media source adapter, or null if such doesn't exists.\n   * @static\n   */\n  static getMediaSourceAdapter(videoElement: HTMLVideoElement, source: Source, config: Object): ?IMediaSourceAdapter {\n    if (videoElement && source && config) {\n      if (!MediaSourceProvider._selectedAdapter) {\n        MediaSourceProvider.canPlaySource(source, true);\n      }\n      return MediaSourceProvider._selectedAdapter ? MediaSourceProvider._selectedAdapter.createAdapter(videoElement, source, config) : null;\n    }\n    return null;\n  }\n\n  /**\n   * Destroys the media source adapter provider necessary props.\n   * @static\n   * @returns {void}\n   */\n  static destroy(): void {\n    MediaSourceProvider._selectedAdapter = null;\n  }\n}\n\nconst registerMediaSourceAdapter = MediaSourceProvider.register;\nexport {registerMediaSourceAdapter};\n\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/media-source/media-source-provider.js","//@flow\n/* eslint-disable no-unused-vars */\nimport FakeEvent from '../../../event/fake-event'\nimport FakeEventTarget from '../../../event/fake-event-target'\nimport PlayerError from '../../../utils/player-error'\nimport {CUSTOM_EVENTS} from '../../../event/events'\nimport LoggerFactory from '../../../utils/logger'\nimport Track from '../../../track/track'\nimport VideoTrack from '../../../track/video-track'\nimport AudioTrack from '../../../track/audio-track'\nimport TextTrack from '../../../track/text-track'\n\nexport default class BaseMediaSourceAdapter extends FakeEventTarget implements IMediaSourceAdapter {\n  /**\n   * Passing the custom events to the actual media source adapter.\n   * @static\n   */\n  static CustomEvents: { [event: string]: string } = CUSTOM_EVENTS;\n\n  /**\n   * Passing the getLogger function to the actual media source adapter.\n   * @type {Function}\n   * @static\n   */\n  static getLogger: Function = LoggerFactory.getLogger;\n\n  /**\n   * The adapter config.\n   * @member {Object} _config\n   * @private\n   */\n  _config: ?Object;\n\n  /**\n   * The source object.\n   * @member {Source} _sourceObj\n   * @private\n   */\n  _sourceObj: ?Source;\n\n  /**\n   * The dom video element.\n   * @member {HTMLVideoElement} _videoElement\n   * @private\n   */\n  _videoElement: HTMLVideoElement;\n\n  /**\n   * Checks if the media source adapter is supported.\n   * @function isSupported\n   * @returns {boolean} - Whether the media source adapter is supported.\n   * @static\n   */\n  static isSupported(): boolean {\n    return true;\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLVideoElement} videoElement - The video element which bind to media source adapter.\n   * @param {Source} source - The source object.\n   * @param {Object} config - The media source adapter configuration.\n   */\n  constructor(videoElement: HTMLVideoElement, source: Source, config: Object = {}) {\n    super();\n    this._videoElement = videoElement;\n    this._sourceObj = source;\n    this._config = config;\n  }\n\n  /**\n   * Destroys the media source adapter.\n   * @function destroy\n   * @returns {void}\n   */\n  destroy(): Promise<*> {\n    this._sourceObj = null;\n    this._config = null;\n    return Promise.resolve();\n  }\n\n  /**\n   * Triggers the appropriate track changed event.\n   * @param {Track} track - The selected track.\n   * @private\n   * @returns {void}\n   */\n  _onTrackChanged(track: Track): void {\n    if (track instanceof VideoTrack) {\n      this._trigger(BaseMediaSourceAdapter.CustomEvents.VIDEO_TRACK_CHANGED, {selectedVideoTrack: track});\n    } else if (track instanceof AudioTrack) {\n      this._trigger(BaseMediaSourceAdapter.CustomEvents.AUDIO_TRACK_CHANGED, {selectedAudioTrack: track});\n    } else if (track instanceof TextTrack) {\n      this._trigger(BaseMediaSourceAdapter.CustomEvents.TEXT_TRACK_CHANGED, {selectedTextTrack: track});\n    }\n  }\n\n  /**\n   * Dispatch an adapter event forward.\n   * @param {string} name - The name of the event.\n   * @param {Object} payload - The event payload.\n   * @returns {void}\n   */\n  _trigger(name: string, payload: Object): void {\n    this.dispatchEvent(new FakeEvent(name, payload));\n  }\n\n  /** Must implemented methods by the derived media source adapter **/\n\n  static canPlayType(mimeType: string, preferNative: boolean): boolean {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'static canPlayType').getError();\n  }\n\n  load(): Promise<Object> {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'load').getError();\n  }\n\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'selectVideoTrack').getError();\n  }\n\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'selectAudioTrack').getError();\n  }\n\n  selectTextTrack(textTrack: TextTrack): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'selectTextTrack').getError();\n  }\n\n  hideTextTrack(): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'hideTextTrack').getError();\n  }\n\n  enableAdaptiveBitrate(): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'enableAdaptiveBitrate').getError();\n  }\n\n  isAdaptiveBitrateEnabled(): boolean {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'isAdaptiveBitrateEnabled').getError();\n  }\n\n  seekToLiveEdge(): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'seekToLiveEdge').getError();\n  }\n\n  isLive(): boolean {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'isLive').getError();\n  }\n\n  get src(): string {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'get src').getError();\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {Number} - The current playback time.\n   * @public\n   */\n  get currentTime(): number {\n    return this._videoElement.currentTime;\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   * @returns {void}\n   */\n  set currentTime(to: number): void {\n    this._videoElement.currentTime = to;\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {Number} - The playback duration.\n   * @public\n   */\n  get duration(): number {\n    return this._videoElement.duration;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/media-source/base-media-source-adapter.js","// @flow\n/* eslint-disable no-unused-vars */\nimport LoggerFactory from '../utils/logger'\nimport PlayerError from '../utils/player-error'\nimport DrmSupport from './drm-support'\nimport {DrmScheme} from './drm-scheme'\n\nexport default class BaseDrmProtocol implements IDrmProtocol {\n  static getLogger = LoggerFactory.getLogger;\n  static DrmSupport = DrmSupport;\n  static DrmScheme = DrmScheme;\n\n  static canPlayDrm(drmData: Array<Object>): boolean {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'static canPlayDrm').getError();\n  }\n\n  static setDrmPlayback(...args): void {\n    throw new PlayerError(PlayerError.TYPE.NOT_IMPLEMENTED_METHOD, 'static setDrmPlayback').getError();\n  }\n\n  static destroy(): void {\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drm/base-drm-protocol.js","// @flow\nexport const DrmScheme = {\n  WIDEVINE: 'com.widevine.alpha',\n  PLAYREADY: 'com.microsoft.playready',\n  FAIRPLAY: 'com.apple.fairplay'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./drm/drm-scheme.js","//@flow\nimport {convertCueToDOMTree} from './text-track-display'\n\nconst autoKeyword: string = \"auto\";\nconst directionSetting: { [string]: boolean } = {\n  \"\": true,\n  \"lr\": true,\n  \"rl\": true\n};\nconst alignSetting: { [string]: boolean } = {\n  \"start\": true,\n  \"middle\": true,\n  \"end\": true,\n  \"left\": true,\n  \"right\": true\n};\n\n/**\n * helper\n * @param {string} value - the string to find\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findDirectionSetting(value): string | boolean {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  const dir = directionSetting[value.toLowerCase()];\n  return dir ? value.toLowerCase() : false;\n}\n\n/**\n * helper\n * @param {string} value - the string\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findAlignSetting(value: string): string | boolean {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  const align = alignSetting[value.toLowerCase()];\n  return align ? value.toLowerCase() : false;\n}\n\n/**\n * VTTCue model\n * @class\n * @classdesc VTT Cue model to represent VTT cues internally\n */\nclass VTTCue {\n\n  /**\n   * // Lets us know when the VTTCue's data has changed in such a way that we need\n   * to recompute its display state. This lets us compute its display state lazily.\n   * @type {boolean}\n   */\n  hasBeenReset: boolean = false;\n\n  /**\n   * This is used as part of the rendering model, to keep cues in a consistent position.\n   * http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n   * @type {undefined}\n   */\n  displayState: any = undefined;\n  /**\n   * VTTCue and TextTrackCue properties\n   * http://dev.w3.org/html5/webvtt/#vttcue-interface\n   */\n  /**\n   * An arbitrary string.\n   * @type {string}\n   * @private\n   */\n  _id: string = \"\";\n  /**\n   * A boolean indicating whether playback of the media resource is to pause when the end of the\n   * range to which the cue applies is reached.\n   * @type {boolean}\n   * @private\n   */\n  _pauseOnExit: boolean = false;\n  /**\n   * The time, in seconds and fractions of a second, that describes the beginning of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n  _startTime: number;\n  /**\n   * The time, in seconds and fractions of a second, that describes the end of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n  _endTime: number;\n  /**\n   * The raw text of the cue, and rules for its interpretation, allowing the text to be\n   * rendered and converted to a DOM fragment.\n   * @type {string}\n   * @private\n   */\n  _text: string;\n  /**\n   * An optional WebVTT region to which a cue belongs.\n   * By default, the region is set to null.\n   * @type {null}\n   * @private\n   */\n  _region: ?string = null;\n  /**\n   * configures the cue to use vertical text layout rather than horizontal text layout.\n   * Vertical text layout is sometimes used in Japanese, for example. The default is horizontal layout\n   * @type {string}\n   * @private\n   */\n  _vertical: string = \"\";\n  /**\n   * A boolean indicating whether the line is an integer number of lines (using the line dimensions of\n   * the first line of the cue), or whether it is a percentage of the dimension of the video.\n   * The flag is set to true when lines are counted, and false otherwise.\n   * @type {boolean}\n   * @private\n   */\n  _snapToLines: boolean = true;\n  /**\n   * The line defines positioning of the cue box.\n   * @type {string | number}\n   * @private\n   */\n  _line: string | number = \"auto\";\n  /**\n   * An alignment for the cue box’s line, one of start/center/end alignment\n   * @type {string}\n   * @private\n   */\n  _lineAlign: string = \"start\";\n  /**\n   * The position defines the indent of the cue box in the direction defined by the writing direction\n   * @type {number}\n   * @private\n   */\n  _position: number = 50;\n  /**\n   * An alignment for the cue box in the dimension of the writing direction, describing what the position\n   * is anchored to\n   * @type {string}\n   * @private\n   */\n  _positionAlign: string = \"middle\";\n  /**\n   * A number giving the size of the cue box, to be interpreted as a percentage of the video, as defined\n   * by the writing direction.\n   * @type {number}\n   * @private\n   */\n  _size: number = 50;\n  /**\n   * An alignment for all lines of text within the cue box, in the dimension of the writing direction\n   * @type {string}\n   * @private\n   */\n  _align: string = \"middle\";\n\n  constructor(startTime: number, endTime: number, text: string) {\n    this._startTime = startTime;\n    this._endTime = endTime;\n    this._text = text;\n    /**\n     * Other <track> spec defined properties\n     */\n  }\n\n  resetCue(): void {\n    this.hasBeenReset = true;\n  }\n\n  get id(): string {\n    return this._id;\n  }\n\n  set id(value: string) {\n    this._id = \"\" + value;\n  }\n\n  get pauseOnExit(): boolean {\n    return this._pauseOnExit;\n  }\n\n  set pauseOnExit(value: boolean) {\n    this._pauseOnExit = value;\n  }\n\n  get startTime(): number {\n    return this._endTime;\n  }\n\n  set startTime(value: number) {\n    if (typeof value !== \"number\") {\n      throw new TypeError(\"Start time must be set to a number.\");\n    }\n    this._endTime = value;\n    this.resetCue();\n\n  }\n\n  get endTime(): number {\n    return this._endTime;\n  }\n\n  set endTime(value: number) {\n    if (typeof value !== \"number\") {\n      throw new TypeError(\"End time must be set to a number.\");\n    }\n    this._endTime = value;\n    this.resetCue();\n  }\n\n  get text(): string {\n    return this._text;\n  }\n\n  set text(value: string) {\n    this._text = \"\" + value;\n    this.resetCue();\n  }\n\n  get region(): ?string {\n    return this._region;\n  }\n\n  set region(value: string) {\n    this._region = value;\n    this.resetCue();\n  }\n\n  get vertical(): string {\n    return this._vertical;\n  }\n\n  set vertical(value: string) {\n    const setting = findDirectionSetting(value);\n    // Have to check for false because the setting an be an empty string.\n    if (setting === false) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._vertical = setting;\n      this.resetCue();\n    }\n  }\n\n  get snapToLines(): boolean {\n    return this._snapToLines;\n  }\n\n  set snapToLines(value: boolean) {\n    this._snapToLines = value;\n    this.resetCue();\n  }\n\n  get line(): string | number {\n    return this._line;\n  }\n\n  set line(value: string | number) {\n    if (typeof value !== \"number\" && value !== autoKeyword) {\n      throw new SyntaxError(\"An invalid number or illegal string was specified.\");\n    }\n    this._line = value;\n    this.resetCue();\n  }\n\n  get lineAlign(): string {\n    return this._lineAlign;\n  }\n\n  set lineAlign(value: string) {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._lineAlign = setting;\n      this.resetCue();\n    }\n  }\n\n  get position(): number {\n    return this._position;\n  }\n\n  set position(value: number) {\n    if (value < 0 || value > 100) {\n      throw new Error(\"Position must be between 0 and 100.\");\n    }\n    this._position = value;\n    this.resetCue();\n  }\n\n  get positionAlign(): string {\n    return this._positionAlign;\n  }\n\n  set positionAlign(value: string) {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._positionAlign = setting;\n      this.resetCue();\n    }\n  }\n\n  get size(): number | boolean {\n    return this._size;\n  }\n\n  set size(value: number): void {\n    if (value < 0 || value > 100\n    ) {\n      throw new Error(\"Size must be between 0 and 100.\");\n    }\n    this._size = value;\n    this.resetCue();\n  }\n\n  get align(): string {\n    return this._align;\n  }\n\n  set align(value: string): void {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._align = (setting: string);\n      this.resetCue();\n    }\n  }\n\n  getCueAsHTML() {\n    return convertCueToDOMTree(window, this.text);\n  }\n}\n\nlet Cue;\nif (typeof window !== 'undefined' && window.VTTCue) {\n  Cue = window.VTTCue;\n} else {\n  Cue = VTTCue;\n}\n\nexport {Cue};\n\n\n\n// WEBPACK FOOTER //\n// ./track/vtt-cue.js","/* eslint-disable */\n/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n\nconst fontScale = 1;\n\n// Try to parse input as a time stamp.\nfunction parseTimeStamp(input) {\n\n  function computeSeconds(h, m, s, f) {\n    return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n  }\n\n  const m = input.match(/^(\\d+):(\\d{2})(:\\d{2})?\\.(\\d{3})/);\n  if (!m) {\n    return null;\n  }\n\n  if (m[3]) {\n    // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n    return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n  } else if (m[1] > 59) {\n    // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n    // First position is hours as it's over 59.\n    return computeSeconds(m[1], m[2], 0, m[4]);\n  } else {\n    // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n    return computeSeconds(0, m[1], m[2], m[4]);\n  }\n}\n\nconst ESCAPE = {\n  \"&amp;\": \"&\",\n  \"&lt;\": \"<\",\n  \"&gt;\": \">\",\n  \"&lrm;\": \"\\u200e\",\n  \"&rlm;\": \"\\u200f\",\n  \"&nbsp;\": \"\\u00a0\"\n};\n\nconst TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\"\n};\n\nconst TAG_ANNOTATION = {\n  v: \"title\",\n  lang: \"lang\"\n};\n\nconst NEEDS_PARENT = {\n  rt: \"ruby\"\n};\n\n// Parse content into a document fragment.\nfunction parseContent(window, input) {\n  function nextToken() {\n    // Check for end-of-string.\n    if (!input) {\n      return null;\n    }\n\n    // Consume 'n' characters from the input.\n    function consume(result) {\n      input = input.substr(result.length);\n      return result;\n    }\n\n    const m = input.match(/^([^<]*)(<[^>]+>?)?/);\n    // If there is some text before the next tag, return it, otherwise return\n    // the tag.\n    return consume(m[1] ? m[1] : m[2]);\n  }\n\n  // Unescape a string 's'.\n  function unescape1(e) {\n    return ESCAPE[e];\n  }\n\n  function unescape(s) {\n    let m;\n    while ((m = s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/))) {\n      s = s.replace(m[0], unescape1);\n    }\n    return s;\n  }\n\n  function shouldAdd(current, element) {\n    return !NEEDS_PARENT[element.localName] ||\n      NEEDS_PARENT[element.localName] === current.localName;\n  }\n\n  // Create an element for this tag.\n  function createElement(type, annotation) {\n    const tagName = TAG_NAME[type];\n    if (!tagName) {\n      return null;\n    }\n    let element = window.document.createElement(tagName);\n    element.localName = tagName;\n    const name = TAG_ANNOTATION[type];\n    if (name && annotation) {\n      element[name] = annotation.trim();\n    }\n    return element;\n  }\n\n  let rootDiv = window.document.createElement(\"div\"),\n    current = rootDiv,\n    t,\n    tagStack = [];\n\n  while ((t = nextToken()) !== null) {\n    if (t[0] === '<') {\n      if (t[1] === \"/\") {\n        // If the closing tag matches, move back up to the parent node.\n        if (tagStack.length &&\n          tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n          tagStack.pop();\n          current = current.parentNode;\n        }\n        // Otherwise just ignore the end tag.\n        continue;\n      }\n      let ts = parseTimeStamp(t.substr(1, t.length - 2));\n      let node;\n      if (ts) {\n        // Timestamps are lead nodes as well.\n        node = window.document.createProcessingInstruction(\"timestamp\", ts);\n        current.appendChild(node);\n        continue;\n      }\n      const m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/);\n      // If we can't parse the tag, skip to the next tag.\n      if (!m) {\n        continue;\n      }\n      // Try to construct an element, and ignore the tag if we couldn't.\n      node = createElement(m[1], m[3]);\n      if (!node) {\n        continue;\n      }\n      // Determine if the tag should be added based on the context of where it\n      // is placed in the cuetext.\n      if (!shouldAdd(current, node)) {\n        continue;\n      }\n      // Set the class list (as a list of classes, separated by space).\n      if (m[2]) {\n        node.className = m[2].substr(1).replace('.', ' ');\n      }\n      // Append the node to the current node, and enter the scope of the new\n      // node.\n      tagStack.push(m[1]);\n      current.appendChild(node);\n      current = node;\n      continue;\n    }\n\n    // Text nodes are leaf nodes.\n    current.appendChild(window.document.createTextNode(unescape(t)));\n  }\n\n  return rootDiv;\n}\n\n// This is a list of all the Unicode characters that have a strong\n// right-to-left category. What this means is that these characters are\n// written right-to-left for sure. It was generated by pulling all the strong\n// right-to-left characters out of the Unicode data table. That table can\n// found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\nconst strongRTLRanges = [[0x5be, 0x5be], [0x5c0, 0x5c0], [0x5c3, 0x5c3], [0x5c6, 0x5c6],\n  [0x5d0, 0x5ea], [0x5f0, 0x5f4], [0x608, 0x608], [0x60b, 0x60b], [0x60d, 0x60d],\n  [0x61b, 0x61b], [0x61e, 0x64a], [0x66d, 0x66f], [0x671, 0x6d5], [0x6e5, 0x6e6],\n  [0x6ee, 0x6ef], [0x6fa, 0x70d], [0x70f, 0x710], [0x712, 0x72f], [0x74d, 0x7a5],\n  [0x7b1, 0x7b1], [0x7c0, 0x7ea], [0x7f4, 0x7f5], [0x7fa, 0x7fa], [0x800, 0x815],\n  [0x81a, 0x81a], [0x824, 0x824], [0x828, 0x828], [0x830, 0x83e], [0x840, 0x858],\n  [0x85e, 0x85e], [0x8a0, 0x8a0], [0x8a2, 0x8ac], [0x200f, 0x200f],\n  [0xfb1d, 0xfb1d], [0xfb1f, 0xfb28], [0xfb2a, 0xfb36], [0xfb38, 0xfb3c],\n  [0xfb3e, 0xfb3e], [0xfb40, 0xfb41], [0xfb43, 0xfb44], [0xfb46, 0xfbc1],\n  [0xfbd3, 0xfd3d], [0xfd50, 0xfd8f], [0xfd92, 0xfdc7], [0xfdf0, 0xfdfc],\n  [0xfe70, 0xfe74], [0xfe76, 0xfefc], [0x10800, 0x10805], [0x10808, 0x10808],\n  [0x1080a, 0x10835], [0x10837, 0x10838], [0x1083c, 0x1083c], [0x1083f, 0x10855],\n  [0x10857, 0x1085f], [0x10900, 0x1091b], [0x10920, 0x10939], [0x1093f, 0x1093f],\n  [0x10980, 0x109b7], [0x109be, 0x109bf], [0x10a00, 0x10a00], [0x10a10, 0x10a13],\n  [0x10a15, 0x10a17], [0x10a19, 0x10a33], [0x10a40, 0x10a47], [0x10a50, 0x10a58],\n  [0x10a60, 0x10a7f], [0x10b00, 0x10b35], [0x10b40, 0x10b55], [0x10b58, 0x10b72],\n  [0x10b78, 0x10b7f], [0x10c00, 0x10c48], [0x1ee00, 0x1ee03], [0x1ee05, 0x1ee1f],\n  [0x1ee21, 0x1ee22], [0x1ee24, 0x1ee24], [0x1ee27, 0x1ee27], [0x1ee29, 0x1ee32],\n  [0x1ee34, 0x1ee37], [0x1ee39, 0x1ee39], [0x1ee3b, 0x1ee3b], [0x1ee42, 0x1ee42],\n  [0x1ee47, 0x1ee47], [0x1ee49, 0x1ee49], [0x1ee4b, 0x1ee4b], [0x1ee4d, 0x1ee4f],\n  [0x1ee51, 0x1ee52], [0x1ee54, 0x1ee54], [0x1ee57, 0x1ee57], [0x1ee59, 0x1ee59],\n  [0x1ee5b, 0x1ee5b], [0x1ee5d, 0x1ee5d], [0x1ee5f, 0x1ee5f], [0x1ee61, 0x1ee62],\n  [0x1ee64, 0x1ee64], [0x1ee67, 0x1ee6a], [0x1ee6c, 0x1ee72], [0x1ee74, 0x1ee77],\n  [0x1ee79, 0x1ee7c], [0x1ee7e, 0x1ee7e], [0x1ee80, 0x1ee89], [0x1ee8b, 0x1ee9b],\n  [0x1eea1, 0x1eea3], [0x1eea5, 0x1eea9], [0x1eeab, 0x1eebb], [0x10fffd, 0x10fffd]];\n\nfunction isStrongRTLChar(charCode) {\n  for (let i = 0; i < strongRTLRanges.length; i++) {\n    const currentRange = strongRTLRanges[i];\n    if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction determineBidi(cueDiv) {\n  let nodeStack = [],\n    text = \"\",\n    charCode;\n\n  if (!cueDiv || !cueDiv.childNodes) {\n    return \"ltr\";\n  }\n\n  function pushNodes(nodeStack, node) {\n    for (let i = node.childNodes.length - 1; i >= 0; i--) {\n      nodeStack.push(node.childNodes[i]);\n    }\n  }\n\n  function nextTextNode(nodeStack) {\n    if (!nodeStack || !nodeStack.length) {\n      return null;\n    }\n\n    const node = nodeStack.pop(),\n      text = node.textContent || node.innerText;\n    if (text) {\n      // TODO: This should match all unicode type B characters (paragraph\n      // separator characters). See issue #115.\n      const m = text.match(/^.*(\\n|\\r)/);\n      if (m) {\n        nodeStack.length = 0;\n        return m[0];\n      }\n      return text;\n    }\n    if (node.tagName === \"ruby\") {\n      return nextTextNode(nodeStack);\n    }\n    if (node.childNodes) {\n      pushNodes(nodeStack, node);\n      return nextTextNode(nodeStack);\n    }\n  }\n\n  pushNodes(nodeStack, cueDiv);\n  while ((text = nextTextNode(nodeStack))) {\n    for (let i = 0; i < text.length; i++) {\n      charCode = text.charCodeAt(i);\n      if (isStrongRTLChar(charCode)) {\n        return \"rtl\";\n      }\n    }\n  }\n  return \"ltr\";\n}\n\nfunction computeLinePos(cue) {\n  if (typeof cue.line === \"number\" &&\n    (cue.snapToLines || (cue.line >= 0 && cue.line <= 100))) {\n    return cue.line;\n  }\n  if (!cue.track || !cue.track.textTrackList ||\n    !cue.track.textTrackList.mediaElement) {\n    return -1;\n  }\n  const track = cue.track;\n  const trackList = track.textTrackList;\n  let count = 0;\n  for (let i = 0; i < trackList.length && trackList[i] !== track; i++) {\n    if (trackList[i].mode === \"showing\") {\n      count++;\n    }\n  }\n  return ++count * -1;\n}\n\nclass StyleBox {\n\n  constructor() {\n  }\n\n  // Apply styles to a div. If there is no div passed then it defaults to the\n  // div on 'this'.\n  applyStyles(styles, div) {\n    div = div || this.div;\n    for (let prop in styles) {\n      if (styles.hasOwnProperty(prop)) {\n        div.style[prop] = styles[prop];\n      }\n    }\n  }\n\n  formatStyle(val, unit) {\n    return val === 0 ? 0 : val + unit;\n  }\n}\n\n// Constructs the computed display state of the cue (a div). Places the div\n// into the overlay which should be a block level element (usually a div).\nclass CueStyleBox extends StyleBox {\n  constructor(window, cue, styleOptions) {\n    super();\n    const isIE8 = (typeof navigator !== \"undefined\") &&\n      (/MSIE\\s8\\.0/).test(navigator.userAgent);\n    let color = \"rgba(255, 255, 255, 1)\";\n    let backgroundColor = \"rgba(0, 0, 0, 0.8)\";\n    let textShadow = \"\";\n\n    if (typeof WebVTTSet !== \"undefined\") {\n      color = WebVTTSet.fontSet;\n      backgroundColor = WebVTTSet.backgroundSet;\n      textShadow = WebVTTSet.edgeSet;\n    }\n\n    if (isIE8) {\n      color = \"rgb(255, 255, 255)\";\n      backgroundColor = \"rgb(0, 0, 0)\";\n    }\n\n    this.cue = cue;\n\n    // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n    // have inline positioning and will function as the cue background box.\n    this.cueDiv = parseContent(window, cue.text);\n    let styles = {\n      color: color,\n      backgroundColor: backgroundColor,\n      textShadow: textShadow,\n      position: \"relative\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      display: \"inline\"\n    };\n\n    if (!isIE8) {\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n        : cue.vertical === \"lr\" ? \"vertical-lr\"\n          : \"vertical-rl\";\n      styles.unicodeBidi = \"plaintext\";\n    }\n    this.applyStyles(styles, this.cueDiv);\n\n    // Create an absolutely positioned div that will be used to position the cue\n    // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n    // mirrors of them except \"middle\" which is \"center\" in CSS.\n    this.div = window.document.createElement(\"div\");\n    styles = {\n      textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n      font: styleOptions.font,\n      whiteSpace: \"pre-line\",\n      position: \"absolute\"\n    };\n\n    if (!isIE8) {\n      styles.direction = determineBidi(this.cueDiv);\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n        : cue.vertical === \"lr\" ? \"vertical-lr\"\n          : \"vertical-rl\".stylesunicodeBidi = \"plaintext\";\n    }\n\n    this.applyStyles(styles);\n\n    this.div.appendChild(this.cueDiv);\n\n    // Calculate the distance from the reference edge of the viewport to the text\n    // position of the cue box. The reference edge will be resolved later when\n    // the box orientation styles are applied.\n    let textPos = 0;\n    switch (cue.positionAlign) {\n      case \"start\":\n        textPos = cue.position;\n        break;\n      case \"middle\":\n        textPos = cue.position - (cue.size / 2);\n        break;\n      case \"end\":\n        textPos = cue.position - cue.size;\n        break;\n    }\n\n    // Horizontal box orientation; textPos is the distance from the left edge of the\n    // area to the left edge of the box and cue.size is the distance extending to\n    // the right from there.\n    if (cue.vertical === \"\") {\n      this.applyStyles({\n        left: this.formatStyle(textPos, \"%\"),\n        width: this.formatStyle(cue.size, \"%\")\n      });\n      // Vertical box orientation; textPos is the distance from the top edge of the\n      // area to the top edge of the box and cue.size is the height extending\n      // downwards from there.\n    } else {\n      this.applyStyles({\n        top: this.formatStyle(textPos, \"%\"),\n        height: this.formatStyle(cue.size, \"%\")\n      });\n    }\n\n    this.move = function (box) {\n      this.applyStyles({\n        top: this.formatStyle(box.top, \"px\"),\n        bottom: this.formatStyle(box.bottom, \"px\"),\n        left: this.formatStyle(box.left, \"px\"),\n        right: this.formatStyle(box.right, \"px\"),\n        height: this.formatStyle(box.height, \"px\"),\n        width: this.formatStyle(box.width, \"px\")\n      });\n    };\n  }\n}\n\n// Represents the co-ordinates of an Element in a way that we can easily\n// compute things with such as if it overlaps or intersects with another Element.\n// Can initialize it with either a StyleBox or another BoxPosition.\nclass BoxPosition {\n  constructor(obj) {\n    let isIE8 = (typeof navigator !== \"undefined\") &&\n      (/MSIE\\s8\\.0/).test(navigator.userAgent);\n\n    // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n    // was passed in and we need to copy the results of 'getBoundingClientRect'\n    // as the object returned is readonly. All co-ordinate values are in reference\n    // to the viewport origin (top left).\n    let lh, height, width, top;\n    if (obj.div) {\n      height = obj.div.offsetHeight;\n      width = obj.div.offsetWidth;\n      top = obj.div.offsetTop;\n\n      let rects = (rects = obj.div.childNodes) && (rects = rects[0]) &&\n        rects.getClientRects && rects.getClientRects();\n      obj = obj.div.getBoundingClientRect();\n      // In certain cases the outter div will be slightly larger then the sum of\n      // the inner div's lines. This could be due to bold text, etc, on some platforms.\n      // In this case we should get the average line height and use that. This will\n      // result in the desired behaviour.\n      lh = rects ? Math.max((rects[0] && rects[0].height) || 0, obj.height / rects.length)\n        : 0;\n\n    }\n    this.left = obj.left;\n    this.right = obj.right;\n    this.top = obj.top || top;\n    this.height = obj.height || height;\n    this.bottom = obj.bottom || (top + (obj.height || height));\n    this.width = obj.width || width;\n    this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n\n    if (isIE8 && !this.lineHeight) {\n      this.lineHeight = 13;\n    }\n  }\n\n  // Move the box along a particular axis. Optionally pass in an amount to move\n  // the box. If no amount is passed then the default is the line height of the\n  // box.\n  move(axis, toMove) {\n    toMove = toMove !== undefined ? toMove : this.lineHeight;\n    switch (axis) {\n      case \"+x\":\n        this.left += toMove;\n        this.right += toMove;\n        break;\n      case \"-x\":\n        this.left -= toMove;\n        this.right -= toMove;\n        break;\n      case \"+y\":\n        this.top += toMove;\n        this.bottom += toMove;\n        break;\n      case \"-y\":\n        this.top -= toMove;\n        this.bottom -= toMove;\n        break;\n    }\n  }\n\n  // Check if this box overlaps another box, b2.\n  overlaps = function (b2) {\n    return this.left < b2.right &&\n      this.right > b2.left &&\n      this.top < b2.bottom &&\n      this.bottom > b2.top;\n  }\n\n  // Check if this box overlaps any other boxes in boxes.\n  overlapsAny(boxes) {\n    for (let i = 0; i < boxes.length; i++) {\n      if (this.overlaps(boxes[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // Check if this box is within another box.\n  within(container) {\n    return this.top >= container.top &&\n      this.bottom <= container.bottom &&\n      this.left >= container.left &&\n      this.right <= container.right;\n  }\n\n  // Check if this box is entirely within the container or it is overlapping\n  // on the edge opposite of the axis direction passed. For example, if \"+x\" is\n  // passed and the box is overlapping on the left edge of the container, then\n  // return true.\n  overlapsOppositeAxis(container, axis) {\n    switch (axis) {\n      case \"+x\":\n        return this.left < container.left;\n      case \"-x\":\n        return this.right > container.right;\n      case \"+y\":\n        return this.top < container.top;\n      case \"-y\":\n        return this.bottom > container.bottom;\n    }\n  }\n\n  // Find the percentage of the area that this box is overlapping with another\n  // box.\n  intersectPercentage(b2) {\n    let x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n      y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n      intersectArea = x * y;\n    return intersectArea / (this.height * this.width);\n  }\n\n  // Convert the positions from this box to CSS compatible positions using\n  // the reference container's positions. This has to be done because this\n  // box's positions are in reference to the viewport origin, whereas, CSS\n  // values are in referecne to their respective edges.\n  toCSSCompatValues(reference) {\n    return {\n      top: this.top - reference.top,\n      bottom: reference.bottom - this.bottom,\n      left: this.left - reference.left,\n      right: reference.right - this.right,\n      height: this.height,\n      width: this.width\n    };\n  }\n\n  // Get an object that represents the box's position without anything extra.\n  // Can pass a StyleBox, HTMLElement, or another BoxPositon.\n  static getSimpleBoxPosition(obj) {\n    let height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n    let width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n    let top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n\n    obj = obj.div ? obj.div.getBoundingClientRect() :\n      obj.tagName ? obj.getBoundingClientRect() : obj;\n    return {\n      left: obj.left,\n      right: obj.right,\n      top: obj.top || top,\n      height: obj.height || height,\n      bottom: obj.bottom || (top + (obj.height || height)),\n      width: obj.width || width\n    };\n  };\n}\n\n// Move a StyleBox to its specified, or next best, position. The containerBox\n// is the box that contains the StyleBox, such as a div. boxPositions are\n// a list of other boxes that the styleBox can't overlap with.\nfunction moveBoxToLinePosition(styleBox, containerBox, boxPositions) {\n\n  // Find the best position for a cue box, b, on the video. The axis parameter\n  // is a list of axis, the order of which, it will move the box along. For example:\n  // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n  // direction. If it doesn't find a good position for it there it will then move\n  // it along the x axis in the negative direction.\n  function findBestPosition(b, axis) {\n    let bestPosition,\n      specifiedPosition = new BoxPosition(b),\n      percentage = 1; // Highest possible so the first thing we get is better.\n\n    for (let i = 0; i < axis.length; i++) {\n      while (b.overlapsOppositeAxis(containerBox, axis[i]) ||\n      (b.within(containerBox) && b.overlapsAny(boxPositions))) {\n        b.move(axis[i]);\n      }\n      // We found a spot where we aren't overlapping anything. This is our\n      // best position.\n      if (b.within(containerBox)) {\n        return b;\n      }\n      let p = b.intersectPercentage(containerBox);\n      // If we're outside the container box less then we were on our last try\n      // then remember this position as the best position.\n      if (percentage > p) {\n        bestPosition = new BoxPosition(b);\n        percentage = p;\n      }\n      // Reset the box position to the specified position.\n      b = new BoxPosition(specifiedPosition);\n    }\n    return bestPosition || specifiedPosition;\n  }\n\n  let boxPosition = new BoxPosition(styleBox),\n    cue = styleBox.cue,\n    linePos = computeLinePos(cue),\n    axis = [];\n\n  // If we have a line number to align the cue to.\n  if (cue.snapToLines) {\n    let size;\n    switch (cue.vertical) {\n      case \"\":\n        axis = [\"+y\", \"-y\"];\n        size = \"height\";\n        break;\n      case \"rl\":\n        axis = [\"+x\", \"-x\"];\n        size = \"width\";\n        break;\n      case \"lr\":\n        axis = [\"-x\", \"+x\"];\n        size = \"width\";\n        break;\n    }\n\n    let step = boxPosition.lineHeight,\n      position = step * Math.round(linePos),\n      maxPosition = containerBox[size] + step,\n      initialAxis = axis[0];\n\n    // If the specified intial position is greater then the max position then\n    // clamp the box to the amount of steps it would take for the box to\n    // reach the max position.\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    }\n\n    // If computed line position returns negative then line numbers are\n    // relative to the bottom of the video instead of the top. Therefore, we\n    // need to increase our initial position by the length or width of the\n    // video, depending on the writing direction, and reverse our axis directions.\n    if (linePos < 0) {\n      position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n      axis = axis.reverse();\n    }\n\n    // Move the box to the specified position. This may not be its best\n    // position.\n    boxPosition.move(initialAxis, position);\n\n  } else {\n    // If we have a percentage line value for the cue.\n    let calculatedPercentage = (boxPosition.lineHeight / containerBox.height) * 100;\n\n    switch (cue.lineAlign) {\n      case \"middle\":\n        linePos -= (calculatedPercentage / 2);\n        break;\n      case \"end\":\n        linePos -= calculatedPercentage;\n        break;\n    }\n\n    // Apply initial line position to the cue box.\n    switch (cue.vertical) {\n      case \"\":\n        styleBox.applyStyles({\n          top: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"rl\":\n        styleBox.applyStyles({\n          left: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"lr\":\n        styleBox.applyStyles({\n          right: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n    }\n\n    axis = [\"+y\", \"-x\", \"+x\", \"-y\"];\n\n    // Get the box position again after we've applied the specified positioning\n    // to it.\n    boxPosition = new BoxPosition(styleBox);\n  }\n\n  let bestPosition = findBestPosition(boxPosition, axis);\n  styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n}\n\nfunction convertCueToDOMTree(window, cuetext) {\n  if (!window || !cuetext) {\n    return null;\n  }\n  return parseContent(window, cuetext);\n}\n\nconst FONT_SIZE_PERCENT = 0.05;\nconst FONT_STYLE = \"sans-serif\";\nconst CUE_BACKGROUND_PADDING = \"1.5%\";\n\n// Runs the processing model over the cues and regions passed to it.\n// @param overlay A block level element (usually a div) that the computed cues\n//                and regions will be placed into.\nfunction processCues(window, cues, overlay) {\n  if (!window || !cues || !overlay) {\n    return null;\n  }\n\n  // Remove all previous children.\n  while (overlay.firstChild) {\n    overlay.removeChild(overlay.firstChild);\n  }\n\n  let paddedOverlay = window.document.createElement(\"div\");\n  paddedOverlay.style.position = \"absolute\";\n  paddedOverlay.style.left = \"0\";\n  paddedOverlay.style.right = \"0\";\n  paddedOverlay.style.top = \"0\";\n  paddedOverlay.style.bottom = \"0\";\n  paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n  overlay.appendChild(paddedOverlay);\n\n  // Determine if we need to compute the display states of the cues. This could\n  // be the case if a cue's state has been changed since the last computation or\n  // if it has not been computed yet.\n  function shouldCompute(cues) {\n    for (let i = 0; i < cues.length; i++) {\n      if (cues[i].hasBeenReset || !cues[i].displayState) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // We don't need to recompute the cues' display states. Just reuse them.\n  if (!shouldCompute(cues)) {\n    for (let i = 0; i < cues.length; i++) {\n      paddedOverlay.appendChild(cues[i].displayState);\n    }\n    return;\n  }\n\n  let boxPositions = [],\n    containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n    fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n  let styleOptions = {\n    font: (fontSize * fontScale) + \"px \" + FONT_STYLE\n  };\n\n  (function () {\n    let styleBox, cue;\n\n    for (let i = 0; i < cues.length; i++) {\n      cue = cues[i];\n\n      // Compute the intial position and styles of the cue div.\n      styleBox = new CueStyleBox(window, cue, styleOptions);\n      paddedOverlay.appendChild(styleBox.div);\n\n      // Move the cue div to it's correct line position.\n      moveBoxToLinePosition(styleBox, containerBox, boxPositions);\n\n      // Remember the computed div so that we don't have to recompute it later\n      // if we don't have too.\n      cue.displayState = styleBox.div;\n\n      boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n    }\n  })();\n};\n\n\nexport {processCues, convertCueToDOMTree};\n\n\n\n// WEBPACK FOOTER //\n// ./track/text-track-display.js","//@flow\nimport BasePlugin from './base-plugin'\nimport PlayerError from '../utils/player-error'\nimport Player from '../player'\nimport LoggerFactory from '../utils/logger'\n\n/**\n * The logger of the PluginManager class.\n * @private\n * @const\n */\nconst logger = LoggerFactory.getLogger(\"PluginManager\");\n\n/** The PluginManager responsible for register plugins definitions and store plugins instances.\n * @classdesc\n */\nexport default class PluginManager {\n  /**\n   * The registry of the plugins.\n   * Maps plugin's name to his class.\n   * @type {Map}\n   * @static\n   * @private\n   */\n  static _registry: Map<string, Function> = new Map();\n  /**\n   * The active plugins in the player.\n   * Maps plugin's name to his instance.\n   * @type {Map}\n   * @private\n   */\n  _plugins: Map<string, BasePlugin> = new Map();\n\n  /**\n   * Writes the plugin in the registry.\n   * Maps: plugin name -> plugin class.\n   * @param {string} name - The plugin name\n   * @param {Function} handler - The plugin class\n   * @returns {boolean} - If the registration request succeeded\n   * @static\n   * @public\n   */\n  static register(name: string, handler: Function): boolean {\n    if (typeof handler !== 'function' || handler.prototype instanceof BasePlugin === false) {\n      throw new PlayerError(PlayerError.TYPE.NOT_VALID_HANDLER).getError();\n    }\n    if (!PluginManager._registry.has(name)) {\n      PluginManager._registry.set(name, handler);\n      logger.debug(`Plugin <${name}> has been registered successfully`);\n      return true;\n    }\n    logger.debug(`Plugin <${name}> is already registered, do not register again`);\n    return false;\n  }\n\n  /**\n   * Removes the plugin from the registry.\n   * @param {string} name - The plugin name\n   * @static\n   * @public\n   * @returns {void}\n   */\n  static unRegister(name: string): void {\n    if (PluginManager._registry.has(name)) {\n      PluginManager._registry.delete(name);\n      logger.debug(`Unregistered <${name}> plugin.`);\n    }\n  }\n\n  /**\n   * Creates and store new instance of the plugin in case isValid() of the plugin returns true.\n   * @param {string} name - The plugin name\n   * @param {Player} player - The player reference\n   * @param {Object} [config={}] - The plugin configuration\n   * @returns {boolean} - Whether the plugin load was successful\n   * @public\n   */\n  load(name: string, player: Player, config: Object = {}): boolean {\n    if (!PluginManager._registry.has(name)) {\n      throw new PlayerError(PlayerError.TYPE.NOT_REGISTERED_PLUGIN, name).getError();\n    }\n    let pluginClass = PluginManager._registry.get(name);\n    if (pluginClass && pluginClass.isValid()) {\n      this._plugins.set(name, pluginClass.createPlugin(name, player, config));\n      logger.debug(`Plugin <${name}> has been loaded`);\n      return true;\n    }\n    logger.debug(`Plugin <${name}> isn\\'t loaded, isValid()=false`);\n    return false;\n  }\n\n  /**\n   * Iterates over all the plugins and calls private _destroy.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this._plugins.forEach(this._destroy.bind(this));\n  }\n\n  /**\n   * Iterates over all the plugins and calls reset() method of the plugin's impl.\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._plugins.forEach((plugin: BasePlugin) => {\n      plugin.reset();\n    });\n  }\n\n  /**\n   * Calls destroy() method of the plugin's impl.\n   * @param {BasePlugin} plugin - The plugin instance\n   * @param {string} name - The plugin name\n   * @private\n   * @returns {void}\n   */\n  _destroy(plugin: BasePlugin, name: string): void {\n    plugin.destroy();\n    this._plugins.delete(name);\n  }\n\n  /**\n   * Returns the plugin's instance.\n   * @param {string} name - The plugin name\n   * @returns {BasePlugin} - The plugin instance\n   * @public\n   */\n  get(name: string): ?BasePlugin {\n    return this._plugins.get(name);\n  }\n}\n\n/**\n * Export the register method.\n * @type {function}\n * @constant\n */\nconst registerPlugin = PluginManager.register;\nexport {registerPlugin};\n\n\n\n// WEBPACK FOOTER //\n// ./plugin/plugin-manager.js","// @flow\n\n/**\n * Creates a TextStyle object.\n *\n * <p><i>\n * Note that although this API is based on FCC guidelines, we cannot guarantee\n * that your application is in compliance with this or any other guideline.\n * </i></p>\n *\n * @constructor\n * @struct\n * @export\n */\nclass TextStyle {\n\n  /**\n   * Defined set of font families\n   * @enum {Object.<string, string>}}\n   * @export\n   */\n  static FontFamily: {[string]: string} = {\n    \"ARIAL\": \"Arial\",\n    \"HELVETICA\": \"Helvetica\",\n    \"VERDANA\": \"Verdana\",\n    \"SANS_SERIF\": \"sans-serif\"\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111, footnote\n   * 448.  Each value is an array of the three RGB values for that color.\n   * @enum {Object.<string, Array.<number>>}}\n   * @export\n   */\n  static StandardColors: {[string]: Array<number>} = {\n    'WHITE': [255, 255, 255],\n    'BLACK': [0, 0, 0],\n    'RED': [255, 0, 0],\n    'GREEN': [0, 255, 0],\n    'BLUE': [0, 0, 255],\n    'YELLOW': [255, 255, 0],\n    'MAGENTA': [255, 0, 255],\n    'CYAN': [0, 255, 255]\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * @enum {Object.<string, number>}}\n   * @export\n   */\n  static StandardOpacities: {[string]: number} = {\n    'OPAQUE': 1,\n    'SEMI_HIGH': 0.75,\n    'SEMI_LOW': 0.25,\n    'TRANSPARENT': 0\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * The styles to achieve these effects are not specified anywhere.\n   *\n   * Each inner array represents a shadow, and is composed of RGB values for the\n   * shadow color, followed by pixel values for x-offset, y-offset, and blur.\n   *\n   * @enum {!Array.<!Array.<number>>}\n   * @export\n   */\n  static EdgeStyles: { [string]: Array<Array<number>> } = {\n    'NONE': [],\n    'RAISED': [\n      [34, 34, 34, 1, 1, 0],\n      [34, 34, 34, 2, 2, 0],\n      [34, 34, 34, 3, 3, 0]],\n    'DEPRESSED': [\n      [204, 204, 204, 1, 1, 0],\n      [204, 204, 204, 0, 1, 0],\n      [34, 34, 34, -1, -1, 0],\n      [34, 34, 34, 0, -1, 0]],\n    'UNIFORM': [\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4]],\n    'DROP': [\n      [34, 34, 34, 2, 2, 3],\n      [34, 34, 34, 2, 2, 4],\n      [34, 34, 34, 2, 2, 5]]\n  };\n\n  static FontSizes: Array<string> = [\n    \"50%\",\n    \"75%\",\n    \"100%\",\n    \"200%\",\n    \"300%\",\n    \"400%\"\n  ];\n\n  /**\n   * Creates a CSS RGBA sctring for a given color and opacity values\n   * @param {TextStyle.StandardColors} color - color value in RGB\n   * @param {TextStyle.StandardOpacities} opacity - opacity value\n   * @return {string} - CSS rgba string\n   * @private\n   */\n  static _toRGBA(color: Array<number>, opacity: number): string {\n    // shaka.asserts.assert(color.length == 3);\n    return 'rgba(' + color.concat(opacity).join(',') + ')';\n  }\n\n  /**\n   * Font size, such as 50%, 75%, 100%, 200%, or 300%.\n   * @type {string}\n   */\n  fontSize: string = '100%';\n\n  /**\n   * @type {TextStyle.FontFamily}\n   */\n  fontFamily: string = TextStyle.FontFamily.SANS_SERIF;\n\n  /**\n   * @type {TextStyle.StandardColors}\n   */\n  fontColor: Array<number> = TextStyle.StandardColors.WHITE;\n\n  /**\n   * @type {TextStyle.StandardOpacities}\n   * @expose\n   */\n  fontOpacity: number = TextStyle.StandardOpacities.OPAQUE;\n\n  /**\n   * @type {TextStyle.StandardColors}\n   */\n  backgroundColor: Array<number> = TextStyle.StandardColors.BLACK;\n\n  /**\n   * @type {TextStyle.StandardOpacities}\n   */\n  backgroundOpacity: number = TextStyle.StandardOpacities.OPAQUE;\n\n  /**\n   * @type {TextStyle.EdgeStyles}\n   * @expose\n   */\n  fontEdge: Array<Array<number>> = TextStyle.EdgeStyles.NONE;\n\n  /**\n   * Compute the CSS text necessary to represent this TextStyle.\n   * Output does not contain any selectors.\n   *\n   * @return {string} - ::CUE CSS string\n   */\n  toCSS(): string {\n    let attributes: Array<string> = [];\n\n    attributes.push('font-family: ' + this.fontFamily);\n    attributes.push('font-size: ' + this.fontSize);\n    attributes.push('color: ' + TextStyle._toRGBA(this.fontColor, this.fontOpacity));\n    attributes.push('background-color: ' +\n      TextStyle._toRGBA(this.backgroundColor, this.backgroundOpacity));\n\n    // A given edge effect may be implemented with multiple shadows.\n    // Collect them all into an array, then combine into one attribute.\n    let shadows: Array<string> = [];\n    for (let i = 0; i < this.fontEdge.length; i++) {\n      // shaka.asserts.assert(this.fontEdge[i].length == 6);\n      const color: Array<number> = this.fontEdge[i].slice(0, 3);\n      let shadow: Array<number> = this.fontEdge[i].slice(3, 6);\n      shadows.push(TextStyle._toRGBA(color, this.fontOpacity) + ' ' +\n        shadow.join('px ') + 'px');\n    }\n    attributes.push('text-shadow: ' + shadows.join(','));\n\n    return attributes.join('!important; ');\n  }\n\n  /**\n   * clones the textStyle object\n   * @returns {TextStyle} the cloned textStyle object\n   */\n  clone(): TextStyle{\n    let clonedTextStyle = new TextStyle();\n    clonedTextStyle.fontEdge = this.fontEdge;\n    clonedTextStyle.fontSize = this.fontSize;\n    clonedTextStyle.fontColor = this.fontColor;\n    clonedTextStyle.fontOpacity = this.fontOpacity;\n    clonedTextStyle.backgroundColor = this.backgroundColor;\n    clonedTextStyle.backgroundOpacity = this.backgroundOpacity;\n    return clonedTextStyle;\n  }\n}\n\nexport default TextStyle;\n\n\n\n// WEBPACK FOOTER //\n// ./track/text-style.js","//@flow\nimport Player from './player'\nimport LoggerFactory from './utils/logger'\nimport BaseMediaSourceAdapter from './engines/html5/media-source/base-media-source-adapter'\nimport {registerMediaSourceAdapter} from './engines/html5/media-source/media-source-provider'\nimport {registerPlugin} from './plugin/plugin-manager'\nimport BaseDrmProtocol from './drm/base-drm-protocol'\nimport BaseMiddleware from './middleware/base-middleware'\nimport BasePlugin from './plugin/base-plugin'\nimport Track from './track/track'\nimport VideoTrack from './track/video-track'\nimport AudioTrack from './track/audio-track'\nimport TextTrack from './track/text-track'\nimport TextStyle from './track/text-style'\nimport Env from './utils/env'\nimport * as Utils from './utils/util'\n\nPlayer.runCapabilities();\n\ndeclare var __VERSION__: string;\ndeclare var __NAME__: string;\ndeclare var __PACKAGE_URL__: string;\n\nLoggerFactory.getLogger().log(`%c ${__NAME__} ${__VERSION__}`, \"color: #98ff98;  font-size: large\");\nLoggerFactory.getLogger().log(`%c For more details see ${__PACKAGE_URL__}`, \"color: #98ff98;\");\n\n/**\n * @param {Object} config - The configuration of the player\n * @returns {Player} - The player instance\n */\nexport function loadPlayer(config: ?Object) {\n  return new Player(config || {});\n}\n\n// Export the media source adapters necessary utils\nexport {registerMediaSourceAdapter, BaseMediaSourceAdapter};\n\n// Export the plugin framework\nexport {registerPlugin, BasePlugin, BaseMiddleware};\n\n// Export the tracks classes\nexport {Track, VideoTrack, AudioTrack, TextTrack, TextStyle};\n\n// Export utils library\nexport {Utils};\n\n// Export version\nexport {__VERSION__ as VERSION};\n\n// Export player name\nexport {__NAME__ as PLAYER_NAME};\n\n// Export environment data\nexport {Env};\n\n// Export base DRM protocol\nexport {BaseDrmProtocol};\n\n// Export the player capabilities\nconst getCapabilities = Player.getCapabilities;\nexport {getCapabilities};\n\nexport default loadPlayer;\n\n\n\n// WEBPACK FOOTER //\n// ./playkit.js","/**\n * UAParser.js v0.7.13\n * Lightweight JavaScript-based User-Agent string parser\n * https://github.com/faisalman/ua-parser-js\n *\n * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>\n * Dual licensed under GPLv2 & MIT\n */\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '0.7.13',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major', // deprecated\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded';\n\n\n    ///////////\n    // Helper\n    //////////\n\n\n    var util = {\n        extend : function (regexes, extensions) {\n            var margedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    margedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    margedRegexes[i] = regexes[i];\n                }\n            }\n            return margedRegexes;\n        },\n        has : function (str1, str2) {\n          if (typeof str1 === \"string\") {\n            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n          } else {\n            return false;\n          }\n        },\n        lowerize : function (str) {\n            return str.toLowerCase();\n        },\n        major : function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g,'').split(\".\")[0] : undefined;\n        },\n        trim : function (str) {\n          return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n        }\n    };\n\n\n    ///////////////\n    // Map helper\n    //////////////\n\n\n    var mapper = {\n\n        rgx : function (ua, arrays) {\n\n            //var result = {},\n            var i = 0, j, k, p, q, matches, match;//, args = arguments;\n\n            /*// construct object barebones\n            for (p = 0; p < args[1].length; p++) {\n                q = args[1][p];\n                result[typeof q === OBJ_TYPE ? q[0] : q] = undefined;\n            }*/\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length == 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length == 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length == 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n            //console.log(this);\n            //return this;\n        },\n\n        str : function (str, map) {\n\n            for (var i in map) {\n                // check if array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (util.has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (util.has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n        }\n    };\n\n\n    ///////////////\n    // String map\n    //////////////\n\n\n    var maps = {\n\n        browser : {\n            oldsafari : {\n                version : {\n                    '1.0'   : '/8',\n                    '1.2'   : '/1',\n                    '1.3'   : '/3',\n                    '2.0'   : '/412',\n                    '2.0.2' : '/416',\n                    '2.0.3' : '/417',\n                    '2.0.4' : '/419',\n                    '?'     : '/'\n                }\n            }\n        },\n\n        device : {\n            amazon : {\n                model : {\n                    'Fire Phone' : ['SD', 'KF']\n                }\n            },\n            sprint : {\n                model : {\n                    'Evo Shift 4G' : '7373KT'\n                },\n                vendor : {\n                    'HTC'       : 'APA',\n                    'Sprint'    : 'Sprint'\n                }\n            }\n        },\n\n        os : {\n            windows : {\n                version : {\n                    'ME'        : '4.90',\n                    'NT 3.11'   : 'NT3.51',\n                    'NT 4.0'    : 'NT4.0',\n                    '2000'      : 'NT 5.0',\n                    'XP'        : ['NT 5.1', 'NT 5.2'],\n                    'Vista'     : 'NT 6.0',\n                    '7'         : 'NT 6.1',\n                    '8'         : 'NT 6.2',\n                    '8.1'       : 'NT 6.3',\n                    '10'        : ['NT 6.4', 'NT 10.0'],\n                    'RT'        : 'ARM'\n                }\n            }\n        }\n    };\n\n\n    //////////////\n    // Regex map\n    /////////////\n\n\n    var regexes = {\n\n        browser : [[\n\n            // Presto based\n            /(opera\\smini)\\/([\\w\\.-]+)/i,                                       // Opera Mini\n            /(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i,                      // Opera Mobi/Tablet\n            /(opera).+version\\/([\\w\\.]+)/i,                                     // Opera > 9.80\n            /(opera)[\\/\\s]+([\\w\\.]+)/i                                          // Opera < 9.80\n            ], [NAME, VERSION], [\n\n            /(opios)[\\/\\s]+([\\w\\.]+)/i                                          // Opera mini on iphone >= 8.0\n            ], [[NAME, 'Opera Mini'], VERSION], [\n\n            /\\s(opr)\\/([\\w\\.]+)/i                                               // Opera Webkit\n            ], [[NAME, 'Opera'], VERSION], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]+)*/i,\n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n            // Trident based\n            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,\n                                                                                // Avant/IEMobile/SlimBrowser/Baidu\n            /(?:ms|\\()(ie)\\s([\\w\\.]+)/i,                                        // Internet Explorer\n\n            // Webkit/KHTML based\n            /(rekonq)\\/([\\w\\.]+)*/i,                                            // Rekonq\n            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\\/([\\w\\.-]+)/i\n                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser\n            ], [NAME, VERSION], [\n\n            /(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i                         // IE11\n            ], [[NAME, 'IE'], VERSION], [\n\n            /(edge)\\/((\\d+)?[\\w\\.]+)/i                                          // Microsoft Edge\n            ], [NAME, VERSION], [\n\n            /(yabrowser)\\/([\\w\\.]+)/i                                           // Yandex\n            ], [[NAME, 'Yandex'], VERSION], [\n\n            /(puffin)\\/([\\w\\.]+)/i                                              // Puffin\n            ], [[NAME, 'Puffin'], VERSION], [\n\n            /(uc\\s?browser)[\\/\\s]?([\\w\\.]+)/i,\n            /ucweb.+(ucbrowser)[\\/\\s]?([\\w\\.]+)/i,\n            /juc.+(ucweb)[\\/\\s]?([\\w\\.]+)/i,\n            /(ucbrowser)\\/([\\w\\.]+)/i\n                                                                                // UCBrowser\n            ], [[NAME, 'UCBrowser'], VERSION], [\n\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(micromessenger)\\/([\\w\\.]+)/i                                      // WeChat\n            ], [[NAME, 'WeChat'], VERSION], [\n\n            /m?(qqbrowser)[\\/\\s]?([\\w\\.]+)/i                                    // QQBrowser\n            ], [NAME, VERSION], [\n\n            /xiaomi\\/miuibrowser\\/([\\w\\.]+)/i                                   // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI Browser']], [\n\n            /;fbav\\/([\\w\\.]+);/i                                                // Facebook App for iOS & Android\n            ], [VERSION, [NAME, 'Facebook']], [\n\n            /(headlesschrome) ([\\w\\.]+)/i                                       // Chrome Headless\n            ], [VERSION, [NAME, 'Chrome Headless']], [\n\n            /\\swv\\).+(chrome)\\/([\\w\\.]+)/i                                      // Chrome WebView\n            ], [[NAME, /(.+)/, '$1 WebView'], VERSION], [\n\n            /android.+samsungbrowser\\/([\\w\\.]+)/i,\n            /android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)*/i        // Android Browser\n            ], [VERSION, [NAME, 'Android Browser']], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i\n                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /(dolfin)\\/([\\w\\.]+)/i                                              // Dolphin\n            ], [[NAME, 'Dolphin'], VERSION], [\n\n            /((?:android.+)crmo|crios)\\/([\\w\\.]+)/i                             // Chrome for Android/iOS\n            ], [[NAME, 'Chrome'], VERSION], [\n\n            /(coast)\\/([\\w\\.]+)/i                                               // Opera Coast\n            ], [[NAME, 'Opera Coast'], VERSION], [\n\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, 'Firefox']], [\n\n            /version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                       // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n\n            /version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i                    // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n\n            /webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i                     // Safari < 3.0\n            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [\n\n            /(konqueror)\\/([\\w\\.]+)/i,                                          // Konqueror\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape)\\/([\\w\\.-]+)/i                                 // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\\/([\\w\\.-]+)/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                          // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\n            /(links)\\s\\(([\\w\\.]+)/i,                                            // Links\n            /(gobrowser)\\/?([\\w\\.]+)*/i,                                        // GoBrowser\n            /(ice\\s?browser)\\/v?([\\w\\._]+)/i,                                   // ICE Browser\n            /(mosaic)[\\/\\s]([\\w\\.]+)/i                                          // Mosaic\n            ], [NAME, VERSION]\n\n            /* /////////////////////\n            // Media players BEGIN\n            ////////////////////////\n\n            , [\n\n            /(apple(?:coremedia|))\\/((\\d+)[\\w\\._]+)/i,                          // Generic Apple CoreMedia\n            /(coremedia) v((\\d+)[\\w\\._]+)/i\n            ], [NAME, VERSION], [\n\n            /(aqualung|lyssna|bsplayer)\\/((\\d+)?[\\w\\.-]+)/i                     // Aqualung/Lyssna/BSPlayer\n            ], [NAME, VERSION], [\n\n            /(ares|ossproxy)\\s((\\d+)[\\w\\.-]+)/i                                 // Ares/OSSProxy\n            ], [NAME, VERSION], [\n\n            /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\\/((\\d+)[\\w\\.-]+)/i,\n                                                                                // Audacious/AudiMusicStream/Amarok/BASS/OpenCORE/Dalvik/GnomeMplayer/MoC\n                                                                                // NSPlayer/PSP-InternetRadioPlayer/Videos\n            /(clementine|music player daemon)\\s((\\d+)[\\w\\.-]+)/i,               // Clementine/MPD\n            /(lg player|nexplayer)\\s((\\d+)[\\d\\.]+)/i,\n            /player\\/(nexplayer|lg player)\\s((\\d+)[\\w\\.-]+)/i                   // NexPlayer/LG Player\n            ], [NAME, VERSION], [\n            /(nexplayer)\\s((\\d+)[\\w\\.-]+)/i                                     // Nexplayer\n            ], [NAME, VERSION], [\n\n            /(flrp)\\/((\\d+)[\\w\\.-]+)/i                                          // Flip Player\n            ], [[NAME, 'Flip Player'], VERSION], [\n\n            /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i\n                                                                                // FStream/NativeHost/QuerySeekSpider/IA Archiver/facebookexternalhit\n            ], [NAME], [\n\n            /(gstreamer) souphttpsrc (?:\\([^\\)]+\\)){0,1} libsoup\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // Gstreamer\n            ], [NAME, VERSION], [\n\n            /(htc streaming player)\\s[\\w_]+\\s\\/\\s((\\d+)[\\d\\.]+)/i,              // HTC Streaming Player\n            /(java|python-urllib|python-requests|wget|libcurl)\\/((\\d+)[\\w\\.-_]+)/i,\n                                                                                // Java/urllib/requests/wget/cURL\n            /(lavf)((\\d+)[\\d\\.]+)/i                                             // Lavf (FFMPEG)\n            ], [NAME, VERSION], [\n\n            /(htc_one_s)\\/((\\d+)[\\d\\.]+)/i                                      // HTC One S\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(mplayer)(?:\\s|\\/)(?:(?:sherpya-){0,1}svn)(?:-|\\s)(r\\d+(?:-\\d+[\\w\\.-]+){0,1})/i\n                                                                                // MPlayer SVN\n            ], [NAME, VERSION], [\n\n            /(mplayer)(?:\\s|\\/|[unkow-]+)((\\d+)[\\w\\.-]+)/i                      // MPlayer\n            ], [NAME, VERSION], [\n\n            /(mplayer)/i,                                                       // MPlayer (no other info)\n            /(yourmuze)/i,                                                      // YourMuze\n            /(media player classic|nero showtime)/i                             // Media Player Classic/Nero ShowTime\n            ], [NAME], [\n\n            /(nero (?:home|scout))\\/((\\d+)[\\w\\.-]+)/i                           // Nero Home/Nero Scout\n            ], [NAME, VERSION], [\n\n            /(nokia\\d+)\\/((\\d+)[\\w\\.-]+)/i                                      // Nokia\n            ], [NAME, VERSION], [\n\n            /\\s(songbird)\\/((\\d+)[\\w\\.-]+)/i                                    // Songbird/Philips-Songbird\n            ], [NAME, VERSION], [\n\n            /(winamp)3 version ((\\d+)[\\w\\.-]+)/i,                               // Winamp\n            /(winamp)\\s((\\d+)[\\w\\.-]+)/i,\n            /(winamp)mpeg\\/((\\d+)[\\w\\.-]+)/i\n            ], [NAME, VERSION], [\n\n            /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i  // OCMS-bot/tap in radio/tunein/unknown/winamp (no other info)\n                                                                                // inlight radio\n            ], [NAME], [\n\n            /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // QuickTime/RealMedia/RadioApp/RadioClientApplication/\n                                                                                // SoundTap/Totem/Stagefright/Streamium\n            ], [NAME, VERSION], [\n\n            /(smp)((\\d+)[\\d\\.]+)/i                                              // SMP\n            ], [NAME, VERSION], [\n\n            /(vlc) media player - version ((\\d+)[\\w\\.]+)/i,                     // VLC Videolan\n            /(vlc)\\/((\\d+)[\\w\\.-]+)/i,\n            /(xbmc|gvfs|xine|xmms|irapp)\\/((\\d+)[\\w\\.-]+)/i,                    // XBMC/gvfs/Xine/XMMS/irapp\n            /(foobar2000)\\/((\\d+)[\\d\\.]+)/i,                                    // Foobar2000\n            /(itunes)\\/((\\d+)[\\d\\.]+)/i                                         // iTunes\n            ], [NAME, VERSION], [\n\n            /(wmplayer)\\/((\\d+)[\\w\\.-]+)/i,                                     // Windows Media Player\n            /(windows-media-player)\\/((\\d+)[\\w\\.-]+)/i\n            ], [[NAME, /-/g, ' '], VERSION], [\n\n            /windows\\/((\\d+)[\\w\\.-]+) upnp\\/[\\d\\.]+ dlnadoc\\/[\\d\\.]+ (home media server)/i\n                                                                                // Windows Media Server\n            ], [VERSION, [NAME, 'Windows']], [\n\n            /(com\\.riseupradioalarm)\\/((\\d+)[\\d\\.]*)/i                          // RiseUP Radio Alarm\n            ], [NAME, VERSION], [\n\n            /(rad.io)\\s((\\d+)[\\d\\.]+)/i,                                        // Rad.io\n            /(radio.(?:de|at|fr))\\s((\\d+)[\\d\\.]+)/i\n            ], [[NAME, 'rad.io'], VERSION]\n\n            //////////////////////\n            // Media players END\n            ////////////////////*/\n\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i                     // AMD64\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, util.lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows\\s(ce|mobile);\\sppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i                           // PowerPC\n            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+;))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, util.lowerize]]\n        ],\n\n        device : [[\n\n            /\\((ipad|playbook);[\\w\\s\\);-]+(rim|apple)/i                         // iPad/PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/                                  // iPad\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [\n\n            /(apple\\s{0,1}tv)/i                                                 // Apple TV\n            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [\n\n            /(archos)\\s(gamepad2?)/i,                                           // Archos\n            /(hp).+(touchpad)/i,                                                // HP TouchPad\n            /(hp).+(tablet)/i,                                                  // HP Tablet\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /\\s(nook)[\\w\\s]+build\\/(\\w+)/i,                                     // Nook\n            /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i                                  // Dell Streak\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(kf[A-z]+)\\sbuild\\/[\\w\\.]+.*silk\\//i                               // Kindle Fire HD\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n            /(sd|kf)[0349hijorstuw]+\\sbuild\\/[\\w\\.]+.*silk\\//i                  // Fire Phone\n            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [\n\n            /\\((ip[honed|\\s\\w*]+);.+(apple)/i                                   // iPod/iPhone\n            ], [MODEL, VENDOR, [TYPE, MOBILE]], [\n            /\\((ip[honed|\\s\\w*]+);/i                                            // iPod/iPhone\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [\n\n            /(blackberry)[\\s-]?(\\w+)/i,                                         // BlackBerry\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\\s_-]?([\\w-]+)*/i,\n                                                                                // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Huawei/Meizu/Motorola/Polytron\n            /(hp)\\s([\\w\\s]+\\w)/i,                                               // HP iPAQ\n            /(asus)-?(\\w+)/i                                                    // Asus\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /\\(bb10;\\s(\\w+)/i                                                   // BlackBerry 10\n            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\n                                                                                // Asus Tablets\n            /android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7|padfone)/i\n            ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [\n\n            /(sony)\\s(tablet\\s[ps])\\sbuild\\//i,                                  // Sony\n            /(sony)?(?:sgp.+)\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [\n            /(?:sony)?(?:(?:(?:c|d)\\d{4})|(?:so[-l].+))\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Phone'], [TYPE, MOBILE]], [\n\n            /\\s(ouya)\\s/i,                                                      // Ouya\n            /(nintendo)\\s([wids3u]+)/i                                          // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n\n            /android.+;\\s(shield)\\sbuild/i                                      // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n\n            /(playstation\\s[34portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [\n\n            /(sprint\\s(\\w+))/i                                                  // Sprint Phones\n            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [\n\n            /(lenovo)\\s?(S(?:5000|6000)+(?:[-][\\w+]))/i                         // Lenovo tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(htc)[;_\\s-]+([\\w\\s]+(?=\\))|\\w+)*/i,                               // HTC\n            /(zte)-(\\w+)*/i,                                                    // ZTE\n            /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]+)*/i\n                                                                                // Alcatel/GeeksPhone/Huawei/Lenovo/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            /(nexus\\s9)/i                                                       // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n\n            /(nexus\\s6p)/i                                                      // Huawei Nexus 6P\n            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [\n\n            /(microsoft);\\s(lumia[\\s\\w]+)/i                                     // Microsoft Lumia\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i                                   // Microsoft Xbox\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\n\n                                                                                // Motorola\n            /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?(:?\\s4g)?)[\\w\\s]+build\\//i,\n            /mot[\\s-]?(\\w+)*/i,\n            /(XT\\d{3,4}) build\\//i,\n            /(nexus\\s6)/i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [\n            /android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [\n\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i            // HbbTV devices\n            ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [\n\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [\n\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n\n            /android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n\\d+|sgh-t8[56]9|nexus 10))/i,\n            /((SM-T\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung\n            /smart-tv.+(samsung)/i\n            ], [VENDOR, [TYPE, SMARTTV], MODEL], [\n            /((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-\\w[\\w\\d]+))/i,\n            /(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)*/i,\n            /sec-((sgh\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [\n\n            /sie-(\\w+)*/i                                                       // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n\n            /(maemo|nokia).*(n900|lumia\\s\\d+)/i,                                // Nokia\n            /(nokia)[\\s_-]?([\\w-]+)*/i\n            ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(a\\d{3})/i                                 // Acer\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet\n            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [\n            /(lg) netcast\\.tv/i                                                 // LG SmartTV\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /(nexus\\s[45])/i,                                                   // LG\n            /lg[e;\\s\\/-]+(\\w+)*/i\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [\n\n            /android.+(ideatab[a-z0-9\\-\\s]+)/i                                  // Lenovo\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            /linux;.+((jolla));/i                                               // Jolla\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /((pebble))app\\/[\\d\\.]+\\s/i                                         // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n\n            /android.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i                            // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, 'Chromecast'], [VENDOR, 'Google']], [\n\n            /android.+;\\s(glass)\\s\\d/i                                          // Google Glass\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [\n\n            /android.+;\\s(pixel c)\\s/i                                          // Google Pixel C\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [\n\n            /android.+;\\s(pixel xl|pixel)\\s/i                                   // Google Pixel\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [\n\n            /android.+(\\w+)\\s+build\\/hm\\1/i,                                    // Xiaomi Hongmi 'numeric' models\n            /android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i,               // Xiaomi Hongmi\n            /android.+(mi[\\s\\-_]*(?:one|one[\\s_]plus|note lte)?[\\s_]*(?:\\d\\w)?)\\s+build/i    // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [\n\n            /android.+a000(1)\\s+build/i                                         // OnePlus\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            /\\s(tablet)[;\\/]/i,                                                 // Unidentifiable Tablet\n            /\\s(mobile)(?:[;\\/]|\\ssafari)/i                                     // Unidentifiable Mobile\n            ], [[TYPE, util.lowerize], VENDOR, MODEL]\n\n            /*//////////////////////////\n            // TODO: move to string map\n            ////////////////////////////\n\n            /(C6603)/i                                                          // Sony Xperia Z C6603\n            ], [[MODEL, 'Xperia Z C6603'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n            /(C6903)/i                                                          // Sony Xperia Z 1\n            ], [[MODEL, 'Xperia Z 1'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n            /(SM-G900[F|H])/i                                                   // Samsung Galaxy S5\n            ], [[MODEL, 'Galaxy S5'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G7102)/i                                                       // Samsung Galaxy Grand 2\n            ], [[MODEL, 'Galaxy Grand 2'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G530H)/i                                                       // Samsung Galaxy Grand Prime\n            ], [[MODEL, 'Galaxy Grand Prime'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G313HZ)/i                                                      // Samsung Galaxy V\n            ], [[MODEL, 'Galaxy V'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T805)/i                                                        // Samsung Galaxy Tab S 10.5\n            ], [[MODEL, 'Galaxy Tab S 10.5'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n            /(SM-G800F)/i                                                       // Samsung Galaxy S5 Mini\n            ], [[MODEL, 'Galaxy S5 Mini'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T311)/i                                                        // Samsung Galaxy Tab 3 8.0\n            ], [[MODEL, 'Galaxy Tab 3 8.0'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n\n            /(T3C)/i                                                            // Advan Vandroid T3C\n            ], [MODEL, [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN T1J\\+)/i                                                    // Advan Vandroid T1J+\n            ], [[MODEL, 'Vandroid T1J+'], [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN S4A)/i                                                      // Advan Vandroid S4A\n            ], [[MODEL, 'Vandroid S4A'], [VENDOR, 'Advan'], [TYPE, MOBILE]], [\n\n            /(V972M)/i                                                          // ZTE V972M\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n\n            /(i-mobile)\\s(IQ\\s[\\d\\.]+)/i                                        // i-mobile IQ\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(IQ6.3)/i                                                          // i-mobile IQ IQ 6.3\n            ], [[MODEL, 'IQ 6.3'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n            /(i-mobile)\\s(i-style\\s[\\d\\.]+)/i                                   // i-mobile i-STYLE\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(i-STYLE2.1)/i                                                     // i-mobile i-STYLE 2.1\n            ], [[MODEL, 'i-STYLE 2.1'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n\n            /(mobiistar touch LAI 512)/i                                        // mobiistar touch LAI 512\n            ], [[MODEL, 'Touch LAI 512'], [VENDOR, 'mobiistar'], [TYPE, MOBILE]], [\n\n            /////////////\n            // END TODO\n            ///////////*/\n\n        ],\n\n        engine : [[\n\n            /windows.+\\sedge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, 'EdgeHTML']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i,     // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\n            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]+).*(gecko)/i                                           // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows based\n            /microsoft\\s(windows)\\s(vista|xp)/i                                 // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n            /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s]+\\w)*/i,                  // Windows Phone\n            /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\n            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\n            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n            // Mobile/Embedded OS\n            /\\((bb)(10);/i                                                      // BlackBerry 10\n            ], [[NAME, 'BlackBerry'], VERSION], [\n            /(blackberry)\\w*\\/?([\\w\\.]+)*/i,                                    // Blackberry\n            /(tizen)[\\/\\s]([\\w\\.]+)/i,                                          // Tizen\n            /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|contiki)[\\/\\s-]?([\\w\\.]+)*/i,\n                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki\n            /linux;.+(sailfish);/i                                              // Sailfish OS\n            ], [NAME, VERSION], [\n            /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]+)*/i                 // Symbian\n            ], [[NAME, 'Symbian'], VERSION], [\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME], [\n            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n            ], [[NAME, 'Firefox OS'], VERSION], [\n\n            // Console\n            /(nintendo|playstation)\\s([wids34portablevu]+)/i,                   // Nintendo/Playstation\n\n            // GNU/Linux based\n            /(mint)[\\/\\s\\(]?(\\w+)*/i,                                           // Mint\n            /(mageia|vectorlinux)[;\\s]/i,                                       // Mageia/VectorLinux\n            /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?(?!chrom)([\\w\\.-]+)*/i,\n                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n            /(hurd|linux)\\s?([\\w\\.]+)*/i,                                       // Hurd/Linux\n            /(gnu)\\s?([\\w\\.]+)*/i                                               // GNU\n            ], [NAME, VERSION], [\n\n            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Solaris\n            /(sunos)\\s?([\\w\\.]+\\d)*/i                                           // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n\n            // BSD based\n            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]+)*/i                   // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n            ], [NAME, VERSION],[\n\n            /(haiku)\\s(\\w+)/i                                                  // Haiku\n            ], [NAME, VERSION],[\n\n            /(ip[honead]+)(?:.*os\\s([\\w]+)*\\slike\\smac|;\\sopera)/i              // iOS\n            ], [[NAME, 'iOS'], [VERSION, /_/g, '.']], [\n\n            /(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*/i,\n            /(macintosh|mac(?=_powerpc)\\s)/i                                    // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Other\n            /((?:open)?solaris)[\\/\\s-]?([\\w\\.]+)*/i,                            // Solaris\n            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.]*)*/i,                               // AIX\n            /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms)/i,\n                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS\n            /(unix)\\s?([\\w\\.]+)*/i                                              // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var Browser = function (name, version) {\n        this[NAME] = name;\n        this[VERSION] = version;\n    };\n    var CPU = function (arch) {\n        this[ARCHITECTURE] = arch;\n    };\n    var Device = function (vendor, model, type) {\n        this[VENDOR] = vendor;\n        this[MODEL] = model;\n        this[TYPE] = type;\n    };\n    var Engine = Browser;\n    var OS = Browser;\n\n    var UAParser = function (uastring, extensions) {\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(uastring, extensions).getResult();\n        }\n\n        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n        var browser = new Browser();\n        var cpu = new CPU();\n        var device = new Device();\n        var engine = new Engine();\n        var os = new OS();\n\n        this.getBrowser = function () {\n            mapper.rgx.call(browser, ua, rgxmap.browser);\n            browser.major = util.major(browser.version); // deprecated\n            return browser;\n        };\n        this.getCPU = function () {\n            mapper.rgx.call(cpu, ua, rgxmap.cpu);\n            return cpu;\n        };\n        this.getDevice = function () {\n            mapper.rgx.call(device, ua, rgxmap.device);\n            return device;\n        };\n        this.getEngine = function () {\n            mapper.rgx.call(engine, ua, rgxmap.engine);\n            return engine;\n        };\n        this.getOS = function () {\n            mapper.rgx.call(os, ua, rgxmap.os);\n            return os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return ua;\n        };\n        this.setUA = function (uastring) {\n            ua = uastring;\n            browser = new Browser();\n            cpu = new CPU();\n            device = new Device();\n            engine = new Engine();\n            os = new OS();\n            return this;\n        };\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER = {\n        NAME    : NAME,\n        MAJOR   : MAJOR, // deprecated\n        VERSION : VERSION\n    };\n    UAParser.CPU = {\n        ARCHITECTURE : ARCHITECTURE\n    };\n    UAParser.DEVICE = {\n        MODEL   : MODEL,\n        VENDOR  : VENDOR,\n        TYPE    : TYPE,\n        CONSOLE : CONSOLE,\n        MOBILE  : MOBILE,\n        SMARTTV : SMARTTV,\n        TABLET  : TABLET,\n        WEARABLE: WEARABLE,\n        EMBEDDED: EMBEDDED\n    };\n    UAParser.ENGINE = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    UAParser.OS = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    //UAParser.Utils = util;\n\n    ///////////\n    // Export\n    //////////\n\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = window.jQuery || window.Zepto;\n    if (typeof $ !== UNDEF_TYPE) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (uastring) {\n            parser.setUA(uastring);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/ua-parser-js/src/ua-parser.js\n// module id = 26\n// module chunks = 0","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/webpack/buildin/amd-options.js\n// module id = 27\n// module chunks = 0","// @flow\nimport * as Utils from './util'\n\nclass PosterManager {\n  /**\n   * Poster image URL\n   * @type {string}\n   * @private\n   */\n  _posterUrl: string;\n  /**\n   * The poster HTML Div element.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _el: HTMLDivElement;\n\n  constructor() {\n    this._createEl();\n  }\n\n  /**\n   * Set the poster source URL\n   * @param {string} posterUrl - the poster image URL\n   * @public\n   * @returns {void}\n   */\n  setSrc(posterUrl: ?string): void {\n    if (posterUrl) {\n      this._posterUrl = posterUrl;\n      Utils.Dom.setStyle(this._el, \"background-image\", `url(\"${this._posterUrl}\")`);\n    }\n  }\n\n  /**\n   * Get the poster source URL\n   * @public\n   * @returns {string} - the poster image URL\n   */\n  get src(): string {\n    return this._posterUrl;\n  }\n\n  /**\n   * Get the poster HTML Div element\n   * @public\n   * @returns {HTMLDivElement} - Poster HTML Dom element\n   */\n  getElement(): HTMLDivElement {\n    return this._el;\n  }\n\n  /**\n   * Create the HTML Div element of the poster\n   * @private\n   * @returns {void}\n   */\n  _createEl(): void {\n    if (!this._el) {\n      const el = this._el = Utils.Dom.createElement(\"div\");\n      Utils.Dom.setAttribute(el, \"id\", Utils.Generator.uniqueId(5));\n      Utils.Dom.setAttribute(el, \"tabindex\", '-1');\n    }\n  }\n\n  /**\n   * Removes the poster element from the dom\n   * @private\n   * @returns {void}\n   */\n  _removeEl(): void {\n    if (this._el) {\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n  }\n\n  /**\n   * Show the poster image\n   * @public\n   * @private\n   * @returns {void}\n   */\n  show(): void {\n    Utils.Dom.setStyle(this._el, \"display\", \"\");\n  }\n\n  /**\n   * Hide the poster image\n   * @public\n   * @returns {void}\n   */\n  hide(): void {\n    Utils.Dom.setStyle(this._el, \"display\", \"none\");\n  }\n\n  /**\n   * Resets the poster url and the background image\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._posterUrl = '';\n    Utils.Dom.setStyle(this._el, \"background-image\", '');\n  }\n\n  /**\n   * Destroys the poster element\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.reset();\n    this._removeEl();\n  }\n}\n\nexport default PosterManager;\n\n\n\n// WEBPACK FOOTER //\n// ./utils/poster-manager.js","//@flow\n/**\n * Locale class\n * @class\n *\n */\nexport default class Locale {\n\n  /**\n   * tries to return the locale language in IOS-693-1 format(two-letter codes, one per language for)\n   * @returns {string} - the IOS-693-1 language string\n   * @static\n   */\n  static get language(): string {\n    let lang: string;\n\n    if (navigator.languages && navigator.languages.length) {\n      // latest versions of Chrome and Firefox set this correctly\n      lang = navigator.languages[0]\n    } else if (navigator.userLanguage) {\n      // IE only\n      //$FlowFixMe - userLanguage is IE specific and flow doesn't have it in definitions\n      lang = (navigator.userLanguage: string);\n    } else {\n      // latest versions of Chrome, Firefox, and Safari set this correctly\n      lang = navigator.language\n    }\n\n    if (lang && lang.match(\"-\")) {\n      lang = lang.split(\"-\")[0];\n    }\n\n    return lang\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/locale.js","/*!\r\n * js-logger - http://github.com/jonnyreeves/js-logger\r\n * Jonny Reeves, http://jonnyreeves.co.uk/\r\n * js-logger may be freely distributed under the MIT license.\r\n */\r\n(function (global) {\r\n\t\"use strict\";\r\n\r\n\t// Top level module for the global, static logger instance.\r\n\tvar Logger = { };\r\n\r\n\t// For those that are at home that are keeping score.\r\n\tLogger.VERSION = \"1.3.0\";\r\n\r\n\t// Function which handles all incoming log messages.\r\n\tvar logHandler;\r\n\r\n\t// Map of ContextualLogger instances by name; used by Logger.get() to return the same named instance.\r\n\tvar contextualLoggersByNameMap = {};\r\n\r\n\t// Polyfill for ES5's Function.bind.\r\n\tvar bind = function(scope, func) {\r\n\t\treturn function() {\r\n\t\t\treturn func.apply(scope, arguments);\r\n\t\t};\r\n\t};\r\n\r\n\t// Super exciting object merger-matron 9000 adding another 100 bytes to your download.\r\n\tvar merge = function () {\r\n\t\tvar args = arguments, target = args[0], key, i;\r\n\t\tfor (i = 1; i < args.length; i++) {\r\n\t\t\tfor (key in args[i]) {\r\n\t\t\t\tif (!(key in target) && args[i].hasOwnProperty(key)) {\r\n\t\t\t\t\ttarget[key] = args[i][key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t};\r\n\r\n\t// Helper to define a logging level object; helps with optimisation.\r\n\tvar defineLogLevel = function(value, name) {\r\n\t\treturn { value: value, name: name };\r\n\t};\r\n\r\n\t// Predefined logging levels.\r\n\tLogger.DEBUG = defineLogLevel(1, 'DEBUG');\r\n\tLogger.INFO = defineLogLevel(2, 'INFO');\r\n\tLogger.TIME = defineLogLevel(3, 'TIME');\r\n\tLogger.WARN = defineLogLevel(4, 'WARN');\r\n\tLogger.ERROR = defineLogLevel(8, 'ERROR');\r\n\tLogger.OFF = defineLogLevel(99, 'OFF');\r\n\r\n\t// Inner class which performs the bulk of the work; ContextualLogger instances can be configured independently\r\n\t// of each other.\r\n\tvar ContextualLogger = function(defaultContext) {\r\n\t\tthis.context = defaultContext;\r\n\t\tthis.setLevel(defaultContext.filterLevel);\r\n\t\tthis.log = this.info;  // Convenience alias.\r\n\t};\r\n\r\n\tContextualLogger.prototype = {\r\n\t\t// Changes the current logging level for the logging instance.\r\n\t\tsetLevel: function (newLevel) {\r\n\t\t\t// Ensure the supplied Level object looks valid.\r\n\t\t\tif (newLevel && \"value\" in newLevel) {\r\n\t\t\t\tthis.context.filterLevel = newLevel;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Is the logger configured to output messages at the supplied level?\r\n\t\tenabledFor: function (lvl) {\r\n\t\t\tvar filterLevel = this.context.filterLevel;\r\n\t\t\treturn lvl.value >= filterLevel.value;\r\n\t\t},\r\n\r\n\t\tdebug: function () {\r\n\t\t\tthis.invoke(Logger.DEBUG, arguments);\r\n\t\t},\r\n\r\n\t\tinfo: function () {\r\n\t\t\tthis.invoke(Logger.INFO, arguments);\r\n\t\t},\r\n\r\n\t\twarn: function () {\r\n\t\t\tthis.invoke(Logger.WARN, arguments);\r\n\t\t},\r\n\r\n\t\terror: function () {\r\n\t\t\tthis.invoke(Logger.ERROR, arguments);\r\n\t\t},\r\n\r\n\t\ttime: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'start' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttimeEnd: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'end' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Invokes the logger callback if it's not being filtered.\r\n\t\tinvoke: function (level, msgArgs) {\r\n\t\t\tif (logHandler && this.enabledFor(level)) {\r\n\t\t\t\tlogHandler(msgArgs, merge({ level: level }, this.context));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Protected instance which all calls to the to level `Logger` module will be routed through.\r\n\tvar globalLogger = new ContextualLogger({ filterLevel: Logger.OFF });\r\n\r\n\t// Configure the global Logger instance.\r\n\t(function() {\r\n\t\t// Shortcut for optimisers.\r\n\t\tvar L = Logger;\r\n\r\n\t\tL.enabledFor = bind(globalLogger, globalLogger.enabledFor);\r\n\t\tL.debug = bind(globalLogger, globalLogger.debug);\r\n\t\tL.time = bind(globalLogger, globalLogger.time);\r\n\t\tL.timeEnd = bind(globalLogger, globalLogger.timeEnd);\r\n\t\tL.info = bind(globalLogger, globalLogger.info);\r\n\t\tL.warn = bind(globalLogger, globalLogger.warn);\r\n\t\tL.error = bind(globalLogger, globalLogger.error);\r\n\r\n\t\t// Don't forget the convenience alias!\r\n\t\tL.log = L.info;\r\n\t}());\r\n\r\n\t// Set the global logging handler.  The supplied function should expect two arguments, the first being an arguments\r\n\t// object with the supplied log messages and the second being a context object which contains a hash of stateful\r\n\t// parameters which the logging function can consume.\r\n\tLogger.setHandler = function (func) {\r\n\t\tlogHandler = func;\r\n\t};\r\n\r\n\t// Sets the global logging filter level which applies to *all* previously registered, and future Logger instances.\r\n\t// (note that named loggers (retrieved via `Logger.get`) can be configured independently if required).\r\n\tLogger.setLevel = function(level) {\r\n\t\t// Set the globalLogger's level.\r\n\t\tglobalLogger.setLevel(level);\r\n\r\n\t\t// Apply this level to all registered contextual loggers.\r\n\t\tfor (var key in contextualLoggersByNameMap) {\r\n\t\t\tif (contextualLoggersByNameMap.hasOwnProperty(key)) {\r\n\t\t\t\tcontextualLoggersByNameMap[key].setLevel(level);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Retrieve a ContextualLogger instance.  Note that named loggers automatically inherit the global logger's level,\r\n\t// default context and log handler.\r\n\tLogger.get = function (name) {\r\n\t\t// All logger instances are cached so they can be configured ahead of use.\r\n\t\treturn contextualLoggersByNameMap[name] ||\r\n\t\t\t(contextualLoggersByNameMap[name] = new ContextualLogger(merge({ name: name }, globalLogger.context)));\r\n\t};\r\n\r\n\t// CreateDefaultHandler returns a handler function which can be passed to `Logger.setHandler()` which will\r\n\t// write to the window's console object (if present); the optional options object can be used to customise the\r\n\t// formatter used to format each log message.\r\n\tLogger.createDefaultHandler = function (options) {\r\n\t\toptions = options || {};\r\n\r\n\t\toptions.formatter = options.formatter || function defaultMessageFormatter(messages, context) {\r\n\t\t\t// Prepend the logger's name to the log message for easy identification.\r\n\t\t\tif (context.name) {\r\n\t\t\t\tmessages.unshift(\"[\" + context.name + \"]\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Map of timestamps by timer labels used to track `#time` and `#timeEnd()` invocations in environments\r\n\t\t// that don't offer a native console method.\r\n\t\tvar timerStartTimeByLabelMap = {};\r\n\r\n\t\t// Support for IE8+ (and other, slightly more sane environments)\r\n\t\tvar invokeConsoleMethod = function (hdlr, messages) {\r\n\t\t\tFunction.prototype.apply.call(hdlr, console, messages);\r\n\t\t};\r\n\r\n\t\t// Check for the presence of a logger.\r\n\t\tif (typeof console === \"undefined\") {\r\n\t\t\treturn function () { /* no console */ };\r\n\t\t}\r\n\r\n\t\treturn function(messages, context) {\r\n\t\t\t// Convert arguments object to Array.\r\n\t\t\tmessages = Array.prototype.slice.call(messages);\r\n\r\n\t\t\tvar hdlr = console.log;\r\n\t\t\tvar timerLabel;\r\n\r\n\t\t\tif (context.level === Logger.TIME) {\r\n\t\t\t\ttimerLabel = (context.name ? '[' + context.name + '] ' : '') + messages[0];\r\n\r\n\t\t\t\tif (messages[1] === 'start') {\r\n\t\t\t\t\tif (console.time) {\r\n\t\t\t\t\t\tconsole.time(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttimerStartTimeByLabelMap[timerLabel] = new Date().getTime();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (console.timeEnd) {\r\n\t\t\t\t\t\tconsole.timeEnd(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tinvokeConsoleMethod(hdlr, [ timerLabel + ': ' +\r\n\t\t\t\t\t\t\t(new Date().getTime() - timerStartTimeByLabelMap[timerLabel]) + 'ms' ]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Delegate through to custom warn/error loggers if present on the console.\r\n\t\t\t\tif (context.level === Logger.WARN && console.warn) {\r\n\t\t\t\t\thdlr = console.warn;\r\n\t\t\t\t} else if (context.level === Logger.ERROR && console.error) {\r\n\t\t\t\t\thdlr = console.error;\r\n\t\t\t\t} else if (context.level === Logger.INFO && console.info) {\r\n\t\t\t\t\thdlr = console.info;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.formatter(messages, context);\r\n\t\t\t\tinvokeConsoleMethod(hdlr, messages);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// Configure and example a Default implementation which writes to the `window.console` (if present).  The\r\n\t// `options` hash can be used to configure the default logLevel and provide a custom message formatter.\r\n\tLogger.useDefaults = function(options) {\r\n\t\tLogger.setLevel(options && options.defaultLevel || Logger.DEBUG);\r\n\t\tLogger.setHandler(Logger.createDefaultHandler(options));\r\n\t};\r\n\r\n\t// Export to popular environments boilerplate.\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine(Logger);\r\n\t}\r\n\telse if (typeof module !== 'undefined' && module.exports) {\r\n\t\tmodule.exports = Logger;\r\n\t}\r\n\telse {\r\n\t\tLogger._prevLogger = global.Logger;\r\n\r\n\t\tLogger.noConflict = function () {\r\n\t\t\tglobal.Logger = Logger._prevLogger;\r\n\t\t\treturn Logger;\r\n\t\t};\r\n\r\n\t\tglobal.Logger = Logger;\r\n\t}\r\n}(this));\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/js-logger/src/logger.js\n// module id = 30\n// module chunks = 0","//@flow\nimport FakeEventTarget from '../../event/fake-event-target'\nimport FakeEvent from '../../event/fake-event'\nimport EventManager from '../../event/event-manager'\nimport {HTML5_EVENTS as Html5Events, CUSTOM_EVENTS as CustomEvents} from '../../event/events'\nimport MediaSourceProvider from './media-source/media-source-provider'\nimport VideoTrack from '../../track/video-track'\nimport AudioTrack from '../../track/audio-track'\nimport {TextTrack as PKTextTrack} from '../../track/text-track'\nimport {Cue} from '../../track/vtt-cue'\nimport * as Utils from '../../utils/util'\nimport Html5AutoPlayCapability from './capabilities/html5-autoplay'\nimport Html5IsSupportedCapability from './capabilities/html5-is-supported'\n\n/**\n * Html5 engine for playback.\n * @classdesc\n */\nexport default class Html5 extends FakeEventTarget implements IEngine {\n  /**\n   * The video element.\n   * @type {HTMLVideoElement}\n   * @private\n   */\n  _el: HTMLVideoElement;\n  /**\n   * The event manager of the engine.\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The selected media source adapter of the engine.\n   * @type {?IMediaSourceAdapter}\n   * @private\n   */\n  _mediaSourceAdapter: ?IMediaSourceAdapter;\n  /**\n   * The player config object.\n   * @type {Object}\n   * @private\n   */\n  _config: Object;\n  /**\n   * Flag to indicate first time text track cue change.\n   * @type {Object<number, boolean>}\n   * @private\n   */\n  _showTextTrackFirstTime: { [number]: boolean } = {};\n  /**\n   * Promise to indicate when a media source adapter can be loaded.\n   * @type {Promise<*>}\n   * @private\n   */\n  _canLoadMediaSourceAdapterPromise: Promise<*>;\n\n  /**\n   * The html5 capabilities handlers.\n   * @private\n   * @static\n   */\n  static _capabilities: Array<typeof ICapability> = [Html5AutoPlayCapability, Html5IsSupportedCapability];\n\n  /**\n   * @type {string} - The engine id.\n   * @public\n   * @static\n   */\n  static id: string = \"html5\";\n\n  /**\n   * Factory method to create an engine.\n   * @param {Source} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {IEngine} - New instance of the run time engine.\n   * @public\n   * @static\n   */\n  static createEngine(source: Source, config: Object): IEngine {\n    return new this(source, config);\n  }\n\n  /**\n   * Checks if the engine can play a given source.\n   * @param {Source} source - The source object to check.\n   * @param {boolean} preferNative - prefer native flag\n   * @returns {boolean} - Whether the engine can play the source.\n   * @public\n   * @static\n   */\n  static canPlaySource(source: Source, preferNative: boolean): boolean {\n    return MediaSourceProvider.canPlaySource(source, preferNative);\n  }\n\n  /**\n   * Runs the html5 capabilities tests.\n   * @returns {void}\n   * @public\n   * @static\n   */\n  static runCapabilities(): void {\n    Html5._capabilities.forEach(capability => capability.runCapability());\n  }\n\n  /**\n   * Gets the html5 capabilities.\n   * @return {Promise<Object>} - The html5 capabilities object.\n   * @public\n   * @static\n   */\n  static getCapabilities(): Promise<Object> {\n    let promises = [];\n    Html5._capabilities.forEach(capability => promises.push(capability.getCapability()));\n    return Promise.all(promises)\n      .then((arrayOfResults) => {\n        const mergedResults = {};\n        arrayOfResults.forEach(res => Object.assign(mergedResults, res));\n        return {[Html5.id]: mergedResults};\n      });\n  }\n\n  /**\n   * @constructor\n   * @param {Source} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   */\n  constructor(source: Source, config: Object) {\n    super();\n    this._eventManager = new EventManager();\n    this._createVideoElement();\n    this._init(source, config);\n  }\n\n  /**\n   * Restores the engine.\n   * @param {Source} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {void}\n   */\n  restore(source: Source, config: Object): void {\n    this.detach();\n    this._eventManager.removeAll();\n    if (this._el) {\n      Utils.Dom.removeAttribute(this._el, 'src');\n    }\n    this._init(source, config);\n  }\n\n  /**\n   * Destroys the engine.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.detach();\n    if (this._el) {\n      this.pause();\n      Utils.Dom.removeAttribute(this._el, 'src');\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n    this._showTextTrackFirstTime = {};\n    this._eventManager.destroy();\n    MediaSourceProvider.destroy();\n    this._mediaSourceAdapter = null;\n  }\n\n  /**\n   * Get the engine's id\n   * @public\n   * @returns {string} the engine's id\n   */\n  get id(): string {\n    return Html5.id;\n  }\n\n  /**\n   * Listen to the video element events and triggers them from the engine.\n   * @public\n   * @returns {void}\n   */\n  attach(): void {\n    Object.keys(Html5Events).forEach((html5Event) => {\n      this._eventManager.listen(this._el, Html5Events[html5Event], () => {\n        this.dispatchEvent(new FakeEvent(Html5Events[html5Event]));\n      });\n    });\n    if (this._mediaSourceAdapter) {\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEvents.VIDEO_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEvents.AUDIO_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEvents.TEXT_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEvents.ABR_MODE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEvents.TEXT_CUE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n    }\n  }\n\n  /**\n   * Remove the listeners of the video element events.\n   * @public\n   * @returns {void}\n   */\n  detach(): void {\n    Object.keys(Html5Events).forEach((html5Event) => {\n      this._eventManager.unlisten(this._el, Html5Events[html5Event]);\n    });\n    if (this._mediaSourceAdapter) {\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEvents.VIDEO_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEvents.AUDIO_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEvents.TEXT_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEvents.TEXT_CUE_CHANGED);\n    }\n  }\n\n  /**\n   * @returns {HTMLVideoElement} - The video element.\n   * @public\n   */\n  getVideoElement(): HTMLVideoElement {\n    return this._el;\n  }\n\n  /**\n   * Select a new video track.\n   * @param {VideoTrack} videoTrack - The video track object to set.\n   * @returns {void}\n   */\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectVideoTrack(videoTrack);\n    }\n  }\n\n  /**\n   * Select a new audio track.\n   * @param {AudioTrack} audioTrack - The video track object to set.\n   * @returns {void}\n   */\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectAudioTrack(audioTrack);\n    }\n  }\n\n  /**\n   * Select a new text track.\n   * @param {PKTextTrack} textTrack - The playkit text track object to set.\n   * @returns {void}\n   */\n  selectTextTrack(textTrack: PKTextTrack): void {\n    this._removeCueChangeListener();\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectTextTrack(textTrack);\n    }\n    this._addCueChangeListener(textTrack);\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.hideTextTrack();\n    }\n    this._removeCueChangeListener();\n  }\n\n  /**\n   * Enables adaptive bitrate switching according to the media source extension logic.\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.enableAdaptiveBitrate();\n    }\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.isAdaptiveBitrateEnabled();\n    }\n    return false;\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.seekToLiveEdge();\n    }\n  }\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.isLive() : false;\n  }\n\n  /**\n   * Start/resume playback.\n   * @public\n   * @returns {void}\n   */\n  play(): void {\n    let playPromise = this._el.play();\n    if (playPromise) {\n      playPromise.catch(() => this.dispatchEvent(new FakeEvent(CustomEvents.AUTOPLAY_FAILED)));\n    }\n  }\n\n  /**\n   * Pause playback.\n   * @public\n   * @returns {void}\n   */\n  pause(): void {\n    return this._el.pause();\n  }\n\n  /**\n   * Load media.\n   * @param {number} startTime - Optional time to start the video from.\n   * @public\n   * @returns {Promise<Object>} - The loaded data\n   */\n  load(startTime: ?number): Promise<Object> {\n    this._el.load();\n    return this._canLoadMediaSourceAdapterPromise.then(() => {\n      if (this._mediaSourceAdapter) {\n        return this._mediaSourceAdapter.load(startTime);\n      }\n      return Promise.resolve({});\n    });\n  }\n\n  /**\n   * Set a source.\n   * @param {string} source - Source to set.\n   * @public\n   * @returns {void}\n   */\n  set src(source: string): void {\n    this._el.src = source;\n  }\n\n  /**\n   * Get the source url.\n   * @returns {string} - The source url.\n   * @public\n   */\n  get src(): string {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.src;\n    }\n    return \"\";\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {Number} - The current playback time.\n   * @public\n   */\n  get currentTime(): number {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.currentTime : 0;\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   * @returns {void}\n   */\n  set currentTime(to: number): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.currentTime = to;\n    }\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {Number} - The playback duration.\n   * @public\n   */\n  get duration(): number {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.duration : NaN;\n  }\n\n  /**\n   * Set playback volume.\n   * @param {Number} vol - The volume to set.\n   * @public\n   * @returns {void}\n   */\n  set volume(vol: number): void {\n    this._el.volume = vol;\n  }\n\n  /**\n   * Get playback volume.\n   * @returns {Number} - The volume value of the video element.\n   * @public\n   */\n  get volume(): number {\n    return this._el.volume;\n  }\n\n  ready() {\n  }\n\n  /**\n   * Get paused state.\n   * @returns {boolean} - The paused value of the video element.\n   * @public\n   */\n  get paused(): boolean {\n    return this._el.paused;\n  }\n\n  /**\n   * Get seeking state.\n   * @returns {boolean} - The seeking value of the video element.\n   * @public\n   */\n  get seeking(): boolean {\n    return this._el.seeking;\n  }\n\n  /**\n   * Get the first seekable range (part) of the video in seconds.\n   * @returns {TimeRanges} - First seekable range (part) of the video in seconds.\n   * @public\n   */\n  get seekable(): TimeRanges {\n    return this._el.seekable;\n  }\n\n  /**\n   * Get the first played range (part) of the video in seconds.\n   * @returns {TimeRanges} - First played range (part) of the video in seconds.\n   * @public\n   */\n  get played(): TimeRanges {\n    return this._el.played;\n  }\n\n  /**\n   * Get the first buffered range (part) of the video in seconds.\n   * @returns {TimeRanges} - First buffered range (part) of the video in seconds.\n   * @public\n   */\n  get buffered(): TimeRanges {\n    return this._el.buffered;\n  }\n\n  /**\n   * Set player muted state.\n   * @param {boolean} mute - The new mute value.\n   * @public\n   * @returns {void}\n   */\n  set muted(mute: boolean): void {\n    this._el.muted = mute;\n  }\n\n  /**\n   * Get player muted state.\n   * @returns {boolean} - The muted value of the video element.\n   * @public\n   */\n  get muted(): boolean {\n    return this._el.muted;\n  }\n\n  /**\n   * Get the default mute value.\n   * @returns {boolean} - The defaultMuted of the video element.\n   * @public\n   */\n  get defaultMuted(): boolean {\n    return this._el.defaultMuted;\n  }\n\n  /**\n   * Sets an image to be shown while the video is downloading, or until the user hits the play button.\n   * @param {string} poster - The image url to be shown.\n   * @returns {void}\n   * @public\n   */\n  set poster(poster: string): void {\n    this._el.poster = poster;\n  }\n\n  /**\n   * Gets an image to be shown while the video is downloading, or until the user hits the play button.\n   * @returns {poster} - The image url.\n   * @public\n   */\n  get poster(): string {\n    return this._el.poster;\n  }\n\n  /**\n   * Specifies if and how the author thinks that the video should be loaded when the page loads.\n   * @param {string} preload - The preload value.\n   * @public\n   * @returns {void}\n   */\n  set preload(preload: string): void {\n    this._el.preload = preload;\n  }\n\n  /**\n   * Gets the preload value of the video element.\n   * @returns {string} - The preload value.\n   * @public\n   */\n  get preload(): string {\n    return this._el.preload;\n  }\n\n  /**\n   * Set if the video will automatically start playing as soon as it can do so without stopping.\n   * @param {boolean} autoplay - The autoplay value.\n   * @public\n   * @returns {void}\n   */\n  set autoplay(autoplay: boolean): void {\n    this._el.autoplay = autoplay;\n  }\n\n  /**\n   * Gets the autoplay value of the video element.\n   * @returns {boolean} - The autoplay value.\n   * @public\n   */\n  get autoplay(): boolean {\n    return this._el.autoplay;\n  }\n\n  /**\n   * Set to specifies that the video will start over again, every time it is finished.\n   * @param {boolean} loop - the loop value.\n   * @public\n   * @returns {void}\n   */\n  set loop(loop: boolean) {\n    this._el.loop = loop;\n  }\n\n  /**\n   * Gets the loop value of the video element.\n   * @returns {boolean} - The loop value.\n   * @public\n   */\n  get loop(): boolean {\n    return this._el.loop;\n  }\n\n  /**\n   * Set to specifies that video controls should be displayed.\n   * @param {boolean} controls - the controls value.\n   * @public\n   * @returns {void}\n   */\n  set controls(controls: boolean): void {\n    this._el.controls = controls;\n  }\n\n  /**\n   * Gets the controls value of the video element.\n   * @returns {boolean} - The controls value.\n   * @public\n   */\n  get controls(): boolean {\n    return this._el.controls;\n  }\n\n  /**\n   * Sets the current playback speed of the audio/video.\n   * @param {Number} playbackRate - The playback speed value.\n   * @public\n   * @returns {void}\n   */\n  set playbackRate(playbackRate: number): void {\n    this._el.playbackRate = playbackRate;\n  }\n\n  /**\n   * Gets the current playback speed of the audio/video.\n   * @returns {Number} - The current playback speed value.\n   * @public\n   */\n  get playbackRate(): number {\n    return this._el.playbackRate;\n  }\n\n  /**\n   * Sets the default playback speed of the audio/video.\n   * @param {Number} defaultPlaybackRate - The default playback speed value.\n   * @public\n   * @returns {void}\n   */\n  set defaultPlaybackRate(defaultPlaybackRate: number) {\n    this._el.defaultPlaybackRate = defaultPlaybackRate;\n  }\n\n  /**\n   * Gets the default playback speed of the audio/video.\n   * @returns {Number} - The default playback speed value.\n   * @public\n   */\n  get defaultPlaybackRate(): number {\n    return this._el.defaultPlaybackRate;\n  }\n\n  /**\n   * The ended property returns whether the playback of the audio/video has ended.\n   * @returns {boolean} - The ended value.\n   * @public\n   */\n  get ended(): boolean {\n    return this._el.ended;\n  }\n\n  /**\n   * The error property returns a MediaError object.\n   * @returns {MediaError} - The MediaError object has a code property containing the error state of the audio/video.\n   * @public\n   */\n  get error(): ?MediaError {\n    return this._el.error;\n  }\n\n  /**\n   * @returns {Number} - The current network state (activity) of the audio/video.\n   * @public\n   */\n  get networkState(): number {\n    return this._el.networkState;\n  }\n\n  /**\n   * Indicates if the audio/video is ready to play or not.\n   * @returns {Number} - The current ready state of the audio/video.\n   * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready.\n   * 1 = HAVE_METADATA - metadata for the audio/video is ready.\n   * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond.\n   * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available.\n   * 4 = HAVE_ENOUGH_DATA - enough data available to start playing.\n   */\n  get readyState(): number {\n    return this._el.readyState;\n  }\n\n  /**\n   * @returns {Number} - The height of the video player, in pixels.\n   * @public\n   */\n  get videoHeight(): number {\n    return this._el.videoHeight;\n  }\n\n  /**\n   * @returns {Number} - The width of the video player, in pixels.\n   * @public\n   */\n  get videoWidth(): number {\n    return this._el.videoWidth;\n  }\n\n  /**\n   * @param {boolean} playsinline - Whether to set on the video tag the playsinline attribute.\n   */\n  set playsinline(playsinline: boolean): void {\n    if (playsinline) {\n      this._el.setAttribute('playsinline', '');\n    } else {\n      this._el.removeAttribute('playsinline');\n    }\n  }\n\n  /**\n   * @returns {boolean} - Whether the video tag has an attribute of playsinline.\n   */\n  get playsinline(): boolean {\n    return this._el.getAttribute('playsinline') === '';\n  }\n\n  /**\n   * Initializes the engine.\n   * @param {Source} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @private\n   * @returns {void}\n   */\n  _init(source: Source, config: Object): void {\n    this._config = config;\n    this._canLoadMediaSourceAdapterPromise = (this._mediaSourceAdapter ? this._mediaSourceAdapter.destroy() : Promise.resolve());\n    this._mediaSourceAdapter = null;\n    this._loadMediaSourceAdapter(source);\n    this.attach();\n  }\n\n  /**\n   * Creates a video element dom object.\n   * @private\n   * @returns {void}\n   */\n  _createVideoElement(): void {\n    this._el = Utils.Dom.createElement(\"video\");\n    this._el.id = Utils.Generator.uniqueId(5);\n    this._el.controls = false;\n  }\n\n  /**\n   * Loads the appropriate media source extension adapter.\n   * @param {Source} source - The selected source object.\n   * @private\n   * @returns {void}\n   */\n  _loadMediaSourceAdapter(source: Source): void {\n    this._mediaSourceAdapter = MediaSourceProvider.getMediaSourceAdapter(this.getVideoElement(), source, this._config);\n  }\n\n  /**\n   * Add cuechange listener to active textTrack.\n   * @param {PKTextTrack} textTrack - The playkit text track object to set.\n   * @returns {void}\n   * @private\n   */\n  _addCueChangeListener(textTrack: PKTextTrack): void {\n    let textTrackEl = this._getSelectedTextTrackElement();\n    if (textTrackEl) {\n      /*\n       There's a quirk in TextTrackAPI that a text track added to video element will not fire cuechange event if it\n       didn't have it's mode set to showing for at least until a single cue has been change.\n       After first time it seems there's time tracking which allows the cuechange to fire even though the track mode\n       is set to hidden\n       This is not the case with a track DOM element added to a video element where cuechange will be fired even if\n       track mode is set only to hidden and was never set to showing\n       */\n      if (this._config.playback.useNativeTextTrack) {\n        textTrackEl.mode = \"showing\";\n      } else {\n        textTrackEl.mode = this._showTextTrackFirstTime[textTrack.index] ? \"hidden\" : \"showing\";\n        this._showTextTrackFirstTime[textTrack.index] = true;\n        textTrackEl.oncuechange = (e) => this._onCueChange(e);\n      }\n    }\n  }\n\n  /**\n   * Remove cuechange listener to active textTrack\n   * @returns {void}\n   * @private\n   */\n  _removeCueChangeListener(): void {\n    let textTrackEl: TextTrack = this._getSelectedTextTrackElement();\n    if (textTrackEl) {\n      textTrackEl.oncuechange = null;\n    }\n  }\n\n  /**\n   * oncuechange event handler.\n   * @param {FakeEvent} e - The event arg.\n   * @returns {void}\n   * @private\n   */\n  _onCueChange(e: FakeEvent): void {\n    let textTrack: TextTrack = e.currentTarget;\n    let activeCues: Array<Cue> = [];\n    textTrack.mode = 'hidden';\n    for (let cue of textTrack.activeCues) {\n      //Normalize cues to be of type of VTT model\n      if (window.VTTCue && cue instanceof window.VTTCue) {\n        activeCues.push(cue);\n      } else if (window.TextTrackCue && cue instanceof window.TextTrackCue) {\n        activeCues.push(new Cue(cue.startTime, cue.endTime, cue.text));\n      }\n    }\n    this.dispatchEvent(new FakeEvent(CustomEvents.TEXT_CUE_CHANGED, {cues: activeCues}));\n  }\n\n  /**\n   * Get currently selected text track\n   * @returns {?TextTrack} - returns the active text track element if available\n   * @private\n   */\n  _getSelectedTextTrackElement(): ?TextTrack {\n    const textTracks = this._el.textTracks;\n    for (let track in textTracks) {\n      if (textTracks.hasOwnProperty(track)) {\n        const textTrack = textTracks[parseInt(track)];\n        if (textTrack && textTrack.mode !== \"disabled\") {\n          return textTrack;\n        }\n      }\n    }\n    return null;\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/html5.js","//@flow\nimport EventManager from '../../../../event/event-manager'\nimport {HTML5_EVENTS as Html5Events} from '../../../../event/events'\nimport Track from '../../../../track/track'\nimport VideoTrack from '../../../../track/video-track'\nimport AudioTrack from '../../../../track/audio-track'\nimport {TextTrack as PKTextTrack} from '../../../../track/text-track'\nimport BaseMediaSourceAdapter from '../base-media-source-adapter'\nimport {getSuitableSourceForResolution} from '../../../../utils/resolution'\nimport * as Utils from '../../../../utils/util'\nimport FairPlay from '../../../../drm/fairplay'\nimport Env from '../../../../utils/env'\n\n/**\n * An illustration of media source extension for progressive download\n * @classdesc\n * @implements {IMediaSourceAdapter}\n */\nexport default class NativeAdapter extends BaseMediaSourceAdapter {\n  /**\n   * The id of the Adapter\n   * @member {string} id\n   * @static\n   * @public\n   */\n  static id: string = 'NativeAdapter';\n\n  /**\n   * The adapter logger\n   * @member {any} _logger\n   * @private\n   * @static\n   */\n  static _logger = BaseMediaSourceAdapter.getLogger(NativeAdapter.id);\n  /**\n   * static video element for canPlayType testing\n   * @member {} TEST_VIDEO\n   * @type {HTMLVideoElement}\n   * @static\n   */\n  static TEST_VIDEO: HTMLVideoElement = Utils.Dom.createElement(\"video\");\n  /**\n   * The DRM protocols implementations for native adapter.\n   * @type {Array<Function>}\n   * @private\n   * @static\n   */\n  static _drmProtocols: Array<Function> = [FairPlay];\n  /**\n   * The DRM protocol for the current playback.\n   * @type {?Function}\n   * @private\n   * @static\n   */\n  static _drmProtocol: ?Function = null;\n  /**\n   * The event manager of the class.\n   * @member {EventManager} - _eventManager\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The load promise\n   * @member {Promise<Object>} - _loadPromise\n   * @type {Promise<Object>}\n   * @private\n   */\n  _loadPromise: ?Promise<Object>;\n  /**\n   * The original progressive sources\n   * @member {Array<Object>} - _progressiveSources\n   * @private\n   */\n  _progressiveSources: Array<Source>;\n\n  /**\n   * Checks if NativeAdapter can play a given mime type.\n   * @function canPlayType\n   * @param {string} mimeType - The mime type to check\n   * @returns {boolean} - Whether the native adapter can play a specific mime type\n   * @static\n   */\n  static canPlayType(mimeType: string): boolean {\n    let canPlayType = false;\n    if (typeof mimeType === 'string') {\n      canPlayType = !!(NativeAdapter.TEST_VIDEO.canPlayType(mimeType.toLowerCase()));\n    }\n    NativeAdapter._logger.debug('canPlayType result for mimeType:' + mimeType + ' is ' + canPlayType.toString());\n    return canPlayType;\n  }\n\n  /**\n   * Checks if NativeAdapter can play a given drm data.\n   * @function canPlayDrm\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @returns {boolean} - Whether the native adapter can play a specific drm data.\n   * @static\n   */\n  static canPlayDrm(drmData: Array<Object>): boolean {\n    let canPlayDrm = false;\n    for (let drmProtocol of NativeAdapter._drmProtocols) {\n      if (drmProtocol.canPlayDrm(drmData)) {\n        NativeAdapter._drmProtocol = drmProtocol;\n        canPlayDrm = true;\n        break;\n      }\n    }\n    NativeAdapter._logger.debug('canPlayDrm result is ' + canPlayDrm.toString(), drmData);\n    return canPlayDrm;\n  }\n\n  /**\n   * Factory method to create media source adapter.\n   * @function createAdapter\n   * @param {HTMLVideoElement} videoElement - The video element that the media source adapter work with.\n   * @param {Object} source - The source Object.\n   * @param {Object} config - The player configuration.\n   * @returns {IMediaSourceAdapter} - New instance of the run time media source adapter.\n   * @static\n   */\n  static createAdapter(videoElement: HTMLVideoElement, source: Source, config: Object): IMediaSourceAdapter {\n    return new this(videoElement, source, config);\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLVideoElement} videoElement - The video element which bind to NativeAdapter\n   * @param {Source} source - The source object\n   * @param {Object} config - The player configuration\n   */\n  constructor(videoElement: HTMLVideoElement, source: Source, config: Object) {\n    NativeAdapter._logger.debug('Creating adapter');\n    super(videoElement, source);\n    this._maybeSetDrmPlayback();\n    this._eventManager = new EventManager();\n    this._progressiveSources = config.sources.progressive;\n  }\n\n  /**\n   * Sets the DRM playback in case such needed.\n   * @private\n   * @returns {void}\n   */\n  _maybeSetDrmPlayback(): void {\n    if (NativeAdapter._drmProtocol && this._sourceObj && this._sourceObj.drmData) {\n      NativeAdapter._drmProtocol.setDrmPlayback(this._videoElement, this._sourceObj.drmData);\n    }\n  }\n\n  /**\n   * Set the suitable progressive source according the current resolution\n   * @function _setProgressiveSource\n   * @returns {void}\n   * @private\n   */\n  _setProgressiveSource(): void {\n    let suitableTrack = getSuitableSourceForResolution(this._progressiveSources, this._videoElement.offsetWidth, this._videoElement.offsetHeight);\n    if (suitableTrack) {\n      this._sourceObj = suitableTrack;\n    }\n  }\n\n  /**\n   * Checks if the playback source is progressive\n   * @function _isProgressivePlayback\n   * @returns {boolean} - is progressive source\n   * @private\n   */\n  _isProgressivePlayback(): boolean {\n    return this._sourceObj ? this._sourceObj.mimetype === 'video/mp4' : false;\n  }\n\n  /**\n   * Load the video source\n   * @param {number} startTime - Optional time to start the video from.\n   * @function load\n   * @returns {Promise<Object>} - The loaded data\n   */\n  load(startTime: ?number): Promise<Object> {\n    if (!this._loadPromise) {\n      this._loadPromise = new Promise((resolve, reject) => {\n        // We're using 'loadeddata' event for native hls (on 'loadedmetadata' native hls doesn't have tracks yet).\n        this._eventManager.listenOnce(this._videoElement, Html5Events.LOADED_DATA, () => {\n          let data = {tracks: this._getParsedTracks()};\n          NativeAdapter._logger.debug('The source has been loaded successfully');\n          resolve(data);\n        });\n        this._eventManager.listenOnce(this._videoElement, Html5Events.ERROR, (error) => {\n          NativeAdapter._logger.error(error);\n          reject(error);\n        });\n        if (this._isProgressivePlayback()) {\n          this._setProgressiveSource();\n        }\n        if (this._sourceObj && this._sourceObj.url) {\n          this._videoElement.src = this._sourceObj.url;\n          this._trigger(BaseMediaSourceAdapter.CustomEvents.ABR_MODE_CHANGED, {mode: this._isProgressivePlayback() ? 'manual' : 'auto'});\n        }\n        if (startTime) {\n          this._videoElement.currentTime = startTime;\n        }\n        this._videoElement.load();\n      });\n    }\n    return this._loadPromise;\n  }\n\n  /**\n   * Destroys the native adapter.\n   * @function destroy\n   * @returns {Promise<*>} - The destroy promise.\n   */\n  destroy(): Promise<*> {\n    NativeAdapter._logger.debug('destroy');\n    return super.destroy().then(() => {\n      this._eventManager.destroy();\n      this._progressiveSources = [];\n      this._loadPromise = null;\n      if (NativeAdapter._drmProtocol) {\n        NativeAdapter._drmProtocol.destroy();\n        NativeAdapter._drmProtocol = null;\n      }\n    });\n  }\n\n  /**\n   * Get the parsed tracks\n   * @function _getParsedTracks\n   * @returns {Array<Track>} - The parsed tracks\n   * @private\n   */\n  _getParsedTracks(): Array<Track> {\n    let videoTracks = this._getParsedVideoTracks();\n    let audioTracks = this._getParsedAudioTracks();\n    let textTracks = this._getParsedTextTracks();\n    return videoTracks.concat(audioTracks).concat(textTracks);\n  }\n\n  /**\n   * Get the parsed video tracks\n   * @function _getParsedVideoTracks\n   * @returns {Array<Track>} - The parsed video tracks\n   * @private\n   */\n  _getParsedVideoTracks(): Array<Track> {\n    if (this._isProgressivePlayback()) {\n      return this._getParsedProgressiveVideoTracks();\n    } else {\n      return this._getParsedAdaptiveVideoTracks();\n    }\n  }\n\n  /**\n   * Get the parsed progressive video tracks\n   * @function _getParsedProgressiveVideoTracks\n   * @returns {Array<Track>} - The parsed progressive video tracks\n   * @private\n   */\n  _getParsedProgressiveVideoTracks(): Array<Track> {\n    let videoTracks = this._progressiveSources;\n    let parsedTracks = [];\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        let settings = {\n          id: videoTracks[i].id,\n          bandwidth: videoTracks[i].bandwidth,\n          width: videoTracks[i].width,\n          height: videoTracks[i].height,\n          active: this._sourceObj ? videoTracks[i].id === this._sourceObj.id : false,\n          index: i\n        };\n        parsedTracks.push(new VideoTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed adaptive video tracks\n   * @function _getParsedAdaptiveVideoTracks\n   * @returns {Array<Track>} - The parsed adaptive video tracks\n   * @private\n   */\n  _getParsedAdaptiveVideoTracks(): Array<Track> {\n    //TODO check adaptation in safari hls\n    let videoTracks = this._videoElement.videoTracks;\n    let parsedTracks = [];\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        let settings = {\n          //TODO calculate width/height/bandwidth\n          id: videoTracks[i].id,\n          active: videoTracks[i].selected,\n          label: videoTracks[i].label,\n          language: videoTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new VideoTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed audio tracks\n   * @function _getParsedAudioTracks\n   * @returns {Array<Track>} - The parsed audio tracks\n   * @private\n   */\n  _getParsedAudioTracks(): Array<Track> {\n    let audioTracks = this._videoElement.audioTracks;\n    let parsedTracks = [];\n    if (audioTracks) {\n      for (let i = 0; i < audioTracks.length; i++) {\n        let settings = {\n          id: audioTracks[i].id,\n          active: audioTracks[i].enabled,\n          label: audioTracks[i].label,\n          language: audioTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new AudioTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed text tracks\n   * @function _getParsedTextTracks\n   * @returns {Array<Track>} - The parsed text tracks\n   * @private\n   */\n  _getParsedTextTracks(): Array<Track> {\n    let textTracks = this._filterVideoElementTextTracks();\n    let parsedTracks = [];\n    if (textTracks) {\n      for (let i = 0; i < textTracks.length; i++) {\n        let settings = {\n          kind: textTracks[i].kind,\n          active: textTracks[i].mode === 'showing',\n          label: textTracks[i].label,\n          language: textTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new PKTextTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Filtered empty text tracks from the video element.\n   * @returns {Array} - The filtered text tracks array.\n   * @private\n   */\n  _filterVideoElementTextTracks() {\n    let textTracks = [];\n    for (let i = 0; i < this._videoElement.textTracks.length; i++) {\n      let vidTextTrack = this._videoElement.textTracks[i];\n      if (vidTextTrack.language || vidTextTrack.label) {\n        textTracks.push(vidTextTrack);\n      }\n    }\n    return textTracks;\n  }\n\n  /**\n   * Select a video track\n   * @function selectVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    if (this._isProgressivePlayback()) {\n      this._selectProgressiveVideoTrack(videoTrack);\n    } else {\n      this.selectAdaptiveVideoTrack(videoTrack);\n    }\n  }\n\n  /**\n   * Select a progressive video track\n   * @function _selectProgressiveVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  _selectProgressiveVideoTrack(videoTrack: VideoTrack): void {\n    let videoTracks = this._progressiveSources;\n    if ((videoTrack instanceof VideoTrack) && videoTracks && videoTracks[videoTrack.index]) {\n      let currentTime = this._videoElement.currentTime;\n      let paused = this._videoElement.paused;\n      this._sourceObj = videoTracks[videoTrack.index];\n      this._eventManager.listenOnce(this._videoElement, Html5Events.LOADED_DATA, () => {\n        if (Env.browser.name === 'Android Browser') {\n          // In android browser we have to seek only after some playback.\n          this._eventManager.listenOnce(this._videoElement, Html5Events.DURATION_CHANGE, () => {\n            this._videoElement.currentTime = currentTime;\n          });\n          this._eventManager.listenOnce(this._videoElement, Html5Events.SEEKED, () => {\n            this._onTrackChanged(videoTrack);\n            if (paused) {\n              this._videoElement.pause();\n            }\n          });\n          this._videoElement.play();\n        } else {\n          this._eventManager.listenOnce(this._videoElement, Html5Events.SEEKED, () => {\n            this._onTrackChanged(videoTrack);\n          });\n          this._videoElement.currentTime = currentTime;\n          if (!paused) {\n            this._videoElement.play();\n          }\n        }\n      });\n      this._videoElement.src = this._sourceObj ? this._sourceObj.url : \"\";\n    }\n  }\n\n  /**\n   * Select a native video track\n   * @function selectAdaptiveVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectAdaptiveVideoTrack(videoTrack: VideoTrack): void {\n    let videoTracks = this._videoElement.videoTracks;\n    if ((videoTrack instanceof VideoTrack) && videoTracks && videoTracks[videoTrack.index]) {\n      this._disableVideoTracks();\n      videoTracks[videoTrack.index].selected = true;\n      this._onTrackChanged(videoTrack);\n    }\n  }\n\n  /**\n   * Select an audio track\n   * @function selectAudioTrack\n   * @param {AudioTrack} audioTrack - the  audio track to select\n   * @returns {void}\n   * @public\n   */\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    let audioTracks = this._videoElement.audioTracks;\n    if ((audioTrack instanceof AudioTrack) && audioTracks && audioTracks[audioTrack.index]) {\n      this._disableAudioTracks();\n      audioTracks[audioTrack.index].enabled = true;\n      this._onTrackChanged(audioTrack);\n    }\n  }\n\n  /**\n   * Select a text track\n   * @function selectTextTrack\n   * @param {PKTextTrack} textTrack - The playkit text track\n   * @returns {void}\n   * @public\n   */\n  selectTextTrack(textTrack: PKTextTrack): void {\n    let textTracks = this._videoElement.textTracks;\n    if ((textTrack instanceof PKTextTrack) && (textTrack.kind === 'subtitles' || textTrack.kind === 'captions') && textTracks && textTracks[textTrack.index]) {\n      this._disableTextTracks();\n      textTracks[textTrack.index].mode = 'hidden';\n      NativeAdapter._logger.debug('Text track changed', textTrack);\n      this._onTrackChanged(textTrack);\n    }\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    this._disableTextTracks();\n  }\n\n  /**\n   * Enables adaptive bitrate\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    NativeAdapter._logger.warn('Enabling adaptive bitrate is not supported for native playback');\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * For progressive playback will always returns false.\n   * For adaptive playback will always returns true.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    return !this._isProgressivePlayback();\n  }\n\n  /**\n   * Disables all the existing video tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableVideoTracks(): void {\n    let videoTracks = this._videoElement.videoTracks;\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        videoTracks[i].selected = false;\n      }\n    }\n  }\n\n  /**\n   * Disables all the existing audio tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableAudioTracks(): void {\n    let audioTracks = this._videoElement.audioTracks;\n    if (audioTracks) {\n      for (let i = 0; i < audioTracks.length; i++) {\n        audioTracks[i].enabled = false;\n      }\n    }\n  }\n\n  /**\n   * Disables all the existing text tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableTextTracks(): void {\n    let textTracks = this._videoElement.textTracks;\n    if (textTracks) {\n      for (let i = 0; i < textTracks.length; i++) {\n        textTracks[i].mode = 'disabled';\n      }\n    }\n  }\n\n  /**\n   * Returns the live edge\n   * @returns {number} - live edge\n   * @private\n   */\n  _getLiveEdge(): number {\n    if (this._videoElement.seekable.length) {\n      return this._videoElement.seekable.end(this._videoElement.seekable.length - 1);\n    } else if (this._videoElement.buffered.length) {\n      return this._videoElement.buffered.end(this._videoElement.buffered.length - 1);\n    } else {\n      return this._videoElement.duration;\n    }\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    try {\n      this._videoElement.currentTime = this._getLiveEdge();\n    } catch\n      (e) {\n      return;\n    }\n  }\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return this._videoElement.duration === Infinity;\n  }\n\n  /**\n   * Getter for the src that the adapter plays on the video element.\n   * @public\n   * @returns {string} - The src url.\n   */\n  get src(): string {\n    return this._videoElement.src;\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {Number} - The playback duration.\n   * @public\n   */\n  get duration(): number {\n    if (this.isLive()) {\n      return this._getLiveEdge();\n    } else {\n      return super.duration;\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/media-source/adapters/native-adapter.js","//@flow\n\n/**\n * Calculates the most suitable source to the container size\n * @function getSuitableSourceForResolution\n * @param {Array<Object>} tracks - The tracks\n * @param {number} width - The width to calculate with\n * @param {number} height - The height to calculate with\n * @returns {Object} - The most suitable source to the container size\n */\nfunction getSuitableSourceForResolution(tracks: Array<Object>, width: number, height: number): ?Object {\n  let mostSuitableWidth = null;\n  if (height && tracks) {\n    let mostSuitableWidthTracks = [];\n    let minWidthDiff = Infinity;\n    for (let track of tracks) { // first filter the most width suitable\n      let widthDiff = Math.abs(track.width - width);\n      if (widthDiff < minWidthDiff) {\n        minWidthDiff = widthDiff;\n        mostSuitableWidthTracks = [track];\n      } else if (widthDiff === minWidthDiff) {\n        mostSuitableWidthTracks.push(track);\n      }\n    }\n    let videoRatio = width / height;\n    let mostSuitableWidthAndRatioTracks = mostSuitableWidthTracks;\n    let minRatioDiff = Infinity;\n    for (let track of mostSuitableWidthTracks) {  // filter the most ratio suitable from the width filter results\n      if (track.height) {\n        let ratioDiff = Math.abs(track.width / track.height - videoRatio);\n        if (ratioDiff < minRatioDiff) {\n          minRatioDiff = ratioDiff;\n          mostSuitableWidthAndRatioTracks = [track];\n        } else if (ratioDiff === minRatioDiff) {\n          mostSuitableWidthAndRatioTracks.push(track);\n        }\n      }\n    }\n    let maxBandwidth = 0;\n    for (let track of mostSuitableWidthAndRatioTracks) { // select the top bitrate from the ratio filter results\n      if (track.bandwidth > maxBandwidth || !track.bandwidth) {\n        maxBandwidth = track.bandwidth || maxBandwidth;\n        mostSuitableWidth = track;\n      }\n    }\n  }\n  return mostSuitableWidth;\n}\n\nexport {getSuitableSourceForResolution}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/resolution.js","// @flow\nimport BaseDrmProtocol from './base-drm-protocol'\n\nexport default class FairPlay extends BaseDrmProtocol {\n  static _logger = BaseDrmProtocol.getLogger('FairPlay');\n  static _keySession: any;\n  static _KeySystem: string = \"com.apple.fps.1_0\";\n  static _WebkitEvents = {\n    NEED_KEY: 'webkitneedkey',\n    KEY_MESSAGE: 'webkitkeymessage',\n    KEY_ADDED: 'webkitkeyadded',\n    KEY_ERROR: 'webkitkeyerror'\n  };\n\n  /**\n   * FairPlay playback supports in case 2 conditions are met:\n   * 1. The environment supports FairPlay playback.\n   * 2. The drm data of the source object contains entry with FairPlay scheme.\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @return {boolean} - Whether FairPlay can be play on the current environment.\n   */\n  static canPlayDrm(drmData: Array<Object>): boolean {\n    FairPlay._logger.debug(\"Can play DRM scheme of: \" + BaseDrmProtocol.DrmScheme.FAIRPLAY);\n    return BaseDrmProtocol.DrmSupport.isProtocolSupported(BaseDrmProtocol.DrmScheme.FAIRPLAY, drmData);\n  }\n\n  /**\n   * Sets the FairPlay playback.\n   * @param {HTMLVideoElement} videoElement - The video element to manipulate.\n   * @param {Array<Object>} drmData - The drm data.\n   * @returns {void}\n   */\n  static setDrmPlayback(videoElement: HTMLVideoElement, drmData: Array<Object> = []): void {\n    FairPlay._logger.debug(\"Sets DRM playback\");\n    videoElement.addEventListener(FairPlay._WebkitEvents.NEED_KEY, FairPlay._onWebkitNeedKey.bind(null, drmData), false);\n  }\n\n  static _onWebkitNeedKey(drmData: Array<Object>, event: any): void {\n    FairPlay._logger.debug(\"Webkit need key triggered\");\n    let fpDrmData = drmData.find((drmEntry) => drmEntry.scheme === BaseDrmProtocol.DrmScheme.FAIRPLAY);\n    if (!fpDrmData || FairPlay._keySession) {\n      return;\n    }\n\n    let fpCertificate = fpDrmData.certificate;\n    let videoElement = event.target;\n    let initData = event.initData;\n    let contentId = FairPlay._extractContentId(initData);\n    let aCertificate = FairPlay._base64DecodeUint8Array(fpCertificate);\n\n    initData = FairPlay._concatInitDataIdAndCertificate(initData, contentId, aCertificate);\n\n    if (!videoElement.webkitKeys) {\n      let keySystem = FairPlay._selectKeySystem();\n      FairPlay._logger.debug(\"Sets media keys\");\n      videoElement.webkitSetMediaKeys(new window.WebKitMediaKeys(keySystem));\n    }\n    if (!videoElement.webkitKeys) {\n      throw new Error(\"Could not create MediaKeys\");\n    }\n    FairPlay._logger.debug(\"Creates session\");\n    FairPlay._keySession = videoElement.webkitKeys.createSession('video/mp4', initData);\n    if (!FairPlay._keySession) {\n      throw new Error(\"Could not create key session\");\n    }\n    FairPlay._keySession.contentId = contentId;\n    FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_MESSAGE, FairPlay._onWebkitKeyMessage.bind(null, fpDrmData), false);\n    FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_ADDED, FairPlay._onWebkitKeyAdded, false);\n    FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_ERROR, FairPlay._onWebkitKeyError, false);\n  }\n\n  static destroy(): void {\n    FairPlay._keySession = null;\n  }\n\n  static _onWebkitKeyMessage(drmData: Object, event: any): void {\n    FairPlay._logger.debug(\"Webkit key message triggered\");\n    let message = event.message;\n    let request = new XMLHttpRequest();\n    request.responseType = \"text\";\n    request.addEventListener(\"load\", FairPlay._licenseRequestLoaded, false);\n    request.addEventListener(\"error\", FairPlay._licenseRequestFailed, false);\n    let params = FairPlay._base64EncodeUint8Array(message);\n    request.open('POST', drmData.licenseUrl, true);\n    request.setRequestHeader(\"Content-type\", \"application/json\");\n    FairPlay._logger.debug(\"Ready for license request\");\n    request.send(params);\n  }\n\n  static _onWebkitKeyAdded(): void {\n    FairPlay._logger.debug(\"Decryption key was added to session\");\n  }\n\n  static _onWebkitKeyError(): void {\n    FairPlay._logger.error(\"A decryption key error was encountered\");\n  }\n\n  static _licenseRequestLoaded(event: any): void {\n    FairPlay._logger.debug(\"License request loaded\");\n    let request = event.target;\n    let keyText = request.responseText.trim();\n    let responseObj = {};\n    try {\n      responseObj = JSON.parse(keyText);\n    } catch (error) {\n      FairPlay._licenseRequestFailed();\n    }\n    let isValidResponse = FairPlay._validateResponse(responseObj);\n    if (isValidResponse.valid) {\n      let key = FairPlay._base64DecodeUint8Array(responseObj.ckc);\n      FairPlay._keySession.update(key);\n    } else {\n      FairPlay._licenseRequestFailed();\n    }\n  }\n\n  static _validateResponse(responseObj: Object): Object {\n    if ((responseObj.message && responseObj.message.indexOf(\"error\") > 0)\n      || responseObj.reference === null\n      || responseObj.status_code === 500) {\n      return { //todo: create & edit an error object\n        valid: false,\n        details: \"internal server error\" // would be ERROR.INTERNAL or something like that\n      };\n    } else if (responseObj.ckc === \"\") {\n      return {\n        valid: false,\n        details: \"ckc is missing\" // would be ERROR.MISSING_CKC or something like that\n      };\n    } else {\n      return {\n        valid: true\n      };\n    }\n  }\n\n  static _licenseRequestFailed(): void {\n    throw new Error(\"License request failed\");\n  }\n\n  static _extractContentId(initData: Uint8Array): string {\n    let link = document.createElement('a');\n    link.href = FairPlay._arrayToString(initData);\n    return link.hostname;\n  }\n\n  static _selectKeySystem(): ?string {\n    let keySystem = null;\n    if (window.WebKitMediaKeys.isTypeSupported(FairPlay._KeySystem, \"video/mp4\")) {\n      keySystem = FairPlay._KeySystem;\n    } else {\n      FairPlay._logger.warn(\"Key System not supported\");\n    }\n    return keySystem;\n  }\n\n  static _arrayToString(array: Uint8Array): string {\n    return String.fromCharCode.apply(null, new Uint16Array(array.buffer));\n  }\n\n  static _base64DecodeUint8Array(input: string): Uint8Array {\n    let raw = window.atob(input);\n    let rawLength = raw.length;\n    let array = new Uint8Array(new ArrayBuffer(rawLength));\n    for (let i = 0; i < rawLength; i++) {\n      array[i] = raw.charCodeAt(i);\n    }\n    return array;\n  }\n\n  static _concatInitDataIdAndCertificate(initData: Uint8Array, id: string | Uint16Array, cert: Uint8Array): Uint8Array {\n    if (typeof id === \"string\") {\n      id = FairPlay._stringToArray(id);\n    }\n    let offset = 0;\n    let buffer = new ArrayBuffer(initData.byteLength + 4 + id.byteLength + 4 + cert.byteLength);\n    let dataView = new DataView(buffer);\n\n    let initDataArray = new Uint8Array(buffer, offset, initData.byteLength);\n    initDataArray.set(initData);\n    offset += initData.byteLength;\n\n    dataView.setUint32(offset, id.byteLength, true);\n    offset += 4;\n\n    let idArray = new Uint8Array(buffer, offset, id.byteLength);\n    idArray.set(id);\n    offset += idArray.byteLength;\n\n    dataView.setUint32(offset, cert.byteLength, true);\n    offset += 4;\n\n    let certArray = new Uint8Array(buffer, offset, cert.byteLength);\n    certArray.set(cert);\n\n    return new Uint8Array(buffer, 0, buffer.byteLength);\n  }\n\n  static _stringToArray(string: string): Uint16Array {\n    let buffer = new ArrayBuffer(string.length * 2);\n    let array = new Uint16Array(buffer);\n    for (let i = 0, strLen = string.length; i < strLen; i++) {\n      array[i] = string.charCodeAt(i);\n    }\n    return array;\n  }\n\n  static _base64EncodeUint8Array(input: Uint8Array): string {\n    let keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    let output = \"\";\n    let chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    let i = 0;\n    while (i < input.length) {\n      chr1 = input[i++];\n      chr2 = i < input.length ? input[i++] : Number.NaN;\n      chr3 = i < input.length ? input[i++] : Number.NaN;\n\n      enc1 = chr1 >> 2;\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      enc4 = chr3 & 63;\n\n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n      output += keyStr.charAt(enc1) + keyStr.charAt(enc2) +\n        keyStr.charAt(enc3) + keyStr.charAt(enc4);\n    }\n    return output;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drm/fairplay.js","// @flow\nimport Env from '../utils/env'\nimport LoggerFactory from '../utils/logger'\nimport {DrmScheme} from './drm-scheme'\n\nconst NOT_SUPPORTED: string = 'not_supported_drm_playback';\n\nexport default class DrmSupport {\n  static _logger = LoggerFactory.getLogger('DrmSupport');\n  static _Browsers: Object = {\n    Safari: () => {\n      let device = Env.device.type;\n      let os = Env.os.name;\n      if (!device && os === 'Mac OS') {\n        return DrmScheme.FAIRPLAY;\n      }\n      return NOT_SUPPORTED;\n    },\n    Chrome: () => {\n      let device = Env.device.type;\n      let os = Env.os.name;\n      if (!device || os === 'Android') {\n        return DrmScheme.WIDEVINE;\n      }\n      return NOT_SUPPORTED;\n    },\n    Firefox: () => {\n      let device = Env.device.type;\n      if (!device) {\n        return DrmScheme.WIDEVINE;\n      }\n      return NOT_SUPPORTED;\n    },\n    Edge: () => {\n      let device = Env.device.type;\n      if (!device) {\n        return DrmScheme.PLAYREADY;\n      }\n      return NOT_SUPPORTED;\n    },\n    IE: () => {\n      let device = Env.device.type;\n      let os = Env.os.name;\n      let osVersion = Env.os.version;\n      if (!device && os === 'Windows' && Number.parseFloat(osVersion) >= 8.1) {\n        return DrmScheme.PLAYREADY;\n      }\n      return NOT_SUPPORTED;\n    }\n  };\n\n  /**\n   * Checks if a certain DRM scheme is supported in the current environment.\n   * @param {string} scheme - The drm scheme.\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @return {boolean} - Whether scheme can be play on the current environment.\n   */\n  static isProtocolSupported(scheme: string, drmData: Array<Object>): boolean {\n    let browser = Env.browser.name;\n    if (typeof DrmSupport._Browsers[browser] === 'function') {\n      let drmScheme = DrmSupport._Browsers[browser]();\n      DrmSupport._logger.debug(\"Supported DRM scheme for current environment is: \" + drmScheme);\n      return (drmScheme === scheme && !!(drmData.find((drmEntry) => drmEntry.scheme === scheme)));\n    }\n    return false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drm/drm-support.js","// @flow\nimport * as Utils from '../../../utils/util'\nimport * as EncodingSources from '../../../assets/encoding-sources.json'\n\nexport default class Html5AutoPlayCapability implements ICapability {\n  static _vid: HTMLVideoElement = Utils.Dom.createElement('video');\n  static _promise: Promise<*>;\n\n  /***\n   * Runs the test for autoplay capability.\n   * @public\n   * @static\n   * @returns {void}\n   */\n  static runCapability(): void {\n    try {\n      Html5AutoPlayCapability._vid.src = EncodingSources.Base64Mp4Source;\n      Html5AutoPlayCapability._promise = Html5AutoPlayCapability._vid.play() || Promise.resolve();\n    } catch (e) {\n      Html5AutoPlayCapability._promise = Promise.reject();\n    }\n  }\n\n  /**\n   * Gets the test result for autoplay capability.\n   * @returns {Promise<CapabilityResult>} - The result object for autoplay capability.\n   * @static\n   * @public\n   */\n  static getCapability(): Promise<CapabilityResult> {\n    return Html5AutoPlayCapability._promise\n      .then(() => ({autoplay: true}))\n      .catch(() => ({autoplay: false}));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/capabilities/html5-autoplay.js","module.exports = {\n\t\"Base64Mp4Source\": \"data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAABPptZGF0AAACrQYF//+p3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjcyMSA3MmQ1M2FiIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNiAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD00IHRocmVhZHM9MSBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MiBrZXlpbnQ9MjUwIGtleWludF9taW49MjUgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIzLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IGlwX3JhdGlvPTEuNDAgYXE9MToxLjAwAIAAAAAQZYiEADf//vaH+BTZWBP/gd4CAExhdmM1Ny42NC4xMDAAQiAIwRg4AAAACEGaJGxDf/7gAAAACEGeQniFf8SBIRAEYIwcAAAACAGeYXRCf8eAIRAEYIwcAAAACAGeY2pCf8eBIRAEYIwcAAAADkGaaEmoQWiZTAhv//7hAAAACkGehkURLCv/xIEhEARgjBwAAAAIAZ6ldEJ/x4EhEARg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\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/encoding-sources.json\n// module id = 37\n// module chunks = 0","// @flow\nimport * as Utils from '../../../utils/util'\n\nexport default class Html5IsSupportedCapability implements ICapability {\n  static _vid: HTMLVideoElement = Utils.Dom.createElement('video');\n  static _result: boolean;\n\n  /***\n   * Runs the test for isSupported capability.\n   * @public\n   * @static\n   * @returns {void}\n   */\n  static runCapability(): void {\n    try {\n      Html5IsSupportedCapability._vid.volume = 0.5;\n      Html5IsSupportedCapability._result = !!Html5IsSupportedCapability._vid.canPlayType;\n    } catch (e) {\n      Html5IsSupportedCapability._result = false;\n    }\n  }\n\n  /**\n   * Gets the test result for isSupported capability.\n   * @returns {Promise<CapabilityResult>} - The result object for isSupported capability.\n   * @static\n   * @public\n   */\n  static getCapability(): Promise<CapabilityResult> {\n    return Promise.resolve({isSupported: Html5IsSupportedCapability._result});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/capabilities/html5-is-supported.js","//@flow\nimport Player from '../player'\nimport EventManager from '../event/event-manager'\nimport State from './state'\nimport PlayerStates from './state-types'\nimport {HTML5_EVENTS as Html5Events, CUSTOM_EVENTS as CustomEvents} from '../event/events'\nimport FakeEvent from '../event/fake-event'\nimport LoggerFactory from '../utils/logger'\n\n/**\n * This class responsible to manage all the state machine of the player.\n * @classdesc\n */\nexport default class StateManager {\n  /**\n   * The logger of the class.\n   * @member\n   * @type {any}\n   * @private\n   */\n  _logger: any;\n  /**\n   * Reference to the actual player.\n   * @member\n   * @type {Player}\n   * @private\n   */\n  _player: Player;\n  /**\n   * The event manager of the class.\n   * @member\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * Holds the current state of the player.\n   * @member\n   * @type {State}\n   * @private\n   */\n  _curState: State;\n  /**\n   * Holds the previous state of the player.\n   * @member\n   * @type {State | null}\n   * @private\n   */\n  _prevState: State | null;\n  /**\n   * Holds the state history of the player.\n   * @member\n   * @type {Array<State>}\n   * @private\n   */\n  _history: Array<State>;\n  /**\n   * The possible transitions from one state to another.\n   * @type {Array<Transition>}\n   * @private\n   */\n  _transitions: Transition = {\n    [PlayerStates.IDLE]: {\n      [Html5Events.LOAD_START]: () => {\n        this._updateState(PlayerStates.LOADING);\n        this._dispatchEvent();\n      },\n      [Html5Events.PLAY]: () => {\n        this._updateState(PlayerStates.BUFFERING);\n        this._dispatchEvent();\n      }\n    },\n    [PlayerStates.LOADING]: {\n      [Html5Events.LOADED_METADATA]: () => {\n        this._updateState(PlayerStates.PAUSED);\n        this._dispatchEvent();\n      },\n      [Html5Events.ERROR]: () => {\n        this._updateState(PlayerStates.IDLE);\n        this._dispatchEvent();\n      }\n    },\n    [PlayerStates.PAUSED]: {\n      [Html5Events.PLAY]: () => {\n        this._updateState(PlayerStates.PLAYING);\n        this._dispatchEvent();\n      },\n      [Html5Events.PLAYING]: () => {\n        this._updateState(PlayerStates.PLAYING);\n        this._dispatchEvent();\n      },\n      [Html5Events.ENDED]: () => {\n        this._updateState(PlayerStates.IDLE);\n        this._dispatchEvent();\n      }\n    },\n    [PlayerStates.PLAYING]: {\n      [Html5Events.PAUSE]: () => {\n        this._updateState(PlayerStates.PAUSED);\n        this._dispatchEvent();\n      },\n      [Html5Events.WAITING]: () => {\n        this._updateState(PlayerStates.BUFFERING);\n        this._dispatchEvent();\n      },\n      [Html5Events.ENDED]: () => {\n        this._updateState(PlayerStates.IDLE);\n        this._dispatchEvent();\n      },\n      [Html5Events.ERROR]: () => {\n        this._updateState(PlayerStates.IDLE);\n        this._dispatchEvent();\n      }\n    },\n    [PlayerStates.BUFFERING]: {\n      [Html5Events.PLAYING]: () => {\n        this._updateState(PlayerStates.PLAYING);\n        this._dispatchEvent();\n      },\n      [Html5Events.PAUSE]: () => {\n        this._updateState(PlayerStates.PAUSED);\n        this._dispatchEvent();\n      },\n      [Html5Events.SEEKED]: () => {\n        if (this._prevState && this._prevState.type === PlayerStates.PLAYING) {\n          this._updateState(PlayerStates.PLAYING);\n          this._dispatchEvent();\n        }\n      }\n    }\n  };\n\n  /**\n   * @constructor\n   * @param {Player} player - Reference to the player.\n   */\n  constructor(player: Player) {\n    this._player = player;\n    this._logger = LoggerFactory.getLogger(\"StateManager\");\n    this._eventManager = new EventManager();\n    this._history = [];\n    this._prevState = null;\n    this._curState = new State(PlayerStates.IDLE);\n    this._attachListeners();\n  }\n\n  /**\n   * Register to all necessary events which impacts on the player state.\n   * @private\n   * @returns {void}\n   */\n  _attachListeners(): void {\n    this._eventManager.listen(this._player, Html5Events.ERROR, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.ENDED, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.PLAY, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.LOAD_START, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.PLAYING, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.LOADED_METADATA, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.PAUSE, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.WAITING, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5Events.SEEKED, this._doTransition.bind(this));\n  }\n\n  /**\n   * Performs a state transition depends on the event which occurs in the player system.\n   * @param {FakeEvent} event - The event occurs in the player system.\n   * @private\n   * @returns {void}\n   */\n  _doTransition(event: FakeEvent): void {\n    this._logger.debug('Do transition request', event.type);\n    let transition = this._transitions[this._curState.type];\n    if (typeof transition[event.type] === 'function') {\n      transition[event.type]();\n    }\n  }\n\n  /**\n   * Updates the player's state.\n   * @param {string} type - The type of the new state.\n   * @private\n   * @returns {void}\n   */\n  _updateState(type: string): void {\n    if (this._curState.type !== type) {\n      this._curState.duration = Date.now() / 1000;\n      this._history.push(this._curState);\n      this._prevState = this._curState;\n      this._curState = new State(type);\n      this._logger.debug(`Switch player state: from ${this._prevState.type} to ${this._curState.type}`)\n    }\n  }\n\n  /**\n   * Fires the playerStateChanged event after state has been changed.\n   * @private\n   * @returns {void}\n   */\n  _dispatchEvent(): void {\n    let event = new FakeEvent(CustomEvents.PLAYER_STATE_CHANGED, ({\n      'oldState': this._prevState,\n      'newState': this._curState\n    }: StateChanged));\n    this._player.dispatchEvent(event);\n  }\n\n  /**\n   * Destroys the state manager.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this._history = [];\n    this._eventManager.destroy();\n  }\n\n  /**\n   * Resets the state manager.\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._history = [];\n  }\n\n  /**\n   * Getter to the current state of the player.\n   * @public\n   * @returns {State} - The current state object\n   */\n  get currentState(): State {\n    return this._curState;\n  }\n\n  /**\n   * Getter to the previous state of the player.\n   * @public\n   * @returns {State|null} - The previous state object, or null if such doesn't exists\n   */\n  get previousState(): State | null {\n    return this._prevState;\n  }\n\n  /**\n   * Getter to the state history of the player.\n   * @public\n   * @returns {Array.<State>} - The full states history objects\n   */\n  get history(): Array<State> {\n    return this._history;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state/state-manager.js","//@flow\n\n/**\n * This class describes a player state.\n * @classdesc\n */\nexport default class State {\n  /**\n   * The type of the state.\n   * Can be one of those describes in states.js\n   * @member\n   * @type {string}\n   * @public\n   */\n  type: string;\n  /**\n   * The duration that the player was in this state.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _duration: number;\n  /**\n   * The timestamp that this state started.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _timestamp: number;\n\n  /**\n   * @constructor\n   * @param {string} type - The type of the state.\n   */\n  constructor(type: string) {\n    this.type = type;\n    this._duration = 0;\n    this._timestamp = Date.now() / 1000;\n  }\n\n  /**\n   * Getter for the duration of the state.\n   * @returns {number} - The duration of the state\n   */\n  get duration(): number {\n    return this._duration;\n  }\n\n  /**\n   * Setter for the duration of the state.\n   * @param {number} endTime - The timestamp of the next state.\n   */\n  set duration(endTime: number): void {\n    this._duration = endTime - this._timestamp;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state/state.js","//@flow\nconst TRACK_TYPES: {[track: string]: string} = {\n  VIDEO: \"video\",\n  AUDIO: \"audio\",\n  TEXT: \"text\"\n};\n\nexport default TRACK_TYPES;\n\n\n\n// WEBPACK FOOTER //\n// ./track/track-types.js","// @flow\nimport Middleware from './middleware'\nimport BaseMiddleware from './base-middleware'\n\n/**\n * The playback middleware.\n */\nexport default class PlaybackMiddleware {\n  /**\n   * The actions of the playback middleware.\n   * @static\n   */\n  static Actions: { [action: string]: string } = {\n    PLAY: 'play',\n    PAUSE: 'pause'\n  };\n  /**\n   * The middleware implementation.\n   * @private\n   * @member\n   */\n  _middleware: Middleware;\n\n  /**\n   * @constructor\n   */\n  constructor() {\n    this._middleware = new Middleware(PlaybackMiddleware.Actions);\n  }\n\n  /**\n   * Registers a playback middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n  use(middlewareInstance: BaseMiddleware): void {\n    this._middleware.use(middlewareInstance);\n  }\n\n  /**\n   * Runs a play chain.\n   * @param {Function} callback - The last play handler in the chain.\n   * @public\n   * @returns {void}\n   */\n  play(callback: Function): void {\n    this._middleware.run(PlaybackMiddleware.Actions.PLAY, callback);\n  }\n\n  /**\n   * Runs a pause chain.\n   * @param {Function} callback - The last pause handler in the chain.\n   * @public\n   * @returns {void}\n   */\n  pause(callback: Function): void {\n    this._middleware.run(PlaybackMiddleware.Actions.PAUSE, callback);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/playback-middleware.js","// @flow\nimport MultiMap from '../utils/multi-map'\nimport BaseMiddleware from './base-middleware'\nimport LoggerFactory from '../utils/logger'\n\n/**\n * Generic middleware implementation.\n */\nexport default class Middleware {\n  /**\n   * The registered middlewares.\n   * @private\n   * @member\n   */\n  _middlewares: MultiMap<*>;\n  /**\n   * The actions supported by the middleware.\n   * @private\n   * @member\n   */\n  _actions: { [action: string]: string };\n  /**\n   * The logger of the middleware.\n   * @private\n   * @member\n   */\n  _logger: any;\n\n  /**\n   * @constructor\n   * @param {Object} actions - The actions for the middleware.\n   */\n  constructor(actions: { [action: string]: string }) {\n    this._actions = actions;\n    this._middlewares = new MultiMap();\n    this._logger = LoggerFactory.getLogger(\"Middleware\");\n  }\n\n  /**\n   * Registers a middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n  use(middlewareInstance: BaseMiddleware): void {\n    for (let action in this._actions) {\n      let apiAction = this._actions[action];\n      // $FlowFixMe\n      if (typeof middlewareInstance[apiAction] === 'function') {\n        this._logger.debug(`Register <${middlewareInstance.id}> for action ${apiAction}`);\n        // $FlowFixMe\n        this._middlewares.push(apiAction, middlewareInstance[apiAction].bind(middlewareInstance));\n      }\n    }\n  }\n\n  /**\n   * Runs a middleware chain for a specific action.\n   * @param {string} action - The action to run.\n   * @param {Function} callback - The callback function.\n   * @public\n   * @returns {void}\n   */\n  run(action: string, callback: Function): void {\n    this._logger.debug(\"Start middleware chain for action \" + action);\n    let middlewares = this._middlewares.get(action);\n    this._executeMiddleware(middlewares, () => {\n      this._logger.debug(\"Finish middleware chain for action \" + action);\n      callback();\n    });\n  }\n\n  /**\n   * Executes all the middlewares one by one.\n   * @param {Array<Function>} middlewares - The middlewares for a specific action.\n   * @param {Function} callback - The callback function.\n   * @private\n   * @returns {void}\n   */\n  _executeMiddleware(middlewares: Array<Function>, callback: Function): void {\n    // eslint-disable-next-line no-unused-vars\n    const composition = middlewares.reduceRight((next, fn) => v => {\n      fn(next);\n    }, callback);\n    composition();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/middleware.js","module.exports = {\n\t\"sources\": {},\n\t\"plugins\": {},\n\t\"metadata\": {\n\t\t\"poster\": \"\"\n\t},\n\t\"playback\": {\n\t\t\"audioLanguage\": \"\",\n\t\t\"textLanguage\": \"\",\n\t\t\"useNativeTextTrack\": false,\n\t\t\"volume\": 1,\n\t\t\"playsinline\": true,\n\t\t\"preload\": \"none\",\n\t\t\"autoplay\": false,\n\t\t\"allowMutedAutoPlay\": true,\n\t\t\"muted\": false,\n\t\t\"options\": {\n\t\t\t\"html5\": {\n\t\t\t\t\"hls\": {},\n\t\t\t\t\"dash\": {}\n\t\t\t}\n\t\t},\n\t\t\"preferNative\": {\n\t\t\t\"hls\": false,\n\t\t\t\"dash\": false\n\t\t},\n\t\t\"streamPriority\": [\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"hls\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"dash\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"progressive\"\n\t\t\t}\n\t\t]\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./player-config.json\n// module id = 44\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./style.css\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/style.css\n// module id = 45\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".playkit-container {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  color: #fff;\\n  outline: none;\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  -webkit-tap-highlight-color: transparent;\\n}\\n\\n.playkit-engine {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  object-fit: contain;\\n}\\n\\n.playkit-engine video::-webkit-media-controls-panel,\\n.playkit-engine video::-webkit-media-controls-panel-container,\\n.playkit-engine video::-webkit-media-controls-start-playback-button,\\n.playkit-engine video::-webkit-media-controls-play-button {\\n  display: none;\\n  -webkit-appearance: none\\n}\\n\\n.playkit-poster {\\n  position: absolute;\\n  display: block;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background-size: contain;\\n  background-position: center center;\\n  background-repeat: no-repeat;\\n}\\n\\n.playkit-subtitles {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  right: 0;\\n  left: 0;\\n}\\n\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader!./assets/style.css\n// module id = 46\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader/lib/css-base.js\n// module id = 47\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/style-loader/lib/addStyles.js\n// module id = 48\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/style-loader/lib/urls.js\n// module id = 49\n// module chunks = 0"],"sourceRoot":""}