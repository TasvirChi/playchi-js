{"version":3,"sources":["./core/webpack/universalModuleDefinition","./core/playkit.js","./core/webpack/bootstrap 59b4d2a8de1b8dbb5af0","./core/./utils/logger.js","./core/./error/error.js","./core/./event/fake-event.js","./core/./utils/util.js","./core/./event/event-type.js","./core/./track/track.js","./core/./event/event-manager.js","./core/./track/text-track.js","./core/./player.js","./core/./event/fake-event-target.js","./core/./track/video-track.js","./core/./track/audio-track.js","./core/./utils/env.js","./core/./track/track-type.js","./core/./utils/multi-map.js","./core/./track/vtt-cue.js","./core/./track/text-track-display.js","./core/./plugin/base-plugin.js","./core/./state/state-type.js","./core/./middleware/base-middleware.js","./core/./engines/html5/media-source/media-source-provider.js","./core/./engines/html5/media-source/base-media-source-adapter.js","./core/./drm/base-drm-protocol.js","./core/./drm/drm-scheme.js","./core/./plugin/plugin-manager.js","./core/./track/text-style.js","./core/./engines/stream-type.js","./core/./engines/engine-type.js","./core/./media-type.js","./core/./track/abr-mode-type.js","./core/./playkit.js","./core/../node_modules/ua-parser-js/src/ua-parser.js","./core/../node_modules/webpack/buildin/amd-options.js","./core/./utils/poster-manager.js","./core/./utils/jsonp.js","./core/../node_modules/js-logger/src/logger.js","./core/./error/severity.js","./core/./error/code.js","./core/./error/category.js","./core/./utils/locale.js","./core/./engines/html5/html5.js","./core/./engines/html5/media-source/adapters/native-adapter.js","./core/./utils/resolution.js","./core/./drm/fairplay.js","./core/./drm/drm-support.js","./core/./engines/html5/capabilities/html5-autoplay.js","./core/./assets/encoding-sources.json","./core/./engines/html5/capabilities/html5-is-supported.js","./core/./state/state-manager.js","./core/./state/state.js","./core/./track/label-to-track-map.js","./core/./track/label-options.js","./core/./middleware/playback-middleware.js","./core/./middleware/middleware.js","./core/./player-config.json","webpack:///./assets/style.css?7d9b","./core/./assets/style.css","./core/../node_modules/css-loader/lib/css-base.js","./core/../node_modules/style-loader/lib/addStyles.js","./core/../node_modules/style-loader/lib/urls.js","./core/./track/external-captions-handler.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","getLogger","JsLogger","getLogLevel","getLevel","setLogLevel","level","setLevel","value","LogLevelType","LogLevel","undefined","_jsLogger","obj","newObj","key","default","DEBUG","INFO","TIME","WARN","ERROR","OFF","keys","forEach","useDefaults","defaultLevel","_classCallCheck","instance","Constructor","TypeError","_logger","_logger2","_severity","_code","_category","Error","severity","category","code","data","arguments","length","error","Severity","Category","Code","_createClass","defineProperties","target","props","descriptor","writable","protoProps","staticProps","FakeEvent","type","payload","bubbles","cancelable","defaultPrevented","timeStamp","window","performance","now","Date","isTrusted","currentTarget","stopped","_toArray","arr","Array","isArray","from","_toConsumableArray","arr2","_defineProperty","Http","Dom","Generator","String","Number","_typeof","Symbol","iterator","constructor","_jsonp","_Number","isNumber","isInt","isFloat","_String","capitlize","string","charAt","toUpperCase","slice","endsWith","searchString","indexOf","_Object","merge","objects","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","assign","err","return","isObject","item","mergeDeep","_len","sources","_key","source","shift","apply","concat","copyDeep","_this","node","e","clone","__proto__","isEmptyObject","getPropertyPath","propertyPath","split","reduce","x","hasPropertyPath","properties","prop","createPropertyPath","path","pathArray","current","_pathArray","_pathArray2","head","deletePropertyPath","pop","defer","res","rej","promise","Promise","resolve","reject","bind","thisObj","fn","_Generator","uniqueId","to","Math","random","toString","substr","guid","S4","substring","_Dom","addClassName","element","className","classList","add","hasClassName","removeClassName","remove","replace","RegExp","test","setAttribute","removeAttribute","setStyle","style","getPropertyValue","setProperty","appendChild","parent","child","removeChild","prependTo","firstChild","insertBefore","getElementById","id","document","createElement","tagName","loadScriptAsync","url","_this2","r","t","getElementsByTagName","src","async","onload","onreadystatechange","readyState","onerror","onabort","parentNode","getElementBySelector","selector","querySelector","newChild","existingChild","_Http","execute","params","method","headers","request","XMLHttpRequest","status","jsonResponse","JSON","parse","responseText","open","setRequestHeader","send","jsonp","CustomEventType","Html5EventType","EventType","_util","Utils","ABORT","CAN_PLAY","CAN_PLAY_THROUGH","DURATION_CHANGE","EMPTIED","ENDED","LOADED_DATA","LOADED_METADATA","LOAD_START","PAUSE","PLAY","PLAYING","PROGRESS","RATE_CHANGE","SEEKED","SEEKING","STALLED","SUSPEND","TIME_UPDATE","VOLUME_CHANGE","WAITING","MEDIA_LOADED","PLAYER_RESET","PLAYER_DESTROY","ENTER_FULLSCREEN","EXIT_FULLSCREEN","REQUESTED_ENTER_FULLSCREEN","REQUESTED_EXIT_FULLSCREEN","AUTOPLAY_FAILED","FALLBACK_TO_MUTED_AUTOPLAY","CHANGE_SOURCE_STARTED","CHANGE_SOURCE_ENDED","MUTE_CHANGE","VIDEO_TRACK_CHANGED","AUDIO_TRACK_CHANGED","TEXT_TRACK_CHANGED","TEXT_CUE_CHANGED","TRACKS_CHANGED","ABR_MODE_CHANGED","PLAYER_STATE_CHANGED","FIRST_PLAY","PLAYBACK_STARTED","SOURCE_SELECTED","TEXT_STYLE_CHANGED","AD_LOADED","AD_STARTED","AD_RESUMED","AD_PAUSED","AD_CLICKED","AD_SKIPPED","AD_COMPLETED","AD_ERROR","ALL_ADS_COMPLETED","AD_BREAK_START","AD_BREAK_END","AD_FIRST_QUARTILE","AD_MIDPOINT","AD_THIRD_QUARTILE","USER_CLOSED_AD","AD_VOLUME_CHANGED","AD_MUTED","AD_PROGRESS","MEDIA_RECOVERED","VR_STEREO_MODE_CHANGED","Track","settings","_id","_active","active","_label","label","_language","language","_index","index","set","inputLang","trackLang","toLowerCase","startsWith","track","create","getPrototypeOf","_interopRequireDefault","_multiMap","_multiMap2","_fakeEvent","EventManager","_bindingMap","removeAll","listener","options","oneListener","event","unlisten","listen","binding","Binding_","push","list","listeners","getAll","clear","addEventListener","removeEventListener","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","setPrototypeOf","TextTrack","_track","_track2","_Track","_kind","kind","_external","external","_env","_env2","_eventManager","_eventManager2","_posterManager","_posterManager2","_fakeEvent2","_fakeEventTarget","_fakeEventTarget2","_eventType","_locale","_locale2","_html","_html2","_pluginManager","_pluginManager2","_basePlugin","_stateManager","_stateManager2","_videoTrack","_videoTrack2","_audioTrack","_audioTrack2","_textTrack","_textTrack2","_textStyle","_textStyle2","_textTrackDisplay","_stateType","_trackType","_labelToTrackMap","_streamType","_engineType","_mediaType","_abrModeType","_playbackMiddleware","_playbackMiddleware2","_playerConfig","_playerConfig2","_error","_error2","_externalCaptionsHandler","PLAYBACK_RATES","Player","_FakeEventTarget","config","_activeTextCues","_textDisplaySettings","_playbackAttributesState","muted","volume","rate","audioLanguage","textLanguage","_tracks","_firstPlay","_fullscreen","_repositionCuesTimeout","_loadingMedia","_loading","_playbackStarted","_reset","_destroyed","_fallbackToMutedAutoPlay","_config","_defaultConfig","_createReadyPromise","_createPlayerContainer","_appendDomElements","ExternalCaptionsHandler","configure","debug","_engines","Engine","runCapabilities","engineType","promises","getCapabilities","all","then","arrayOfResults","playerCapabilities","_playerCapabilities","capabilities","prepareVideoElement","logLevel","_hasSources","_configureOrLoadPlugins","plugins","receivedSourcesWhenHasEngine","_engine","reset","dispatchEvent","_selectEngineByPriority","_appendEngineEl","_attachMedia","_handlePlaybackOptions","setSrc","poster","_handlePreload","_handleAutoPlay","_readyPromise","resetFlags","startTime","playback","load","_updateTracks","tracks","_maybeSetTracksLabels","_setDefaultTracks","catch","customLabels","callbackType","_setTracksCustomLabels","_getTracksByType","LabelToTrackMap","callback","result","_this3","play","_play","_prepareVideoElement","_playAfterAsyncMiddleware","CRITICAL","PLAYER","NO_SOURCE_PROVIDED","pause","_pause","_el","getVideoElement","_updateTextDisplay","_resetStateFlags","_showBlackCover","destroy","MediaType","LIVE","isLive","dvr","seekToLiveEdge","getStartTimeOfDvrWindow","video","TrackType","VIDEO","find","audio","AUDIO","text","TEXT","selectVideoTrack","selectAudioTrack","hideTextTrack","useNativeTextTrack","selectTextTrack","textTracks","map","textTrack","_maybeDispatchTracksChanged","selectedTextTrack","enableAdaptiveBitrate","isAdaptiveBitrateEnabled","_updateCueDisplaySettings","hasBeenReset","adsPlugin","skipAd","adTagUrl","playAdNow","vr","vrPlugin","toggleVrStereoMode","isInStereoMode","values","StreamType","el","_playerId","engineEl","classnameWithId","ENGINE_CLASS_NAME","_textDisplayEl","_blackCoverEl","getElement","_this4","plugin","updateConfig","getConfig","getMiddlewareImpl","use","_this5","listenOnce","_this6","streamPriority","preferNative","_ret","priority","engineId","engine","format","formatSources","canPlaySource","_loadEngine","selectedSource","v","warn","restore","createEngine","_this7","html5Event","browser","_removeTextCuePatch","_markActiveTrack","selectedVideoTrack","ready","selectedAudioTrack","_onTextTrackChanged","_onTracksChanged","_onCueChange","_onPlay","_onPlaying","_onEnded","playbackRate","_resetTextCuesAndReposition","_handleRecovered","ExternalCaptionsEventType","NATIVE_TEXT_TRACK_ADDED","getNativeLanguageTrackIndex","videoElement","findIndex","currentState","StateType","_this8","_this9","clearTimeout","setTimeout","processCues","_this10","filteredActiveTextCues","filter","textCue","cueEndTime","_endTime","cueStartTime","_startTime","currTime","currentTime","playsinline","preload","autoplay","_canPreload","ima","disable","_this11","allowMutedAutoPlay","onAutoPlay","mutedAutoPlay","onMutedAutoPlay","onFallbackToMutedAutoPlay","onAutoPlayFailed","show","_this12","_this13","isDvr","hide","_hideBlackCover","visibility","paused","getExternalTracks","_addTextTrackOffOption","cues","activeCues","cue","activeTracks","getActiveTracks","playbackConfig","offTextTrack","langComparer","currentOrConfiguredTextLang","_getLanguage","currentOrConfiguredAudioLang","_setDefaultTrack","configuredLanguage","defaultTrack","localeTrack","selectTrack","buffered","boundedTo","duration","vol","boundedVol","seeking","mute","width","clientWidth","height","clientHeight","loading","sheet","cssRules","deleteRule","insertRule","toCSS","message","AbrMode","EngineType","FakeEventTarget","_listeners","dispatchTarget","handleEvent","exception","VideoTrack","_bandwidth","bandwidth","_width","_height","AudioTrack","_uaParserJs","_uaParserJs2","Env","getResult","MultiMap","_map","Map","has","splice","findDirectionSetting","directionSetting","findAlignSetting","alignSetting","Cue","","lr","rl","start","middle","end","left","right","VTTCue","endTime","displayState","_pauseOnExit","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_positionAlign","_size","_align","_text","convertCueToDOMTree","resetCue","setting","SyntaxError","parseTimeStamp","input","computeSeconds","h","f","match","Settings","_objCreate","parseOptions","keyValueDelim","groupDelim","groups","kv","k","parseCue","regionList","consumeTimeStamp","ts","ParsingError","Errors","BadTimeStamp","oInput","skipWhitespace","region","alt","vals","vals0","integer","percent","vertical","line","lineAlign","snapToLines","size","align","position","positionAlign","parseContent","unescape1","ESCAPE","rootDiv","tagStack","createTextNode","createProcessingInstruction","annotation","TAG_NAME","localName","TAG_ANNOTATION","trim","NEEDS_PARENT","isStrongRTLChar","charCode","strongRTLRanges","currentRange","determineBidi","cueDiv","pushNodes","nodeStack","childNodes","nextTextNode","textContent","innerText","charCodeAt","computeLinePos","textTrackList","mediaElement","trackList","count","mode","moveBoxToLinePosition","styleBox","containerBox","boxPositions","boxPosition","BoxPosition","linePos","axis","step","lineHeight","round","maxPosition","initialAxis","abs","ceil","reverse","move","calculatedPercentage","applyStyles","top","formatStyle","bestPosition","b","specifiedPosition","percentage","overlapsOppositeAxis","within","overlapsAny","intersectPercentage","toCSSCompatValues","cuetext","overlay","paddedOverlay","bottom","margin","CUE_BACKGROUND_PADDING","getSimpleBoxPosition","fontSize","FONT_SIZE_PERCENT","styleOptions","font","fontScale","FONT_STYLE","CueStyleBox","div","errorData","&amp;","&lt;","&gt;","&lrm;","&rlm;","&nbsp;","u","ruby","rt","lang","dflt","defaultKey","a","parseInt","parseFloat","StyleBox","styles","val","unit","_StyleBox","isIE8","navigator","userAgent","color","backgroundColor","textShadow","WebVTTSet","fontSet","backgroundSet","edgeSet","display","writingMode","unicodeBidi","textAlign","whiteSpace","direction","stylesunicodeBidi","textPos","box","overlaps","b2","lh","offsetHeight","offsetWidth","offsetTop","rects","getClientRects","getBoundingClientRect","max","toMove","boxes","container","min","reference","Parser","decoder","state","buffer","TextDecoder","StringDecoder","decode","decodeURIComponent","encodeURIComponent","F","BadSignature","reportOrThrowError","onparsingerror","collectNextLine","pos","parseRegion","xy","anchor","VTTRegion","lines","regionAnchorX","regionAnchorY","viewportAnchorX","viewportAnchorY","scroll","onregion","stream","alreadyCollectedLine","hasSubstring","oncue","flush","onflush","_player","BasePlugin","player","eventManager","logger","defaultConfig","RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED","attr","update","IDLE","LOADING","PAUSED","BUFFERING","BaseMiddleware","registerMediaSourceAdapter","_nativeAdapter","_nativeAdapter2","MediaSourceProvider","mediaSourceAdapter","_mediaSourceAdapters","includes","_orderMediaSourceAdapters","mediaSourceAdapters","mimetype","canPlayType","drmData","canPlayDrm","_selectedAdapter","mse","unshift","createAdapter","register","BaseMediaSourceAdapter","_videoElement","_sourceObj","_handleLiveTimeUpdate","_trigger","_throwNotImplementedError","videoTrack","audioTrack","_getLiveEdge","_loadPromise","mimeType","_drmSupport","_drmSupport2","_drmScheme","BaseDrmProtocol","DrmSupport","DrmScheme","WIDEVINE","PLAYREADY","FAIRPLAY","registerPlugin","_basePlugin2","PluginManager","_plugins","_registry","RECOVERABLE","RUNTIME_ERROR_NOT_REGISTERED_PLUGIN","pluginClass","isValid","createPlugin","_destroy","delete","handler","TextStyle","fontFamily","FontFamily","SANS_SERIF","fontColor","StandardColors","WHITE","fontOpacity","StandardOpacities","OPAQUE","BLACK","backgroundOpacity","fontEdge","EdgeStyles","NONE","attributes","_toRGBA","shadows","shadow","join","clonedTextStyle","opacity","ARIAL","HELVETICA","VERDANA","RED","GREEN","BLUE","YELLOW","MAGENTA","CYAN","SEMI_HIGH","SEMI_LOW","TRANSPARENT","RAISED","DEPRESSED","UNIFORM","DROP","FontSizes","DASH","HLS","PROGRESSIVE","HTML5","FLASH","SILVERLIGHT","VOD","UNKNOWN","MANUAL","AUTO","loadPlayer","_player2","setCapabilities","PLAYER_NAME","VERSION","_baseMediaSourceAdapter","_baseMediaSourceAdapter2","_mediaSourceProvider","_baseDrmProtocol","_baseDrmProtocol2","_baseMiddleware","_baseMiddleware2","__WEBPACK_AMD_DEFINE_RESULT__","MODEL","NAME","TYPE","VENDOR","MOBILE","TABLET","util","extend","regexes","extensions","margedRegexes","str1","str2","lowerize","str","major","version","mapper","rgx","ua","arrays","j","q","matches","regex","exec","maps","oldsafari","1.0","1.2","1.3","2.0","2.0.2","2.0.3","2.0.4","?","device","amazon","model","Fire Phone","sprint","Evo Shift 4G","vendor","HTC","Sprint","os","windows","ME","NT 3.11","NT 4.0","2000","XP","Vista","7","8","8.1","10","RT","cpu","Browser","CPU","arch","Device","OS","UAParser","uastring","rgxmap","getBrowser","getCPU","getDevice","getEngine","getOS","getUA","setUA","BROWSER","MAJOR","ARCHITECTURE","DEVICE","CONSOLE","SMARTTV","WEARABLE","EMBEDDED","ENGINE","$","jQuery","Zepto","parser","__webpack_amd_options__","PosterManager","_createEl","posterUrl","_posterUrl","_removeEl","timeout","JSONP_TIMEOUT","script","callbackId","CALLBACK_PREFIX","scriptUri","timer","_cleanup","NETWORK","TIMEOUT","callbackResult","JSONP_FORMAT_STRING","__WEBPACK_AMD_DEFINE_FACTORY__","global","Logger","logHandler","contextualLoggersByNameMap","scope","func","args","defineLogLevel","ContextualLogger","defaultContext","context","filterLevel","log","info","newLevel","enabledFor","lvl","invoke","time","timeEnd","msgArgs","globalLogger","L","setHandler","createDefaultHandler","formatter","messages","timerStartTimeByLabelMap","invokeConsoleMethod","hdlr","Function","console","timerLabel","getTime","UNSUPPORTED_SCHEME","BAD_HTTP_STATUS","HTTP_ERROR","MALFORMED_DATA_URI","UNKNOWN_DATA_URI_ENCODING","REQUEST_FILTER_ERROR","RESPONSE_FILTER_ERROR","INVALID_TEXT_HEADER","INVALID_TEXT_CUE","UNABLE_TO_DETECT_ENCODING","BAD_ENCODING","INVALID_XML","INVALID_MP4_TTML","INVALID_MP4_VTT","UNABLE_TO_CREATE_TEXT_CUE","DASH_ADAPTER_ERROR_PARSE_ISSUE","BUFFER_READ_OUT_OF_BOUNDS","JS_INTEGER_OVERFLOW","EBML_OVERFLOW","EBML_BAD_FLOATING_POINT_SIZE","MP4_SIDX_WRONG_BOX_TYPE","MP4_SIDX_INVALID_TIMESCALE","MP4_SIDX_TYPE_NOT_SUPPORTED","WEBM_CUES_ELEMENT_MISSING","WEBM_EBML_HEADER_ELEMENT_MISSING","WEBM_SEGMENT_ELEMENT_MISSING","WEBM_INFO_ELEMENT_MISSING","WEBM_DURATION_ELEMENT_MISSING","WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING","WEBM_CUE_TIME_ELEMENT_MISSING","MEDIA_SOURCE_OPERATION_FAILED","MEDIA_SOURCE_OPERATION_THREW","VIDEO_ERROR","QUOTA_EXCEEDED_ERROR","HLS_FATAL_MEDIA_ERROR","HLS_FRAG_PARSING_ERROR","HLS_BUFFER_APPEND_ISSUE","HLS_BUFFER_APPENDING_ISSUE","NATIVE_ADAPTER_LOAD_FAILED","HLS_BUFFER_STALLED_ERROR","UNABLE_TO_GUESS_MANIFEST_TYPE","DASH_INVALID_XML","DASH_NO_SEGMENT_INFO","DASH_EMPTY_ADAPTATION_SET","DASH_EMPTY_PERIOD","DASH_WEBM_MISSING_INIT","DASH_UNSUPPORTED_CONTAINER","DASH_PSSH_BAD_ENCODING","DASH_NO_COMMON_KEY_SYSTEM","DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED","DASH_CONFLICTING_KEY_IDS","UNPLAYABLE_PERIOD","RESTRICTIONS_CANNOT_BE_MET","NO_PERIODS","HLS_PLAYLIST_HEADER_MISSING","INVALID_HLS_TAG","HLS_INVALID_PLAYLIST_HIERARCHY","DASH_DUPLICATE_REPRESENTATION_ID","HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND","HLS_COULD_NOT_GUESS_MIME_TYPE","HLS_MASTER_PLAYLIST_NOT_PROVIDED","HLS_REQUIRED_ATTRIBUTE_MISSING","HLS_REQUIRED_TAG_MISSING","HLS_COULD_NOT_GUESS_CODECS","HLS_KEYFORMATS_NOT_SUPPORTED","DASH_UNSUPPORTED_XLINK_ACTUATE","DASH_XLINK_DEPTH_LIMIT","HLS_LIVE_CONTENT_NOT_SUPPORTED","HLSJS_CANNOT_PARSE","INVALID_STREAMS_CHOSEN","NO_RECOGNIZED_KEY_SYSTEMS","REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE","FAILED_TO_CREATE_CDM","FAILED_TO_ATTACH_TO_VIDEO","INVALID_SERVER_CERTIFICATE","FAILED_TO_CREATE_SESSION","FAILED_TO_GENERATE_LICENSE_REQUEST","LICENSE_REQUEST_FAILED","LICENSE_RESPONSE_REJECTED","ENCRYPTED_CONTENT_WITHOUT_DRM_INFO","NO_LICENSE_SERVER_GIVEN","OFFLINE_SESSION_REMOVED","EXPIRED","BAD_FAIRPLAY_RESPONSE","COULD_NOT_CREATE_MEDIA_KEYS","COULD_NOT_CREATE_KEY_SESSION","LOAD_INTERRUPTED","BITRATE_SWITCH_ISSUE","LOAD_FAILED","RUNTIME_ERROR_NOT_VALID_HANDLER","CAST_API_UNAVAILABLE","NO_CAST_RECEIVERS","ALREADY_CASTING","UNEXPECTED_CAST_ERROR","CAST_CANCELED_BY_USER","CAST_CONNECTION_TIMED_OUT","CAST_RECEIVER_APP_UNAVAILABLE","STORAGE_NOT_SUPPORTED","INDEXED_DB_ERROR","OPERATION_ABORTED","REQUESTED_ITEM_NOT_FOUND","MALFORMED_OFFLINE_URI","CANNOT_STORE_LIVE_OFFLINE","STORE_ALREADY_IN_PROGRESS","NO_INIT_DATA_FOR_OFFLINE","LOCAL_PLAYER_INSTANCE_REQUIRED","CONTENT_UNSUPPORTED_BY_BROWSER","VR_NOT_SUPPORTED","MEDIA","MANIFEST","STREAMING","DRM","ADS","STORAGE","VR","Locale","languages","userLanguage","_mediaSourceProvider2","_vttCue","_html5Autoplay","_html5Autoplay2","_html5IsSupported","_html5IsSupported2","Html5","_showTextTrackFirstTime","_canLoadMediaSourceAdapterPromise","_createVideoElement","_init","_capabilities","capability","runCapability","getCapability","mergedResults","detach","_mediaSourceAdapter","_handleVideoError","extended","_getMsExtendedError","msExtendedCode","pow","_removeCueChangeListener","_addCueChangeListener","playPromise","_loadMediaSourceAdapter","attach","controls","getMediaSourceAdapter","textTrackEl","_getSelectedTextTrackElement","oncuechange","TextTrackCue","NaN","seekable","played","defaultMuted","loop","defaultPlaybackRate","ended","networkState","videoHeight","videoWidth","getAttribute","_get","receiver","desc","getOwnPropertyDescriptor","_resolution","_fairplay","_fairplay2","NativeAdapter","_BaseMediaSourceAdapt","_maybeSetDrmPlayback","_progressiveSources","progressive","_liveEdge","TEST_VIDEO","_drmProtocols","drmProtocol","_drmProtocol","setDrmPlayback","_dispatchErrorCallback","suitableTrack","getSuitableSourceForResolution","_onLoadedData","_onError","_isProgressivePlayback","_setProgressiveSource","parseTracksAndResolve","_playerTracks","_getParsedTracks","_addNativeAudioTrackChangeListener","_addNativeTextTrackChangeListener","_addNativeTextTrackAddedListener","_handleLiveDurationChange","_liveDurationChangeInterval","clearInterval","videoTracks","_getParsedVideoTracks","audioTracks","_getParsedAudioTracks","_getParsedTextTracks","_getParsedProgressiveVideoTracks","_getParsedAdaptiveVideoTracks","parsedTracks","selected","enabled","_selectProgressiveVideoTrack","selectAdaptiveVideoTrack","_onTrackChanged","_disableVideoTracks","_removeNativeAudioTrackChangeListener","_disableAudioTracks","_onNativeAudioTrackChange","pkAudioTracks","vidIndex","pkIndex","activeAudioTrack","pkAudioTrack","_removeNativeTextTrackChangeListener","selectedTrack","_disableTextTracks","_onNativeTextTrackChange","pkTextTracks","pkOffTrack","activeTextTrack","pkTextTrack","_onNativeTextTrackAdded","Infinity","setInterval","liveEdge","Event","mostSuitableWidth","mostSuitableWidthTracks","minWidthDiff","widthDiff","videoRatio","mostSuitableWidthAndRatioTracks","minRatioDiff","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","ratioDiff","maxBandwidth","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","FairPlay","_BaseDrmProtocol","isProtocolSupported","errorCallback","_WebkitEvents","NEED_KEY","_onWebkitNeedKey","_errorCallback","fpDrmData","drmEntry","scheme","_keySession","fpCertificate","certificate","initData","contentId","_extractContentId","aCertificate","_base64DecodeUint8Array","_concatInitDataIdAndCertificate","webkitKeys","keySystem","_selectKeySystem","webkitSetMediaKeys","WebKitMediaKeys","createSession","KEY_MESSAGE","_onWebkitKeyMessage","KEY_ADDED","_onWebkitKeyAdded","KEY_ERROR","_onWebkitKeyError","responseType","_licenseRequestLoaded","_base64EncodeUint8Array","licenseUrl","keyText","responseObj","isValidResponse","_validateResponse","valid","ckc","status_code","details","link","href","_arrayToString","hostname","isTypeSupported","_KeySystem","array","fromCharCode","Uint16Array","raw","atob","rawLength","Uint8Array","ArrayBuffer","cert","_stringToArray","offset","byteLength","dataView","DataView","setUint32","idArray","strLen","keyStr","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","NOT_SUPPORTED","_Browsers","drmScheme","Safari","Chrome","Firefox","Edge","IE","osVersion","Mobile Safari","_interopRequireWildcard","_encodingSources","EncodingSources","testVideoElement","Base64Mp4Source","Html5AutoPlayCapability","_playPromiseResult","_setMuted","_isDataSaverMode","_getPlayPromise","connection","saveData","_forcePromiseReturnValue","supported","Html5IsSupportedCapability","_vid","_result","isSupported","_state","_state2","StateManager","_StateType$IDLE","_StateType$LOADING","_StateType$PAUSED","_StateType$PLAYING","_StateType$BUFFERING","_transitions","_updateState","_dispatchEvent","_lastWaitingTime","_prevState","_history","_curState","_attachListeners","_doTransition","transition","oldState","newState","State","_duration","_timestamp","_LabelToTrackMap","_labelOptions","LabelOptions","CAPTIONS","QUALITIES","_middleware","_middleware2","PlaybackMiddleware","Actions","middlewareInstance","run","Middleware","actions","_actions","_middlewares","action","apiAction","middlewares","_executeMiddleware","reduceRight","forceRedirectExternalStreams","metadata","html5","hls","dash","content","transform","locals","cssWithMappingToString","useSourceMap","cssMapping","btoa","sourceMapping","toComment","sourceRoot","sourceMap","unescape","stringify","mediaQuery","alreadyImportedModules","addStylesToDom","domStyle","stylesInDom","refs","parts","addStyle","listToStyles","newStyles","base","css","media","part","insertStyleElement","insertInto","lastStyleElementInsertedAtTop","stylesInsertedAtTop","insertAt","nextSibling","removeStyleElement","idx","createStyleElement","attrs","addAttrs","createLinkElement","rel","singleton","styleIndex","singletonCounter","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","updateLink","applyToTag","styleSheet","cssText","replaceText","cssNode","autoFixUrls","convertToAbsoluteUrls","fixUrls","blob","oldSrc","isOldIE","memo","newList","mayRemove","textStore","replacement","Boolean","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","unquotedOrigUrl","$1","newUrl","CuesStatus","NOT_DOWNLOADED","DOWNLOADING","DOWNLOADED","_externalCueIndex","_textTrackModel","_isTextTrackActive","_lastTimeUpdate","captions","_maybeSetExternalCueIndex","textTracksLength","newTextTracks","caption","sameLangTrack","cuesStatus","_addNativeTextTrack","_downloadAndParseCues","_addCuesToNativeTextTrack","_setTextTrack","captionType","_getFileType","UNKOWN_FILE_TYPE","response","_convertSrtToVtt","vttStr","part1","part2","part3","part4","_getCuesString","vttString","_parseCues","cuesArray","activeCuesChanged","activeTextCuesIndex","getTracks","addCue","sameLanguageTrackIndex","domTrack","removeCue","addTextTrack","_handleCaptionOnTimeUpdate"],"mappings":"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","file":"playkit.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"core\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"core\"] = factory();\n\telse\n\t\troot[\"playkit\"] = root[\"playkit\"] || {}, root[\"playkit\"][\"core\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"core\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"core\"] = factory();\n\telse\n\t\troot[\"playkit\"] = root[\"playkit\"] || {}, root[\"playkit\"][\"core\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 30);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setLogLevel = exports.getLogLevel = exports.LogLevelType = exports.LogLevel = undefined;\n\nvar _jsLogger = __webpack_require__(35);\n\nvar JsLogger = _interopRequireWildcard(_jsLogger);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar LogLevel = {\n  DEBUG: JsLogger.DEBUG,\n  INFO: JsLogger.INFO,\n  TIME: JsLogger.TIME,\n  WARN: JsLogger.WARN,\n  ERROR: JsLogger.ERROR,\n  OFF: JsLogger.OFF\n};\n\n\nvar LogLevelType = {};\n\n// Build the log level types enums according to the LogLevel object\nObject.keys(LogLevel).forEach(function (key) {\n  LogLevelType[key] = key;\n});\n\nJsLogger.useDefaults({ defaultLevel: JsLogger.ERROR });\n\n/**\n * get a logger\n * @param {?string} name - the logger name\n * @returns {Object} - the logger class\n */\nfunction getLogger(name) {\n  if (!name) {\n    return JsLogger;\n  }\n  return JsLogger.get(name);\n}\n\n/**\n * get the log level\n * @param {?string} name - the logger name\n * @returns {LogLevelObject} - the log level\n */\nfunction getLogLevel(name) {\n  return getLogger(name).getLevel();\n}\n\n/**\n * sets the logger level\n * @param {LogLevelObject} level - the log level\n * @param {?string} name - the logger name\n * @returns {void}\n */\nfunction setLogLevel(level, name) {\n  getLogger(name).setLevel(level);\n}\n\nexports.default = getLogger;\nexports.LogLevel = LogLevel;\nexports.LogLevelType = LogLevelType;\nexports.getLogLevel = getLogLevel;\nexports.setLogLevel = setLogLevel;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _severity = __webpack_require__(36);\n\nvar _code = __webpack_require__(37);\n\nvar _category = __webpack_require__(38);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CLASS_NAME = 'Error';\n\n/**\n * @classdesc This is a description of the error class.\n */\n\nvar Error =\n\n/**\n * @constructor\n * @param {number} severity - error's severity\n * @param {number} category - error's category.\n * @param {number} code - error's code.\n * @param {any} data - additional data for the error.\n */\n\n/**\n * @enum {number}\n */\n\n/**\n * @enum {number}\n */\nfunction Error(severity, category, code) {\n  var data = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  _classCallCheck(this, Error);\n\n  this.severity = severity;\n  this.category = category;\n  this.code = code;\n  this.data = data;\n  if ((0, _logger.getLogLevel)(CLASS_NAME) !== _logger.LogLevel.OFF) {\n    Error._logger.error('Category:' + category + ' | Code:' + code + ' |', data);\n  }\n}\n/**\n * @enum {number}\n */\n;\n\nError.Severity = _severity.Severity;\nError.Category = _category.Category;\nError.Code = _code.Code;\nError._logger = (0, _logger2.default)(CLASS_NAME);\nexports.default = Error;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Create an Event work-alike object based on the dictionary.\n * The event should contain all of the same properties from the dict.\n * @param {string} type -\n * @param {Object=} opt_dict -\n * @constructor\n * @extends {Event}\n */\nvar FakeEvent = function () {\n\n  /**\n   * Non-standard property read by FakeEventTarget to stop processing listeners.\n   * @type {boolean}\n   */\n\n\n  /** @type {EventTarget} */\n\n\n  /** @const {string} */\n\n\n  /** @const {boolean} */\n\n  /** @const {boolean} */\n  function FakeEvent(type, payload) {\n    _classCallCheck(this, FakeEvent);\n\n    // These Properties below cannot be set by dict.  They are all provided for\n    // compatibility with native events.\n\n    /** @const {boolean} */\n    this.bubbles = false;\n\n    /** @const {boolean} */\n    this.cancelable = false;\n\n    /** @const {boolean} */\n    this.defaultPrevented = false;\n\n    /**\n     * According to MDN, Chrome uses high-res timers instead of epoch time.\n     * Follow suit so that timeStamps on FakeEvents use the same base as\n     * on native Events.\n     * @const {number}\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n     */\n    this.timeStamp = window.performance ? window.performance.now() : Date.now();\n\n    /** @const {string} */\n    this.type = type;\n\n    /** @const {boolean} */\n    this.isTrusted = false;\n\n    /** @type {EventTarget} */\n    this.currentTarget = null;\n\n    /** @type {EventTarget} */\n    this.target = null;\n\n    /**\n     * Non-standard property read by FakeEventTarget to stop processing listeners.\n     * @type {boolean}\n     */\n    this.stopped = false;\n\n    this.payload = payload;\n  }\n\n  /**\n   * Does nothing, since FakeEvents have no default.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n\n\n  /** @type {EventTarget} */\n\n\n  /** @const {boolean} */\n\n\n  /**\n   * According to MDN, Chrome uses high-res timers instead of epoch time.\n   * Follow suit so that timeStamps on FakeEvents use the same base as\n   * on native Events.\n   * @const {number}\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n   */\n\n\n  /** @const {boolean} */\n\n\n  _createClass(FakeEvent, [{\n    key: \"preventDefault\",\n    value: function preventDefault() {}\n\n    /**\n     * Stops processing event listeners for this event.  Provided for compatibility\n     * with native Events.\n     * @override\n     */\n\n  }, {\n    key: \"stopImmediatePropagation\",\n    value: function stopImmediatePropagation() {\n      this.stopped = true;\n    }\n\n    /**\n     * Does nothing, since FakeEvents do not bubble.  Provided for compatibility\n     * with native Events.\n     * @override\n     */\n\n  }, {\n    key: \"stopPropagation\",\n    value: function stopPropagation() {}\n  }]);\n\n  return FakeEvent;\n}();\n\nexports.default = FakeEvent;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Http = exports.Dom = exports.Generator = exports.Object = exports.String = exports.Number = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _jsonp = __webpack_require__(34);\n\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\"use strict\";\n\nvar _Number = {\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a number\n   */\n  isNumber: function isNumber(n) {\n    return Number(n) === n;\n  },\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is an integer\n   */\n  isInt: function isInt(n) {\n    return this.isNumber(n) && n % 1 === 0;\n  },\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a float\n   */\n  isFloat: function isFloat(n) {\n    return this.isNumber(n) && n % 1 !== 0;\n  }\n};\n\nvar _String = {\n  /**\n   * Uppercase the first letter of a string\n   * @param  {String} string - String to be uppercased\n   * @return {String} - The uppercased string\n   * @public\n   * @method toTitleCase\n   */\n  capitlize: function capitlize(string) {\n    if (typeof string !== 'string') {\n      return string;\n    }\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  },\n\n  /**\n   * @param {string} string - Certain string\n   * @param {string} searchString - Certain string\n   * @returns {boolean} - Whether the string: string is ending with string: searchString\n   */\n  endsWith: function endsWith(string, searchString) {\n    if (typeof string !== 'string' || typeof searchString !== 'string') {\n      return false;\n    }\n    return string.indexOf(searchString, string.length - searchString.length) != -1;\n  }\n};\n\nvar _Object = {\n  /**\n   * @param {Array<Object>} objects - The objects to merge\n   * @returns {Object} - The merged object.\n   */\n  merge: function merge(objects) {\n    var target = {};\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = objects[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var obj = _step.value;\n\n        Object.assign(target, obj);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return target;\n  },\n\n  /**\n   * @param {any} item - The item to check.\n   * @returns {boolean} - Whether the item is an object.\n   */\n  isObject: function isObject(item) {\n    return item && (typeof item === 'undefined' ? 'undefined' : _typeof(item)) === 'object' && !Array.isArray(item);\n  },\n\n  /**\n   * @param {any} target - The target object.\n   * @param {any} sources - The objects to merge.\n   * @returns {Object} - The merged object.\n   */\n  mergeDeep: function mergeDeep(target) {\n    for (var _len = arguments.length, sources = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      sources[_key - 1] = arguments[_key];\n    }\n\n    if (!sources.length) {\n      return target;\n    }\n    var source = sources.shift();\n    if (this.isObject(target) && this.isObject(source)) {\n      for (var key in source) {\n        if (this.isObject(source[key])) {\n          if (!target[key]) Object.assign(target, _defineProperty({}, key, {}));\n          this.mergeDeep(target[key], source[key]);\n        } else {\n          Object.assign(target, _defineProperty({}, key, source[key]));\n        }\n      }\n    }\n    return this.mergeDeep.apply(this, [target].concat(_toConsumableArray(sources)));\n  },\n\n  /**\n   * @param {any} data - The data to copy.\n   * @returns {any} - The copied data.\n   */\n  copyDeep: function copyDeep(data) {\n    var _this = this;\n\n    var node = void 0;\n    if (Array.isArray(data)) {\n      node = data.length > 0 ? data.slice(0) : [];\n      node.forEach(function (e, i) {\n        if ((typeof e === 'undefined' ? 'undefined' : _typeof(e)) === \"object\" && e !== {} || Array.isArray(e) && e.length > 0) {\n          node[i] = _this.copyDeep(e);\n        }\n      });\n    } else if (data !== null && (typeof data === 'undefined' ? 'undefined' : _typeof(data)) === \"object\") {\n      if (data.clone && typeof data.clone === \"function\") {\n        node = data.clone();\n      } else {\n        node = Object.assign({ __proto__: data.__proto__ }, data);\n        Object.keys(node).forEach(function (key) {\n          if (_typeof(node[key]) === \"object\" && node[key] !== {} || Array.isArray(node[key]) && node[key].length > 0) {\n            node[key] = _this.copyDeep(node[key]);\n          }\n        });\n      }\n    } else {\n      node = data;\n    }\n    return node;\n  },\n\n  /**\n   * Checks if an object is an empy object.\n   * @param {Object} obj - The object to check\n   * @returns {boolean} - Whether the object is empty.\n   */\n  isEmptyObject: function isEmptyObject(obj) {\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) return false;\n    }\n    return true;\n  },\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - The value in this path.\n   */\n  getPropertyPath: function getPropertyPath(obj, propertyPath) {\n    return propertyPath.split(\".\").reduce(function (o, x) {\n      return typeof o === \"undefined\" || o === null ? o : o[x];\n    }, obj);\n  },\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - Whether the path exists in the object.\n   */\n  hasPropertyPath: function hasPropertyPath(obj, propertyPath) {\n    if (!propertyPath) {\n      return false;\n    }\n    var properties = propertyPath.split('.');\n    for (var i = 0; i < properties.length; i++) {\n      var prop = properties[i];\n      if (!obj || !obj.hasOwnProperty(prop)) {\n        return false;\n      } else {\n        obj = obj[prop];\n      }\n    }\n    return true;\n  },\n\n  /**\n   * Create an object with a given property path.\n   * @param {Object} obj - The object to create on.\n   * @param {string} path - The path to create in the object.\n   * @param {any} value - The value to set in the path.\n   * @returns {Object} - The result object.\n   */\n  createPropertyPath: function createPropertyPath(obj, path) {\n    var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    var pathArray = path.split('.');\n    var current = obj;\n    while (pathArray.length > 1) {\n      var _pathArray = pathArray,\n          _pathArray2 = _toArray(_pathArray),\n          head = _pathArray2[0],\n          tail = _pathArray2.slice(1);\n\n      pathArray = tail;\n      if (current[head] === undefined) {\n        current[head] = {};\n      }\n      current = current[head];\n    }\n    current[pathArray[0]] = value;\n    return obj;\n  },\n\n  /**\n   * Deleted a property path from an object.\n   * @param {Object} obj - The object to delete the property path from.\n   * @param {string} path - The path to delete in the object.\n   * @returns {void}\n   */\n  deletePropertyPath: function deletePropertyPath(obj, path) {\n    if (!obj || !path) {\n      return;\n    }\n    var pathArray = path.split('.');\n    for (var i = 0; i < pathArray.length - 1; i++) {\n      obj = obj[pathArray[i]];\n      if (typeof obj === 'undefined') {\n        return;\n      }\n    }\n    delete obj[pathArray.pop()];\n  },\n\n  /**\n   * Creates deferred promise which can resolved/rejected outside the promise scope.\n   * @returns {DeferredPromise} - The promise with resolve and reject props.\n   */\n  defer: function defer() {\n    var res = void 0,\n        rej = void 0;\n    // $FlowFixMe\n    var promise = new Promise(function (resolve, reject) {\n      res = resolve;\n      rej = reject;\n    });\n    // $FlowFixMe\n    promise.resolve = res;\n    // $FlowFixMe\n    promise.reject = rej;\n    return promise;\n  },\n\n  /**\n   * Binds an handler to a desired context.\n   * @param {any} thisObj - The handler context.\n   * @param {Function} fn - The handler.\n   * @returns {Function} - The new bound function.\n   * @public\n   */\n  bind: function bind(thisObj, fn) {\n    return function () {\n      fn.apply(thisObj, arguments);\n    };\n  }\n};\n\nvar _Generator = {\n  /**\n   * Generates unique id.\n   * @param {number} length - The length of the id.\n   * @returns {string} - The generated id.\n   */\n  uniqueId: function uniqueId(length) {\n    var from = 2;\n    var to = from + (!length || length < 0 ? 0 : length - 2);\n    return '_' + Math.random().toString(36).substr(from, to);\n  },\n\n  /**\n   * Generates GUID.\n   * @return {string} - GUID\n   * @private\n   */\n  guid: function guid() {\n    var S4 = function S4() {\n      return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n    };\n    return S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4();\n  }\n};\n\nvar _Dom = {\n  /**\n   * Adds class name to an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  addClassName: function addClassName(element, className) {\n    if (element.classList) {\n      element.classList.add(className);\n    } else {\n      if (!_Dom.hasClassName(element, className)) {\n        element.className += className;\n      }\n    }\n  },\n\n\n  /**\n   * Removes class name from an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  removeClassName: function removeClassName(element, className) {\n    if (element.classList) {\n      element.classList.remove(className);\n    } else {\n      if (_Dom.hasClassName(element, className)) {\n        element.className = element.className.replace(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'), ' ').replace(/^\\s+|\\s+$/g, '');\n      }\n    }\n  },\n\n  /**\n   * Checks if an element has a class name\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {boolean} - weather an element contains a class name\n   */\n  hasClassName: function hasClassName(element, className) {\n    return element.className && new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(element.className);\n  },\n\n  /**\n   * Add element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @param {string} value - attribute value\n   * @returns {void}\n   */\n  setAttribute: function setAttribute(element, name, value) {\n    element.setAttribute(name, value);\n  },\n\n  /**\n   * Remove element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @returns {void}\n   */\n  removeAttribute: function removeAttribute(element, name) {\n    element.removeAttribute(name);\n  },\n\n  /**\n   * Set element style\n   * @param {Element} element - an HTML element\n   * @param {string} name - style name\n   * @param {string} value - style value\n   * @returns {void}\n   */\n  setStyle: function setStyle(element, name, value) {\n    if (element.style.getPropertyValue(name) !== undefined) {\n      element.style.setProperty(name, value);\n    }\n  },\n\n  /**\n   * Adds a node to the end of the list of children of a specified parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  appendChild: function appendChild(parent, child) {\n    if (parent && child && parent.appendChild) {\n      parent.appendChild(child);\n    }\n  },\n\n  /**\n   * Removes an element from his parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  removeChild: function removeChild(parent, child) {\n    if (parent && child && parent.removeChild) {\n      parent.removeChild(child);\n    }\n  },\n\n  /**\n   * Prepend HTML element\n   * @param {HTMLElement} child - the child to prepend\n   * @param {HTMLElement} parent - the parent to preprend to\n   * @returns {void}\n   */\n  prependTo: function prependTo(child, parent) {\n    if (parent.firstChild) {\n      parent.insertBefore(child, parent.firstChild);\n    } else {\n      parent.appendChild(child);\n    }\n  },\n\n  /**\n   * Returns a reference to the element by its ID.\n   * @param {string} id - The desired id.\n   * @returns {Element} - The element with the desired id.\n   */\n  getElementById: function getElementById(id) {\n    return document.getElementById(id);\n  },\n\n  /**\n   * Creates the HTML element specified by tagName.\n   * @param {string} tagName - The tag name.\n   * @returns {Element} - The element just created.\n   */\n  createElement: function createElement(tagName) {\n    return document.createElement(tagName);\n  },\n\n  /**\n   * Loads script asynchronously.\n   * @param {string} url - The url to load.\n   * @return {Promise} - The loading promise.\n   * @public\n   */\n  loadScriptAsync: function loadScriptAsync(url) {\n    var _this2 = this;\n\n    return new Promise(function (resolve, reject) {\n      var r = false,\n          t = document.getElementsByTagName(\"script\")[0],\n          s = _this2.createElement(\"script\");\n      s.type = \"text/javascript\";\n      s.src = url;\n      s.async = true;\n      s.onload = s.onreadystatechange = function () {\n        if (!r && (!this.readyState || this.readyState === \"complete\")) {\n          r = true;\n          resolve(this);\n        }\n      };\n      s.onerror = s.onabort = reject;\n      if (t && t.parentNode) {\n        t.parentNode.insertBefore(s, t);\n      }\n    });\n  },\n\n  /**\n   * Returns the first element that matches a specified CSS selector(s) in the document.\n   * @param {string} selector - One or more CSS selectors to match the element.\n   * @returns {Element} - The first element that matches a specified CSS selector(s) in the document.\n   */\n  getElementBySelector: function getElementBySelector(selector) {\n    try {\n      return document.querySelector(selector);\n    } catch (e) {\n      return;\n    }\n  },\n\n  /**\n   * Inserts a node as a child, right before an existing child.\n   * @param {HTMLElement} parent -  The parent node object.\n   * @param {HTMLElement} newChild -  The node object to insert.\n   * @param {?HTMLElement} existingChild - The child node to insert the new node before. If set to null, the insertBefore method will insert the newChild at the end.\n   * @returns {Element} - The first element that matches a specified CSS selector(s) in the document.\n   */\n  insertBefore: function insertBefore(parent, newChild, existingChild) {\n    try {\n      return parent.insertBefore(newChild, existingChild);\n    } catch (e) {\n      return null;\n    }\n  }\n};\n\nvar _Http = {\n  execute: function execute(url, params) {\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"POST\";\n    var headers = arguments[3];\n\n    var request = new XMLHttpRequest();\n    return new Promise(function (resolve, reject) {\n      request.onreadystatechange = function () {\n        if (request.readyState === 4) {\n          if (request.status === 200) {\n            try {\n              var jsonResponse = JSON.parse(request.responseText);\n              resolve(jsonResponse);\n            } catch (e) {\n              resolve(request.responseText);\n            }\n          } else {\n            reject(request.responseText);\n          }\n        }\n      };\n      request.open(method, url);\n      if (headers) {\n        headers.forEach(function (value, key) {\n          request.setRequestHeader(key, value);\n        });\n      }\n      request.send(params);\n    });\n  },\n  jsonp: _jsonp.jsonp\n};\n\nexports.Number = _Number;\nexports.String = _String;\nexports.Object = _Object;\nexports.Generator = _Generator;\nexports.Dom = _Dom;\nexports.Http = _Http;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CustomEventType = exports.Html5EventType = exports.EventType = undefined;\n\nvar _util = __webpack_require__(3);\n\nvar Utils = _interopRequireWildcard(_util);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar Html5EventType = {\n  /**\n   * Fires when the loading of an audio/video is aborted\n   */\n  ABORT: 'abort',\n  /**\n   * Fires when the browser can start playing the audio/video\n   */\n  CAN_PLAY: 'canplay',\n  /**\n   * Fires when the browser can play through the audio/video without stopping for buffering\n   */\n  CAN_PLAY_THROUGH: 'canplaythrough',\n  /**\n   * Fires when the duration of the audio/video is changed\n   */\n  DURATION_CHANGE: 'durationchange',\n  /**\n   * Fires when the current playlist is empty\n   */\n  EMPTIED: 'emptied',\n  /**\n   * Fires when the current playlist is ended\n   */\n  ENDED: 'ended',\n  /**\n   * Fires when an error occurred during the loading of an audio/video\n   */\n  ERROR: 'error',\n  /**\n   * Fires when the browser has loaded the current frame of the audio/video\n   */\n  LOADED_DATA: 'loadeddata',\n  /**\n   * Fires when the browser has loaded meta data for the audio/video\n   */\n  LOADED_METADATA: 'loadedmetadata',\n  /**\n   * Fires when the browser starts looking for the audio/video\n   */\n  LOAD_START: 'loadstart',\n  /**\n   * Fires when the audio/video has been paused\n   */\n  PAUSE: 'pause',\n  /**\n   * Fires when the audio/video has been started or is no longer paused\n   */\n  PLAY: 'play',\n  /**\n   * Fires when the audio/video is playing after having been paused or stopped for buffering\n   */\n  PLAYING: 'playing',\n  /**\n   * Fires when the browser is downloading the audio/video\n   */\n  PROGRESS: 'progress',\n  /**\n   * Fires when the playing speed of the audio/video is changed\n   */\n  RATE_CHANGE: 'ratechange',\n  /**\n   * Fires when the user is finished moving/skipping to a new position in the audio/video\n   */\n  SEEKED: 'seeked',\n  /**\n   * Fires when the user starts moving/skipping to a new position in the audio/video\n   */\n  SEEKING: 'seeking',\n  /**\n   * Fires when the browser is trying to get media data, but data is not available\n   */\n  STALLED: 'stalled',\n  /**\n   * Fires when the browser is intentionally not getting media data\n   */\n  SUSPEND: 'suspend',\n  /**\n   * Fires when the current playback position has changed\n   */\n  TIME_UPDATE: 'timeupdate',\n  /**\n   * Fires when the volume has been changed\n   */\n  VOLUME_CHANGE: 'volumechange',\n  /**\n   * Fires when the video stops because it needs to buffer the next frame\n   */\n  WAITING: 'waiting'\n};\n\n\nvar CustomEventType = {\n  /**\n   * Fires when the media is loaded.\n   */\n  MEDIA_LOADED: 'medialoaded',\n  /**\n   * Fires when the player ends reset operation.\n   */\n  PLAYER_RESET: 'playerreset',\n  /**\n   * Fires when the player ends destroy operation.\n   */\n  PLAYER_DESTROY: 'playerdestroy',\n  /**\n   * Fires when the player enters fullscreen.\n   */\n  ENTER_FULLSCREEN: 'enterfullscreen',\n  /**\n   * Fires when the player exits fullscreen.\n   */\n  EXIT_FULLSCREEN: 'exitfullscreen',\n  /**\n   * Fires when the player received a request to enter fullscreen.\n   */\n  REQUESTED_ENTER_FULLSCREEN: 'requestedenterfullscreen',\n  /**\n   * Fires when the player received a request to exit fullscreen.\n   */\n  REQUESTED_EXIT_FULLSCREEN: 'requestedexitfullscreen',\n  /**\n   * Fires when browser fails to autoplay with sound.\n   */\n  AUTOPLAY_FAILED: 'autoplayfailed',\n  /**\n   * Fires when browser fails to autoplay with sound but start muted autoplay instead.\n   */\n  FALLBACK_TO_MUTED_AUTOPLAY: 'fallbacktomutedautoplay',\n  /**\n   * Fires when change source flow started.\n   */\n  CHANGE_SOURCE_STARTED: 'changesourcestarted',\n  /**\n   * Fires when change source flow ended.\n   */\n  CHANGE_SOURCE_ENDED: 'changesourceended',\n  /**\n   * Fires when the volume has been muted/unmute.\n   */\n  MUTE_CHANGE: 'mutechange',\n  /**\n   * Fires when the active video track has been changed.\n   */\n  VIDEO_TRACK_CHANGED: 'videotrackchanged',\n  /**\n   * Fires when the active audio track has been changed.\n   */\n  AUDIO_TRACK_CHANGED: 'audiotrackchanged',\n  /**\n   * Fires when the active text track has been changed.\n   */\n  TEXT_TRACK_CHANGED: 'texttrackchanged',\n  /**\n   * Fires when the active text track cue has changed.\n   */\n  TEXT_CUE_CHANGED: 'textcuechanged',\n  /**\n   * Fires when the player tracks have been changed.\n   */\n  TRACKS_CHANGED: 'trackschanged',\n  /**\n   * Fires when the abr mode change from 'auto' to 'manual' or vice versa.\n   */\n  ABR_MODE_CHANGED: 'abrmodechanged',\n  /**\n   * Fires when the player state has been changed.\n   */\n  PLAYER_STATE_CHANGED: 'playerstatechanged',\n  /**\n   * Fires on the first play.\n   */\n  FIRST_PLAY: 'firstplay',\n  /**\n   * Fires on the first time that playback has been started.\n   */\n  PLAYBACK_STARTED: 'playbackstarted',\n  /**\n   * Fires when the player has selected the source to play.\n   */\n  SOURCE_SELECTED: 'sourceselected',\n  /**\n   * Fires when the text track style has changed.\n   */\n  TEXT_STYLE_CHANGED: 'textstylechanged',\n  /**\n   * Fired when ad data is available.\n   */\n  AD_LOADED: 'adloaded',\n  /**\n   * Fired when the ad starts playing.\n   */\n  AD_STARTED: 'adstarted',\n  /**\n   * Fired when the ad is resumed.\n   */\n  AD_RESUMED: 'adresumed',\n  /**\n   * Fired when the ad is paused.\n   */\n  AD_PAUSED: 'adpaused',\n  /**\n   * Fired when the ad is clicked.\n   */\n  AD_CLICKED: 'adclicked',\n  /**\n   * Fired when the ad is skipped by the user.\n   */\n  AD_SKIPPED: 'adskipped',\n  /**\n   * Fired when the ad completes playing.\n   */\n  AD_COMPLETED: 'adcompleted',\n  /**\n   * Fired when an error occurred while the ad was loading or playing.\n   */\n  AD_ERROR: 'aderror',\n  /**\n   * Fired when the ads manager is done playing all the ads.\n   */\n  ALL_ADS_COMPLETED: 'alladscompleted',\n  /**\n   * Fired when content should be paused. This usually happens right before an ad is about to cover the content.\n   */\n  AD_BREAK_START: 'adbreakstart',\n  /**\n   * Fired when content should be resumed. This usually happens when an ad finishes or collapses.\n   */\n  AD_BREAK_END: 'adbreakend',\n  /**\n   * Fired when the ad playhead crosses first quartile.\n   */\n  AD_FIRST_QUARTILE: 'adfirstquartile',\n  /**\n   * Fired when the ad playhead crosses midpoint.\n   */\n  AD_MIDPOINT: 'admidpoint',\n  /**\n   * Fired when the ad playhead crosses third quartile.\n   */\n  AD_THIRD_QUARTILE: 'adthirdquartile',\n  /**\n   * Fired when the ad is closed by the user.\n   */\n  USER_CLOSED_AD: 'userclosedad',\n  /**\n   * Fired when the ad volume has changed.\n   */\n  AD_VOLUME_CHANGED: 'advolumechanged',\n  /**\n   * Fired when the ad volume has been muted.\n   */\n  AD_MUTED: 'admuted',\n  /**\n   * Fired on ad time progress.\n   */\n  AD_PROGRESS: 'adprogress',\n  /**\n   * Fired when the adapter recovered from a media error\n   */\n  MEDIA_RECOVERED: 'mediarecovered',\n  /**\n   * Fired when the vr stereo mode changed\n   */\n  VR_STEREO_MODE_CHANGED: 'vrstereomodechanged'\n};\n\nvar EventType = Utils.Object.merge([Html5EventType, CustomEventType]);\n\nexports.EventType = EventType;\nexports.Html5EventType = Html5EventType;\nexports.CustomEventType = CustomEventType;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * General track representation of the player.\n * @classdesc\n */\nvar Track = function () {\n  _createClass(Track, [{\n    key: \"id\",\n\n\n    /**\n     * Getter for the track id.\n     * @public\n     * @returns {?string} - The track id.\n     */\n    get: function get() {\n      return this._id;\n    }\n\n    /**\n     * Getter for the active mode of the track.\n     * @public\n     * @returns {boolean} - The active mode of the track.\n     */\n\n  }, {\n    key: \"active\",\n    get: function get() {\n      return this._active;\n    }\n\n    /**\n     * Setter for the active mode of the track.\n     * @public\n     * @param {boolean} value - Whether the track is active or not.\n     */\n    ,\n    set: function set(value) {\n      this._active = value;\n    }\n\n    /**\n     * Getter for the label of the track.\n     * @public\n     * @returns {string} - The label of the track.\n     */\n\n  }, {\n    key: \"label\",\n    get: function get() {\n      return this._label;\n    }\n\n    /**\n     * Getter for the language of the track.\n     * @public\n     * @returns {string} - The language of the track.\n     */\n    ,\n\n\n    /**\n     * Setter for the label of the track.\n     * @public\n     * @param {string} value - The label of the track.\n     */\n    set: function set(value) {\n      this._label = value;\n    }\n\n    /**\n     * @constructor\n     * @param {Object} settings - The track settings object.\n     */\n\n  }, {\n    key: \"language\",\n    get: function get() {\n      return this._language;\n    }\n\n    /**\n     * Getter for the index of the track.\n     * @public\n     * @returns {number} - The index of the track.\n     */\n\n  }, {\n    key: \"index\",\n    get: function get() {\n      return this._index;\n    }\n\n    /**\n     * Setter for the index of the track.\n     * @public\n     * @param {number} value - The index of the track.\n     * @returns {void}\n     */\n    ,\n    set: function set(value) {\n      this._index = value;\n    }\n  }], [{\n    key: \"langComparer\",\n\n    /**\n     * Comparing language strings.\n     * @param {string} inputLang - The configured language.\n     * @param {string} trackLang - The default track language.\n     * @returns {boolean} - Whether the strings are equal or starts with the same substring.\n     */\n    value: function langComparer(inputLang, trackLang) {\n      try {\n        inputLang = inputLang.toLowerCase();\n        trackLang = trackLang.toLowerCase();\n        return inputLang ? inputLang.startsWith(trackLang) || trackLang.startsWith(inputLang) : false;\n      } catch (e) {\n        return false;\n      }\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(track) {\n      return Object.assign(Object.create(Object.getPrototypeOf(track)), track);\n    }\n\n    /**\n     * The id of the track.\n     * @member\n     * @type {string}\n     * @private\n     */\n\n    /**\n     * The active mode of the track.\n     * @member\n     * @type {boolean}\n     * @private\n     */\n\n    /**\n     * The label of the track.\n     * @member\n     * @type {string}\n     * @private\n     */\n\n    /**\n     * The language of the track.\n     * @member\n     * @type {string}\n     * @private\n     */\n\n    /**\n     * The index of the track.\n     * @member\n     * @type {number}\n     * @private\n     */\n\n    /**\n     * The clone function reference.\n     * @member\n     * @type {Function}\n     * @public\n     */\n\n  }]);\n\n  function Track() {\n    var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Track);\n\n    this._id = settings.id;\n    this._active = settings.active;\n    this._label = settings.label;\n    this._language = settings.language;\n    this._index = settings.index;\n    this.clone = Track.clone.bind(null, this);\n  }\n\n  return Track;\n}();\n\nexports.default = Track;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _multiMap = __webpack_require__(14);\n\nvar _multiMap2 = _interopRequireDefault(_multiMap);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Creates a new EventManager. An EventManager maintains a collection of \"event\n * bindings\" between event targets and event listeners.\n *\n * @struct\n * @constructor\n * @implements {IDestroyable}\n */\nvar EventManager = function () {\n  function EventManager() {\n    _classCallCheck(this, EventManager);\n\n    /**\n     * Maps an event type to an array of event bindings.\n     * @private {MultiMap.<!EventManager.Binding_>}\n     */\n    this._bindingMap = new _multiMap2.default();\n  }\n\n  /**\n   * Detaches all event listeners.\n   * @override\n   */\n\n\n  _createClass(EventManager, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.removeAll();\n      this._bindingMap = null;\n      return Promise.resolve();\n    }\n\n    /**\n     * Attaches an event listener to an event target for only one time.\n     * @param {EventTarget} target - The event target.\n     * @param {string} type - The event type.\n     * @param {EventManager.ListenerType} listener - The event listener.\n     * @param {?Object} options - The event options.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'listenOnce',\n    value: function listenOnce(target, type, listener, options) {\n      var _this = this;\n\n      var oneListener = function oneListener(event) {\n        _this.unlisten(target, type, oneListener);\n        listener.call(_this, event);\n      };\n      this.listen(target, type, oneListener, options);\n    }\n\n    /**\n     * Attaches an event listener to an event target.\n     * @param {EventTarget} target The event target.\n     * @param {string} type The event type.\n     * @param {EventManager.ListenerType} listener The event listener.\n     * @param {?Object} options The event options.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'listen',\n    value: function listen(target, type, listener, options) {\n      var binding = new Binding_(target, type, listener, options);\n      if (this._bindingMap) {\n        this._bindingMap.push(type, binding);\n      }\n    }\n\n    /**\n     * Detaches an event listener from an event target.\n     * @param {EventTarget} target The event target.\n     * @param {string} type The event type.\n     * @param {EventManager.ListenerType} [listener] The event listener to detach. If no given, detaches all event listeners of the target and type.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'unlisten',\n    value: function unlisten(target, type, listener) {\n      if (this._bindingMap) {\n        var list = this._bindingMap.get(type);\n\n        for (var i = 0; i < list.length; ++i) {\n          var binding = list[i];\n\n          if (binding.target === target && (binding.listener === listener || !listener)) {\n            binding.unlisten();\n            if (this._bindingMap) {\n              this._bindingMap.remove(type, binding);\n            }\n          }\n        }\n      }\n    }\n\n    /**\n     * Detaches all event listeners from all targets.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'removeAll',\n    value: function removeAll() {\n      if (this._bindingMap) {\n        var listeners = this._bindingMap.getAll();\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = listeners[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var listener = _step.value;\n\n            listener.unlisten();\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        if (this._bindingMap) {\n          this._bindingMap.clear();\n        }\n      }\n    }\n  }]);\n\n  return EventManager;\n}();\n\n/**\n * @typedef {function(!Event)}\n */\n\n\n/**\n * Creates a new Binding_ and attaches the event listener to the event target.\n * @param {EventTarget} target The event target.\n * @param {string} type The event type.\n * @param {EventManager.ListenerType} listener The event listener.\n * @constructor\n * @private\n */\nvar Binding_ = function () {\n  function Binding_(target, type, listener, options) {\n    _classCallCheck(this, Binding_);\n\n    /** @type {EventTarget} */\n    this.target = target;\n\n    /** @type {string} */\n    this.type = type;\n\n    /** @type {?EventManager.ListenerType} */\n    this.listener = listener;\n\n    /** @type {?Object} */\n    this.options = options;\n\n    this.target.addEventListener(type, listener, options);\n  }\n\n  /**\n   * Detaches the event listener from the event target. This does nothing if the\n   * event listener is already detached.\n   * @returns {void}\n   */\n\n\n  _createClass(Binding_, [{\n    key: 'unlisten',\n    value: function unlisten() {\n      if (!this.target) return;\n\n      this.target.removeEventListener(this.type, this.listener, this.options);\n\n      this.target = null;\n      this.listener = null;\n      this.options = null;\n    }\n  }]);\n\n  return Binding_;\n}();\n\nexports.default = EventManager;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TextTrack = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _track = __webpack_require__(5);\n\nvar _track2 = _interopRequireDefault(_track);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Text track representation of the player.\n * @classdesc\n */\nvar TextTrack = function (_Track) {\n  _inherits(TextTrack, _Track);\n\n  _createClass(TextTrack, [{\n    key: 'kind',\n\n\n    /**\n     * Getter for the kind of the text track.\n     * @public\n     * @returns {string} - The kind of the text track.\n     */\n\n    /**\n     * The kind of the text track:\n     * subtitles/captions/metadata.\n     * @member\n     * @type {string}\n     * @private\n     */\n    get: function get() {\n      return this._kind;\n    }\n\n    /**\n     * Getter for the external of the text track.\n     * @public\n     * @returns {boolean} - The kind of the text track.\n     */\n\n    /**\n     * flag to know if it's external or not\n     * @member\n     * @type {boolean}\n     * @private\n     */\n\n  }, {\n    key: 'external',\n    get: function get() {\n      return this._external;\n    }\n\n    /**\n     * @constructor\n     * @param {Object} settings - The track settings object.\n     */\n\n  }]);\n\n  function TextTrack() {\n    var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, TextTrack);\n\n    var _this = _possibleConstructorReturn(this, (TextTrack.__proto__ || Object.getPrototypeOf(TextTrack)).call(this, settings));\n\n    _this._kind = settings.kind;\n    _this._external = settings.external;\n    return _this;\n  }\n\n  return TextTrack;\n}(_track2.default);\n\nexports.default = TextTrack;\nexports.TextTrack = TextTrack;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _env = __webpack_require__(12);\n\nvar _env2 = _interopRequireDefault(_env);\n\nvar _eventManager = __webpack_require__(6);\n\nvar _eventManager2 = _interopRequireDefault(_eventManager);\n\nvar _posterManager = __webpack_require__(33);\n\nvar _posterManager2 = _interopRequireDefault(_posterManager);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _fakeEventTarget = __webpack_require__(9);\n\nvar _fakeEventTarget2 = _interopRequireDefault(_fakeEventTarget);\n\nvar _eventType = __webpack_require__(4);\n\nvar _util = __webpack_require__(3);\n\nvar Utils = _interopRequireWildcard(_util);\n\nvar _locale = __webpack_require__(39);\n\nvar _locale2 = _interopRequireDefault(_locale);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _html = __webpack_require__(40);\n\nvar _html2 = _interopRequireDefault(_html);\n\nvar _pluginManager = __webpack_require__(24);\n\nvar _pluginManager2 = _interopRequireDefault(_pluginManager);\n\nvar _basePlugin = __webpack_require__(17);\n\nvar _basePlugin2 = _interopRequireDefault(_basePlugin);\n\nvar _stateManager = __webpack_require__(48);\n\nvar _stateManager2 = _interopRequireDefault(_stateManager);\n\nvar _track = __webpack_require__(5);\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _videoTrack = __webpack_require__(10);\n\nvar _videoTrack2 = _interopRequireDefault(_videoTrack);\n\nvar _audioTrack = __webpack_require__(11);\n\nvar _audioTrack2 = _interopRequireDefault(_audioTrack);\n\nvar _textTrack = __webpack_require__(7);\n\nvar _textTrack2 = _interopRequireDefault(_textTrack);\n\nvar _textStyle = __webpack_require__(25);\n\nvar _textStyle2 = _interopRequireDefault(_textStyle);\n\nvar _vttCue = __webpack_require__(15);\n\nvar _textTrackDisplay = __webpack_require__(16);\n\nvar _stateType = __webpack_require__(18);\n\nvar _trackType = __webpack_require__(13);\n\nvar _labelToTrackMap = __webpack_require__(50);\n\nvar _streamType = __webpack_require__(26);\n\nvar _engineType = __webpack_require__(27);\n\nvar _mediaType = __webpack_require__(28);\n\nvar _abrModeType = __webpack_require__(29);\n\nvar _playbackMiddleware = __webpack_require__(52);\n\nvar _playbackMiddleware2 = _interopRequireDefault(_playbackMiddleware);\n\nvar _playerConfig = __webpack_require__(54);\n\nvar _playerConfig2 = _interopRequireDefault(_playerConfig);\n\n__webpack_require__(55);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nvar _externalCaptionsHandler = __webpack_require__(60);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * The player playback rates.\n * @type {Array<number>}\n * @const\n */\nvar PLAYBACK_RATES = [0.5, 1, 2, 4];\n\n/**\n * The player default playback rate.\n * @type {number}\n * @const\n */\nvar DEFAULT_PLAYBACK_RATE = 1;\n/**\n * The black cover class name.\n * @type {string}\n * @const\n */\nvar BLACK_COVER_CLASS_NAME = 'playkit-black-cover';\n/**\n * The player container class name.\n * @type {string}\n * @const\n */\nvar CONTAINER_CLASS_NAME = 'playkit-container';\n\n/**\n /**\n * The player poster class name.\n * @type {string}\n * @const\n */\nvar POSTER_CLASS_NAME = 'playkit-poster';\n\n/**\n * The engine class name.\n * @type {string}\n * @const\n */\nvar ENGINE_CLASS_NAME = 'playkit-engine';\n\n/**\n * The text style id.\n * @type {string}\n * @const\n */\nvar SUBTITLES_STYLE_ID_NAME = 'playkit-subtitles-style';\n\n/**\n * The subtitles class name.\n * @type {string}\n * @const\n */\nvar SUBTITLES_CLASS_NAME = 'playkit-subtitles';\n\n/**\n *  The auto string, for captions\n *  @type {string}\n *  @const\n */\nvar AUTO = 'auto';\n\n/**\n *  The off string, for captions\n *  @type {string}\n *  @const\n */\nvar OFF = 'off';\n\n/**\n *  The duration offset, for seeking to duration safety.\n *  @type {number}\n *  @const\n */\nvar DURATION_OFFSET = 0.1;\n\n/**\n * The toggle fullscreen rendering timeout value\n * @type {number}\n * @const\n */\nvar REPOSITION_CUES_TIMEOUT = 1000;\n\n/**\n * The HTML5 player class.\n * @classdesc\n */\n\nvar Player = function (_FakeEventTarget) {\n  _inherits(Player, _FakeEventTarget);\n\n  _createClass(Player, null, [{\n    key: 'runCapabilities',\n\n\n    /**\n     * Runs the engines capabilities tests.\n     * @returns {void}\n     * @public\n     * @static\n     */\n\n    /**\n     * The available engines of the player.\n     * @type {Array<typeof IEngine>}\n     * @private\n     * @static\n     */\n    value: function runCapabilities() {\n      Player._logger.debug(\"Running player capabilities\");\n      Player._engines.forEach(function (Engine) {\n        return Engine.runCapabilities();\n      });\n    }\n\n    /**\n     * Gets the engines capabilities.\n     * @param {?string} engineType - The engine type.\n     * @return {Promise<Object>} - The engines capabilities object.\n     * @public\n     * @static\n     */\n\n    /**\n     * The player capabilities result object.\n     * @type {Object}\n     * @private\n     * @static\n     */\n\n    /**\n     * The player class logger.\n     * @type {any}\n     * @static\n     * @private\n     */\n\n  }, {\n    key: 'getCapabilities',\n    value: function getCapabilities(engineType) {\n      Player._logger.debug(\"Get player capabilities\", engineType);\n      var promises = [];\n      Player._engines.forEach(function (Engine) {\n        return promises.push(Engine.getCapabilities());\n      });\n      return Promise.all(promises).then(function (arrayOfResults) {\n        var playerCapabilities = {};\n        arrayOfResults.forEach(function (res) {\n          return Object.assign(playerCapabilities, res);\n        });\n        Utils.Object.mergeDeep(playerCapabilities, Player._playerCapabilities);\n        return engineType ? playerCapabilities[engineType] : playerCapabilities;\n      });\n    }\n\n    /**\n     * Sets an engine capabilities.\n     * @param {string} engineType - The engine type.\n     * @param {Object} capabilities - The engine capabilities.\n     * @returns {void}\n     * @public\n     * @static\n     */\n\n  }, {\n    key: 'setCapabilities',\n    value: function setCapabilities(engineType, capabilities) {\n      Player._logger.debug(\"Set player capabilities\", engineType, capabilities);\n      Player._playerCapabilities[engineType] = Utils.Object.mergeDeep({}, Player._playerCapabilities[engineType], capabilities);\n    }\n\n    /**\n     * For browsers which block auto play, use the user gesture to open the video element and enable playing via API.\n     * @returns {void}\n     * @private\n     * @static\n     */\n\n  }, {\n    key: '_prepareVideoElement',\n    value: function _prepareVideoElement() {\n      Player._engines.forEach(function (Engine) {\n        Engine.prepareVideoElement();\n      });\n    }\n\n    /**\n     * The plugin manager of the player.\n     * @type {PluginManager}\n     * @private\n     */\n\n    /**\n     * The event manager of the player.\n     * @type {EventManager}\n     * @private\n     */\n\n    /**\n     * The poster manager of the player.\n     * @type {PosterManager}\n     * @private\n     */\n\n    /**\n     * The runtime configuration of the player.\n     * @type {Object}\n     * @private\n     */\n\n    /**\n     * The playback engine.\n     * @type {IEngine}\n     * @private\n     */\n\n    /**\n     * The state manager of the player.\n     * @type {StateManager}\n     * @private\n     */\n\n    /**\n     * The tracks of the player.\n     * @type {Array<Track>}\n     * @private\n     */\n\n    /**\n     * The player ready promise\n     * @type {Promise<*>}\n     * @private\n     */\n\n    /**\n     * Whether the play is the first or not\n     * @type {boolean}\n     * @private\n     */\n\n    /**\n     * Whether the playback started for the first time\n     * @type {boolean}\n     * @private\n     */\n\n    /**\n     * The player DOM element container.\n     * @type {HTMLDivElement}\n     * @private\n     */\n\n    /**\n     * The player text DOM element container.\n     * @type {HTMLDivElement}\n     * @private\n     */\n\n    /**\n     * The player black cover div.\n     * @type {HTMLDivElement}\n     * @private\n     */\n\n    /**\n     * The player DOM id.\n     * @type {string}\n     * @private\n     */\n\n    /**\n     * The player last updated text cues list\n     * @type {Array<any>}\n     * @private\n     */\n\n    /**\n     * The player text disaply settings\n     * @type {Object}\n     * @private\n     */\n\n    /**\n     * The current playback attributes state\n     * @type {Object}\n     * @private\n     */\n\n    /**\n     * The player text style settings\n     * @type {TextStyle}\n     * @private\n     */\n\n    /**\n     * The playback middleware of the player.\n     * @type {PlaybackMiddleware}\n     * @private\n     */\n\n    /**\n     * The environment(os,device,browser) object of the player.\n     * @type {Object}\n     * @private\n     */\n\n    /**\n     * The currently selected engine type\n     * @type {string}\n     * @private\n     */\n\n    /**\n     * The currently selected stream type\n     * @type {string}\n     * @private\n     */\n\n  }]);\n\n  /**\n   * @param {Object} config - The configuration for the player instance.\n   * @constructor\n   */\n\n  /**\n   * Fullscreen indicator flag\n   * @private\n   */\n\n  /**\n   * holds false or an id for the timeout the reposition the text cues after togelling full screen\n   * @type {any}\n   * @private\n   */\n\n  /**\n   * Whether a load media request has sent, the player should wait to media.\n   * @type {boolean}\n   * @private\n   */\n\n  /**\n   * Whether the player is loading a source.\n   * @type {boolean}\n   * @private\n   */\n\n  /**\n   * Reset indicator state.\n   * @type {boolean}\n   * @private\n   */\n\n  /**\n   * Destroyed indicator state.\n   * @type {boolean}\n   * @private\n   */\n\n  /**\n   * Fallback to muted auto play mode indicator.\n   * @type {boolean}\n   * @private\n   */\n\n  /**\n   * holds the external tracks handler controller\n   * @type {ExternalCaptionsHandler}\n   * @private\n   */\n  function Player() {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Player);\n\n    var _this = _possibleConstructorReturn(this, (Player.__proto__ || Object.getPrototypeOf(Player)).call(this));\n\n    _this._activeTextCues = [];\n    _this._textDisplaySettings = {};\n    _this._playbackAttributesState = {\n      muted: undefined,\n      volume: undefined,\n      rate: undefined,\n      audioLanguage: \"\",\n      textLanguage: \"\"\n    };\n\n    _this._env = _env2.default;\n    _this._tracks = [];\n    _this._firstPlay = true;\n    _this._fullscreen = false;\n    _this._repositionCuesTimeout = false;\n    _this._loadingMedia = false;\n    _this._loading = false;\n    _this._playbackStarted = false;\n    _this._reset = true;\n    _this._destroyed = false;\n    _this._fallbackToMutedAutoPlay = false;\n    _this._config = Player._defaultConfig;\n    _this._eventManager = new _eventManager2.default();\n    _this._posterManager = new _posterManager2.default();\n    _this._stateManager = new _stateManager2.default(_this);\n    _this._pluginManager = new _pluginManager2.default();\n    _this._playbackMiddleware = new _playbackMiddleware2.default();\n    _this._textStyle = new _textStyle2.default();\n    _this._createReadyPromise();\n    _this._createPlayerContainer();\n    _this._appendDomElements();\n    _this._externalCaptionsHandler = new _externalCaptionsHandler.ExternalCaptionsHandler(_this);\n    _this.configure(config);\n    return _this;\n  }\n\n  // <editor-fold desc=\"Public API\">\n\n  // <editor-fold desc=\"Playback API\">\n\n  /**\n   * Configures the player according to a given configuration.\n   * @param {Object} config - The configuration for the player instance.\n   * @returns {void}\n   */\n\n\n  _createClass(Player, [{\n    key: 'configure',\n    value: function configure() {\n      var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (config.logLevel && _logger.LogLevel[config.logLevel]) {\n        (0, _logger.setLogLevel)(_logger.LogLevel[config.logLevel]);\n      }\n      if (this._hasSources(config.sources)) {\n        this._configureOrLoadPlugins(config.plugins);\n        var receivedSourcesWhenHasEngine = !!this._engine;\n        if (receivedSourcesWhenHasEngine) {\n          this.reset();\n          Player._logger.debug('Change source started');\n          this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.CHANGE_SOURCE_STARTED));\n        }\n        Utils.Object.mergeDeep(this._config, config);\n        this._reset = false;\n        if (this._selectEngineByPriority()) {\n          this._appendEngineEl();\n          this._attachMedia();\n          this._handlePlaybackOptions();\n          this._posterManager.setSrc(this._config.sources.poster);\n          this._handlePreload();\n          this._handleAutoPlay();\n          if (receivedSourcesWhenHasEngine) {\n            Player._logger.debug('Change source ended');\n            this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.CHANGE_SOURCE_ENDED));\n          }\n        }\n      } else {\n        Utils.Object.mergeDeep(this._config, config);\n        this._configureOrLoadPlugins(config.plugins);\n      }\n    }\n\n    /**\n     * The player readiness\n     * @public\n     * @returns {Promise<*>} - The ready promise\n     */\n\n  }, {\n    key: 'ready',\n    value: function ready() {\n      return this._readyPromise ? this._readyPromise : Promise.resolve();\n    }\n\n    /**\n     * Load media\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'load',\n    value: function load() {\n      var _this2 = this;\n\n      var resetFlags = function resetFlags() {\n        _this2._loading = false;\n        _this2._reset = false;\n      };\n      if (this._engine && !this.src && !this._loading) {\n        this._loading = true;\n        var startTime = this._config.playback.startTime;\n        this._engine.load(startTime).then(function (data) {\n          _this2._updateTracks(data.tracks);\n          _this2._maybeSetTracksLabels();\n          _this2._setDefaultTracks();\n          _this2.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.TRACKS_CHANGED, { tracks: _this2._tracks }));\n          resetFlags();\n        }).catch(function (error) {\n          _this2.dispatchEvent(new _fakeEvent2.default(_eventType.Html5EventType.ERROR, error));\n          resetFlags();\n        });\n      }\n    }\n\n    /**\n     * Checks for callbacks that should change the tracks, and call them on the\n     * respective track group (audio/text/video)\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_maybeSetTracksLabels',\n    value: function _maybeSetTracksLabels() {\n      var customLabels = this._config.customLabels;\n      if (customLabels) {\n        for (var callbackType in customLabels) {\n          this._setTracksCustomLabels(this._getTracksByType(_labelToTrackMap.LabelToTrackMap[callbackType]), customLabels[callbackType]);\n        }\n      }\n    }\n\n    /**\n     *\n     * @param {Array<Track>} tracks - tracks\n     * @param {Function} callback - application label callback, returns a string\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_setTracksCustomLabels',\n    value: function _setTracksCustomLabels(tracks, callback) {\n      tracks.forEach(function (track) {\n        var result = callback(Utils.Object.copyDeep(track));\n        if (result) {\n          track.label = result;\n        }\n      });\n    }\n\n    /**\n     * Start/resume playback.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'play',\n    value: function play() {\n      var _this3 = this;\n\n      if (this._engine) {\n        this._playbackMiddleware.play(function () {\n          return _this3._play();\n        });\n      } else if (this._loadingMedia) {\n        // load media requested but the response is delayed\n        Player._prepareVideoElement();\n        this._playbackMiddleware.play(function () {\n          return _this3._playAfterAsyncMiddleware();\n        });\n      } else {\n        this.dispatchEvent(new _fakeEvent2.default(_eventType.Html5EventType.ERROR, new _error2.default(_error2.default.Severity.CRITICAL, _error2.default.Category.PLAYER, _error2.default.Code.NO_SOURCE_PROVIDED, \"No Source Provided\")));\n      }\n    }\n\n    /**\n     * Pause playback.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'pause',\n    value: function pause() {\n      if (this._engine) {\n        this._playbackMiddleware.pause(this._pause.bind(this));\n      }\n    }\n\n    /**\n     * Gets the view of the player (i.e the dom container object).\n     * @return {HTMLElement} - The dom container.\n     * @public\n     */\n\n  }, {\n    key: 'getView',\n    value: function getView() {\n      return this._el;\n    }\n\n    /**\n     * @returns {HTMLVideoElement} - The video element.\n     * @public\n     */\n\n  }, {\n    key: 'getVideoElement',\n    value: function getVideoElement() {\n      if (this._engine) {\n        return this._engine.getVideoElement();\n      }\n    }\n\n    /**\n     * Resets the necessary components before change media.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      if (this._reset) return;\n      this.pause();\n      this._config.sources = {};\n      this._eventManager.removeAll();\n      this._createReadyPromise();\n      this._activeTextCues = [];\n      this._updateTextDisplay([]);\n      this._tracks = [];\n      this._resetStateFlags();\n      this._engineType = '';\n      this._streamType = '';\n      this._posterManager.reset();\n      this._stateManager.reset();\n      this._pluginManager.reset();\n      this._externalCaptionsHandler.reset();\n      this._engine.reset();\n      this._showBlackCover();\n      this._reset = true;\n      this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.PLAYER_RESET));\n    }\n\n    /**\n     * Destroys the player.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      if (this._destroyed) return;\n      if (this._engine) {\n        this._engine.destroy();\n      }\n      this._externalCaptionsHandler.destroy();\n      this._posterManager.destroy();\n      this._eventManager.destroy();\n      this._pluginManager.destroy();\n      this._stateManager.destroy();\n      this._activeTextCues = [];\n      this._textDisplaySettings = {};\n      this._config = {};\n      this._tracks = [];\n      this._engineType = '';\n      this._streamType = '';\n      this._readyPromise = null;\n      this._resetStateFlags();\n      this._playbackAttributesState = {};\n      if (this._el) {\n        Utils.Dom.removeChild(this._el.parentNode, this._el);\n      }\n      this._destroyed = true;\n      this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.PLAYER_DESTROY));\n    }\n\n    /**\n     * Get the first buffered range of the engine.\n     * @returns {TimeRanges} - First buffered range of the engine in seconds.\n     * @public\n     */\n\n  }, {\n    key: 'isLive',\n\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Live API\">\n\n    /**\n     * Checking if the current playback is live.\n     * @function isLive\n     * @returns {boolean} - Whether playback is live.\n     * @public\n     */\n    value: function isLive() {\n      return !!(this._config.sources.type === _mediaType.MediaType.LIVE || this._engine && this._engine.isLive());\n    }\n\n    /**\n     * Checking if the current live playback has DVR window.\n     * @function isDvr\n     * @returns {boolean} - Whether live playback has DVR window.\n     * @public\n     */\n\n  }, {\n    key: 'isDvr',\n    value: function isDvr() {\n      return this.isLive() && this._config.sources.dvr;\n    }\n\n    /**\n     * Seeking to live edge.\n     * @function seekToLiveEdge\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'seekToLiveEdge',\n    value: function seekToLiveEdge() {\n      if (this._engine && this.isLive()) {\n        this._engine.seekToLiveEdge();\n      }\n    }\n\n    /**\n     * Get the start time of DVR window in live playback in seconds.\n     * @returns {Number} - start time of DVR window.\n     * @public\n     */\n\n  }, {\n    key: 'getStartTimeOfDvrWindow',\n    value: function getStartTimeOfDvrWindow() {\n      return this._engine ? this._engine.getStartTimeOfDvrWindow() : 0;\n    }\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Tracks API\">\n\n    /**\n     * Returns the tracks according to the filter. if no filter given returns the all tracks.\n     * @function getTracks\n     * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n     * @returns {Array<Track>} - The parsed tracks.\n     * @public\n     */\n\n  }, {\n    key: 'getTracks',\n    value: function getTracks(type) {\n      return Utils.Object.copyDeep(this._getTracksByType(type));\n    }\n\n    /**\n     * Get an object includes the active video/audio/text tracks\n     * @return {{video: VideoTrack, audio: AudioTrack, text: TextTrack}} - The active tracks object\n     */\n\n  }, {\n    key: 'getActiveTracks',\n    value: function getActiveTracks() {\n      return Utils.Object.copyDeep({\n        video: this._getTracksByType(_trackType.TrackType.VIDEO).find(function (track) {\n          return track.active;\n        }),\n        audio: this._getTracksByType(_trackType.TrackType.AUDIO).find(function (track) {\n          return track.active;\n        }),\n        text: this._getTracksByType(_trackType.TrackType.TEXT).find(function (track) {\n          return track.active;\n        })\n      });\n    }\n\n    /**\n     * Select a track\n     * @function selectTrack\n     * @param {?Track} track - the track to select\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'selectTrack',\n    value: function selectTrack(track) {\n      if (this._engine) {\n        if (track instanceof _videoTrack2.default) {\n          this._engine.selectVideoTrack(track);\n        } else if (track instanceof _audioTrack2.default) {\n          this._engine.selectAudioTrack(track);\n        } else if (track instanceof _textTrack2.default) {\n          if (track.language === OFF) {\n            this.hideTextTrack();\n            this._externalCaptionsHandler.hideTextTrack();\n            this._playbackAttributesState.textLanguage = OFF;\n          } else if (track.external && !this._config.playback.useNativeTextTrack) {\n            this._engine.hideTextTrack();\n            this._externalCaptionsHandler.selectTextTrack(track);\n          } else {\n            this._externalCaptionsHandler.hideTextTrack();\n            this._engine.selectTextTrack(track);\n          }\n        }\n      }\n    }\n\n    /**\n     * Hide the text track\n     * @function hideTextTrack\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'hideTextTrack',\n    value: function hideTextTrack() {\n      if (this._engine) {\n        this._engine.hideTextTrack();\n        this._activeTextCues = [];\n        this._updateTextDisplay([]);\n        var textTracks = this._getTracksByType(_trackType.TrackType.TEXT);\n        textTracks.map(function (track) {\n          return track.active = false;\n        });\n        var textTrack = textTracks.find(function (track) {\n          return track.language === OFF;\n        });\n        if (textTrack) {\n          textTrack.active = true;\n          this._maybeDispatchTracksChanged(new _fakeEvent2.default(_eventType.CustomEventType.TEXT_TRACK_CHANGED, { selectedTextTrack: textTrack }));\n        }\n      }\n    }\n\n    /**\n     * Enables adaptive bitrate switching.\n     * @function enableAdaptiveBitrate\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'enableAdaptiveBitrate',\n    value: function enableAdaptiveBitrate() {\n      if (this._engine) {\n        this._engine.enableAdaptiveBitrate();\n      }\n    }\n\n    /**\n     * Checking if adaptive bitrate switching is enabled.\n     * @function isAdaptiveBitrateEnabled\n     * @returns {boolean} - Whether adaptive bitrate is enabled.\n     * @public\n     */\n\n  }, {\n    key: 'isAdaptiveBitrateEnabled',\n    value: function isAdaptiveBitrateEnabled() {\n      if (this._engine) {\n        return this._engine.isAdaptiveBitrateEnabled();\n      }\n      return false;\n    }\n\n    /**\n     * update the text display settings\n     * @param {Object} settings - text cue display settings\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'setTextDisplaySettings',\n    value: function setTextDisplaySettings(settings) {\n      this._textDisplaySettings = settings;\n      this._updateCueDisplaySettings();\n      for (var i = 0; i < this._activeTextCues.length; i++) {\n        this._activeTextCues[i].hasBeenReset = true;\n      }\n      this._updateTextDisplay(this._activeTextCues);\n    }\n\n    /**\n     * Sets style attributes for text tracks.\n     * @param {TextStyle} style - text styling settings\n     * @returns {void}\n     */\n\n  }, {\n    key: 'skipAd',\n\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Ads API\">\n\n    /**\n     * Skip on an ad.\n     * @public\n     * @returns {void}\n     */\n    value: function skipAd() {\n      var adsPlugin = this._pluginManager.get('ima');\n      if (adsPlugin && typeof adsPlugin.skipAd === 'function') {\n        adsPlugin.skipAd();\n      }\n    }\n\n    /**\n     * Start to play ad on demand.\n     * @param {string} adTagUrl - The ad tag url to play.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'playAdNow',\n    value: function playAdNow(adTagUrl) {\n      var adsPlugin = this._pluginManager.get('ima');\n      if (adsPlugin && typeof adsPlugin.playAdNow === 'function') {\n        adsPlugin.playAdNow(adTagUrl);\n      }\n    }\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Fullscreen API\">\n\n    /**\n     * @returns {boolean} - Whether the player is in fullscreen mode.\n     * @public\n     */\n\n  }, {\n    key: 'isFullscreen',\n    value: function isFullscreen() {\n      return this._fullscreen;\n    }\n\n    /**\n     * Notify the player that the ui application entered to fullscreen.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'notifyEnterFullscreen',\n    value: function notifyEnterFullscreen() {\n      if (!this._fullscreen) {\n        this._fullscreen = true;\n        this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.ENTER_FULLSCREEN));\n      }\n    }\n\n    /**\n     * Notify the player that the ui application exited from fullscreen.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'notifyExitFullscreen',\n    value: function notifyExitFullscreen() {\n      if (this._fullscreen) {\n        this._fullscreen = false;\n        this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.EXIT_FULLSCREEN));\n      }\n    }\n\n    /**\n     * Request the player to enter fullscreen.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'enterFullscreen',\n    value: function enterFullscreen() {\n      if (!this._fullscreen) {\n        this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.REQUESTED_ENTER_FULLSCREEN));\n      }\n    }\n\n    /**\n     * Request the player to exit fullscreen.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'exitFullscreen',\n    value: function exitFullscreen() {\n      if (this._fullscreen) {\n        this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.REQUESTED_EXIT_FULLSCREEN));\n      }\n    }\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"VR API\">\n\n    /**\n     * Checking if the selected source is VR.\n     * @returns {boolean} - Whether is VR.\n     * @public\n     */\n\n  }, {\n    key: 'isVr',\n    value: function isVr() {\n      return !!this._config.sources.vr;\n    }\n\n    /**\n     * Toggling the VR mode\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'toggleVrStereoMode',\n    value: function toggleVrStereoMode() {\n      var vrPlugin = this._pluginManager.get('vr');\n      if (vrPlugin && typeof vrPlugin.toggleVrStereoMode === 'function') {\n        vrPlugin.toggleVrStereoMode();\n      }\n    }\n\n    /**\n     * Checking if the VR stereo mode is active.\n     * @returns {boolean} - Whether is active.\n     * @public\n     */\n\n  }, {\n    key: 'isInVrStereoMode',\n    value: function isInVrStereoMode() {\n      var vrPlugin = this._pluginManager.get('vr');\n      if (vrPlugin && typeof vrPlugin.isInStereoMode === 'function') {\n        return vrPlugin.isInStereoMode();\n      }\n      return false;\n    }\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Logger API\">\n\n    /**\n     * get the log level\n     * @param {?string} name - the logger name\n     * @returns {Object} - the log level\n     */\n\n  }, {\n    key: 'getLogLevel',\n    value: function getLogLevel(name) {\n      return (0, _logger.getLogLevel)(name);\n    }\n\n    /**\n     * sets the logger level\n     * @param {Object} level - the log level\n     * @param {?string} name - the logger name\n     * @returns {void}\n     */\n\n  }, {\n    key: 'setLogLevel',\n    value: function setLogLevel(level, name) {\n      (0, _logger.setLogLevel)(level, name);\n    }\n\n    // </editor-fold>\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Private Methods\">\n\n    // <editor-fold desc=\"Playback\">\n\n    /**\n     * Check if sources has been received.\n     * @param {Object} sources - sources config object.\n     * @returns {boolean} - Whether sources has been received to the player.\n     * @private\n     */\n\n  }, {\n    key: '_hasSources',\n    value: function _hasSources(sources) {\n      if (sources) {\n        return !!Object.values(_streamType.StreamType).find(function (type) {\n          return sources[type] && sources[type].length > 0;\n        });\n      }\n      return false;\n    }\n\n    /**\n     * Creates the player container.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_createPlayerContainer',\n    value: function _createPlayerContainer() {\n      var el = this._el = Utils.Dom.createElement(\"div\");\n      Utils.Dom.addClassName(el, CONTAINER_CLASS_NAME);\n      this._playerId = Utils.Generator.uniqueId(5);\n      Utils.Dom.setAttribute(el, \"id\", this._playerId);\n      Utils.Dom.setAttribute(el, \"tabindex\", '-1');\n    }\n\n    /**\n     * Appends the engine's video element to the player's div container.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_appendEngineEl',\n    value: function _appendEngineEl() {\n      if (this._el && this._engine) {\n        var engineEl = this._engine.getVideoElement();\n        var classname = '' + ENGINE_CLASS_NAME;\n        Utils.Dom.addClassName(engineEl, classname);\n        var classnameWithId = ENGINE_CLASS_NAME + '-' + this._engine.id;\n        Utils.Dom.addClassName(engineEl, classnameWithId);\n        Utils.Dom.prependTo(engineEl, this._el);\n      }\n    }\n\n    /**\n     * Appends DOM elements by the following priority:\n     * 1. poster (strongest)\n     * 2. black screen\n     * 3. subtitles (weakest)\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_appendDomElements',\n    value: function _appendDomElements() {\n      // Append playkit-subtitles\n      this._textDisplayEl = Utils.Dom.createElement(\"div\");\n      Utils.Dom.addClassName(this._textDisplayEl, SUBTITLES_CLASS_NAME);\n      Utils.Dom.appendChild(this._el, this._textDisplayEl);\n      // Append playkit-black-cover\n      this._blackCoverEl = Utils.Dom.createElement(\"div\");\n      Utils.Dom.addClassName(this._blackCoverEl, BLACK_COVER_CLASS_NAME);\n      Utils.Dom.appendChild(this._el, this._blackCoverEl);\n      // Append playkit-poster\n      var el = this._posterManager.getElement();\n      Utils.Dom.addClassName(el, POSTER_CLASS_NAME);\n      Utils.Dom.appendChild(this._el, el);\n    }\n\n    /**\n     * Configures or load the plugins defined in the configuration.\n     * @param {Object} plugins - The new received plugins configuration.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_configureOrLoadPlugins',\n    value: function _configureOrLoadPlugins() {\n      var _this4 = this;\n\n      var plugins = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (plugins) {\n        Object.keys(plugins).forEach(function (name) {\n          // If the plugin is already exists in the registry we are updating his config\n          var plugin = _this4._pluginManager.get(name);\n          if (plugin) {\n            plugin.updateConfig(plugins[name]);\n            _this4._config.plugins[name] = plugin.getConfig();\n          } else {\n            // We allow to load plugins as long as the player has no engine\n            if (!_this4._engine) {\n              try {\n                _this4._pluginManager.load(name, _this4, plugins[name]);\n              } catch (e) {\n                //bounce the plugin load error up\n                _this4.dispatchEvent(e);\n              }\n              var _plugin = _this4._pluginManager.get(name);\n              if (_plugin) {\n                _this4._config.plugins[name] = _plugin.getConfig();\n                if (typeof _plugin.getMiddlewareImpl === \"function\") {\n                  _this4._playbackMiddleware.use(_plugin.getMiddlewareImpl());\n                }\n              }\n            } else {\n              delete _this4._config.plugins[name];\n            }\n          }\n        });\n      }\n    }\n\n    /**\n     * Creates the ready promise.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_createReadyPromise',\n    value: function _createReadyPromise() {\n      var _this5 = this;\n\n      this._readyPromise = new Promise(function (resolve, reject) {\n        _this5._eventManager.listenOnce(_this5, _eventType.CustomEventType.TRACKS_CHANGED, function () {\n          _this5.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.MEDIA_LOADED));\n          resolve();\n        });\n        _this5._eventManager.listen(_this5, _eventType.Html5EventType.ERROR, reject);\n      }).catch(function () {\n        // silence the promise rejection, error is handled by the error event\n      });\n    }\n\n    /**\n     * Selects an engine to play a source according to a given stream priority.\n     * @return {boolean} - Whether a proper engine was found to play the given sources\n     * according to the priority.\n     * @private\n     */\n\n  }, {\n    key: '_selectEngineByPriority',\n    value: function _selectEngineByPriority() {\n      var _this6 = this;\n\n      var streamPriority = this._config.playback.streamPriority;\n      var preferNative = this._config.playback.preferNative;\n      var sources = this._config.sources;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var priority = _step.value;\n\n          var engineId = typeof priority.engine === 'string' ? priority.engine.toLowerCase() : '';\n          var format = typeof priority.format === 'string' ? priority.format.toLowerCase() : '';\n          var Engine = Player._engines.find(function (Engine) {\n            return Engine.id === engineId;\n          });\n          if (Engine) {\n            var formatSources = sources[format];\n            if (formatSources && formatSources.length > 0) {\n              var source = formatSources[0];\n              if (Engine.canPlaySource(source, preferNative[format])) {\n                Player._logger.debug('Source selected: ', formatSources);\n                _this6._loadEngine(Engine, source);\n                _this6._engineType = engineId;\n                _this6._streamType = format;\n                _this6.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.SOURCE_SELECTED, { selectedSource: formatSources }));\n                return {\n                  v: true\n                };\n              }\n            }\n          }\n        };\n\n        for (var _iterator = streamPriority[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ret = _loop();\n\n          if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      Player._logger.warn(\"No playable engines was found to play the given sources\");\n      return false;\n    }\n\n    /**\n     * Loads the selected engine.\n     * @param {IEngine} Engine - The selected engine.\n     * @param {PKMediaSourceObject} source - The selected source object.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_loadEngine',\n    value: function _loadEngine(Engine, source) {\n      if (this._engine) {\n        if (this._engine.id === Engine.id) {\n          this._engine.restore(source, this._config);\n        } else {\n          this._engine.destroy();\n          this._engine = Engine.createEngine(source, this._config);\n        }\n      } else {\n        this._engine = Engine.createEngine(source, this._config);\n      }\n    }\n\n    /**\n     * Listen to all HTML5 defined events and trigger them on the player\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_attachMedia',\n    value: function _attachMedia() {\n      var _this7 = this;\n\n      if (this._engine) {\n        Object.keys(_eventType.Html5EventType).forEach(function (html5Event) {\n          _this7._eventManager.listen(_this7._engine, _eventType.Html5EventType[html5Event], function (event) {\n            return _this7.dispatchEvent(event);\n          });\n        });\n        this._eventManager.listen(this._engine, _eventType.Html5EventType.SEEKED, function () {\n          var browser = _this7._env.browser.name;\n          if (browser === 'Edge' || browser === 'IE') {\n            _this7._removeTextCuePatch();\n          }\n        });\n        this._eventManager.listen(this._engine, _eventType.CustomEventType.VIDEO_TRACK_CHANGED, function (event) {\n          _this7._markActiveTrack(event.payload.selectedVideoTrack);\n          return _this7.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._engine, _eventType.CustomEventType.AUDIO_TRACK_CHANGED, function (event) {\n          _this7.ready().then(function () {\n            return _this7._playbackAttributesState.audioLanguage = event.payload.selectedAudioTrack.language;\n          });\n          _this7._markActiveTrack(event.payload.selectedAudioTrack);\n          _this7._maybeDispatchTracksChanged(event);\n        });\n        this._eventManager.listen(this._engine, _eventType.CustomEventType.TEXT_TRACK_CHANGED, function (event) {\n          return _this7._onTextTrackChanged(event);\n        });\n        this._eventManager.listen(this._engine, _eventType.CustomEventType.TRACKS_CHANGED, function (event) {\n          return _this7._onTracksChanged(event);\n        });\n        this._eventManager.listen(this._engine, _eventType.CustomEventType.TEXT_CUE_CHANGED, function (event) {\n          return _this7._onCueChange(event);\n        });\n        this._eventManager.listen(this._engine, _eventType.CustomEventType.ABR_MODE_CHANGED, function (event) {\n          return _this7.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._engine, _eventType.CustomEventType.AUTOPLAY_FAILED, function (event) {\n          _this7.pause();\n          _this7.dispatchEvent(event);\n        });\n        this._eventManager.listen(this, _eventType.Html5EventType.PLAY, this._onPlay.bind(this));\n        this._eventManager.listen(this, _eventType.Html5EventType.PLAYING, this._onPlaying.bind(this));\n        this._eventManager.listen(this, _eventType.Html5EventType.ENDED, this._onEnded.bind(this));\n        this._eventManager.listen(this, _eventType.CustomEventType.MUTE_CHANGE, function () {\n          _this7._playbackAttributesState.muted = _this7.muted;\n        });\n        this._eventManager.listen(this, _eventType.Html5EventType.VOLUME_CHANGE, function () {\n          _this7._playbackAttributesState.volume = _this7.volume;\n        });\n        this._eventManager.listen(this, _eventType.Html5EventType.RATE_CHANGE, function () {\n          _this7._playbackAttributesState.rate = _this7.playbackRate;\n        });\n        this._eventManager.listen(this, _eventType.CustomEventType.ENTER_FULLSCREEN, function () {\n          _this7._resetTextCuesAndReposition();\n        });\n        this._eventManager.listen(this, _eventType.CustomEventType.EXIT_FULLSCREEN, function () {\n          _this7._resetTextCuesAndReposition();\n        });\n        this._eventManager.listen(this._engine, _eventType.CustomEventType.MEDIA_RECOVERED, function () {\n          _this7._handleRecovered();\n        });\n        this._eventManager.listen(this._externalCaptionsHandler, _eventType.CustomEventType.TEXT_CUE_CHANGED, function (event) {\n          return _this7._onCueChange(event);\n        });\n        this._eventManager.listen(this._externalCaptionsHandler, _eventType.CustomEventType.TEXT_TRACK_CHANGED, function (event) {\n          return _this7._onTextTrackChanged(event);\n        });\n        this._eventManager.listen(this._externalCaptionsHandler, _externalCaptionsHandler.ExternalCaptionsEventType.NATIVE_TEXT_TRACK_ADDED, function () {\n          var getNativeLanguageTrackIndex = function getNativeLanguageTrackIndex(textTrack) {\n            var videoElement = _this7.getVideoElement();\n            return videoElement ? Array.from(videoElement.textTracks).findIndex(function (track) {\n              return track ? track.language === textTrack.language : false;\n            }) : -1;\n          };\n          _this7._getTracksByType(_trackType.TrackType.TEXT).forEach(function (track) {\n            return track.index = getNativeLanguageTrackIndex(track);\n          });\n        });\n      }\n    }\n\n    /**\n     * Dispatches track changed event only if we already started playing.\n     * also dispatch text track changed if it's an external text track. this is done on cases this is the default text\n     * track, and it is loaded and changed when the player is loaded.\n     * @param {FakeEvent} e - The track changed event.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_maybeDispatchTracksChanged',\n    value: function _maybeDispatchTracksChanged(e) {\n      if (this._config.playback.useNativeTextTrack) {\n        this._externalCaptionsHandler.selectTextTrack(e.payload.selectedTextTrack);\n      }\n      if (this._playbackStarted) {\n        this.dispatchEvent(e);\n      }\n    }\n\n    /**\n     * if the media was recovered (after a media failure) then initiate play again (if that was the state before)\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_handleRecovered',\n    value: function _handleRecovered() {\n      if (this._stateManager.currentState.type === _stateType.StateType.PLAYING) {\n        this.play();\n      }\n    }\n\n    /**\n     * The text track changed event object\n     * @param {FakeEvent} event - payload with text track\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_onTextTrackChanged',\n    value: function _onTextTrackChanged(event) {\n      var _this8 = this;\n\n      this.ready().then(function () {\n        return _this8._playbackAttributesState.textLanguage = event.payload.selectedTextTrack.language;\n      });\n      this._markActiveTrack(event.payload.selectedTextTrack);\n      this._maybeDispatchTracksChanged(event);\n    }\n\n    /**\n     * Reset the active cues hasBeenReset = true and then reposition it, timeout here is for the screen to\n     * finish render the fullscreen\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_resetTextCuesAndReposition',\n    value: function _resetTextCuesAndReposition() {\n      var _this9 = this;\n\n      this._updateTextDisplay([]);\n      for (var i = 0; i < this._activeTextCues.length; i++) {\n        this._activeTextCues[i].hasBeenReset = true;\n      }\n      // handling only the last reposition\n      if (this._repositionCuesTimeout) {\n        clearTimeout(this._repositionCuesTimeout);\n      }\n      this._repositionCuesTimeout = setTimeout(function () {\n        (0, _textTrackDisplay.processCues)(window, _this9._activeTextCues, _this9._textDisplayEl);\n        _this9._repositionCuesTimeout = false;\n      }, REPOSITION_CUES_TIMEOUT);\n    }\n\n    /**\n     * Handles the cue text removal issue, when seeking to a time without captions in IE \\ edge the previous captions\n     * are not removed\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_removeTextCuePatch',\n    value: function _removeTextCuePatch() {\n      var _this10 = this;\n\n      var filteredActiveTextCues = this._activeTextCues.filter(function (textCue) {\n        var cueEndTime = textCue._endTime;\n        var cueStartTime = textCue._startTime;\n        var currTime = _this10.currentTime;\n        if (currTime < cueEndTime && currTime > cueStartTime) {\n          return textCue;\n        }\n      });\n      this._updateTextDisplay(filteredActiveTextCues);\n    }\n\n    /**\n     * Handles the playback options, from current state or config.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_handlePlaybackOptions',\n    value: function _handlePlaybackOptions() {\n      this._config.playback = this._config.playback || {};\n      if (typeof this._playbackAttributesState.muted === 'boolean') {\n        this.muted = this._playbackAttributesState.muted;\n      } else if (typeof this._config.playback.muted === 'boolean') {\n        this.muted = this._config.playback.muted;\n      }\n      if (typeof this._playbackAttributesState.volume === 'number') {\n        this.volume = this._playbackAttributesState.volume;\n      } else if (typeof this._config.playback.volume === 'number') {\n        this.volume = this._config.playback.volume;\n      }\n      if (typeof this._config.playback.playsinline === 'boolean') {\n        this.playsinline = this._config.playback.playsinline;\n      }\n    }\n\n    /**\n     * Handles preload.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_handlePreload',\n    value: function _handlePreload() {\n      if (this._config.playback.preload === \"auto\" && !this._config.playback.autoplay && this._canPreload()) {\n        this.load();\n      }\n    }\n\n    /**\n     * If ads plugin enabled it's his responsibility to preload the content player.\n     * So to avoid loading the player twice which can cause errors on MSEs we are not\n     * calling load from the player.\n     * TODO: Change it to check the ads configuration when we will develop the ads manager.\n     * @returns {boolean} - Whether the player can perform preload.\n     * @private\n     */\n\n  }, {\n    key: '_canPreload',\n    value: function _canPreload() {\n      return !this._config.plugins || this._config.plugins && !this._config.plugins.ima || this._config.plugins.ima && this._config.plugins.ima.disable;\n    }\n\n    /**\n     * Handles auto play.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_handleAutoPlay',\n    value: function _handleAutoPlay() {\n      var _this11 = this;\n\n      if (this._config.playback.autoplay === true) {\n        var allowMutedAutoPlay = this._config.playback.allowMutedAutoPlay;\n        Player.getCapabilities(this.engineType).then(function (capabilities) {\n          if (capabilities.autoplay) {\n            onAutoPlay();\n          } else {\n            if (capabilities.mutedAutoPlay) {\n              if (_this11.muted && !_this11._fallbackToMutedAutoPlay) {\n                onMutedAutoPlay();\n              } else if (allowMutedAutoPlay) {\n                onFallbackToMutedAutoPlay();\n              } else {\n                onAutoPlayFailed();\n              }\n            } else {\n              onAutoPlayFailed();\n            }\n          }\n        });\n      } else {\n        this._posterManager.show();\n      }\n\n      var onAutoPlay = function onAutoPlay() {\n        Player._logger.debug(\"Start autoplay\");\n        // If the previous state was fallback to muted autoplay:\n        // unmute the player and clear the fallback state\n        if (_this11._fallbackToMutedAutoPlay) {\n          _this11._fallbackToMutedAutoPlay = false;\n          _this11.muted = false;\n        }\n        _this11.play();\n      };\n\n      var onMutedAutoPlay = function onMutedAutoPlay() {\n        Player._logger.debug(\"Start muted autoplay\");\n        _this11.play();\n      };\n\n      var onFallbackToMutedAutoPlay = function onFallbackToMutedAutoPlay() {\n        Player._logger.debug(\"Fallback to muted autoplay\");\n        _this11._fallbackToMutedAutoPlay = true;\n        _this11.muted = true;\n        _this11.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.FALLBACK_TO_MUTED_AUTOPLAY));\n        _this11.play();\n      };\n\n      var onAutoPlayFailed = function onAutoPlayFailed() {\n        Player._logger.warn(\"Autoplay failed, pause player\");\n        _this11._posterManager.show();\n        if (_this11._canPreload()) {\n          _this11.load();\n        }\n        _this11.ready().then(function () {\n          return _this11.pause();\n        });\n        _this11.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.AUTOPLAY_FAILED));\n      };\n    }\n\n    /**\n     * Play after async ads\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_playAfterAsyncMiddleware',\n    value: function _playAfterAsyncMiddleware() {\n      var _this12 = this;\n\n      if (this._engine) {\n        this._play();\n      } else {\n        this._eventManager.listenOnce(this, _eventType.CustomEventType.SOURCE_SELECTED, function () {\n          return _this12._play();\n        });\n      }\n    }\n\n    /**\n     * Start/resume the engine playback.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_play',\n    value: function _play() {\n      var _this13 = this;\n\n      if (!this._engine.src) {\n        this.load();\n      }\n      this.ready().then(function () {\n        if (_this13.isLive() && !_this13.isDvr()) {\n          _this13.seekToLiveEdge();\n        }\n        _this13._engine.play();\n      }).catch(function (error) {\n        _this13.dispatchEvent(new _fakeEvent2.default(_eventType.Html5EventType.ERROR, error));\n      });\n    }\n\n    /**\n     * Starts the engine pause.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_pause',\n    value: function _pause() {\n      this._engine.pause();\n    }\n\n    /**\n     * @function _onPlay\n     * @return {void}\n     * @private\n     */\n\n  }, {\n    key: '_onPlay',\n    value: function _onPlay() {\n      if (this._firstPlay) {\n        this._firstPlay = false;\n        this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.FIRST_PLAY));\n        this._posterManager.hide();\n        this._hideBlackCover();\n        if (typeof this._playbackAttributesState.rate === 'number') {\n          this.playbackRate = this._playbackAttributesState.rate;\n        }\n      }\n    }\n\n    /**\n     * @function _onPlaying\n     * @return {void}\n     * @private\n     */\n\n  }, {\n    key: '_onPlaying',\n    value: function _onPlaying() {\n      if (!this._playbackStarted) {\n        this._playbackStarted = true;\n        this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.PLAYBACK_STARTED));\n      }\n    }\n\n    /**\n     * Hides the black cover div.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_hideBlackCover',\n    value: function _hideBlackCover() {\n      if (this._blackCoverEl) {\n        this._blackCoverEl.style.visibility = 'hidden';\n      }\n    }\n\n    /**\n     * Shows the black cover div.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_showBlackCover',\n    value: function _showBlackCover() {\n      if (this._blackCoverEl) {\n        this._blackCoverEl.style.visibility = 'visible';\n      }\n    }\n\n    /**\n     * @function _onEnded\n     * @return {void}\n     * @private\n     */\n\n  }, {\n    key: '_onEnded',\n    value: function _onEnded() {\n      if (!this.paused) {\n        this._pause();\n      }\n    }\n\n    /**\n     * Resets the state flags of the player.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_resetStateFlags',\n    value: function _resetStateFlags() {\n      this._loading = false;\n      this._firstPlay = true;\n      this._loadingMedia = false;\n      this._playbackStarted = false;\n    }\n\n    /**\n     * @returns {Object} - The default configuration of the player.\n     * @private\n     * @static\n     */\n\n  }, {\n    key: '_onTracksChanged',\n\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Tracks\">\n\n    /**\n     * handle tracks change\n     * @param {FakeEvent} event - the tracks change event payload\n     * @private\n     * @returns {void}\n     */\n    value: function _onTracksChanged(event) {\n      this._updateTracks(event.payload.tracks);\n      this.dispatchEvent(event);\n    }\n\n    /**\n     * update the player tracks\n     * @param {Array<Track>} tracks - the player tracks\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_updateTracks',\n    value: function _updateTracks(tracks) {\n      Player._logger.debug('Tracks changed', tracks);\n      this._tracks = [].concat(_toConsumableArray(tracks), _toConsumableArray(this._externalCaptionsHandler.getExternalTracks(tracks)));\n      this._addTextTrackOffOption();\n    }\n\n    /**\n     * Returns the tracks according to the filter. if no filter given returns the all tracks.\n     * @function _getTracksByType\n     * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n     * @returns {Array<Track>} - The parsed tracks.\n     * @private\n     */\n\n  }, {\n    key: '_getTracksByType',\n    value: function _getTracksByType(type) {\n      return !type ? this._tracks : this._tracks.filter(function (track) {\n        if (type === _trackType.TrackType.VIDEO) {\n          return track instanceof _videoTrack2.default;\n        } else if (type === _trackType.TrackType.AUDIO) {\n          return track instanceof _audioTrack2.default;\n        } else if (type === _trackType.TrackType.TEXT) {\n          return track instanceof _textTrack2.default;\n        } else {\n          return true;\n        }\n      });\n    }\n\n    /**\n     * Mark the selected track as active\n     * @function _markActiveTrack\n     * @param {Track} track - the track to mark\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_markActiveTrack',\n    value: function _markActiveTrack(track) {\n      var type = void 0;\n      if (track instanceof _videoTrack2.default) {\n        type = _trackType.TrackType.VIDEO;\n      } else if (track instanceof _audioTrack2.default) {\n        type = _trackType.TrackType.AUDIO;\n      } else if (track instanceof _textTrack2.default) {\n        type = _trackType.TrackType.TEXT;\n      }\n      if (type) {\n        var tracks = this._getTracksByType(type);\n        for (var i = 0; i < tracks.length; i++) {\n          tracks[i].active = track.index === tracks[i].index;\n        }\n      }\n    }\n\n    /**\n     * handle text cue change\n     * @param {FakeEvent} event - the cue change event payload\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onCueChange',\n    value: function _onCueChange(event) {\n      Player._logger.debug('Text cue changed', event.payload.cues);\n      this._activeTextCues = event.payload.cues;\n      this._updateCueDisplaySettings();\n      this._updateTextDisplay(this._activeTextCues);\n    }\n\n    /**\n     * update the text cue display settings\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_updateCueDisplaySettings',\n    value: function _updateCueDisplaySettings() {\n      var activeCues = this._activeTextCues;\n      var settings = this._textDisplaySettings;\n      for (var i = 0; i < activeCues.length; i++) {\n        var cue = activeCues[i];\n        for (var _name in settings) {\n          cue[_name] = settings[_name];\n        }\n      }\n    }\n\n    /**\n     * update the text display\n     * @param {Array<Cue>} cues - list of cues\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_updateTextDisplay',\n    value: function _updateTextDisplay(cues) {\n      (0, _textTrackDisplay.processCues)(window, cues, this._textDisplayEl);\n    }\n\n    /**\n     * Add off text track if there are actual text tracks associated with media\n     * setting this track is the same as calling Player's hideTextTrack\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_addTextTrackOffOption',\n    value: function _addTextTrackOffOption() {\n      var textTracks = this._getTracksByType(_trackType.TrackType.TEXT);\n      if (textTracks && textTracks.length) {\n        this._tracks.push(new _textTrack2.default({\n          active: false,\n          index: textTracks.length,\n          kind: \"subtitles\",\n          label: \"Off\",\n          language: OFF\n        }));\n      }\n    }\n\n    /**\n     * Sets the default tracks defined in the player config.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_setDefaultTracks',\n    value: function _setDefaultTracks() {\n      var activeTracks = this.getActiveTracks();\n      var playbackConfig = this.config.playback;\n      var offTextTrack = this._getTracksByType(_trackType.TrackType.TEXT).find(function (track) {\n        return _textTrack2.default.langComparer(OFF, track.language);\n      });\n      this.hideTextTrack();\n      var currentOrConfiguredTextLang = this._playbackAttributesState.textLanguage || this._getLanguage(playbackConfig.textLanguage, activeTracks.text, _trackType.TrackType.TEXT);\n      var currentOrConfiguredAudioLang = this._playbackAttributesState.audioLanguage || playbackConfig.audioLanguage;\n      this._setDefaultTrack(_trackType.TrackType.TEXT, currentOrConfiguredTextLang, offTextTrack);\n      this._setDefaultTrack(_trackType.TrackType.AUDIO, currentOrConfiguredAudioLang, activeTracks.audio);\n    }\n\n    /**\n     * Gets the track language that should be set by default.\n     * @param {string} configuredLanguage - The configured language (can be also \"auto\").\n     * @param {Track} defaultTrack - The default track.\n     * @param {string} type - The track type.\n     * @private\n     * @returns {string} - The track language to set by default.\n     */\n\n  }, {\n    key: '_getLanguage',\n    value: function _getLanguage(configuredLanguage, defaultTrack, type) {\n      var language = configuredLanguage;\n      if (language === AUTO) {\n        var tracks = this._getTracksByType(type);\n        var localeTrack = tracks.find(function (track) {\n          return _track2.default.langComparer(_locale2.default.language, track.language);\n        });\n        if (localeTrack) {\n          language = localeTrack.language;\n        } else if (defaultTrack && defaultTrack.language !== OFF) {\n          language = defaultTrack.language;\n        } else if (tracks && tracks.length > 0) {\n          language = tracks[0].language;\n        }\n      }\n      return language;\n    }\n\n    /**\n     * Sets a specific default track.\n     * @param {string} type - The track type.\n     * @param {string} language - The track language.\n     * @param {?Track} defaultTrack - The default track to set in case there is no language configured.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_setDefaultTrack',\n    value: function _setDefaultTrack(type, language, defaultTrack) {\n      var track = this._getTracksByType(type).find(function (track) {\n        return _track2.default.langComparer(language, track.language);\n      });\n      if (track) {\n        this.selectTrack(track);\n      } else if (defaultTrack && !defaultTrack.active) {\n        this.selectTrack(defaultTrack);\n      }\n    }\n\n    // </editor-fold>\n\n    // </editor-fold>\n\n    // <editor-fold desc=\"Enums\">\n\n    /**\n     * Gets the player event types.\n     * @returns {EventTypes} - The event types of the player.\n     * @public\n     */\n\n  }, {\n    key: 'buffered',\n    get: function get() {\n      if (this._engine) {\n        return this._engine.buffered;\n      }\n    }\n\n    /**\n     * Set the current time in seconds.\n     * @param {Number} to - The number to set in seconds.\n     * @public\n     */\n\n  }, {\n    key: 'currentTime',\n    set: function set(to) {\n      if (this._engine) {\n        if (Utils.Number.isNumber(to)) {\n          var boundedTo = to;\n          if (to < 0) {\n            boundedTo = 0;\n          }\n          if (boundedTo > this._engine.duration - DURATION_OFFSET) {\n            boundedTo = this._engine.duration - DURATION_OFFSET;\n          }\n          this._engine.currentTime = boundedTo;\n        }\n      }\n    }\n\n    /**\n     * Get the current time in seconds.\n     * @returns {?Number} - The playback current time.\n     * @public\n     */\n    ,\n    get: function get() {\n      if (this._engine) {\n        return this._engine.currentTime;\n      }\n    }\n\n    /**\n     * Get the duration in seconds.\n     * @returns {?Number} - The playback duration.\n     * @public\n     */\n\n  }, {\n    key: 'duration',\n    get: function get() {\n      if (this._engine) {\n        return this._engine.duration;\n      }\n    }\n\n    /**\n     * Set playback volume.\n     * @param {Number} vol - The volume to set.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'volume',\n    set: function set(vol) {\n      if (this._engine) {\n        if (Utils.Number.isFloat(vol) || vol === 0 || vol === 1) {\n          var boundedVol = vol;\n          if (boundedVol < 0) {\n            boundedVol = 0;\n          }\n          if (boundedVol > 1) {\n            boundedVol = 1;\n          }\n          this._engine.volume = boundedVol;\n        }\n      }\n    }\n\n    /**\n     * Get playback volume.\n     * @returns {?Number} - The playback volume.\n     * @public\n     */\n    ,\n    get: function get() {\n      if (this._engine) {\n        return this._engine.volume;\n      }\n    }\n\n    /**\n     * Get paused state.\n     * @returns {?boolean} - Whether the video is paused or not.\n     * @public\n     */\n\n  }, {\n    key: 'paused',\n    get: function get() {\n      if (this._engine) {\n        return this._engine.paused;\n      }\n    }\n\n    /**\n     * Get seeking state.\n     * @returns {?boolean} - Whether the video is seeking or not.\n     * @public\n     */\n\n  }, {\n    key: 'seeking',\n    get: function get() {\n      if (this._engine) {\n        return this._engine.seeking;\n      }\n    }\n\n    /**\n     * Set playsinline attribute.\n     * Relevant for iOS 10 and up:\n     * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n     * @param {boolean} playsinline - Whether the video should plays in line.\n     */\n\n  }, {\n    key: 'playsinline',\n    set: function set(playsinline) {\n      if (this._engine) {\n        this._engine.playsinline = playsinline;\n      }\n    }\n\n    /**\n     * Get playsinline attribute.\n     * Relevant for iOS 10 and up:\n     * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n     * @returns {boolean} - Whether the video plays in line.\n     */\n    ,\n    get: function get() {\n      if (this._engine) {\n        return this._engine.playsinline;\n      }\n    }\n\n    /**\n     * Set player muted state.\n     * @param {boolean} mute - The mute value.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'muted',\n    set: function set(mute) {\n      if (this._engine) {\n        this._engine.muted = mute;\n        this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.MUTE_CHANGE, { mute: mute }));\n        if (mute === false) {\n          this._fallbackToMutedAutoPlay = mute;\n        }\n      }\n    }\n\n    /**\n     * Get player muted state.\n     * @returns {?boolean} - Whether the video is muted or not.\n     * @public\n     */\n    ,\n    get: function get() {\n      if (this._engine) {\n        return this._engine.muted;\n      }\n    }\n\n    /**\n     * Get the player source.\n     * @returns {?string} - The current source of the player.\n     * @public\n     */\n\n  }, {\n    key: 'src',\n    get: function get() {\n      if (this._engine) {\n        return this._engine.src;\n      }\n    }\n\n    /**\n     * Get the dimensions of the player.\n     * @returns {{width: number, height: number}} - The dimensions of the player.\n     * @public\n     */\n\n  }, {\n    key: 'dimensions',\n    get: function get() {\n      return {\n        width: this._el.clientWidth,\n        height: this._el.clientHeight\n      };\n    }\n\n    /**\n     * Get the poster source URL\n     * @returns {string} - the poster image URL\n     */\n\n  }, {\n    key: 'poster',\n    get: function get() {\n      return this._posterManager.src;\n    }\n\n    /**\n     * Sets the playbackRate property.\n     * @param {number} rate - The playback speed of the video.\n     */\n\n  }, {\n    key: 'playbackRate',\n    set: function set(rate) {\n      if (this._engine) {\n        this._engine.playbackRate = rate;\n      }\n    }\n\n    /**\n     * Gets the current playback speed of the video.\n     * @returns {number} - The current playback speed of the video.\n     */\n    ,\n    get: function get() {\n      if (this._engine) {\n        return this._engine.playbackRate;\n      }\n    }\n\n    /**\n     * Gets the possible playback speeds of the video.\n     * @returns {Array<number>} - The possible playback speeds speed of the video.\n     */\n\n  }, {\n    key: 'playbackRates',\n    get: function get() {\n      return PLAYBACK_RATES;\n    }\n\n    /**\n     * Gets the default playback speed of the video.\n     * @returns {number} - The default playback speed of the video.\n     */\n\n  }, {\n    key: 'defaultPlaybackRate',\n    get: function get() {\n      return DEFAULT_PLAYBACK_RATE;\n    }\n\n    /**\n     * get the engine type\n     * @returns {string} - html5\n     */\n\n  }, {\n    key: 'engineType',\n    get: function get() {\n      return this._engineType;\n    }\n\n    /**\n     * get the stream type\n     * @returns {string} - hls|dash|progressive\n     */\n\n  }, {\n    key: 'streamType',\n    get: function get() {\n      return this._streamType;\n    }\n\n    /**\n     * Getter for the environment of the player instance.\n     * @return {Object} - The current environment object.\n     * @public\n     */\n\n  }, {\n    key: 'env',\n    get: function get() {\n      return this._env;\n    }\n\n    /**\n     * Get the player config.\n     * @returns {Object} - A copy of the player configuration.\n     * @public\n     */\n\n  }, {\n    key: 'config',\n    get: function get() {\n      return Utils.Object.mergeDeep({}, this._config);\n    }\n\n    /**\n     * Set the _loadingMedia flag to inform the player that a load media request has sent.\n     * @param {boolean} loading - Whether a load media request has sent.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'loadingMedia',\n    set: function set(loading) {\n      this._loadingMedia = loading;\n    }\n  }, {\n    key: 'textStyle',\n    set: function set(style) {\n      if (!(style instanceof _textStyle2.default)) {\n        throw new Error(\"Style must be instance of TextStyle\");\n      }\n      var element = Utils.Dom.getElementById(SUBTITLES_STYLE_ID_NAME);\n      if (!element) {\n        element = Utils.Dom.createElement('style');\n        Utils.Dom.setAttribute(element, 'id', SUBTITLES_STYLE_ID_NAME);\n        Utils.Dom.appendChild(document.head, element);\n      }\n      var sheet = element.sheet;\n\n      while (sheet.cssRules.length) {\n        sheet.deleteRule(0);\n      }\n\n      try {\n        if (this._config.playback.useNativeTextTrack) {\n          sheet.insertRule('video.' + ENGINE_CLASS_NAME + '::cue { ' + style.toCSS() + ' }', 0);\n        } else {\n          sheet.insertRule('#' + this._playerId + ' .' + SUBTITLES_CLASS_NAME + ' > div > div > div { ' + style.toCSS() + ' }', 0);\n        }\n        this._textStyle = style;\n        this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.TEXT_STYLE_CHANGED));\n      } catch (e) {\n        Player._logger.error(e.message);\n      }\n    }\n\n    /**\n     * Gets style attributes for text tracks.\n     * @returns {?TextStyle} - the current style attribute\n     */\n    ,\n    get: function get() {\n      return this._textStyle.clone();\n    }\n  }, {\n    key: 'Event',\n    get: function get() {\n      return _eventType.EventType;\n    }\n\n    /**\n     * Gets the player TextStyle.\n     * @returns {TextStyle} - The TextStyle class\n     * @public\n     */\n\n  }, {\n    key: 'TextStyle',\n    get: function get() {\n      return _textStyle2.default;\n    }\n\n    /**\n     * Gets the player state types.\n     * @returns {StateTypes} - The state types of the player.\n     * @public\n     */\n\n  }, {\n    key: 'State',\n    get: function get() {\n      return _stateType.StateType;\n    }\n\n    /**\n     * Gets the player tracks types.\n     * @returns {TrackTypes} - The tracks types of the player.\n     * @public\n     */\n\n  }, {\n    key: 'Track',\n    get: function get() {\n      return _trackType.TrackType;\n    }\n\n    /**\n     * Gets the player log level types.\n     * @returns {LogLevelTypes} - The log level types of the player.\n     * @public\n     */\n\n  }, {\n    key: 'LogLevelType',\n    get: function get() {\n      return _logger.LogLevelType;\n    }\n\n    /**\n     * Gets the player log level objects.\n     * @returns {LogLevels} - The log levels objects of the player.\n     * @public\n     */\n\n  }, {\n    key: 'LogLevel',\n    get: function get() {\n      return _logger.LogLevel;\n    }\n\n    /**\n     * Gets the player abr modes.\n     * @returns {AbrModes} - The abr modes of the player.\n     * @public\n     */\n\n  }, {\n    key: 'AbrMode',\n    get: function get() {\n      return _abrModeType.AbrMode;\n    }\n\n    /**\n     * Gets the player media types.\n     * @returns {MediaTypes} - The media types of the player.\n     * @public\n     */\n\n  }, {\n    key: 'MediaType',\n    get: function get() {\n      return _mediaType.MediaType;\n    }\n\n    /**\n     * Gets the player stream types.\n     * @returns {StreamTypes} - The stream types of the player.\n     * @public\n     */\n\n  }, {\n    key: 'StreamType',\n    get: function get() {\n      return _streamType.StreamType;\n    }\n\n    /**\n     * Gets the player engine types.\n     * @returns {EngineTypes} - The engine types of the player.\n     * @public\n     */\n\n  }, {\n    key: 'EngineType',\n    get: function get() {\n      return _engineType.EngineType;\n    }\n\n    // </editor-fold>\n\n  }], [{\n    key: '_defaultConfig',\n    get: function get() {\n      return Utils.Object.copyDeep(_playerConfig2.default);\n    }\n  }]);\n\n  return Player;\n}(_fakeEventTarget2.default);\n\nPlayer._logger = (0, _logger2.default)('Player');\nPlayer._engines = [_html2.default];\nPlayer._playerCapabilities = {};\nexports.default = Player;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _multiMap = __webpack_require__(14);\n\nvar _multiMap2 = _interopRequireDefault(_multiMap);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * A work-alike for EventTarget.  Only DOM elements may be true EventTargets,\n * but this can be used as a base class to provide event dispatch to non-DOM\n * classes.  Only FakeEvents should be dispatched.\n *\n * @struct\n * @constructor\n * @implements {EventTarget}\n * @export\n */\nvar FakeEventTarget = function () {\n  function FakeEventTarget() {\n    _classCallCheck(this, FakeEventTarget);\n\n    /**\n     * @private {!MultiMap.<FakeEventTarget.ListenerType>}\n     */\n    this._listeners = new _multiMap2.default();\n\n    /**\n     * The target of all dispatched events.  Defaults to |this|.\n     * @type {EventTarget}\n     */\n    this.dispatchTarget = this;\n  }\n\n  /**\n   * Add an event listener to this object.\n   *\n   * @param {string} type The event type to listen for.\n   * @param {FakeEventTarget.ListenerType} listener The callback or\n   *   listener object to invoke.\n   * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n   *   parents, so events neither capture nor bubble.\n   * @override\n   * @export\n   */\n\n\n  _createClass(FakeEventTarget, [{\n    key: 'addEventListener',\n    value: function addEventListener(type, listener) {\n      this._listeners.push(type, listener);\n    }\n\n    /**\n     * Remove an event listener from this object.\n     *\n     * @param {string} type The event type for which you wish to remove a listener.\n     * @param {FakeEventTarget.ListenerType} listener The callback or\n     *   listener object to remove.\n     * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n     *   parents, so events neither capture nor bubble.\n     * @override\n     * @export\n     */\n\n  }, {\n    key: 'removeEventListener',\n    value: function removeEventListener(type, listener) {\n      this._listeners.remove(type, listener);\n    }\n\n    /**\n     * Dispatch an event from this object.\n     *\n     * @param {!Event} event The event to be dispatched from this object.\n     * @return {boolean} True if the default action was prevented.\n     * @override\n     * @export\n     */\n\n  }, {\n    key: 'dispatchEvent',\n    value: function dispatchEvent(event) {\n      // In many browsers, it is complex to overwrite properties of actual Events.\n      // Here we expect only to dispatch FakeEvents, which are simpler.\n      //goog.asserts.assert(event instanceof FakeEvent,\n      //    'FakeEventTarget can only dispatch FakeEvents!');\n\n      var list = this._listeners.get(event.type) || [];\n\n      for (var i = 0; i < list.length; ++i) {\n        // Do this every time, since events can be re-dispatched from handlers.\n        event.target = this.dispatchTarget;\n        event.currentTarget = this.dispatchTarget;\n\n        var listener = list[i];\n        try {\n          if (listener.handleEvent) {\n            listener.handleEvent(event);\n          } else {\n            listener.call(this, event);\n          }\n        } catch (exception) {\n          // Exceptions during event handlers should not affect the caller,\n          // but should appear on the console as uncaught, according to MDN:\n          // http://goo.gl/N6Ff27\n          // TODO: add log\n        }\n\n        if (event.stopped) {\n          break;\n        }\n      }\n\n      return event.defaultPrevented;\n    }\n  }]);\n\n  return FakeEventTarget;\n}();\n\n/**\n * These are the listener types defined in the closure extern for EventTarget.\n * @typedef {EventListener|function(!Event):(boolean|undefined)}\n */\n\n\nexports.default = FakeEventTarget;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _track = __webpack_require__(5);\n\nvar _track2 = _interopRequireDefault(_track);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Video track representation of the player.\n * @classdesc\n */\nvar VideoTrack = function (_Track) {\n  _inherits(VideoTrack, _Track);\n\n  _createClass(VideoTrack, [{\n    key: 'bandwidth',\n\n\n    /**\n     * @public\n     * @returns {number} - The bandwidth of the video track\n     */\n\n\n    /**\n     * @member {number} _width - The width of the video track\n     * @type {number}\n     * @private\n     */\n    get: function get() {\n      return this._bandwidth;\n    }\n\n    /**\n     * @public\n     * @returns {number} - The width of the video track\n     */\n\n\n    /**\n     * @member {number} _height - The height of the video track\n     * @type {number}\n     * @private\n     */\n\n    /**\n     * @member {number} _bandwidth - The bandwidth of the video track\n     * @type {number}\n     * @private\n     */\n\n  }, {\n    key: 'width',\n    get: function get() {\n      return this._width;\n    }\n\n    /**\n     * @public\n     * @returns {number} - The height of the video track\n     */\n\n  }, {\n    key: 'height',\n    get: function get() {\n      return this._height;\n    }\n\n    /**\n     * @constructor\n     * @param {Object} settings - The track settings object\n     */\n\n  }]);\n\n  function VideoTrack() {\n    var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, VideoTrack);\n\n    var _this = _possibleConstructorReturn(this, (VideoTrack.__proto__ || Object.getPrototypeOf(VideoTrack)).call(this, settings));\n\n    _this._bandwidth = settings.bandwidth;\n    _this._width = settings.width;\n    _this._height = settings.height;\n    _this._label = settings.label ? settings.label : _this._height ? _this._height + 'p' : undefined;\n    return _this;\n  }\n\n  return VideoTrack;\n}(_track2.default);\n\nexports.default = VideoTrack;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _track = __webpack_require__(5);\n\nvar _track2 = _interopRequireDefault(_track);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Audio track representation of the player.\n * @classdesc\n */\nvar AudioTrack = function (_Track) {\n  _inherits(AudioTrack, _Track);\n\n  function AudioTrack() {\n    _classCallCheck(this, AudioTrack);\n\n    return _possibleConstructorReturn(this, (AudioTrack.__proto__ || Object.getPrototypeOf(AudioTrack)).apply(this, arguments));\n  }\n\n  return AudioTrack;\n}(_track2.default);\n\nexports.default = AudioTrack;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _uaParserJs = __webpack_require__(31);\n\nvar _uaParserJs2 = _interopRequireDefault(_uaParserJs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Env = new _uaParserJs2.default().getResult();\nexports.default = Env;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\nvar TrackType = {\n  VIDEO: \"video\",\n  AUDIO: \"audio\",\n  TEXT: \"text\"\n};\nexports.TrackType = TrackType;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * A simple multimap template.\n * @constructor\n * @struct\n * @template T\n */\nvar MultiMap = function () {\n  function MultiMap() {\n    _classCallCheck(this, MultiMap);\n\n    /** @private {!Object.<string, !Array.<T>>} */\n    this._map = new Map();\n  }\n\n  /**\n   * Add a key, value pair to the map.\n   * @param {string} key -\n   * @param {T} value  -\n   * @returns {void}\n   */\n\n\n  _createClass(MultiMap, [{\n    key: \"push\",\n    value: function push(key, value) {\n      if (this._map.has(key)) {\n        var list = this._map.get(key);\n        if (Array.isArray(list)) {\n          list.push(value);\n          this._map.set(key, list);\n        }\n      } else {\n        this._map.set(key, [value]);\n      }\n    }\n\n    /**\n     * Set an array of values for the key, overwriting any previous data.\n     * @param {string} key -\n     * @param {!Array.<T>} values -\n     * @returns {void}\n     */\n\n  }, {\n    key: \"set\",\n    value: function set(key, values) {\n      this._map.set(key, values);\n    }\n\n    /**\n     * Check for a key.\n     * @param {string} key -\n     * @return {boolean} true if the key exists.\n     */\n\n  }, {\n    key: \"has\",\n    value: function has(key) {\n      return this._map.has(key);\n    }\n\n    /**\n     * Get a list of values by key.\n     * @param {string} key -\n     * @return {Array.<T>} or null if no suZch key exists.\n     */\n\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      var list = this._map.get(key);\n      // slice() clones the list so that it and the map can each be modified\n      // without affecting the other.\n      return list ? list.slice() : [];\n    }\n\n    /**\n     * Get a list of all values.\n     * @returns {!Array.<T>} -\n     */\n\n  }, {\n    key: \"getAll\",\n    value: function getAll() {\n      var list = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this._map.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var value = _step.value;\n\n          list = list.concat(value);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return list;\n    }\n\n    /**\n     * Remove a specific value, if it exists.\n     * @param {string} key -\n     * @param {T} value -\n     * @returns {void}\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(key, value) {\n      if (!this._map.has(key)) return;\n      var list = this._map.get(key);\n      if (Array.isArray(list)) {\n        for (var i = 0; i < list.length; ++i) {\n          if (list[i] == value) {\n            list.splice(i, 1);\n            --i;\n          }\n        }\n      }\n    }\n\n    /**\n     * Get all keys from the multimap.\n     * @return {!Array.<string>}\n     */\n    // eslint-disable-next-line no-undef\n\n  }, {\n    key: \"keys\",\n    value: function keys() {\n      return this._map.keys();\n    }\n\n    /**\n     * Clear all keys and values from the multimap.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this._map.clear();\n    }\n  }]);\n\n  return MultiMap;\n}();\n\nexports.default = MultiMap;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Cue = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _textTrackDisplay = __webpack_require__(16);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar autoKeyword = \"auto\";\nvar directionSetting = {\n  \"\": true,\n  \"lr\": true,\n  \"rl\": true\n};\nvar alignSetting = {\n  \"start\": true,\n  \"middle\": true,\n  \"end\": true,\n  \"left\": true,\n  \"right\": true\n};\n\n/**\n * helper\n * @param {string} value - the string to find\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findDirectionSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  var dir = directionSetting[value.toLowerCase()];\n  return dir ? value.toLowerCase() : false;\n}\n\n/**\n * helper\n * @param {string} value - the string\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findAlignSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  var align = alignSetting[value.toLowerCase()];\n  return align ? value.toLowerCase() : false;\n}\n\n/**\n * VTTCue model\n * @class\n * @classdesc VTT Cue model to represent VTT cues internally\n */\n\nvar VTTCue = function () {\n  /**\n   * A number giving the size of the cue box, to be interpreted as a percentage of the video, as defined\n   * by the writing direction.\n   * @type {number}\n   * @private\n   */\n\n  /**\n   * The position defines the indent of the cue box in the direction defined by the writing direction\n   * @type {number}\n   * @private\n   */\n\n  /**\n   * The line defines positioning of the cue box.\n   * @type {string | number}\n   * @private\n   */\n\n  /**\n   * configures the cue to use vertical text layout rather than horizontal text layout.\n   * Vertical text layout is sometimes used in Japanese, for example. The default is horizontal layout\n   * @type {string}\n   * @private\n   */\n\n  /**\n   * A boolean indicating whether playback of the media resource is to pause when the end of the\n   * range to which the cue applies is reached.\n   * @type {boolean}\n   * @private\n   */\n\n\n  /**\n   * This is used as part of the rendering model, to keep cues in a consistent position.\n   * http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n   * @type {undefined}\n   */\n  function VTTCue(startTime, endTime, text) {\n    _classCallCheck(this, VTTCue);\n\n    this.hasBeenReset = false;\n    this.displayState = undefined;\n    this._id = \"\";\n    this._pauseOnExit = false;\n    this._region = null;\n    this._vertical = \"\";\n    this._snapToLines = true;\n    this._line = \"auto\";\n    this._lineAlign = \"start\";\n    this._position = 50;\n    this._positionAlign = \"middle\";\n    this._size = 50;\n    this._align = \"middle\";\n\n    this._startTime = startTime;\n    this._endTime = endTime;\n    this._text = text;\n    /**\n     * Other <track> spec defined properties\n     */\n  }\n  /**\n   * An alignment for all lines of text within the cue box, in the dimension of the writing direction\n   * @type {string}\n   * @private\n   */\n\n  /**\n   * An alignment for the cue box in the dimension of the writing direction, describing what the position\n   * is anchored to\n   * @type {string}\n   * @private\n   */\n\n  /**\n   * An alignment for the cue box’s line, one of start/center/end alignment\n   * @type {string}\n   * @private\n   */\n\n  /**\n   * A boolean indicating whether the line is an integer number of lines (using the line dimensions of\n   * the first line of the cue), or whether it is a percentage of the dimension of the video.\n   * The flag is set to true when lines are counted, and false otherwise.\n   * @type {boolean}\n   * @private\n   */\n\n  /**\n   * An optional WebVTT region to which a cue belongs.\n   * By default, the region is set to null.\n   * @type {null}\n   * @private\n   */\n\n  /**\n   * The time, in seconds and fractions of a second, that describes the beginning of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n\n  /**\n   * The time, in seconds and fractions of a second, that describes the end of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n\n  /**\n   * The raw text of the cue, and rules for its interpretation, allowing the text to be\n   * rendered and converted to a DOM fragment.\n   * @type {string}\n   * @private\n   */\n\n  /**\n   * VTTCue and TextTrackCue properties\n   * http://dev.w3.org/html5/webvtt/#vttcue-interface\n   */\n  /**\n   * An arbitrary string.\n   * @type {string}\n   * @private\n   */\n\n\n  /**\n   * // Lets us know when the VTTCue's data has changed in such a way that we need\n   * to recompute its display state. This lets us compute its display state lazily.\n   * @type {boolean}\n   */\n\n\n  _createClass(VTTCue, [{\n    key: \"resetCue\",\n    value: function resetCue() {\n      this.hasBeenReset = true;\n    }\n  }, {\n    key: \"getCueAsHTML\",\n    value: function getCueAsHTML() {\n      return (0, _textTrackDisplay.convertCueToDOMTree)(window, this.text);\n    }\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this._id;\n    },\n    set: function set(value) {\n      this._id = \"\" + value;\n    }\n  }, {\n    key: \"pauseOnExit\",\n    get: function get() {\n      return this._pauseOnExit;\n    },\n    set: function set(value) {\n      this._pauseOnExit = value;\n    }\n  }, {\n    key: \"startTime\",\n    get: function get() {\n      return this._endTime;\n    },\n    set: function set(value) {\n      if (typeof value !== \"number\") {\n        throw new TypeError(\"Start time must be set to a number.\");\n      }\n      this._endTime = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"endTime\",\n    get: function get() {\n      return this._endTime;\n    },\n    set: function set(value) {\n      if (typeof value !== \"number\") {\n        throw new TypeError(\"End time must be set to a number.\");\n      }\n      this._endTime = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"text\",\n    get: function get() {\n      return this._text;\n    },\n    set: function set(value) {\n      this._text = \"\" + value;\n      this.resetCue();\n    }\n  }, {\n    key: \"region\",\n    get: function get() {\n      return this._region;\n    },\n    set: function set(value) {\n      this._region = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"vertical\",\n    get: function get() {\n      return this._vertical;\n    },\n    set: function set(value) {\n      var setting = findDirectionSetting(value);\n      // Have to check for false because the setting an be an empty string.\n      if (setting === false) {\n        throw new SyntaxError(\"An invalid or illegal string was specified.\");\n      } else if (typeof setting === \"string\") {\n        this._vertical = setting;\n        this.resetCue();\n      }\n    }\n  }, {\n    key: \"snapToLines\",\n    get: function get() {\n      return this._snapToLines;\n    },\n    set: function set(value) {\n      this._snapToLines = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"line\",\n    get: function get() {\n      return this._line;\n    },\n    set: function set(value) {\n      if (typeof value !== \"number\" && value !== autoKeyword) {\n        throw new SyntaxError(\"An invalid number or illegal string was specified.\");\n      }\n      this._line = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"lineAlign\",\n    get: function get() {\n      return this._lineAlign;\n    },\n    set: function set(value) {\n      var setting = findAlignSetting(value);\n      if (!setting) {\n        throw new SyntaxError(\"An invalid or illegal string was specified.\");\n      } else if (typeof setting === \"string\") {\n        this._lineAlign = setting;\n        this.resetCue();\n      }\n    }\n  }, {\n    key: \"position\",\n    get: function get() {\n      return this._position;\n    },\n    set: function set(value) {\n      if (value < 0 || value > 100) {\n        throw new Error(\"Position must be between 0 and 100.\");\n      }\n      this._position = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"positionAlign\",\n    get: function get() {\n      return this._positionAlign;\n    },\n    set: function set(value) {\n      var setting = findAlignSetting(value);\n      if (!setting) {\n        throw new SyntaxError(\"An invalid or illegal string was specified.\");\n      } else if (typeof setting === \"string\") {\n        this._positionAlign = setting;\n        this.resetCue();\n      }\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return this._size;\n    },\n    set: function set(value) {\n      if (value < 0 || value > 100) {\n        throw new Error(\"Size must be between 0 and 100.\");\n      }\n      this._size = value;\n      this.resetCue();\n    }\n  }, {\n    key: \"align\",\n    get: function get() {\n      return this._align;\n    },\n    set: function set(value) {\n      var setting = findAlignSetting(value);\n      if (!setting) {\n        throw new SyntaxError(\"An invalid or illegal string was specified.\");\n      } else if (typeof setting === \"string\") {\n        this._align = setting;\n        this.resetCue();\n      }\n    }\n  }]);\n\n  return VTTCue;\n}();\n\nvar Cue = void 0;\nif (typeof window !== 'undefined' && window.VTTCue) {\n  exports.Cue = Cue = window.VTTCue;\n} else {\n  exports.Cue = Cue = VTTCue;\n}\n\nexports.Cue = Cue;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* eslint-disable */\n/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n\nvar fontScale = 1;\n\n// Try to parse input as a time stamp.\nfunction parseTimeStamp(input) {\n\n  function computeSeconds(h, m, s, f) {\n    return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n  }\n\n  var m = input.match(/^(\\d+):(\\d{2})(:\\d{2})?\\.(\\d{3})/);\n  if (!m) {\n    return null;\n  }\n\n  if (m[3]) {\n    // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n    return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n  } else if (m[1] > 59) {\n    // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n    // First position is hours as it's over 59.\n    return computeSeconds(m[1], m[2], 0, m[4]);\n  } else {\n    // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n    return computeSeconds(0, m[1], m[2], m[4]);\n  }\n}\n\nvar ESCAPE = {\n  \"&amp;\": \"&\",\n  \"&lt;\": \"<\",\n  \"&gt;\": \">\",\n  \"&lrm;\": \"\\u200E\",\n  \"&rlm;\": \"\\u200F\",\n  \"&nbsp;\": \"\\xA0\"\n};\n\nvar TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\"\n};\n\nvar TAG_ANNOTATION = {\n  v: \"title\",\n  lang: \"lang\"\n};\n\nvar NEEDS_PARENT = {\n  rt: \"ruby\"\n};\n\n// A settings object holds key/value pairs and will ignore anything but the first\n// assignment to a specific key.\nfunction Settings() {\n  this.values = _objCreate(null);\n}\n\nSettings.prototype = {\n  // Only accept the first assignment to any key.\n  set: function set(k, v) {\n    if (!this.get(k) && v !== \"\") {\n      this.values[k] = v;\n    }\n  },\n  // Return the value for a key, or a default value.\n  // If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n  // a number of possible default values as properties where 'defaultKey' is\n  // the key of the property that will be chosen; otherwise it's assumed to be\n  // a single value.\n  get: function get(k, dflt, defaultKey) {\n    if (defaultKey) {\n      return this.has(k) ? this.values[k] : dflt[defaultKey];\n    }\n    return this.has(k) ? this.values[k] : dflt;\n  },\n  // Check whether we have a value for a key.\n  has: function has(k) {\n    return k in this.values;\n  },\n  // Accept a setting if its one of the given alternatives.\n  alt: function alt(k, v, a) {\n    for (var n = 0; n < a.length; ++n) {\n      if (v === a[n]) {\n        this.set(k, v);\n        break;\n      }\n    }\n  },\n  // Accept a setting if its a valid (signed) integer.\n  integer: function integer(k, v) {\n    if (/^-?\\d+$/.test(v)) {\n      // integer\n      this.set(k, parseInt(v, 10));\n    }\n  },\n  // Accept a setting if its a valid percentage.\n  percent: function percent(k, v) {\n    var m;\n    if (m = v.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/)) {\n      v = parseFloat(v);\n      if (v >= 0 && v <= 100) {\n        this.set(k, v);\n        return true;\n      }\n    }\n    return false;\n  }\n};\n\n// Helper function to parse input into groups separated by 'groupDelim', and\n// interprete each group as a key/value pair separated by 'keyValueDelim'.\nfunction parseOptions(input, callback, keyValueDelim, groupDelim) {\n  var groups = groupDelim ? input.split(groupDelim) : [input];\n  for (var i in groups) {\n    if (typeof groups[i] !== \"string\") {\n      continue;\n    }\n    var kv = groups[i].split(keyValueDelim);\n    if (kv.length !== 2) {\n      continue;\n    }\n    var k = kv[0];\n    var v = kv[1];\n    callback(k, v);\n  }\n}\n\nfunction parseCue(input, cue, regionList) {\n  // Remember the original input if we need to throw an error.\n  var oInput = input;\n\n  // 4.1 WebVTT timestamp\n  function consumeTimeStamp() {\n    var ts = parseTimeStamp(input);\n    if (ts === null) {\n      throw new ParsingError(ParsingError.Errors.BadTimeStamp, \"Malformed timestamp: \" + oInput);\n    }\n    // Remove time stamp from input.\n    input = input.replace(/^[^\\sa-zA-Z-]+/, \"\");\n    return ts;\n  }\n\n  // 4.4.2 WebVTT cue settings\n  function consumeCueSettings(input, cue) {\n    var settings = new Settings();\n\n    parseOptions(input, function (k, v) {\n      switch (k) {\n        case \"region\":\n          // Find the last region we parsed with the same region id.\n          for (var i = regionList.length - 1; i >= 0; i--) {\n            if (regionList[i].id === v) {\n              settings.set(k, regionList[i].region);\n              break;\n            }\n          }\n          break;\n        case \"vertical\":\n          settings.alt(k, v, [\"rl\", \"lr\"]);\n          break;\n        case \"line\":\n          var vals = v.split(\",\"),\n              vals0 = vals[0];\n          settings.integer(k, vals0);\n          settings.percent(k, vals0) ? settings.set(\"snapToLines\", false) : null;\n          settings.alt(k, vals0, [\"auto\"]);\n          if (vals.length === 2) {\n            settings.alt(\"lineAlign\", vals[1], [\"start\", \"middle\", \"end\"]);\n          }\n          break;\n        case \"position\":\n          vals = v.split(\",\");\n          settings.percent(k, vals[0]);\n          if (vals.length === 2) {\n            settings.alt(\"positionAlign\", vals[1], [\"start\", \"middle\", \"end\"]);\n          }\n          break;\n        case \"size\":\n          settings.percent(k, v);\n          break;\n        case \"align\":\n          settings.alt(k, v, [\"start\", \"middle\", \"end\", \"left\", \"right\"]);\n          break;\n      }\n    }, /:/, /\\s/);\n\n    // Apply default values for any missing fields.\n    cue.region = settings.get(\"region\", null);\n    cue.vertical = settings.get(\"vertical\", \"\");\n    cue.line = settings.get(\"line\", cue.line || \"auto\");\n    cue.lineAlign = settings.get(\"lineAlign\", \"start\");\n    cue.snapToLines = settings.get(\"snapToLines\", true);\n    cue.size = settings.get(\"size\", 100);\n    cue.align = settings.get(\"align\", \"middle\");\n    cue.position = settings.get(\"position\", cue.position || \"auto\");\n    cue.positionAlign = settings.get(\"positionAlign\", {\n      start: \"start\",\n      left: \"start\",\n      middle: \"middle\",\n      end: \"end\",\n      right: \"end\"\n    }, cue.align);\n  }\n\n  function skipWhitespace() {\n    input = input.replace(/^\\s+/, \"\");\n  }\n\n  // 4.1 WebVTT cue timings.\n  skipWhitespace();\n  cue.startTime = consumeTimeStamp(); // (1) collect cue start time\n  skipWhitespace();\n  if (input.substr(0, 3) !== \"-->\") {\n    // (3) next characters must match \"-->\"\n    throw new ParsingError(ParsingError.Errors.BadTimeStamp, \"Malformed time stamp (time stamps must be separated by '-->'): \" + oInput);\n  }\n  input = input.substr(3);\n  skipWhitespace();\n  cue.endTime = consumeTimeStamp(); // (5) collect cue end time\n\n  // 4.1 WebVTT cue settings list.\n  skipWhitespace();\n  consumeCueSettings(input, cue);\n}\n\n// Parse content into a document fragment.\nfunction parseContent(window, input) {\n  function nextToken() {\n    // Check for end-of-string.\n    if (!input) {\n      return null;\n    }\n\n    // Consume 'n' characters from the input.\n    function consume(result) {\n      input = input.substr(result.length);\n      return result;\n    }\n\n    var m = input.match(/^([^<]*)(<[^>]+>?)?/);\n    // If there is some text before the next tag, return it, otherwise return\n    // the tag.\n    return consume(m[1] ? m[1] : m[2]);\n  }\n\n  // Unescape a string 's'.\n  function unescape1(e) {\n    return ESCAPE[e];\n  }\n\n  function unescape(s) {\n    var m = void 0;\n    while (m = s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/)) {\n      s = s.replace(m[0], unescape1);\n    }\n    return s;\n  }\n\n  function shouldAdd(current, element) {\n    return !NEEDS_PARENT[element.localName] || NEEDS_PARENT[element.localName] === current.localName;\n  }\n\n  // Create an element for this tag.\n  function createElement(type, annotation) {\n    var tagName = TAG_NAME[type];\n    if (!tagName) {\n      return null;\n    }\n    var element = window.document.createElement(tagName);\n    element.localName = tagName;\n    var name = TAG_ANNOTATION[type];\n    if (name && annotation) {\n      element[name] = annotation.trim();\n    }\n    return element;\n  }\n\n  var rootDiv = window.document.createElement(\"div\"),\n      current = rootDiv,\n      t = void 0,\n      tagStack = [];\n\n  while ((t = nextToken()) !== null) {\n    if (t[0] === '<') {\n      if (t[1] === \"/\") {\n        // If the closing tag matches, move back up to the parent node.\n        if (tagStack.length && tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n          tagStack.pop();\n          current = current.parentNode;\n        }\n        // Otherwise just ignore the end tag.\n        continue;\n      }\n      var ts = parseTimeStamp(t.substr(1, t.length - 2));\n      var node = void 0;\n      if (ts) {\n        // Timestamps are lead nodes as well.\n        node = window.document.createProcessingInstruction(\"timestamp\", ts);\n        current.appendChild(node);\n        continue;\n      }\n      var m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/);\n      // If we can't parse the tag, skip to the next tag.\n      if (!m) {\n        continue;\n      }\n      // Try to construct an element, and ignore the tag if we couldn't.\n      node = createElement(m[1], m[3]);\n      if (!node) {\n        continue;\n      }\n      // Determine if the tag should be added based on the context of where it\n      // is placed in the cuetext.\n      if (!shouldAdd(current, node)) {\n        continue;\n      }\n      // Set the class list (as a list of classes, separated by space).\n      if (m[2]) {\n        node.className = m[2].substr(1).replace('.', ' ');\n      }\n      // Append the node to the current node, and enter the scope of the new\n      // node.\n      tagStack.push(m[1]);\n      current.appendChild(node);\n      current = node;\n      continue;\n    }\n\n    // Text nodes are leaf nodes.\n    current.appendChild(window.document.createTextNode(unescape(t)));\n  }\n\n  return rootDiv;\n}\n\n// This is a list of all the Unicode characters that have a strong\n// right-to-left category. What this means is that these characters are\n// written right-to-left for sure. It was generated by pulling all the strong\n// right-to-left characters out of the Unicode data table. That table can\n// found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\nvar strongRTLRanges = [[0x5be, 0x5be], [0x5c0, 0x5c0], [0x5c3, 0x5c3], [0x5c6, 0x5c6], [0x5d0, 0x5ea], [0x5f0, 0x5f4], [0x608, 0x608], [0x60b, 0x60b], [0x60d, 0x60d], [0x61b, 0x61b], [0x61e, 0x64a], [0x66d, 0x66f], [0x671, 0x6d5], [0x6e5, 0x6e6], [0x6ee, 0x6ef], [0x6fa, 0x70d], [0x70f, 0x710], [0x712, 0x72f], [0x74d, 0x7a5], [0x7b1, 0x7b1], [0x7c0, 0x7ea], [0x7f4, 0x7f5], [0x7fa, 0x7fa], [0x800, 0x815], [0x81a, 0x81a], [0x824, 0x824], [0x828, 0x828], [0x830, 0x83e], [0x840, 0x858], [0x85e, 0x85e], [0x8a0, 0x8a0], [0x8a2, 0x8ac], [0x200f, 0x200f], [0xfb1d, 0xfb1d], [0xfb1f, 0xfb28], [0xfb2a, 0xfb36], [0xfb38, 0xfb3c], [0xfb3e, 0xfb3e], [0xfb40, 0xfb41], [0xfb43, 0xfb44], [0xfb46, 0xfbc1], [0xfbd3, 0xfd3d], [0xfd50, 0xfd8f], [0xfd92, 0xfdc7], [0xfdf0, 0xfdfc], [0xfe70, 0xfe74], [0xfe76, 0xfefc], [0x10800, 0x10805], [0x10808, 0x10808], [0x1080a, 0x10835], [0x10837, 0x10838], [0x1083c, 0x1083c], [0x1083f, 0x10855], [0x10857, 0x1085f], [0x10900, 0x1091b], [0x10920, 0x10939], [0x1093f, 0x1093f], [0x10980, 0x109b7], [0x109be, 0x109bf], [0x10a00, 0x10a00], [0x10a10, 0x10a13], [0x10a15, 0x10a17], [0x10a19, 0x10a33], [0x10a40, 0x10a47], [0x10a50, 0x10a58], [0x10a60, 0x10a7f], [0x10b00, 0x10b35], [0x10b40, 0x10b55], [0x10b58, 0x10b72], [0x10b78, 0x10b7f], [0x10c00, 0x10c48], [0x1ee00, 0x1ee03], [0x1ee05, 0x1ee1f], [0x1ee21, 0x1ee22], [0x1ee24, 0x1ee24], [0x1ee27, 0x1ee27], [0x1ee29, 0x1ee32], [0x1ee34, 0x1ee37], [0x1ee39, 0x1ee39], [0x1ee3b, 0x1ee3b], [0x1ee42, 0x1ee42], [0x1ee47, 0x1ee47], [0x1ee49, 0x1ee49], [0x1ee4b, 0x1ee4b], [0x1ee4d, 0x1ee4f], [0x1ee51, 0x1ee52], [0x1ee54, 0x1ee54], [0x1ee57, 0x1ee57], [0x1ee59, 0x1ee59], [0x1ee5b, 0x1ee5b], [0x1ee5d, 0x1ee5d], [0x1ee5f, 0x1ee5f], [0x1ee61, 0x1ee62], [0x1ee64, 0x1ee64], [0x1ee67, 0x1ee6a], [0x1ee6c, 0x1ee72], [0x1ee74, 0x1ee77], [0x1ee79, 0x1ee7c], [0x1ee7e, 0x1ee7e], [0x1ee80, 0x1ee89], [0x1ee8b, 0x1ee9b], [0x1eea1, 0x1eea3], [0x1eea5, 0x1eea9], [0x1eeab, 0x1eebb], [0x10fffd, 0x10fffd]];\n\nfunction isStrongRTLChar(charCode) {\n  for (var i = 0; i < strongRTLRanges.length; i++) {\n    var currentRange = strongRTLRanges[i];\n    if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction determineBidi(cueDiv) {\n  var nodeStack = [],\n      text = \"\",\n      charCode = void 0;\n\n  if (!cueDiv || !cueDiv.childNodes) {\n    return \"ltr\";\n  }\n\n  function pushNodes(nodeStack, node) {\n    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n      nodeStack.push(node.childNodes[i]);\n    }\n  }\n\n  function nextTextNode(nodeStack) {\n    if (!nodeStack || !nodeStack.length) {\n      return null;\n    }\n\n    var node = nodeStack.pop(),\n        text = node.textContent || node.innerText;\n    if (text) {\n      // TODO: This should match all unicode type B characters (paragraph\n      // separator characters). See issue #115.\n      var m = text.match(/^.*(\\n|\\r)/);\n      if (m) {\n        nodeStack.length = 0;\n        return m[0];\n      }\n      return text;\n    }\n    if (node.tagName === \"ruby\") {\n      return nextTextNode(nodeStack);\n    }\n    if (node.childNodes) {\n      pushNodes(nodeStack, node);\n      return nextTextNode(nodeStack);\n    }\n  }\n\n  pushNodes(nodeStack, cueDiv);\n  while (text = nextTextNode(nodeStack)) {\n    for (var i = 0; i < text.length; i++) {\n      charCode = text.charCodeAt(i);\n      if (isStrongRTLChar(charCode)) {\n        return \"rtl\";\n      }\n    }\n  }\n  return \"ltr\";\n}\n\nfunction computeLinePos(cue) {\n  if (typeof cue.line === \"number\" && (cue.snapToLines || cue.line >= 0 && cue.line <= 100)) {\n    return cue.line;\n  }\n  if (!cue.track || !cue.track.textTrackList || !cue.track.textTrackList.mediaElement) {\n    return -1;\n  }\n  var track = cue.track;\n  var trackList = track.textTrackList;\n  var count = 0;\n  for (var i = 0; i < trackList.length && trackList[i] !== track; i++) {\n    if (trackList[i].mode === \"showing\") {\n      count++;\n    }\n  }\n  return ++count * -1;\n}\n\nvar StyleBox = function () {\n  function StyleBox() {\n    _classCallCheck(this, StyleBox);\n  }\n\n  // Apply styles to a div. If there is no div passed then it defaults to the\n  // div on 'this'.\n\n\n  _createClass(StyleBox, [{\n    key: \"applyStyles\",\n    value: function applyStyles(styles, div) {\n      div = div || this.div;\n      for (var prop in styles) {\n        if (styles.hasOwnProperty(prop)) {\n          div.style[prop] = styles[prop];\n        }\n      }\n    }\n  }, {\n    key: \"formatStyle\",\n    value: function formatStyle(val, unit) {\n      return val === 0 ? 0 : val + unit;\n    }\n  }]);\n\n  return StyleBox;\n}();\n\n// Constructs the computed display state of the cue (a div). Places the div\n// into the overlay which should be a block level element (usually a div).\n\n\nvar CueStyleBox = function (_StyleBox) {\n  _inherits(CueStyleBox, _StyleBox);\n\n  function CueStyleBox(window, cue, styleOptions) {\n    _classCallCheck(this, CueStyleBox);\n\n    var _this = _possibleConstructorReturn(this, (CueStyleBox.__proto__ || Object.getPrototypeOf(CueStyleBox)).call(this));\n\n    var isIE8 = typeof navigator !== \"undefined\" && /MSIE\\s8\\.0/.test(navigator.userAgent);\n    var color = \"rgba(255, 255, 255, 1)\";\n    var backgroundColor = \"rgba(0, 0, 0, 0.8)\";\n    var textShadow = \"\";\n\n    if (typeof WebVTTSet !== \"undefined\") {\n      color = WebVTTSet.fontSet;\n      backgroundColor = WebVTTSet.backgroundSet;\n      textShadow = WebVTTSet.edgeSet;\n    }\n\n    if (isIE8) {\n      color = \"rgb(255, 255, 255)\";\n      backgroundColor = \"rgb(0, 0, 0)\";\n    }\n\n    _this.cue = cue;\n\n    // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n    // have inline positioning and will function as the cue background box.\n    _this.cueDiv = parseContent(window, cue.text);\n    var styles = {\n      color: color,\n      backgroundColor: backgroundColor,\n      textShadow: textShadow,\n      position: \"relative\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      display: \"inline\"\n    };\n\n    if (!isIE8) {\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\";\n      styles.unicodeBidi = \"plaintext\";\n    }\n    _this.applyStyles(styles, _this.cueDiv);\n\n    // Create an absolutely positioned div that will be used to position the cue\n    // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n    // mirrors of them except \"middle\" which is \"center\" in CSS.\n    _this.div = window.document.createElement(\"div\");\n    styles = {\n      textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n      font: styleOptions.font,\n      whiteSpace: \"pre-line\",\n      position: \"absolute\"\n    };\n\n    if (!isIE8) {\n      styles.direction = determineBidi(_this.cueDiv);\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\".stylesunicodeBidi = \"plaintext\";\n    }\n\n    _this.applyStyles(styles);\n\n    _this.div.appendChild(_this.cueDiv);\n\n    // Calculate the distance from the reference edge of the viewport to the text\n    // position of the cue box. The reference edge will be resolved later when\n    // the box orientation styles are applied.\n    var textPos = 0;\n    switch (cue.positionAlign) {\n      case \"start\":\n        textPos = cue.position;\n        break;\n      case \"middle\":\n        textPos = cue.position - cue.size / 2;\n        break;\n      case \"end\":\n        textPos = cue.position - cue.size;\n        break;\n    }\n\n    // Horizontal box orientation; textPos is the distance from the left edge of the\n    // area to the left edge of the box and cue.size is the distance extending to\n    // the right from there.\n    if (cue.vertical === \"\") {\n      _this.applyStyles({\n        left: _this.formatStyle(textPos, \"%\"),\n        width: _this.formatStyle(cue.size, \"%\")\n      });\n      // Vertical box orientation; textPos is the distance from the top edge of the\n      // area to the top edge of the box and cue.size is the height extending\n      // downwards from there.\n    } else {\n      _this.applyStyles({\n        top: _this.formatStyle(textPos, \"%\"),\n        height: _this.formatStyle(cue.size, \"%\")\n      });\n    }\n\n    _this.move = function (box) {\n      this.applyStyles({\n        top: this.formatStyle(box.top, \"px\"),\n        bottom: this.formatStyle(box.bottom, \"px\"),\n        left: this.formatStyle(box.left, \"px\"),\n        right: this.formatStyle(box.right, \"px\"),\n        height: this.formatStyle(box.height, \"px\"),\n        width: this.formatStyle(box.width, \"px\")\n      });\n    };\n    return _this;\n  }\n\n  return CueStyleBox;\n}(StyleBox);\n\n// Represents the co-ordinates of an Element in a way that we can easily\n// compute things with such as if it overlaps or intersects with another Element.\n// Can initialize it with either a StyleBox or another BoxPosition.\n\n\nvar BoxPosition = function () {\n  function BoxPosition(obj) {\n    _classCallCheck(this, BoxPosition);\n\n    this.overlaps = function (b2) {\n      return this.left < b2.right && this.right > b2.left && this.top < b2.bottom && this.bottom > b2.top;\n    };\n\n    var isIE8 = typeof navigator !== \"undefined\" && /MSIE\\s8\\.0/.test(navigator.userAgent);\n\n    // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n    // was passed in and we need to copy the results of 'getBoundingClientRect'\n    // as the object returned is readonly. All co-ordinate values are in reference\n    // to the viewport origin (top left).\n    var lh = void 0,\n        height = void 0,\n        width = void 0,\n        top = void 0;\n    if (obj.div) {\n      height = obj.div.offsetHeight;\n      width = obj.div.offsetWidth;\n      top = obj.div.offsetTop;\n\n      var rects = (rects = obj.div.childNodes) && (rects = rects[0]) && rects.getClientRects && rects.getClientRects();\n      obj = obj.div.getBoundingClientRect();\n      // In certain cases the outter div will be slightly larger then the sum of\n      // the inner div's lines. This could be due to bold text, etc, on some platforms.\n      // In this case we should get the average line height and use that. This will\n      // result in the desired behaviour.\n      lh = rects ? Math.max(rects[0] && rects[0].height || 0, obj.height / rects.length) : 0;\n    }\n    this.left = obj.left;\n    this.right = obj.right;\n    this.top = obj.top || top;\n    this.height = obj.height || height;\n    this.bottom = obj.bottom || top + (obj.height || height);\n    this.width = obj.width || width;\n    this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n\n    if (isIE8 && !this.lineHeight) {\n      this.lineHeight = 13;\n    }\n  }\n\n  // Move the box along a particular axis. Optionally pass in an amount to move\n  // the box. If no amount is passed then the default is the line height of the\n  // box.\n\n\n  _createClass(BoxPosition, [{\n    key: \"move\",\n    value: function move(axis, toMove) {\n      toMove = toMove !== undefined ? toMove : this.lineHeight;\n      switch (axis) {\n        case \"+x\":\n          this.left += toMove;\n          this.right += toMove;\n          break;\n        case \"-x\":\n          this.left -= toMove;\n          this.right -= toMove;\n          break;\n        case \"+y\":\n          this.top += toMove;\n          this.bottom += toMove;\n          break;\n        case \"-y\":\n          this.top -= toMove;\n          this.bottom -= toMove;\n          break;\n      }\n    }\n\n    // Check if this box overlaps another box, b2.\n\n  }, {\n    key: \"overlapsAny\",\n\n\n    // Check if this box overlaps any other boxes in boxes.\n    value: function overlapsAny(boxes) {\n      for (var i = 0; i < boxes.length; i++) {\n        if (this.overlaps(boxes[i])) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    // Check if this box is within another box.\n\n  }, {\n    key: \"within\",\n    value: function within(container) {\n      return this.top >= container.top && this.bottom <= container.bottom && this.left >= container.left && this.right <= container.right;\n    }\n\n    // Check if this box is entirely within the container or it is overlapping\n    // on the edge opposite of the axis direction passed. For example, if \"+x\" is\n    // passed and the box is overlapping on the left edge of the container, then\n    // return true.\n\n  }, {\n    key: \"overlapsOppositeAxis\",\n    value: function overlapsOppositeAxis(container, axis) {\n      switch (axis) {\n        case \"+x\":\n          return this.left < container.left;\n        case \"-x\":\n          return this.right > container.right;\n        case \"+y\":\n          return this.top < container.top;\n        case \"-y\":\n          return this.bottom > container.bottom;\n      }\n    }\n\n    // Find the percentage of the area that this box is overlapping with another\n    // box.\n\n  }, {\n    key: \"intersectPercentage\",\n    value: function intersectPercentage(b2) {\n      var x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n          y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n          intersectArea = x * y;\n      return intersectArea / (this.height * this.width);\n    }\n\n    // Convert the positions from this box to CSS compatible positions using\n    // the reference container's positions. This has to be done because this\n    // box's positions are in reference to the viewport origin, whereas, CSS\n    // values are in referecne to their respective edges.\n\n  }, {\n    key: \"toCSSCompatValues\",\n    value: function toCSSCompatValues(reference) {\n      return {\n        top: this.top - reference.top,\n        bottom: reference.bottom - this.bottom,\n        left: this.left - reference.left,\n        right: reference.right - this.right,\n        height: this.height,\n        width: this.width\n      };\n    }\n\n    // Get an object that represents the box's position without anything extra.\n    // Can pass a StyleBox, HTMLElement, or another BoxPositon.\n\n  }], [{\n    key: \"getSimpleBoxPosition\",\n    value: function getSimpleBoxPosition(obj) {\n      var height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n      var width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n      var top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n\n      obj = obj.div ? obj.div.getBoundingClientRect() : obj.tagName ? obj.getBoundingClientRect() : obj;\n      return {\n        left: obj.left,\n        right: obj.right,\n        top: obj.top || top,\n        height: obj.height || height,\n        bottom: obj.bottom || top + (obj.height || height),\n        width: obj.width || width\n      };\n    }\n  }]);\n\n  return BoxPosition;\n}();\n\n// Move a StyleBox to its specified, or next best, position. The containerBox\n// is the box that contains the StyleBox, such as a div. boxPositions are\n// a list of other boxes that the styleBox can't overlap with.\n\n\nfunction moveBoxToLinePosition(styleBox, containerBox, boxPositions) {\n\n  // Find the best position for a cue box, b, on the video. The axis parameter\n  // is a list of axis, the order of which, it will move the box along. For example:\n  // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n  // direction. If it doesn't find a good position for it there it will then move\n  // it along the x axis in the negative direction.\n  function findBestPosition(b, axis) {\n    var bestPosition = void 0,\n        specifiedPosition = new BoxPosition(b),\n        percentage = 1; // Highest possible so the first thing we get is better.\n\n    for (var i = 0; i < axis.length; i++) {\n      while (b.overlapsOppositeAxis(containerBox, axis[i]) || b.within(containerBox) && b.overlapsAny(boxPositions)) {\n        b.move(axis[i]);\n      }\n      // We found a spot where we aren't overlapping anything. This is our\n      // best position.\n      if (b.within(containerBox)) {\n        return b;\n      }\n      var p = b.intersectPercentage(containerBox);\n      // If we're outside the container box less then we were on our last try\n      // then remember this position as the best position.\n      if (percentage > p) {\n        bestPosition = new BoxPosition(b);\n        percentage = p;\n      }\n      // Reset the box position to the specified position.\n      b = new BoxPosition(specifiedPosition);\n    }\n    return bestPosition || specifiedPosition;\n  }\n\n  var boxPosition = new BoxPosition(styleBox),\n      cue = styleBox.cue,\n      linePos = computeLinePos(cue),\n      axis = [];\n\n  // If we have a line number to align the cue to.\n  if (cue.snapToLines) {\n    var size = void 0;\n    switch (cue.vertical) {\n      case \"\":\n        axis = [\"+y\", \"-y\"];\n        size = \"height\";\n        break;\n      case \"rl\":\n        axis = [\"+x\", \"-x\"];\n        size = \"width\";\n        break;\n      case \"lr\":\n        axis = [\"-x\", \"+x\"];\n        size = \"width\";\n        break;\n    }\n\n    var step = boxPosition.lineHeight,\n        position = step * Math.round(linePos),\n        maxPosition = containerBox[size] + step,\n        initialAxis = axis[0];\n\n    // If the specified intial position is greater then the max position then\n    // clamp the box to the amount of steps it would take for the box to\n    // reach the max position.\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    }\n\n    // If computed line position returns negative then line numbers are\n    // relative to the bottom of the video instead of the top. Therefore, we\n    // need to increase our initial position by the length or width of the\n    // video, depending on the writing direction, and reverse our axis directions.\n    if (linePos < 0) {\n      position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n      axis = axis.reverse();\n    }\n\n    // Move the box to the specified position. This may not be its best\n    // position.\n    boxPosition.move(initialAxis, position);\n  } else {\n    // If we have a percentage line value for the cue.\n    var calculatedPercentage = boxPosition.lineHeight / containerBox.height * 100;\n\n    switch (cue.lineAlign) {\n      case \"middle\":\n        linePos -= calculatedPercentage / 2;\n        break;\n      case \"end\":\n        linePos -= calculatedPercentage;\n        break;\n    }\n\n    // Apply initial line position to the cue box.\n    switch (cue.vertical) {\n      case \"\":\n        styleBox.applyStyles({\n          top: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"rl\":\n        styleBox.applyStyles({\n          left: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"lr\":\n        styleBox.applyStyles({\n          right: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n    }\n\n    axis = [\"+y\", \"-x\", \"+x\", \"-y\"];\n\n    // Get the box position again after we've applied the specified positioning\n    // to it.\n    boxPosition = new BoxPosition(styleBox);\n  }\n\n  var bestPosition = findBestPosition(boxPosition, axis);\n  styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n}\n\nfunction convertCueToDOMTree(window, cuetext) {\n  if (!window || !cuetext) {\n    return null;\n  }\n  return parseContent(window, cuetext);\n}\n\nvar FONT_SIZE_PERCENT = 0.05;\nvar FONT_STYLE = \"sans-serif\";\nvar CUE_BACKGROUND_PADDING = \"1.5%\";\n\n// Runs the processing model over the cues and regions passed to it.\n// @param overlay A block level element (usually a div) that the computed cues\n//                and regions will be placed into.\nfunction processCues(window, cues, overlay) {\n  if (!window || !cues || !overlay) {\n    return null;\n  }\n\n  // Remove all previous children.\n  while (overlay.firstChild) {\n    overlay.removeChild(overlay.firstChild);\n  }\n\n  var paddedOverlay = window.document.createElement(\"div\");\n  paddedOverlay.style.position = \"absolute\";\n  paddedOverlay.style.left = \"0\";\n  paddedOverlay.style.right = \"0\";\n  paddedOverlay.style.top = \"0\";\n  paddedOverlay.style.bottom = \"0\";\n  paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n  overlay.appendChild(paddedOverlay);\n\n  // Determine if we need to compute the display states of the cues. This could\n  // be the case if a cue's state has been changed since the last computation or\n  // if it has not been computed yet.\n  function shouldCompute(cues) {\n    for (var i = 0; i < cues.length; i++) {\n      if (cues[i].hasBeenReset || !cues[i].displayState) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // We don't need to recompute the cues' display states. Just reuse them.\n  if (!shouldCompute(cues)) {\n    for (var i = 0; i < cues.length; i++) {\n      paddedOverlay.appendChild(cues[i].displayState);\n    }\n    return;\n  }\n\n  var boxPositions = [],\n      containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n      fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n  var styleOptions = {\n    font: fontSize * fontScale + \"px \" + FONT_STYLE\n  };\n\n  (function () {\n    var styleBox = void 0,\n        cue = void 0;\n\n    for (var _i = 0; _i < cues.length; _i++) {\n      cue = cues[_i];\n\n      // Compute the intial position and styles of the cue div.\n      styleBox = new CueStyleBox(window, cue, styleOptions);\n      paddedOverlay.appendChild(styleBox.div);\n\n      // Move the cue div to it's correct line position.\n      moveBoxToLinePosition(styleBox, containerBox, boxPositions);\n\n      // Remember the computed div so that we don't have to recompute it later\n      // if we don't have too.\n      cue.displayState = styleBox.div;\n\n      boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n    }\n  })();\n};\n\nvar Parser = function Parser(window, decoder) {\n  this.window = window;\n  this.state = \"INITIAL\";\n  this.buffer = \"\";\n  this.decoder = decoder || new TextDecoder(\"utf8\");\n  this.regionList = [];\n};\n\nvar StringDecoder = function StringDecoder() {\n  return {\n    decode: function decode(data) {\n      if (!data) {\n        return \"\";\n      }\n      if (typeof data !== \"string\") {\n        throw new Error(\"Error - expected string data.\");\n      }\n      return decodeURIComponent(encodeURIComponent(data));\n    }\n  };\n};\n\nvar _objCreate = Object.create || function () {\n  function F() {}\n\n  return function (o) {\n    if (arguments.length !== 1) {\n      throw new Error('Object.create shim only accepts one parameter.');\n    }\n    F.prototype = o;\n    return new F();\n  };\n}();\n\n// Creates a new ParserError object from an errorData object. The errorData\n// object should have default code and message properties. The default message\n// property can be overriden by passing in a message parameter.\n// See ParsingError.Errors below for acceptable errors.\nfunction ParsingError(errorData, message) {\n  this.name = \"ParsingError\";\n  this.code = errorData.code;\n  this.message = message || errorData.message;\n}\n\nParsingError.prototype = _objCreate(Error.prototype);\nParsingError.prototype.constructor = ParsingError;\n\n// ParsingError metadata for acceptable ParsingErrors.\nParsingError.Errors = {\n  BadSignature: {\n    code: 0,\n    message: \"Malformed WebVTT signature.\"\n  },\n  BadTimeStamp: {\n    code: 1,\n    message: \"Malformed time stamp.\"\n  }\n};\n\nParser.prototype = {\n  // If the error is a ParsingError then report it to the consumer if\n  // possible. If it's not a ParsingError then throw it like normal.\n  reportOrThrowError: function reportOrThrowError(e) {\n    if (e instanceof ParsingError) {\n      this.onparsingerror && this.onparsingerror(e);\n    } else {\n      throw e;\n    }\n  },\n  parse: function parse(data) {\n    var self = this;\n\n    // If there is no data then we won't decode it, but will just try to parse\n    // whatever is in buffer already. This may occur in circumstances, for\n    // example when flush() is called.\n    if (data) {\n      // Try to decode the data that we received.\n      self.buffer += self.decoder.decode(data, { stream: true });\n    }\n\n    function collectNextLine() {\n      var buffer = self.buffer;\n      var pos = 0;\n      while (pos < buffer.length && buffer[pos] !== '\\r' && buffer[pos] !== '\\n') {\n        ++pos;\n      }\n      var line = buffer.substr(0, pos);\n      // Advance the buffer early in case we fail below.\n      if (buffer[pos] === '\\r') {\n        ++pos;\n      }\n      if (buffer[pos] === '\\n') {\n        ++pos;\n      }\n      self.buffer = buffer.substr(pos);\n      return line;\n    }\n\n    // 3.4 WebVTT region and WebVTT region settings syntax\n    function parseRegion(input) {\n      var settings = new Settings();\n\n      parseOptions(input, function (k, v) {\n        switch (k) {\n          case \"id\":\n            settings.set(k, v);\n            break;\n          case \"width\":\n            settings.percent(k, v);\n            break;\n          case \"lines\":\n            settings.integer(k, v);\n            break;\n          case \"regionanchor\":\n          case \"viewportanchor\":\n            var xy = v.split(',');\n            if (xy.length !== 2) {\n              break;\n            }\n            // We have to make sure both x and y parse, so use a temporary\n            // settings object here.\n            var anchor = new Settings();\n            anchor.percent(\"x\", xy[0]);\n            anchor.percent(\"y\", xy[1]);\n            if (!anchor.has(\"x\") || !anchor.has(\"y\")) {\n              break;\n            }\n            settings.set(k + \"X\", anchor.get(\"x\"));\n            settings.set(k + \"Y\", anchor.get(\"y\"));\n            break;\n          case \"scroll\":\n            settings.alt(k, v, [\"up\"]);\n            break;\n        }\n      }, /=/, /\\s/);\n\n      // Create the region, using default values for any values that were not\n      // specified.\n      if (settings.has(\"id\")) {\n        var region = new self.window.VTTRegion();\n        region.width = settings.get(\"width\", 100);\n        region.lines = settings.get(\"lines\", 3);\n        region.regionAnchorX = settings.get(\"regionanchorX\", 0);\n        region.regionAnchorY = settings.get(\"regionanchorY\", 100);\n        region.viewportAnchorX = settings.get(\"viewportanchorX\", 0);\n        region.viewportAnchorY = settings.get(\"viewportanchorY\", 100);\n        region.scroll = settings.get(\"scroll\", \"\");\n        // Register the region.\n        self.onregion && self.onregion(region);\n        // Remember the VTTRegion for later in case we parse any VTTCues that\n        // reference it.\n        self.regionList.push({\n          id: settings.get(\"id\"),\n          region: region\n        });\n      }\n    }\n\n    // 3.2 WebVTT metadata header syntax\n    function parseHeader(input) {\n      parseOptions(input, function (k, v) {\n        switch (k) {\n          case \"Region\":\n            // 3.3 WebVTT region metadata header syntax\n            parseRegion(v);\n            break;\n        }\n      }, /:/);\n    }\n\n    // 5.1 WebVTT file parsing.\n    try {\n      var line;\n      if (self.state === \"INITIAL\") {\n        // We can't start parsing until we have the first line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        line = collectNextLine();\n\n        var m = line.match(/^WEBVTT([ \\t].*)?$/);\n        if (!m || !m[0]) {\n          throw new ParsingError(ParsingError.Errors.BadSignature);\n        }\n\n        self.state = \"HEADER\";\n      }\n\n      var alreadyCollectedLine = false;\n      while (self.buffer) {\n        // We can't parse a line until we have the full line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        if (!alreadyCollectedLine) {\n          line = collectNextLine();\n        } else {\n          alreadyCollectedLine = false;\n        }\n\n        switch (self.state) {\n          case \"HEADER\":\n            // 13-18 - Allow a header (metadata) under the WEBVTT line.\n            if (/:/.test(line)) {\n              parseHeader(line);\n            } else if (!line) {\n              // An empty line terminates the header and starts the body (cues).\n              self.state = \"ID\";\n            }\n            continue;\n          case \"NOTE\":\n            // Ignore NOTE blocks.\n            if (!line) {\n              self.state = \"ID\";\n            }\n            continue;\n          case \"ID\":\n            // Check for the start of NOTE blocks.\n            if (/^NOTE($|[ \\t])/.test(line)) {\n              self.state = \"NOTE\";\n              break;\n            }\n            // 19-29 - Allow any number of line terminators, then initialize new cue values.\n            if (!line) {\n              continue;\n            }\n            self.cue = new self.window.VTTCue(0, 0, \"\");\n            self.state = \"CUE\";\n            // 30-39 - Check if self line contains an optional identifier or timing data.\n            if (line.indexOf(\"-->\") === -1) {\n              self.cue.id = line;\n              continue;\n            }\n          // Process line as start of a cue.\n          /*falls through*/\n          case \"CUE\":\n            // 40 - Collect cue timings and settings.\n            try {\n              parseCue(line, self.cue, self.regionList);\n            } catch (e) {\n              self.reportOrThrowError(e);\n              // In case of an error ignore rest of the cue.\n              self.cue = null;\n              self.state = \"BADCUE\";\n              continue;\n            }\n            self.state = \"CUETEXT\";\n            continue;\n          case \"CUETEXT\":\n            var hasSubstring = line.indexOf(\"-->\") !== -1;\n            // 34 - If we have an empty line then report the cue.\n            // 35 - If we have the special substring '-->' then report the cue,\n            // but do not collect the line as we need to process the current\n            // one as a new cue.\n            if (!line || hasSubstring && (alreadyCollectedLine = true)) {\n              // We are done parsing self cue.\n              self.oncue && self.oncue(self.cue);\n              self.cue = null;\n              self.state = \"ID\";\n              continue;\n            }\n            if (self.cue.text) {\n              self.cue.text += \"\\n\";\n            }\n            self.cue.text += line;\n            continue;\n          case \"BADCUE\":\n            // BADCUE\n            // 54-62 - Collect and discard the remaining cue.\n            if (!line) {\n              self.state = \"ID\";\n            }\n            continue;\n        }\n      }\n    } catch (e) {\n      self.reportOrThrowError(e);\n\n      // If we are currently parsing a cue, report what we have.\n      if (self.state === \"CUETEXT\" && self.cue && self.oncue) {\n        self.oncue(self.cue);\n      }\n      self.cue = null;\n      // Enter BADWEBVTT state if header was not parsed correctly otherwise\n      // another exception occurred so enter BADCUE state.\n      self.state = self.state === \"INITIAL\" ? \"BADWEBVTT\" : \"BADCUE\";\n    }\n    return this;\n  },\n  flush: function flush() {\n    var self = this;\n    try {\n      // Finish decoding the stream.\n      self.buffer += self.decoder.decode();\n      // Synthesize the end of the current cue or region.\n      if (self.cue || self.state === \"HEADER\") {\n        self.buffer += \"\\n\\n\";\n        self.parse();\n      }\n      // If we've flushed, parsed, and we're still on the INITIAL state then\n      // that means we don't have enough of the stream to parse the first\n      // line.\n      if (self.state === \"INITIAL\") {\n        throw new ParsingError(ParsingError.Errors.BadSignature);\n      }\n    } catch (e) {\n      self.reportOrThrowError(e);\n    }\n    self.onflush && self.onflush();\n    return this;\n  }\n};\n\nexports.processCues = processCues;\nexports.convertCueToDOMTree = convertCueToDOMTree;\nexports.Parser = Parser;\nexports.StringDecoder = StringDecoder;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = __webpack_require__(8);\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _util = __webpack_require__(3);\n\nvar Utils = _interopRequireWildcard(_util);\n\nvar _eventManager = __webpack_require__(6);\n\nvar _eventManager2 = _interopRequireDefault(_eventManager);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/** The BasePlugin responsible to implement the plugin interface.\n * Contains several default implementations.\n * Other plugins should extend this class.\n * @classdesc\n */\nvar BasePlugin = function () {\n  _createClass(BasePlugin, null, [{\n    key: 'createPlugin',\n\n\n    /**\n     * Factory method to create the actual plugin.\n     * @param {string} name - The plugin name\n     * @param {Player} player - The player reference\n     * @param {Object} config - The plugin configuration\n     * @returns {BasePlugin} - New runtime plugin instance\n     * @static\n     * @public\n     */\n\n    /**\n     * The event manager of the plugin.\n     * @member\n     */\n\n    /**\n     * The logger of the plugin.\n     * @member\n     */\n\n    /**\n     * The runtime configuration of the plugin.\n     * @member\n     */\n    value: function createPlugin(name, player) {\n      var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      return new this(name, player, config);\n    }\n\n    /**\n     * Returns under what conditions the plugin is valid.\n     * Plugin must implement this method.\n     * @returns {boolean} - Whether the plugin is valid and can be initiated. Default implementation is true\n     * @static\n     * @public\n     * @abstract\n     */\n\n    /**\n     * The default configuration of the plugin.\n     * Inherited plugins should override this property.\n     * @type {Object}\n     * @static\n     * @member\n     */\n\n    /**\n     * Reference to the actual player.\n     * @member\n     */\n\n    /**\n     * The name of the plugin.\n     * @member\n     */\n\n  }, {\n    key: 'isValid',\n    value: function isValid() {\n      throw new _error2.default(_error2.default.Severity.CRITICAL, _error2.default.Category.PLAYER, _error2.default.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, 'isValid()');\n    }\n\n    /**\n     * constructor\n     * @param {string} name - The plugin name\n     * @param {Player} player - The player reference\n     * @param {Object} config - The plugin configuration\n     * @constructor\n     * @private\n     */\n\n  }]);\n\n  function BasePlugin(name, player, config) {\n    _classCallCheck(this, BasePlugin);\n\n    this.name = name;\n    this.player = player;\n    this.eventManager = new _eventManager2.default();\n    this.logger = (0, _logger2.default)(Utils.String.capitlize(this.name));\n    this.config = {};\n    Utils.Object.mergeDeep(this.config, this.constructor.defaultConfig, config);\n  }\n\n  /**\n   * Getter for the configuration of the plugin.\n   * @param {string} attr - The key in the plugin configuration (optional).\n   * @returns {*} - If attribute is provided, returns its value. Else, Returns the config of the plugin.\n   * @public\n   */\n\n\n  _createClass(BasePlugin, [{\n    key: 'getConfig',\n    value: function getConfig(attr) {\n      if (attr) {\n        return Utils.Object.copyDeep(this.config[attr]);\n      }\n      return Utils.Object.copyDeep(this.config);\n    }\n\n    /**\n     * Updates the config of the plugin.\n     * @param {Object} update - The updated configuration.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'updateConfig',\n    value: function updateConfig(update) {\n      Utils.Object.mergeDeep(this.config, update);\n    }\n\n    /**\n     * Runs the destroy logic of the plugin.\n     * plugin must implement this method.\n     * @public\n     * @virtual\n     * @returns {void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {}\n\n    /**\n     * Runs the reset logic of the plugin.\n     * plugin must implement this method.\n     * @public\n     * @virtual\n     * @returns {void}\n     */\n\n  }, {\n    key: 'reset',\n    value: function reset() {}\n\n    /**\n     * Getter for the plugin's name.\n     * @returns {string} - The name of the plugin.\n     * @public\n     */\n\n  }, {\n    key: 'getName',\n    value: function getName() {\n      return this.name;\n    }\n\n    /**\n     * Dispatch an event via the plugin.\n     * @param {string} name - The event name.\n     * @param {any} payload - The event payload.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'dispatchEvent',\n    value: function dispatchEvent(name, payload) {\n      this.logger.debug(\"Fire event: \" + name, payload);\n      this.player.dispatchEvent(new _fakeEvent2.default(name, payload));\n    }\n  }]);\n\n  return BasePlugin;\n}();\n\nBasePlugin.defaultConfig = {};\nexports.default = BasePlugin;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\nvar StateType = {\n  IDLE: \"idle\",\n  LOADING: \"loading\",\n  PLAYING: \"playing\",\n  PAUSED: \"paused\",\n  BUFFERING: \"buffering\"\n};\nexports.StateType = StateType;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Base middleware.\n * @classdesc\n */\nvar BaseMiddleware = function () {\n  function BaseMiddleware() {\n    _classCallCheck(this, BaseMiddleware);\n  }\n\n  _createClass(BaseMiddleware, [{\n    key: \"callNext\",\n\n\n    /**\n     * Calls the next handler in the middleware chain.\n     * @param {Function} next - The next handler in the middleware chain.\n     * @returns {void}\n     */\n    value: function callNext(next) {\n      if (next) {\n        next();\n      }\n    }\n    /**\n     * Id of the middleware instance.\n     * @public\n     */\n\n  }]);\n\n  return BaseMiddleware;\n}();\n\nexports.default = BaseMiddleware;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerMediaSourceAdapter = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _nativeAdapter = __webpack_require__(41);\n\nvar _nativeAdapter2 = _interopRequireDefault(_nativeAdapter);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Media source provider\n * @classdesc\n */\nvar MediaSourceProvider = function () {\n  function MediaSourceProvider() {\n    _classCallCheck(this, MediaSourceProvider);\n  }\n\n  _createClass(MediaSourceProvider, null, [{\n    key: 'register',\n\n\n    /**\n     * Add a media source adapter to the registry.\n     * @function register\n     * @param {IMediaSourceAdapter} mediaSourceAdapter - The media source adapter to register.\n     * @static\n     * @returns {void}\n     */\n\n    /**\n     * The media source adapter registry.\n     * @member {Array<IMediaSourceAdapter>} _mediaSourceAdapters\n     * @static\n     * @private\n     */\n    value: function register(mediaSourceAdapter) {\n      if (mediaSourceAdapter) {\n        if (!MediaSourceProvider._mediaSourceAdapters.includes(mediaSourceAdapter)) {\n          MediaSourceProvider._logger.debug('Adapter <' + mediaSourceAdapter.id + '> has been registered successfully');\n          MediaSourceProvider._mediaSourceAdapters.push(mediaSourceAdapter);\n        } else {\n          MediaSourceProvider._logger.debug('Adapter <' + mediaSourceAdapter.id + '> is already registered, do not register again');\n        }\n      }\n    }\n\n    /**\n     * Remove a media source adapter from the registry.\n     * @function unRegister\n     * @param {IMediaSourceAdapter} mediaSourceAdapter - The media source adapter to unRegister.\n     * @static\n     * @returns {void}\n     */\n\n    /**\n     * The selected adapter for playback.\n     * @type {null|IMediaSourceAdapter}\n     * @static\n     * @private\n     */\n\n    /**\n     * The logger of the media source provider.\n     * @member {any} _logger\n     * @static\n     * @private\n     */\n\n  }, {\n    key: 'unRegister',\n    value: function unRegister(mediaSourceAdapter) {\n      var index = MediaSourceProvider._mediaSourceAdapters.indexOf(mediaSourceAdapter);\n      if (index > -1) {\n        MediaSourceProvider._logger.debug('Unregistered <' + mediaSourceAdapter.id + '> adapter');\n        MediaSourceProvider._mediaSourceAdapters.splice(index, 1);\n      }\n    }\n\n    /**\n     * Checks if the a media source adapter can play a given source.\n     * @param {PKMediaSourceObject} source - The source object to check.\n     *  @param {boolean} [preferNative=true] - prefer native flag\n     * @returns {boolean} - Whether a media source adapter can play the source.\n     * @public\n     * @static\n     */\n\n  }, {\n    key: 'canPlaySource',\n    value: function canPlaySource(source) {\n      var preferNative = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      MediaSourceProvider._orderMediaSourceAdapters(preferNative);\n      var mediaSourceAdapters = MediaSourceProvider._mediaSourceAdapters;\n      if (source && source.mimetype) {\n        for (var i = 0; i < mediaSourceAdapters.length; i++) {\n          if (mediaSourceAdapters[i].canPlayType(source.mimetype) && (!source.drmData || mediaSourceAdapters[i].canPlayDrm(source.drmData))) {\n            MediaSourceProvider._selectedAdapter = mediaSourceAdapters[i];\n            MediaSourceProvider._logger.debug('Selected adapter is <' + MediaSourceProvider._selectedAdapter.id + '>');\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n\n    /**\n     * Orders the media source adapters array according to the preferNative value.\n     * @param {boolean} preferNative - Whether to prefer native playback.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_orderMediaSourceAdapters',\n    value: function _orderMediaSourceAdapters(preferNative) {\n      MediaSourceProvider._mediaSourceAdapters = MediaSourceProvider._mediaSourceAdapters.filter(function (mse) {\n        return mse.id !== 'NativeAdapter';\n      });\n      if (preferNative) {\n        MediaSourceProvider._mediaSourceAdapters.unshift(_nativeAdapter2.default);\n      } else {\n        MediaSourceProvider._mediaSourceAdapters.push(_nativeAdapter2.default);\n      }\n    }\n\n    /**\n     * Get the appropriate media source adapter to the video source.\n     * @function getMediaSourceAdapter\n     * @param {HTMLVideoElement} videoElement - The video element which requires adapter for a given mimeType.\n     * @param {PKMediaSourceObject} source - The selected source object.\n     * @param {Object} config - The player configuration.\n     * @returns {IMediaSourceAdapter|null} - The selected media source adapter, or null if such doesn't exists.\n     * @static\n     */\n\n  }, {\n    key: 'getMediaSourceAdapter',\n    value: function getMediaSourceAdapter(videoElement, source, config) {\n      if (videoElement && source && config) {\n        if (!MediaSourceProvider._selectedAdapter) {\n          MediaSourceProvider.canPlaySource(source, true);\n        }\n        return MediaSourceProvider._selectedAdapter ? MediaSourceProvider._selectedAdapter.createAdapter(videoElement, source, config) : null;\n      }\n      return null;\n    }\n\n    /**\n     * Destroys the media source adapter provider necessary props.\n     * @static\n     * @returns {void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      MediaSourceProvider._selectedAdapter = null;\n    }\n  }]);\n\n  return MediaSourceProvider;\n}();\n\nMediaSourceProvider._logger = (0, _logger2.default)('MediaSourceProvider');\nMediaSourceProvider._mediaSourceAdapters = [_nativeAdapter2.default];\nMediaSourceProvider._selectedAdapter = null;\nexports.default = MediaSourceProvider;\n\n\nvar registerMediaSourceAdapter = MediaSourceProvider.register;\nexports.registerMediaSourceAdapter = registerMediaSourceAdapter;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _fakeEventTarget = __webpack_require__(9);\n\nvar _fakeEventTarget2 = _interopRequireDefault(_fakeEventTarget);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nvar _eventType = __webpack_require__(4);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _track = __webpack_require__(5);\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _videoTrack = __webpack_require__(10);\n\nvar _videoTrack2 = _interopRequireDefault(_videoTrack);\n\nvar _audioTrack = __webpack_require__(11);\n\nvar _audioTrack2 = _interopRequireDefault(_audioTrack);\n\nvar _textTrack = __webpack_require__(7);\n\nvar _textTrack2 = _interopRequireDefault(_textTrack);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n/* eslint-disable no-unused-vars */\n\n\nvar BaseMediaSourceAdapter = function (_FakeEventTarget) {\n  _inherits(BaseMediaSourceAdapter, _FakeEventTarget);\n\n  _createClass(BaseMediaSourceAdapter, null, [{\n    key: 'isSupported',\n\n\n    /**\n     * Checks if the media source adapter is supported.\n     * @function isSupported\n     * @returns {boolean} - Whether the media source adapter is supported.\n     * @static\n     */\n\n\n    /**\n     * The adapter config.\n     * @member {Object} _config\n     * @private\n     */\n\n\n    /**\n     * The source object.\n     * @member {PKMediaSourceObject} _sourceObj\n     * @private\n     */\n\n\n    /**\n     * The dom video element.\n     * @member {HTMLVideoElement} _videoElement\n     * @private\n     */\n    value: function isSupported() {\n      return true;\n    }\n\n    /**\n     * @constructor\n     * @param {HTMLVideoElement} videoElement - The video element which bind to media source adapter.\n     * @param {PKMediaSourceObject} source - The source object.\n     * @param {Object} config - The media source adapter configuration.\n     */\n\n    /**\n     * Passing the getLogger function to the actual media source adapter.\n     * @type {Function}\n     * @static\n     */\n\n  }]);\n\n  function BaseMediaSourceAdapter(videoElement, source) {\n    var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, BaseMediaSourceAdapter);\n\n    var _this = _possibleConstructorReturn(this, (BaseMediaSourceAdapter.__proto__ || Object.getPrototypeOf(BaseMediaSourceAdapter)).call(this));\n\n    _this._videoElement = videoElement;\n    _this._sourceObj = source;\n    _this._config = config;\n    _this._handleLiveTimeUpdate();\n    return _this;\n  }\n\n  /**\n   * Destroys the media source adapter.\n   * @function destroy\n   * @returns {void}\n   */\n\n\n  _createClass(BaseMediaSourceAdapter, [{\n    key: 'destroy',\n    value: function destroy() {\n      this._sourceObj = null;\n      this._config = null;\n      return Promise.resolve();\n    }\n\n    /**\n     * Triggers the appropriate track changed event.\n     * @param {Track} track - The selected track.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onTrackChanged',\n    value: function _onTrackChanged(track) {\n      if (track instanceof _videoTrack2.default) {\n        this._trigger(_eventType.CustomEventType.VIDEO_TRACK_CHANGED, { selectedVideoTrack: track });\n      } else if (track instanceof _audioTrack2.default) {\n        this._trigger(_eventType.CustomEventType.AUDIO_TRACK_CHANGED, { selectedAudioTrack: track });\n      } else if (track instanceof _textTrack2.default) {\n        this._trigger(_eventType.CustomEventType.TEXT_TRACK_CHANGED, { selectedTextTrack: track });\n      }\n    }\n\n    /**\n     * Dispatch an adapter event forward.\n     * @param {string} name - The name of the event.\n     * @param {?Object} payload - The event payload.\n     * @returns {void}\n     */\n\n  }, {\n    key: '_trigger',\n    value: function _trigger(name, payload) {\n      this.dispatchEvent(new _fakeEvent2.default(name, payload));\n    }\n\n    /** Must implemented methods by the derived media source adapter **/\n\n  }, {\n    key: 'load',\n    value: function load() {\n      return BaseMediaSourceAdapter._throwNotImplementedError('load');\n    }\n  }, {\n    key: 'selectVideoTrack',\n    value: function selectVideoTrack(videoTrack) {\n      return BaseMediaSourceAdapter._throwNotImplementedError('selectVideoTrack');\n    }\n  }, {\n    key: 'selectAudioTrack',\n    value: function selectAudioTrack(audioTrack) {\n      BaseMediaSourceAdapter._throwNotImplementedError('selectAudioTrack');\n    }\n  }, {\n    key: 'selectTextTrack',\n    value: function selectTextTrack(textTrack) {\n      BaseMediaSourceAdapter._throwNotImplementedError('selectTextTrack');\n    }\n  }, {\n    key: 'hideTextTrack',\n    value: function hideTextTrack() {\n      BaseMediaSourceAdapter._throwNotImplementedError('hideTextTrack');\n    }\n  }, {\n    key: 'enableAdaptiveBitrate',\n    value: function enableAdaptiveBitrate() {\n      BaseMediaSourceAdapter._throwNotImplementedError('enableAdaptiveBitrate');\n    }\n  }, {\n    key: 'isAdaptiveBitrateEnabled',\n    value: function isAdaptiveBitrateEnabled() {\n      return BaseMediaSourceAdapter._throwNotImplementedError('isAdaptiveBitrateEnabled');\n    }\n  }, {\n    key: '_getLiveEdge',\n    value: function _getLiveEdge() {\n      return BaseMediaSourceAdapter._throwNotImplementedError('_getLiveEdge');\n    }\n  }, {\n    key: 'seekToLiveEdge',\n    value: function seekToLiveEdge() {\n      BaseMediaSourceAdapter._throwNotImplementedError('seekToLiveEdge');\n    }\n  }, {\n    key: 'isLive',\n    value: function isLive() {\n      return BaseMediaSourceAdapter._throwNotImplementedError('isLive');\n    }\n\n    /**\n     * Handling live time update (as is not triggered when video is paused, but the current time changed)\n     * @function _handleLiveTimeUpdate\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_handleLiveTimeUpdate',\n    value: function _handleLiveTimeUpdate() {\n      var _this2 = this;\n\n      this._videoElement.addEventListener(_eventType.Html5EventType.DURATION_CHANGE, function () {\n        if (_this2.isLive() && _this2._videoElement.paused) {\n          _this2._trigger(_eventType.Html5EventType.TIME_UPDATE);\n        }\n      });\n    }\n  }, {\n    key: 'getStartTimeOfDvrWindow',\n    value: function getStartTimeOfDvrWindow() {\n      return BaseMediaSourceAdapter._throwNotImplementedError('getStartTimeOfDvrWindow');\n    }\n\n    /**\n     * throw a run time error\n     * @param {string} name of the unimplemented function\n     * @returns {any} void/string/boolean\n     */\n\n  }, {\n    key: 'currentTime',\n\n\n    /**\n     * Get the current time in seconds.\n     * @returns {Number} - The current playback time.\n     * @public\n     */\n    get: function get() {\n      if (this.isLive()) {\n        return this._videoElement.currentTime - this.getStartTimeOfDvrWindow();\n      } else {\n        return this._videoElement.currentTime;\n      }\n    }\n\n    /**\n     * Set the current time in seconds.\n     * @param {Number} to - The number to set in seconds.\n     * @public\n     * @returns {void}\n     */\n    ,\n    set: function set(to) {\n      if (this.isLive()) {\n        to += this.getStartTimeOfDvrWindow();\n      }\n      this._videoElement.currentTime = to;\n    }\n\n    /**\n     * Get the duration in seconds.\n     * @returns {Number} - The playback duration.\n     * @public\n     */\n\n  }, {\n    key: 'duration',\n    get: function get() {\n      if (this.isLive()) {\n        return this._getLiveEdge() - this.getStartTimeOfDvrWindow();\n      } else {\n        return this._videoElement.duration;\n      }\n    }\n\n    /**\n     * Getter for the src that the adapter plays on the video element.\n     * In case the adapter preformed a load it will return the manifest url.\n     * @public\n     * @returns {string} - The src url.\n     */\n\n  }, {\n    key: 'src',\n    get: function get() {\n      if (this._loadPromise && this._sourceObj) {\n        return this._sourceObj.url;\n      }\n      return \"\";\n    }\n  }], [{\n    key: 'canPlayType',\n    value: function canPlayType(mimeType, preferNative) {\n      return BaseMediaSourceAdapter._throwNotImplementedError('static canPlayType');\n    }\n  }, {\n    key: '_throwNotImplementedError',\n    value: function _throwNotImplementedError(name) {\n      throw new _error2.default(_error2.default.Severity.CRITICAL, _error2.default.Category.PLAYER, _error2.default.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, name);\n    }\n  }]);\n\n  return BaseMediaSourceAdapter;\n}(_fakeEventTarget2.default);\n\nBaseMediaSourceAdapter.getLogger = _logger2.default;\nexports.default = BaseMediaSourceAdapter;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n/* eslint-disable no-unused-vars */\n\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nvar _drmSupport = __webpack_require__(44);\n\nvar _drmSupport2 = _interopRequireDefault(_drmSupport);\n\nvar _drmScheme = __webpack_require__(23);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BaseDrmProtocol = function () {\n  function BaseDrmProtocol() {\n    _classCallCheck(this, BaseDrmProtocol);\n  }\n\n  _createClass(BaseDrmProtocol, null, [{\n    key: 'canPlayDrm',\n    value: function canPlayDrm(drmData) {\n      throw new _error2.default(_error2.default.Severity.CRITICAL, _error2.default.Category.PLAYER, _error2.default.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, 'static canPlayDrm');\n    }\n  }, {\n    key: 'setDrmPlayback',\n    value: function setDrmPlayback() {\n      throw new _error2.default(_error2.default.Severity.CRITICAL, _error2.default.Category.PLAYER, _error2.default.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, 'static setDrmPlayback');\n    }\n  }]);\n\n  return BaseDrmProtocol;\n}();\n\nBaseDrmProtocol.getLogger = _logger2.default;\nBaseDrmProtocol.DrmSupport = _drmSupport2.default;\nBaseDrmProtocol.DrmScheme = _drmScheme.DrmScheme;\nexports.default = BaseDrmProtocol;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar DrmScheme = exports.DrmScheme = {\n  WIDEVINE: 'com.widevine.alpha',\n  PLAYREADY: 'com.microsoft.playready',\n  FAIRPLAY: 'com.apple.fairplay'\n};\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerPlugin = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _basePlugin = __webpack_require__(17);\n\nvar _basePlugin2 = _interopRequireDefault(_basePlugin);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nvar _player = __webpack_require__(8);\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * The logger of the PluginManager class.\n * @private\n * @const\n */\nvar logger = (0, _logger2.default)(\"PluginManager\");\n\n/** The PluginManager responsible for register plugins definitions and store plugins instances.\n * @classdesc\n */\n\nvar PluginManager = function () {\n  function PluginManager() {\n    _classCallCheck(this, PluginManager);\n\n    this._plugins = new Map();\n  }\n  /**\n   * The registry of the plugins.\n   * Maps plugin's name to his class.\n   * @type {Map}\n   * @static\n   * @private\n   */\n\n  /**\n   * The active plugins in the player.\n   * Maps plugin's name to his instance.\n   * @type {Map}\n   * @private\n   */\n\n\n  _createClass(PluginManager, [{\n    key: 'load',\n\n\n    /**\n     * Creates and store new instance of the plugin in case isValid() of the plugin returns true.\n     * @param {string} name - The plugin name\n     * @param {Player} player - The player reference\n     * @param {Object} [config={}] - The plugin configuration\n     * @returns {boolean} - Whether the plugin load was successful\n     * @public\n     */\n    value: function load(name, player) {\n      var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (!PluginManager._registry.has(name)) {\n        logger.warn('Plugin <' + name + '> loading failed, plugin is not registered');\n        throw new _error2.default(_error2.default.Severity.RECOVERABLE, _error2.default.Category.PLAYER, _error2.default.Code.RUNTIME_ERROR_NOT_REGISTERED_PLUGIN, name);\n      }\n      var pluginClass = PluginManager._registry.get(name);\n      if (pluginClass && pluginClass.isValid() && !config.disable) {\n        this._plugins.set(name, pluginClass.createPlugin(name, player, config));\n        logger.debug('Plugin <' + name + '> has been loaded');\n        return true;\n      }\n      logger.debug('Plugin <' + name + '> isn\\'t loaded, isValid()=false, disabled=' + config.disable);\n      return false;\n    }\n\n    /**\n     * Iterates over all the plugins and calls private _destroy.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._plugins.forEach(this._destroy.bind(this));\n    }\n\n    /**\n     * Iterates over all the plugins and calls reset() method of the plugin's impl.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this._plugins.forEach(function (plugin) {\n        plugin.reset();\n      });\n    }\n\n    /**\n     * Calls destroy() method of the plugin's impl.\n     * @param {BasePlugin} plugin - The plugin instance\n     * @param {string} name - The plugin name\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_destroy',\n    value: function _destroy(plugin, name) {\n      plugin.destroy();\n      this._plugins.delete(name);\n    }\n\n    /**\n     * Returns the plugin's instance.\n     * @param {string} name - The plugin name\n     * @returns {BasePlugin} - The plugin instance\n     * @public\n     */\n\n  }, {\n    key: 'get',\n    value: function get(name) {\n      return this._plugins.get(name);\n    }\n  }], [{\n    key: 'register',\n\n\n    /**\n     * Writes the plugin in the registry.\n     * Maps: plugin name -> plugin class.\n     * @param {string} name - The plugin name\n     * @param {Function} handler - The plugin class\n     * @returns {boolean} - If the registration request succeeded\n     * @static\n     * @public\n     */\n    value: function register(name, handler) {\n      if (typeof handler !== 'function' || handler.prototype instanceof _basePlugin2.default === false) {\n        logger.error('Plugin <' + name + '> registration failed, either plugin is not an instance of BasePlugin or plugin handler is not a function');\n        return false;\n      }\n      if (!PluginManager._registry.has(name)) {\n        PluginManager._registry.set(name, handler);\n        logger.debug('Plugin <' + name + '> has been registered successfully');\n        return true;\n      }\n      logger.debug('Plugin <' + name + '> is already registered, do not register again');\n      return false;\n    }\n\n    /**\n     * Removes the plugin from the registry.\n     * @param {string} name - The plugin name\n     * @static\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'unRegister',\n    value: function unRegister(name) {\n      if (PluginManager._registry.has(name)) {\n        PluginManager._registry.delete(name);\n        logger.debug('Unregistered <' + name + '> plugin.');\n      }\n    }\n  }]);\n\n  return PluginManager;\n}();\n\n/**\n * Export the register method.\n * @type {function}\n * @constant\n */\n\n\nPluginManager._registry = new Map();\nexports.default = PluginManager;\nvar registerPlugin = PluginManager.register;\nexports.registerPlugin = registerPlugin;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Creates a TextStyle object.\n *\n * <p><i>\n * Note that although this API is based on FCC guidelines, we cannot guarantee\n * that your application is in compliance with this or any other guideline.\n * </i></p>\n *\n * @constructor\n * @struct\n * @export\n */\nvar TextStyle = function () {\n  function TextStyle() {\n    _classCallCheck(this, TextStyle);\n\n    this.fontSize = '100%';\n    this.fontFamily = TextStyle.FontFamily.SANS_SERIF;\n    this.fontColor = TextStyle.StandardColors.WHITE;\n    this.fontOpacity = TextStyle.StandardOpacities.OPAQUE;\n    this.backgroundColor = TextStyle.StandardColors.BLACK;\n    this.backgroundOpacity = TextStyle.StandardOpacities.OPAQUE;\n    this.fontEdge = TextStyle.EdgeStyles.NONE;\n  }\n\n  /**\n   * Defined set of font families\n   * @enum {Object.<string, string>}}\n   * @export\n   */\n\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111, footnote\n   * 448.  Each value is an array of the three RGB values for that color.\n   * @enum {Object.<string, Array.<number>>}}\n   * @export\n   */\n\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * @enum {Object.<string, number>}}\n   * @export\n   */\n\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * The styles to achieve these effects are not specified anywhere.\n   *\n   * Each inner array represents a shadow, and is composed of RGB values for the\n   * shadow color, followed by pixel values for x-offset, y-offset, and blur.\n   *\n   * @enum {!Array.<!Array.<number>>}\n   * @export\n   */\n\n\n  _createClass(TextStyle, [{\n    key: \"toCSS\",\n\n\n    /**\n     * Compute the CSS text necessary to represent this TextStyle.\n     * Output does not contain any selectors.\n     *\n     * @return {string} - ::CUE CSS string\n     */\n    value: function toCSS() {\n      var attributes = [];\n\n      attributes.push('font-family: ' + this.fontFamily);\n      attributes.push('font-size: ' + this.fontSize);\n      attributes.push('color: ' + TextStyle._toRGBA(this.fontColor, this.fontOpacity));\n      attributes.push('background-color: ' + TextStyle._toRGBA(this.backgroundColor, this.backgroundOpacity));\n\n      // A given edge effect may be implemented with multiple shadows.\n      // Collect them all into an array, then combine into one attribute.\n      var shadows = [];\n      for (var i = 0; i < this.fontEdge.length; i++) {\n        // shaka.asserts.assert(this.fontEdge[i].length == 6);\n        var color = this.fontEdge[i].slice(0, 3);\n        var shadow = this.fontEdge[i].slice(3, 6);\n        shadows.push(TextStyle._toRGBA(color, this.fontOpacity) + ' ' + shadow.join('px ') + 'px');\n      }\n      attributes.push('text-shadow: ' + shadows.join(','));\n\n      return attributes.join('!important; ');\n    }\n\n    /**\n     * clones the textStyle object\n     * @returns {TextStyle} the cloned textStyle object\n     */\n\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var clonedTextStyle = new TextStyle();\n      clonedTextStyle.fontEdge = this.fontEdge;\n      clonedTextStyle.fontSize = this.fontSize;\n      clonedTextStyle.fontColor = this.fontColor;\n      clonedTextStyle.fontOpacity = this.fontOpacity;\n      clonedTextStyle.backgroundColor = this.backgroundColor;\n      clonedTextStyle.backgroundOpacity = this.backgroundOpacity;\n      return clonedTextStyle;\n    }\n  }], [{\n    key: \"_toRGBA\",\n\n\n    /**\n     * Creates a CSS RGBA sctring for a given color and opacity values\n     * @param {TextStyle.StandardColors} color - color value in RGB\n     * @param {TextStyle.StandardOpacities} opacity - opacity value\n     * @return {string} - CSS rgba string\n     * @private\n     */\n    value: function _toRGBA(color, opacity) {\n      // shaka.asserts.assert(color.length == 3);\n      return 'rgba(' + color.concat(opacity).join(',') + ')';\n    }\n\n    /**\n     * Font size, such as 50%, 75%, 100%, 200%, or 300%.\n     * @type {string}\n     */\n\n\n    /**\n     * @type {TextStyle.FontFamily}\n     */\n\n\n    /**\n     * @type {TextStyle.StandardColors}\n     */\n\n\n    /**\n     * @type {TextStyle.StandardOpacities}\n     * @expose\n     */\n\n\n    /**\n     * @type {TextStyle.StandardColors}\n     */\n\n\n    /**\n     * @type {TextStyle.StandardOpacities}\n     */\n\n\n    /**\n     * @type {TextStyle.EdgeStyles}\n     * @expose\n     */\n\n  }]);\n\n  return TextStyle;\n}();\n\nTextStyle.FontFamily = {\n  \"ARIAL\": \"Arial\",\n  \"HELVETICA\": \"Helvetica\",\n  \"VERDANA\": \"Verdana\",\n  \"SANS_SERIF\": \"sans-serif\"\n};\nTextStyle.StandardColors = {\n  'WHITE': [255, 255, 255],\n  'BLACK': [0, 0, 0],\n  'RED': [255, 0, 0],\n  'GREEN': [0, 255, 0],\n  'BLUE': [0, 0, 255],\n  'YELLOW': [255, 255, 0],\n  'MAGENTA': [255, 0, 255],\n  'CYAN': [0, 255, 255]\n};\nTextStyle.StandardOpacities = {\n  'OPAQUE': 1,\n  'SEMI_HIGH': 0.75,\n  'SEMI_LOW': 0.25,\n  'TRANSPARENT': 0\n};\nTextStyle.EdgeStyles = {\n  'NONE': [],\n  'RAISED': [[34, 34, 34, 1, 1, 0], [34, 34, 34, 2, 2, 0], [34, 34, 34, 3, 3, 0]],\n  'DEPRESSED': [[204, 204, 204, 1, 1, 0], [204, 204, 204, 0, 1, 0], [34, 34, 34, -1, -1, 0], [34, 34, 34, 0, -1, 0]],\n  'UNIFORM': [[34, 34, 34, 0, 0, 4], [34, 34, 34, 0, 0, 4], [34, 34, 34, 0, 0, 4], [34, 34, 34, 0, 0, 4]],\n  'DROP': [[34, 34, 34, 2, 2, 3], [34, 34, 34, 2, 2, 4], [34, 34, 34, 2, 2, 5]]\n};\nTextStyle.FontSizes = [\"50%\", \"75%\", \"100%\", \"200%\", \"300%\", \"400%\"];\nexports.default = TextStyle;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\nvar StreamType = {\n  DASH: \"dash\",\n  HLS: \"hls\",\n  PROGRESSIVE: \"progressive\"\n};\nexports.StreamType = StreamType;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\nvar EngineType = {\n  HTML5: \"html5\",\n  FLASH: \"flash\",\n  SILVERLIGHT: \"silverlight\"\n};\nexports.EngineType = EngineType;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\nvar MediaType = {\n  VOD: \"Vod\",\n  LIVE: \"Live\",\n  AUDIO: \"Audio\",\n  UNKNOWN: \"Unknown\"\n};\nexports.MediaType = MediaType;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\nvar AbrMode = {\n  MANUAL: \"manual\",\n  AUTO: \"auto\"\n};\nexports.AbrMode = AbrMode;\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LogLevelType = exports.AbrMode = exports.StreamType = exports.MediaType = exports.EngineType = exports.TrackType = exports.StateType = exports.EventType = exports.setCapabilities = exports.getCapabilities = exports.BaseDrmProtocol = exports.Env = exports.PLAYER_NAME = exports.VERSION = exports.EventManager = exports.FakeEventTarget = exports.FakeEvent = exports.Error = exports.Utils = exports.TextStyle = exports.TextTrack = exports.AudioTrack = exports.VideoTrack = exports.Track = exports.BaseMiddleware = exports.BasePlugin = exports.registerPlugin = exports.BaseMediaSourceAdapter = exports.registerMediaSourceAdapter = undefined;\nexports.loadPlayer = loadPlayer;\n\nvar _player = __webpack_require__(8);\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _baseMediaSourceAdapter = __webpack_require__(21);\n\nvar _baseMediaSourceAdapter2 = _interopRequireDefault(_baseMediaSourceAdapter);\n\nvar _mediaSourceProvider = __webpack_require__(20);\n\nvar _pluginManager = __webpack_require__(24);\n\nvar _baseDrmProtocol = __webpack_require__(22);\n\nvar _baseDrmProtocol2 = _interopRequireDefault(_baseDrmProtocol);\n\nvar _baseMiddleware = __webpack_require__(19);\n\nvar _baseMiddleware2 = _interopRequireDefault(_baseMiddleware);\n\nvar _basePlugin = __webpack_require__(17);\n\nvar _basePlugin2 = _interopRequireDefault(_basePlugin);\n\nvar _track = __webpack_require__(5);\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _videoTrack = __webpack_require__(10);\n\nvar _videoTrack2 = _interopRequireDefault(_videoTrack);\n\nvar _audioTrack = __webpack_require__(11);\n\nvar _audioTrack2 = _interopRequireDefault(_audioTrack);\n\nvar _textTrack = __webpack_require__(7);\n\nvar _textTrack2 = _interopRequireDefault(_textTrack);\n\nvar _textStyle = __webpack_require__(25);\n\nvar _textStyle2 = _interopRequireDefault(_textStyle);\n\nvar _env = __webpack_require__(12);\n\nvar _env2 = _interopRequireDefault(_env);\n\nvar _util = __webpack_require__(3);\n\nvar Utils = _interopRequireWildcard(_util);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _fakeEventTarget = __webpack_require__(9);\n\nvar _fakeEventTarget2 = _interopRequireDefault(_fakeEventTarget);\n\nvar _eventManager = __webpack_require__(6);\n\nvar _eventManager2 = _interopRequireDefault(_eventManager);\n\nvar _stateType = __webpack_require__(18);\n\nvar _trackType = __webpack_require__(13);\n\nvar _streamType = __webpack_require__(26);\n\nvar _engineType = __webpack_require__(27);\n\nvar _mediaType = __webpack_require__(28);\n\nvar _eventType = __webpack_require__(4);\n\nvar _abrModeType = __webpack_require__(29);\n\nvar _logger = __webpack_require__(0);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_player2.default.runCapabilities();\n\n/**\n * @param {Object} config - The configuration of the player\n * @returns {Player} - The player instance\n */\nfunction loadPlayer(config) {\n  return new _player2.default(config || {});\n}\n\n// Export the media source adapters necessary utils\nexports.registerMediaSourceAdapter = _mediaSourceProvider.registerMediaSourceAdapter;\nexports.BaseMediaSourceAdapter = _baseMediaSourceAdapter2.default;\n\n// Export the plugin framework\n\nexports.registerPlugin = _pluginManager.registerPlugin;\nexports.BasePlugin = _basePlugin2.default;\nexports.BaseMiddleware = _baseMiddleware2.default;\n\n// Export the tracks classes\n\nexports.Track = _track2.default;\nexports.VideoTrack = _videoTrack2.default;\nexports.AudioTrack = _audioTrack2.default;\nexports.TextTrack = _textTrack2.default;\nexports.TextStyle = _textStyle2.default;\n\n// Export utils library\n\nexports.Utils = Utils;\n\n// Export Error class\n\nexports.Error = _error2.default;\n\n// Export Event system\n\nexports.FakeEvent = _fakeEvent2.default;\nexports.FakeEventTarget = _fakeEventTarget2.default;\nexports.EventManager = _eventManager2.default;\n\n// Export version\n\nexports.VERSION = \"0.31.0\";\n\n// Export player name\n\nexports.PLAYER_NAME = \"playkit-js\";\n\n// Export environment data\n\nexports.Env = _env2.default;\n\n// Export base DRM protocol\n\nexports.BaseDrmProtocol = _baseDrmProtocol2.default;\n\n// Export the player capabilities\n\nvar getCapabilities = _player2.default.getCapabilities;\nvar setCapabilities = _player2.default.setCapabilities;\nexports.getCapabilities = getCapabilities;\nexports.setCapabilities = setCapabilities;\n\n// Export enums\n\nexports.EventType = _eventType.EventType;\nexports.StateType = _stateType.StateType;\nexports.TrackType = _trackType.TrackType;\nexports.EngineType = _engineType.EngineType;\nexports.MediaType = _mediaType.MediaType;\nexports.StreamType = _streamType.StreamType;\nexports.AbrMode = _abrModeType.AbrMode;\nexports.LogLevelType = _logger.LogLevelType;\nexports.default = loadPlayer;\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_RESULT__;/**\n * UAParser.js v0.7.13\n * Lightweight JavaScript-based User-Agent string parser\n * https://github.com/faisalman/ua-parser-js\n *\n * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>\n * Dual licensed under GPLv2 & MIT\n */\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '0.7.13',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major', // deprecated\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded';\n\n\n    ///////////\n    // Helper\n    //////////\n\n\n    var util = {\n        extend : function (regexes, extensions) {\n            var margedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    margedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    margedRegexes[i] = regexes[i];\n                }\n            }\n            return margedRegexes;\n        },\n        has : function (str1, str2) {\n          if (typeof str1 === \"string\") {\n            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n          } else {\n            return false;\n          }\n        },\n        lowerize : function (str) {\n            return str.toLowerCase();\n        },\n        major : function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g,'').split(\".\")[0] : undefined;\n        },\n        trim : function (str) {\n          return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n        }\n    };\n\n\n    ///////////////\n    // Map helper\n    //////////////\n\n\n    var mapper = {\n\n        rgx : function (ua, arrays) {\n\n            //var result = {},\n            var i = 0, j, k, p, q, matches, match;//, args = arguments;\n\n            /*// construct object barebones\n            for (p = 0; p < args[1].length; p++) {\n                q = args[1][p];\n                result[typeof q === OBJ_TYPE ? q[0] : q] = undefined;\n            }*/\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length == 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length == 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length == 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n            //console.log(this);\n            //return this;\n        },\n\n        str : function (str, map) {\n\n            for (var i in map) {\n                // check if array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (util.has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (util.has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n        }\n    };\n\n\n    ///////////////\n    // String map\n    //////////////\n\n\n    var maps = {\n\n        browser : {\n            oldsafari : {\n                version : {\n                    '1.0'   : '/8',\n                    '1.2'   : '/1',\n                    '1.3'   : '/3',\n                    '2.0'   : '/412',\n                    '2.0.2' : '/416',\n                    '2.0.3' : '/417',\n                    '2.0.4' : '/419',\n                    '?'     : '/'\n                }\n            }\n        },\n\n        device : {\n            amazon : {\n                model : {\n                    'Fire Phone' : ['SD', 'KF']\n                }\n            },\n            sprint : {\n                model : {\n                    'Evo Shift 4G' : '7373KT'\n                },\n                vendor : {\n                    'HTC'       : 'APA',\n                    'Sprint'    : 'Sprint'\n                }\n            }\n        },\n\n        os : {\n            windows : {\n                version : {\n                    'ME'        : '4.90',\n                    'NT 3.11'   : 'NT3.51',\n                    'NT 4.0'    : 'NT4.0',\n                    '2000'      : 'NT 5.0',\n                    'XP'        : ['NT 5.1', 'NT 5.2'],\n                    'Vista'     : 'NT 6.0',\n                    '7'         : 'NT 6.1',\n                    '8'         : 'NT 6.2',\n                    '8.1'       : 'NT 6.3',\n                    '10'        : ['NT 6.4', 'NT 10.0'],\n                    'RT'        : 'ARM'\n                }\n            }\n        }\n    };\n\n\n    //////////////\n    // Regex map\n    /////////////\n\n\n    var regexes = {\n\n        browser : [[\n\n            // Presto based\n            /(opera\\smini)\\/([\\w\\.-]+)/i,                                       // Opera Mini\n            /(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i,                      // Opera Mobi/Tablet\n            /(opera).+version\\/([\\w\\.]+)/i,                                     // Opera > 9.80\n            /(opera)[\\/\\s]+([\\w\\.]+)/i                                          // Opera < 9.80\n            ], [NAME, VERSION], [\n\n            /(opios)[\\/\\s]+([\\w\\.]+)/i                                          // Opera mini on iphone >= 8.0\n            ], [[NAME, 'Opera Mini'], VERSION], [\n\n            /\\s(opr)\\/([\\w\\.]+)/i                                               // Opera Webkit\n            ], [[NAME, 'Opera'], VERSION], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]+)*/i,\n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n            // Trident based\n            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,\n                                                                                // Avant/IEMobile/SlimBrowser/Baidu\n            /(?:ms|\\()(ie)\\s([\\w\\.]+)/i,                                        // Internet Explorer\n\n            // Webkit/KHTML based\n            /(rekonq)\\/([\\w\\.]+)*/i,                                            // Rekonq\n            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\\/([\\w\\.-]+)/i\n                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser\n            ], [NAME, VERSION], [\n\n            /(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i                         // IE11\n            ], [[NAME, 'IE'], VERSION], [\n\n            /(edge)\\/((\\d+)?[\\w\\.]+)/i                                          // Microsoft Edge\n            ], [NAME, VERSION], [\n\n            /(yabrowser)\\/([\\w\\.]+)/i                                           // Yandex\n            ], [[NAME, 'Yandex'], VERSION], [\n\n            /(puffin)\\/([\\w\\.]+)/i                                              // Puffin\n            ], [[NAME, 'Puffin'], VERSION], [\n\n            /(uc\\s?browser)[\\/\\s]?([\\w\\.]+)/i,\n            /ucweb.+(ucbrowser)[\\/\\s]?([\\w\\.]+)/i,\n            /juc.+(ucweb)[\\/\\s]?([\\w\\.]+)/i,\n            /(ucbrowser)\\/([\\w\\.]+)/i\n                                                                                // UCBrowser\n            ], [[NAME, 'UCBrowser'], VERSION], [\n\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(micromessenger)\\/([\\w\\.]+)/i                                      // WeChat\n            ], [[NAME, 'WeChat'], VERSION], [\n\n            /m?(qqbrowser)[\\/\\s]?([\\w\\.]+)/i                                    // QQBrowser\n            ], [NAME, VERSION], [\n\n            /xiaomi\\/miuibrowser\\/([\\w\\.]+)/i                                   // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI Browser']], [\n\n            /;fbav\\/([\\w\\.]+);/i                                                // Facebook App for iOS & Android\n            ], [VERSION, [NAME, 'Facebook']], [\n\n            /(headlesschrome) ([\\w\\.]+)/i                                       // Chrome Headless\n            ], [VERSION, [NAME, 'Chrome Headless']], [\n\n            /\\swv\\).+(chrome)\\/([\\w\\.]+)/i                                      // Chrome WebView\n            ], [[NAME, /(.+)/, '$1 WebView'], VERSION], [\n\n            /android.+samsungbrowser\\/([\\w\\.]+)/i,\n            /android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)*/i        // Android Browser\n            ], [VERSION, [NAME, 'Android Browser']], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i\n                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /(dolfin)\\/([\\w\\.]+)/i                                              // Dolphin\n            ], [[NAME, 'Dolphin'], VERSION], [\n\n            /((?:android.+)crmo|crios)\\/([\\w\\.]+)/i                             // Chrome for Android/iOS\n            ], [[NAME, 'Chrome'], VERSION], [\n\n            /(coast)\\/([\\w\\.]+)/i                                               // Opera Coast\n            ], [[NAME, 'Opera Coast'], VERSION], [\n\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, 'Firefox']], [\n\n            /version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                       // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n\n            /version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i                    // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n\n            /webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i                     // Safari < 3.0\n            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [\n\n            /(konqueror)\\/([\\w\\.]+)/i,                                          // Konqueror\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape)\\/([\\w\\.-]+)/i                                 // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\\/([\\w\\.-]+)/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                          // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\n            /(links)\\s\\(([\\w\\.]+)/i,                                            // Links\n            /(gobrowser)\\/?([\\w\\.]+)*/i,                                        // GoBrowser\n            /(ice\\s?browser)\\/v?([\\w\\._]+)/i,                                   // ICE Browser\n            /(mosaic)[\\/\\s]([\\w\\.]+)/i                                          // Mosaic\n            ], [NAME, VERSION]\n\n            /* /////////////////////\n            // Media players BEGIN\n            ////////////////////////\n\n            , [\n\n            /(apple(?:coremedia|))\\/((\\d+)[\\w\\._]+)/i,                          // Generic Apple CoreMedia\n            /(coremedia) v((\\d+)[\\w\\._]+)/i\n            ], [NAME, VERSION], [\n\n            /(aqualung|lyssna|bsplayer)\\/((\\d+)?[\\w\\.-]+)/i                     // Aqualung/Lyssna/BSPlayer\n            ], [NAME, VERSION], [\n\n            /(ares|ossproxy)\\s((\\d+)[\\w\\.-]+)/i                                 // Ares/OSSProxy\n            ], [NAME, VERSION], [\n\n            /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\\/((\\d+)[\\w\\.-]+)/i,\n                                                                                // Audacious/AudiMusicStream/Amarok/BASS/OpenCORE/Dalvik/GnomeMplayer/MoC\n                                                                                // NSPlayer/PSP-InternetRadioPlayer/Videos\n            /(clementine|music player daemon)\\s((\\d+)[\\w\\.-]+)/i,               // Clementine/MPD\n            /(lg player|nexplayer)\\s((\\d+)[\\d\\.]+)/i,\n            /player\\/(nexplayer|lg player)\\s((\\d+)[\\w\\.-]+)/i                   // NexPlayer/LG Player\n            ], [NAME, VERSION], [\n            /(nexplayer)\\s((\\d+)[\\w\\.-]+)/i                                     // Nexplayer\n            ], [NAME, VERSION], [\n\n            /(flrp)\\/((\\d+)[\\w\\.-]+)/i                                          // Flip Player\n            ], [[NAME, 'Flip Player'], VERSION], [\n\n            /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i\n                                                                                // FStream/NativeHost/QuerySeekSpider/IA Archiver/facebookexternalhit\n            ], [NAME], [\n\n            /(gstreamer) souphttpsrc (?:\\([^\\)]+\\)){0,1} libsoup\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // Gstreamer\n            ], [NAME, VERSION], [\n\n            /(htc streaming player)\\s[\\w_]+\\s\\/\\s((\\d+)[\\d\\.]+)/i,              // HTC Streaming Player\n            /(java|python-urllib|python-requests|wget|libcurl)\\/((\\d+)[\\w\\.-_]+)/i,\n                                                                                // Java/urllib/requests/wget/cURL\n            /(lavf)((\\d+)[\\d\\.]+)/i                                             // Lavf (FFMPEG)\n            ], [NAME, VERSION], [\n\n            /(htc_one_s)\\/((\\d+)[\\d\\.]+)/i                                      // HTC One S\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(mplayer)(?:\\s|\\/)(?:(?:sherpya-){0,1}svn)(?:-|\\s)(r\\d+(?:-\\d+[\\w\\.-]+){0,1})/i\n                                                                                // MPlayer SVN\n            ], [NAME, VERSION], [\n\n            /(mplayer)(?:\\s|\\/|[unkow-]+)((\\d+)[\\w\\.-]+)/i                      // MPlayer\n            ], [NAME, VERSION], [\n\n            /(mplayer)/i,                                                       // MPlayer (no other info)\n            /(yourmuze)/i,                                                      // YourMuze\n            /(media player classic|nero showtime)/i                             // Media Player Classic/Nero ShowTime\n            ], [NAME], [\n\n            /(nero (?:home|scout))\\/((\\d+)[\\w\\.-]+)/i                           // Nero Home/Nero Scout\n            ], [NAME, VERSION], [\n\n            /(nokia\\d+)\\/((\\d+)[\\w\\.-]+)/i                                      // Nokia\n            ], [NAME, VERSION], [\n\n            /\\s(songbird)\\/((\\d+)[\\w\\.-]+)/i                                    // Songbird/Philips-Songbird\n            ], [NAME, VERSION], [\n\n            /(winamp)3 version ((\\d+)[\\w\\.-]+)/i,                               // Winamp\n            /(winamp)\\s((\\d+)[\\w\\.-]+)/i,\n            /(winamp)mpeg\\/((\\d+)[\\w\\.-]+)/i\n            ], [NAME, VERSION], [\n\n            /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i  // OCMS-bot/tap in radio/tunein/unknown/winamp (no other info)\n                                                                                // inlight radio\n            ], [NAME], [\n\n            /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // QuickTime/RealMedia/RadioApp/RadioClientApplication/\n                                                                                // SoundTap/Totem/Stagefright/Streamium\n            ], [NAME, VERSION], [\n\n            /(smp)((\\d+)[\\d\\.]+)/i                                              // SMP\n            ], [NAME, VERSION], [\n\n            /(vlc) media player - version ((\\d+)[\\w\\.]+)/i,                     // VLC Videolan\n            /(vlc)\\/((\\d+)[\\w\\.-]+)/i,\n            /(xbmc|gvfs|xine|xmms|irapp)\\/((\\d+)[\\w\\.-]+)/i,                    // XBMC/gvfs/Xine/XMMS/irapp\n            /(foobar2000)\\/((\\d+)[\\d\\.]+)/i,                                    // Foobar2000\n            /(itunes)\\/((\\d+)[\\d\\.]+)/i                                         // iTunes\n            ], [NAME, VERSION], [\n\n            /(wmplayer)\\/((\\d+)[\\w\\.-]+)/i,                                     // Windows Media Player\n            /(windows-media-player)\\/((\\d+)[\\w\\.-]+)/i\n            ], [[NAME, /-/g, ' '], VERSION], [\n\n            /windows\\/((\\d+)[\\w\\.-]+) upnp\\/[\\d\\.]+ dlnadoc\\/[\\d\\.]+ (home media server)/i\n                                                                                // Windows Media Server\n            ], [VERSION, [NAME, 'Windows']], [\n\n            /(com\\.riseupradioalarm)\\/((\\d+)[\\d\\.]*)/i                          // RiseUP Radio Alarm\n            ], [NAME, VERSION], [\n\n            /(rad.io)\\s((\\d+)[\\d\\.]+)/i,                                        // Rad.io\n            /(radio.(?:de|at|fr))\\s((\\d+)[\\d\\.]+)/i\n            ], [[NAME, 'rad.io'], VERSION]\n\n            //////////////////////\n            // Media players END\n            ////////////////////*/\n\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i                     // AMD64\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, util.lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows\\s(ce|mobile);\\sppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i                           // PowerPC\n            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+;))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, util.lowerize]]\n        ],\n\n        device : [[\n\n            /\\((ipad|playbook);[\\w\\s\\);-]+(rim|apple)/i                         // iPad/PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/                                  // iPad\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [\n\n            /(apple\\s{0,1}tv)/i                                                 // Apple TV\n            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [\n\n            /(archos)\\s(gamepad2?)/i,                                           // Archos\n            /(hp).+(touchpad)/i,                                                // HP TouchPad\n            /(hp).+(tablet)/i,                                                  // HP Tablet\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /\\s(nook)[\\w\\s]+build\\/(\\w+)/i,                                     // Nook\n            /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i                                  // Dell Streak\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(kf[A-z]+)\\sbuild\\/[\\w\\.]+.*silk\\//i                               // Kindle Fire HD\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n            /(sd|kf)[0349hijorstuw]+\\sbuild\\/[\\w\\.]+.*silk\\//i                  // Fire Phone\n            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [\n\n            /\\((ip[honed|\\s\\w*]+);.+(apple)/i                                   // iPod/iPhone\n            ], [MODEL, VENDOR, [TYPE, MOBILE]], [\n            /\\((ip[honed|\\s\\w*]+);/i                                            // iPod/iPhone\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [\n\n            /(blackberry)[\\s-]?(\\w+)/i,                                         // BlackBerry\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\\s_-]?([\\w-]+)*/i,\n                                                                                // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Huawei/Meizu/Motorola/Polytron\n            /(hp)\\s([\\w\\s]+\\w)/i,                                               // HP iPAQ\n            /(asus)-?(\\w+)/i                                                    // Asus\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /\\(bb10;\\s(\\w+)/i                                                   // BlackBerry 10\n            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\n                                                                                // Asus Tablets\n            /android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7|padfone)/i\n            ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [\n\n            /(sony)\\s(tablet\\s[ps])\\sbuild\\//i,                                  // Sony\n            /(sony)?(?:sgp.+)\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [\n            /(?:sony)?(?:(?:(?:c|d)\\d{4})|(?:so[-l].+))\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Phone'], [TYPE, MOBILE]], [\n\n            /\\s(ouya)\\s/i,                                                      // Ouya\n            /(nintendo)\\s([wids3u]+)/i                                          // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n\n            /android.+;\\s(shield)\\sbuild/i                                      // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n\n            /(playstation\\s[34portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [\n\n            /(sprint\\s(\\w+))/i                                                  // Sprint Phones\n            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [\n\n            /(lenovo)\\s?(S(?:5000|6000)+(?:[-][\\w+]))/i                         // Lenovo tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(htc)[;_\\s-]+([\\w\\s]+(?=\\))|\\w+)*/i,                               // HTC\n            /(zte)-(\\w+)*/i,                                                    // ZTE\n            /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]+)*/i\n                                                                                // Alcatel/GeeksPhone/Huawei/Lenovo/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            /(nexus\\s9)/i                                                       // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n\n            /(nexus\\s6p)/i                                                      // Huawei Nexus 6P\n            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [\n\n            /(microsoft);\\s(lumia[\\s\\w]+)/i                                     // Microsoft Lumia\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i                                   // Microsoft Xbox\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\n\n                                                                                // Motorola\n            /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?(:?\\s4g)?)[\\w\\s]+build\\//i,\n            /mot[\\s-]?(\\w+)*/i,\n            /(XT\\d{3,4}) build\\//i,\n            /(nexus\\s6)/i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [\n            /android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [\n\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i            // HbbTV devices\n            ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [\n\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [\n\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n\n            /android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n\\d+|sgh-t8[56]9|nexus 10))/i,\n            /((SM-T\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung\n            /smart-tv.+(samsung)/i\n            ], [VENDOR, [TYPE, SMARTTV], MODEL], [\n            /((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-\\w[\\w\\d]+))/i,\n            /(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)*/i,\n            /sec-((sgh\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [\n\n            /sie-(\\w+)*/i                                                       // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n\n            /(maemo|nokia).*(n900|lumia\\s\\d+)/i,                                // Nokia\n            /(nokia)[\\s_-]?([\\w-]+)*/i\n            ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(a\\d{3})/i                                 // Acer\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet\n            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [\n            /(lg) netcast\\.tv/i                                                 // LG SmartTV\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /(nexus\\s[45])/i,                                                   // LG\n            /lg[e;\\s\\/-]+(\\w+)*/i\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [\n\n            /android.+(ideatab[a-z0-9\\-\\s]+)/i                                  // Lenovo\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            /linux;.+((jolla));/i                                               // Jolla\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /((pebble))app\\/[\\d\\.]+\\s/i                                         // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n\n            /android.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i                            // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, 'Chromecast'], [VENDOR, 'Google']], [\n\n            /android.+;\\s(glass)\\s\\d/i                                          // Google Glass\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [\n\n            /android.+;\\s(pixel c)\\s/i                                          // Google Pixel C\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [\n\n            /android.+;\\s(pixel xl|pixel)\\s/i                                   // Google Pixel\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [\n\n            /android.+(\\w+)\\s+build\\/hm\\1/i,                                    // Xiaomi Hongmi 'numeric' models\n            /android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i,               // Xiaomi Hongmi\n            /android.+(mi[\\s\\-_]*(?:one|one[\\s_]plus|note lte)?[\\s_]*(?:\\d\\w)?)\\s+build/i    // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [\n\n            /android.+a000(1)\\s+build/i                                         // OnePlus\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            /\\s(tablet)[;\\/]/i,                                                 // Unidentifiable Tablet\n            /\\s(mobile)(?:[;\\/]|\\ssafari)/i                                     // Unidentifiable Mobile\n            ], [[TYPE, util.lowerize], VENDOR, MODEL]\n\n            /*//////////////////////////\n            // TODO: move to string map\n            ////////////////////////////\n\n            /(C6603)/i                                                          // Sony Xperia Z C6603\n            ], [[MODEL, 'Xperia Z C6603'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n            /(C6903)/i                                                          // Sony Xperia Z 1\n            ], [[MODEL, 'Xperia Z 1'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n            /(SM-G900[F|H])/i                                                   // Samsung Galaxy S5\n            ], [[MODEL, 'Galaxy S5'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G7102)/i                                                       // Samsung Galaxy Grand 2\n            ], [[MODEL, 'Galaxy Grand 2'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G530H)/i                                                       // Samsung Galaxy Grand Prime\n            ], [[MODEL, 'Galaxy Grand Prime'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G313HZ)/i                                                      // Samsung Galaxy V\n            ], [[MODEL, 'Galaxy V'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T805)/i                                                        // Samsung Galaxy Tab S 10.5\n            ], [[MODEL, 'Galaxy Tab S 10.5'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n            /(SM-G800F)/i                                                       // Samsung Galaxy S5 Mini\n            ], [[MODEL, 'Galaxy S5 Mini'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T311)/i                                                        // Samsung Galaxy Tab 3 8.0\n            ], [[MODEL, 'Galaxy Tab 3 8.0'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n\n            /(T3C)/i                                                            // Advan Vandroid T3C\n            ], [MODEL, [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN T1J\\+)/i                                                    // Advan Vandroid T1J+\n            ], [[MODEL, 'Vandroid T1J+'], [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN S4A)/i                                                      // Advan Vandroid S4A\n            ], [[MODEL, 'Vandroid S4A'], [VENDOR, 'Advan'], [TYPE, MOBILE]], [\n\n            /(V972M)/i                                                          // ZTE V972M\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n\n            /(i-mobile)\\s(IQ\\s[\\d\\.]+)/i                                        // i-mobile IQ\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(IQ6.3)/i                                                          // i-mobile IQ IQ 6.3\n            ], [[MODEL, 'IQ 6.3'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n            /(i-mobile)\\s(i-style\\s[\\d\\.]+)/i                                   // i-mobile i-STYLE\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(i-STYLE2.1)/i                                                     // i-mobile i-STYLE 2.1\n            ], [[MODEL, 'i-STYLE 2.1'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n\n            /(mobiistar touch LAI 512)/i                                        // mobiistar touch LAI 512\n            ], [[MODEL, 'Touch LAI 512'], [VENDOR, 'mobiistar'], [TYPE, MOBILE]], [\n\n            /////////////\n            // END TODO\n            ///////////*/\n\n        ],\n\n        engine : [[\n\n            /windows.+\\sedge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, 'EdgeHTML']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i,     // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\n            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]+).*(gecko)/i                                           // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows based\n            /microsoft\\s(windows)\\s(vista|xp)/i                                 // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n            /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s]+\\w)*/i,                  // Windows Phone\n            /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\n            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\n            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n            // Mobile/Embedded OS\n            /\\((bb)(10);/i                                                      // BlackBerry 10\n            ], [[NAME, 'BlackBerry'], VERSION], [\n            /(blackberry)\\w*\\/?([\\w\\.]+)*/i,                                    // Blackberry\n            /(tizen)[\\/\\s]([\\w\\.]+)/i,                                          // Tizen\n            /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|contiki)[\\/\\s-]?([\\w\\.]+)*/i,\n                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki\n            /linux;.+(sailfish);/i                                              // Sailfish OS\n            ], [NAME, VERSION], [\n            /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]+)*/i                 // Symbian\n            ], [[NAME, 'Symbian'], VERSION], [\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME], [\n            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n            ], [[NAME, 'Firefox OS'], VERSION], [\n\n            // Console\n            /(nintendo|playstation)\\s([wids34portablevu]+)/i,                   // Nintendo/Playstation\n\n            // GNU/Linux based\n            /(mint)[\\/\\s\\(]?(\\w+)*/i,                                           // Mint\n            /(mageia|vectorlinux)[;\\s]/i,                                       // Mageia/VectorLinux\n            /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?(?!chrom)([\\w\\.-]+)*/i,\n                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n            /(hurd|linux)\\s?([\\w\\.]+)*/i,                                       // Hurd/Linux\n            /(gnu)\\s?([\\w\\.]+)*/i                                               // GNU\n            ], [NAME, VERSION], [\n\n            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Solaris\n            /(sunos)\\s?([\\w\\.]+\\d)*/i                                           // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n\n            // BSD based\n            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]+)*/i                   // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n            ], [NAME, VERSION],[\n\n            /(haiku)\\s(\\w+)/i                                                  // Haiku\n            ], [NAME, VERSION],[\n\n            /(ip[honead]+)(?:.*os\\s([\\w]+)*\\slike\\smac|;\\sopera)/i              // iOS\n            ], [[NAME, 'iOS'], [VERSION, /_/g, '.']], [\n\n            /(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*/i,\n            /(macintosh|mac(?=_powerpc)\\s)/i                                    // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Other\n            /((?:open)?solaris)[\\/\\s-]?([\\w\\.]+)*/i,                            // Solaris\n            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.]*)*/i,                               // AIX\n            /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms)/i,\n                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS\n            /(unix)\\s?([\\w\\.]+)*/i                                              // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var Browser = function (name, version) {\n        this[NAME] = name;\n        this[VERSION] = version;\n    };\n    var CPU = function (arch) {\n        this[ARCHITECTURE] = arch;\n    };\n    var Device = function (vendor, model, type) {\n        this[VENDOR] = vendor;\n        this[MODEL] = model;\n        this[TYPE] = type;\n    };\n    var Engine = Browser;\n    var OS = Browser;\n\n    var UAParser = function (uastring, extensions) {\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(uastring, extensions).getResult();\n        }\n\n        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n        var browser = new Browser();\n        var cpu = new CPU();\n        var device = new Device();\n        var engine = new Engine();\n        var os = new OS();\n\n        this.getBrowser = function () {\n            mapper.rgx.call(browser, ua, rgxmap.browser);\n            browser.major = util.major(browser.version); // deprecated\n            return browser;\n        };\n        this.getCPU = function () {\n            mapper.rgx.call(cpu, ua, rgxmap.cpu);\n            return cpu;\n        };\n        this.getDevice = function () {\n            mapper.rgx.call(device, ua, rgxmap.device);\n            return device;\n        };\n        this.getEngine = function () {\n            mapper.rgx.call(engine, ua, rgxmap.engine);\n            return engine;\n        };\n        this.getOS = function () {\n            mapper.rgx.call(os, ua, rgxmap.os);\n            return os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return ua;\n        };\n        this.setUA = function (uastring) {\n            ua = uastring;\n            browser = new Browser();\n            cpu = new CPU();\n            device = new Device();\n            engine = new Engine();\n            os = new OS();\n            return this;\n        };\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER = {\n        NAME    : NAME,\n        MAJOR   : MAJOR, // deprecated\n        VERSION : VERSION\n    };\n    UAParser.CPU = {\n        ARCHITECTURE : ARCHITECTURE\n    };\n    UAParser.DEVICE = {\n        MODEL   : MODEL,\n        VENDOR  : VENDOR,\n        TYPE    : TYPE,\n        CONSOLE : CONSOLE,\n        MOBILE  : MOBILE,\n        SMARTTV : SMARTTV,\n        TABLET  : TABLET,\n        WEARABLE: WEARABLE,\n        EMBEDDED: EMBEDDED\n    };\n    UAParser.ENGINE = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    UAParser.OS = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    //UAParser.Utils = util;\n\n    ///////////\n    // Export\n    //////////\n\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (\"function\" === FUNC_TYPE && __webpack_require__(32)) {\n            !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n                return UAParser;\n            }.call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n        } else {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = window.jQuery || window.Zepto;\n    if (typeof $ !== UNDEF_TYPE) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (uastring) {\n            parser.setUA(uastring);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports) {\n\n/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n/* WEBPACK VAR INJECTION */}.call(exports, {}))\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = __webpack_require__(3);\n\nvar Utils = _interopRequireWildcard(_util);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PosterManager = function () {\n  /**\n   * Poster image URL\n   * @type {string}\n   * @private\n   */\n  function PosterManager() {\n    _classCallCheck(this, PosterManager);\n\n    this._createEl();\n  }\n\n  /**\n   * Set the poster source URL\n   * @param {string} posterUrl - the poster image URL\n   * @public\n   * @returns {void}\n   */\n\n  /**\n   * The poster HTML Div element.\n   * @type {HTMLDivElement}\n   * @private\n   */\n\n\n  _createClass(PosterManager, [{\n    key: \"setSrc\",\n    value: function setSrc(posterUrl) {\n      if (posterUrl) {\n        this._posterUrl = posterUrl;\n        Utils.Dom.setStyle(this._el, \"background-image\", \"url(\\\"\" + this._posterUrl + \"\\\")\");\n        this.hide();\n      }\n    }\n\n    /**\n     * Get the poster source URL\n     * @public\n     * @returns {string} - the poster image URL\n     */\n\n  }, {\n    key: \"getElement\",\n\n\n    /**\n     * Get the poster HTML Div element\n     * @public\n     * @returns {HTMLDivElement} - Poster HTML Dom element\n     */\n    value: function getElement() {\n      return this._el;\n    }\n\n    /**\n     * Create the HTML Div element of the poster\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"_createEl\",\n    value: function _createEl() {\n      if (!this._el) {\n        var el = this._el = Utils.Dom.createElement(\"div\");\n        Utils.Dom.setAttribute(el, \"id\", Utils.Generator.uniqueId(5));\n        Utils.Dom.setAttribute(el, \"tabindex\", '-1');\n      }\n    }\n\n    /**\n     * Removes the poster element from the dom\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"_removeEl\",\n    value: function _removeEl() {\n      if (this._el) {\n        Utils.Dom.removeChild(this._el.parentNode, this._el);\n      }\n    }\n\n    /**\n     * Show the poster image\n     * @public\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"show\",\n    value: function show() {\n      Utils.Dom.setStyle(this._el, \"display\", \"\");\n    }\n\n    /**\n     * Hide the poster image\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      Utils.Dom.setStyle(this._el, \"display\", \"none\");\n    }\n\n    /**\n     * Resets the poster url and the background image\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._posterUrl = '';\n      Utils.Dom.setStyle(this._el, \"background-image\", '');\n    }\n\n    /**\n     * Destroys the poster element\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.reset();\n      this._removeEl();\n    }\n  }, {\n    key: \"src\",\n    get: function get() {\n      return this._posterUrl;\n    }\n  }]);\n\n  return PosterManager;\n}();\n\nexports.default = PosterManager;\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.jsonp = undefined;\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar JSONP_TIMEOUT = 5000;\n\nvar CALLBACK_PREFIX = 'jsonpcallback';\nvar JSONP_FORMAT_STRING = 'responseFormat=jsonp&callback=';\n\n/**\n * JSONP utility.\n * @param {string} url - The url of the request.\n * @param {string} callback - Callback function to be called when the request returns.\n * @param {Object} options - Object contains configuration (currently only timeout).\n * @returns {Promise<*>} - A promise with the callback output.\n */\nfunction jsonp(url, callback, options) {\n  options = options || {};\n  var timeout = options.timeout ? options.timeout : JSONP_TIMEOUT;\n  var script = document.createElement(\"script\");\n  var callbackId = CALLBACK_PREFIX + Math.round(Date.now() + Math.random() * 1000001);\n  var scriptUri = url;\n  var timer = void 0;\n\n  /**\n   * function to clean the DOM from the script tag and from the function\n   * @returns {void}\n   */\n  var _cleanup = function _cleanup() {\n    if (script && script.parentNode) {\n      script.parentNode.removeChild(script);\n    }\n    window[callbackId] = function () {};\n    if (timer) {\n      clearTimeout(timer);\n    }\n  };\n\n  return new Promise(function (resolve, reject) {\n    if (timeout) {\n      timer = setTimeout(function () {\n        _cleanup();\n        reject(new _error2.default(_error2.default.Severity.CRITICAL, _error2.default.Category.NETWORK, _error2.default.Code.TIMEOUT, url));\n      }, timeout);\n    }\n\n    /**\n     * a wrapper to the callback function, to save a closure\n     * @param {Object} data - the data we get from the server, in response to the request\n     * @returns {void}\n     */\n    window[callbackId] = function (data) {\n      var callbackResult = callback(data, url);\n      _cleanup();\n      resolve(callbackResult);\n    };\n\n    if (scriptUri.match(/\\?/)) {\n      scriptUri += \"&\" + JSONP_FORMAT_STRING + callbackId;\n    } else {\n      scriptUri += \"?\" + JSONP_FORMAT_STRING + callbackId;\n    }\n\n    script.type = 'text/javascript';\n    script.src = scriptUri;\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n}\n\nexports.jsonp = jsonp;\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\r\n * js-logger - http://github.com/jonnyreeves/js-logger\r\n * Jonny Reeves, http://jonnyreeves.co.uk/\r\n * js-logger may be freely distributed under the MIT license.\r\n */\r\n(function (global) {\r\n\t\"use strict\";\r\n\r\n\t// Top level module for the global, static logger instance.\r\n\tvar Logger = { };\r\n\r\n\t// For those that are at home that are keeping score.\r\n\tLogger.VERSION = \"1.4.1\";\r\n\r\n\t// Function which handles all incoming log messages.\r\n\tvar logHandler;\r\n\r\n\t// Map of ContextualLogger instances by name; used by Logger.get() to return the same named instance.\r\n\tvar contextualLoggersByNameMap = {};\r\n\r\n\t// Polyfill for ES5's Function.bind.\r\n\tvar bind = function(scope, func) {\r\n\t\treturn function() {\r\n\t\t\treturn func.apply(scope, arguments);\r\n\t\t};\r\n\t};\r\n\r\n\t// Super exciting object merger-matron 9000 adding another 100 bytes to your download.\r\n\tvar merge = function () {\r\n\t\tvar args = arguments, target = args[0], key, i;\r\n\t\tfor (i = 1; i < args.length; i++) {\r\n\t\t\tfor (key in args[i]) {\r\n\t\t\t\tif (!(key in target) && args[i].hasOwnProperty(key)) {\r\n\t\t\t\t\ttarget[key] = args[i][key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t};\r\n\r\n\t// Helper to define a logging level object; helps with optimisation.\r\n\tvar defineLogLevel = function(value, name) {\r\n\t\treturn { value: value, name: name };\r\n\t};\r\n\r\n\t// Predefined logging levels.\r\n\tLogger.DEBUG = defineLogLevel(1, 'DEBUG');\r\n\tLogger.INFO = defineLogLevel(2, 'INFO');\r\n\tLogger.TIME = defineLogLevel(3, 'TIME');\r\n\tLogger.WARN = defineLogLevel(4, 'WARN');\r\n\tLogger.ERROR = defineLogLevel(8, 'ERROR');\r\n\tLogger.OFF = defineLogLevel(99, 'OFF');\r\n\r\n\t// Inner class which performs the bulk of the work; ContextualLogger instances can be configured independently\r\n\t// of each other.\r\n\tvar ContextualLogger = function(defaultContext) {\r\n\t\tthis.context = defaultContext;\r\n\t\tthis.setLevel(defaultContext.filterLevel);\r\n\t\tthis.log = this.info;  // Convenience alias.\r\n\t};\r\n\r\n\tContextualLogger.prototype = {\r\n\t\t// Changes the current logging level for the logging instance.\r\n\t\tsetLevel: function (newLevel) {\r\n\t\t\t// Ensure the supplied Level object looks valid.\r\n\t\t\tif (newLevel && \"value\" in newLevel) {\r\n\t\t\t\tthis.context.filterLevel = newLevel;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// Gets the current logging level for the logging instance\r\n\t\tgetLevel: function () {\r\n\t\t\treturn this.context.filterLevel;\r\n\t\t},\r\n\r\n\t\t// Is the logger configured to output messages at the supplied level?\r\n\t\tenabledFor: function (lvl) {\r\n\t\t\tvar filterLevel = this.context.filterLevel;\r\n\t\t\treturn lvl.value >= filterLevel.value;\r\n\t\t},\r\n\r\n\t\tdebug: function () {\r\n\t\t\tthis.invoke(Logger.DEBUG, arguments);\r\n\t\t},\r\n\r\n\t\tinfo: function () {\r\n\t\t\tthis.invoke(Logger.INFO, arguments);\r\n\t\t},\r\n\r\n\t\twarn: function () {\r\n\t\t\tthis.invoke(Logger.WARN, arguments);\r\n\t\t},\r\n\r\n\t\terror: function () {\r\n\t\t\tthis.invoke(Logger.ERROR, arguments);\r\n\t\t},\r\n\r\n\t\ttime: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'start' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttimeEnd: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'end' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Invokes the logger callback if it's not being filtered.\r\n\t\tinvoke: function (level, msgArgs) {\r\n\t\t\tif (logHandler && this.enabledFor(level)) {\r\n\t\t\t\tlogHandler(msgArgs, merge({ level: level }, this.context));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Protected instance which all calls to the to level `Logger` module will be routed through.\r\n\tvar globalLogger = new ContextualLogger({ filterLevel: Logger.OFF });\r\n\r\n\t// Configure the global Logger instance.\r\n\t(function() {\r\n\t\t// Shortcut for optimisers.\r\n\t\tvar L = Logger;\r\n\r\n\t\tL.enabledFor = bind(globalLogger, globalLogger.enabledFor);\r\n\t\tL.debug = bind(globalLogger, globalLogger.debug);\r\n\t\tL.time = bind(globalLogger, globalLogger.time);\r\n\t\tL.timeEnd = bind(globalLogger, globalLogger.timeEnd);\r\n\t\tL.info = bind(globalLogger, globalLogger.info);\r\n\t\tL.warn = bind(globalLogger, globalLogger.warn);\r\n\t\tL.error = bind(globalLogger, globalLogger.error);\r\n\r\n\t\t// Don't forget the convenience alias!\r\n\t\tL.log = L.info;\r\n\t}());\r\n\r\n\t// Set the global logging handler.  The supplied function should expect two arguments, the first being an arguments\r\n\t// object with the supplied log messages and the second being a context object which contains a hash of stateful\r\n\t// parameters which the logging function can consume.\r\n\tLogger.setHandler = function (func) {\r\n\t\tlogHandler = func;\r\n\t};\r\n\r\n\t// Sets the global logging filter level which applies to *all* previously registered, and future Logger instances.\r\n\t// (note that named loggers (retrieved via `Logger.get`) can be configured independently if required).\r\n\tLogger.setLevel = function(level) {\r\n\t\t// Set the globalLogger's level.\r\n\t\tglobalLogger.setLevel(level);\r\n\r\n\t\t// Apply this level to all registered contextual loggers.\r\n\t\tfor (var key in contextualLoggersByNameMap) {\r\n\t\t\tif (contextualLoggersByNameMap.hasOwnProperty(key)) {\r\n\t\t\t\tcontextualLoggersByNameMap[key].setLevel(level);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Gets the global logging filter level\r\n\tLogger.getLevel = function() {\r\n\t\treturn globalLogger.getLevel();\r\n\t};\r\n\r\n\t// Retrieve a ContextualLogger instance.  Note that named loggers automatically inherit the global logger's level,\r\n\t// default context and log handler.\r\n\tLogger.get = function (name) {\r\n\t\t// All logger instances are cached so they can be configured ahead of use.\r\n\t\treturn contextualLoggersByNameMap[name] ||\r\n\t\t\t(contextualLoggersByNameMap[name] = new ContextualLogger(merge({ name: name }, globalLogger.context)));\r\n\t};\r\n\r\n\t// CreateDefaultHandler returns a handler function which can be passed to `Logger.setHandler()` which will\r\n\t// write to the window's console object (if present); the optional options object can be used to customise the\r\n\t// formatter used to format each log message.\r\n\tLogger.createDefaultHandler = function (options) {\r\n\t\toptions = options || {};\r\n\r\n\t\toptions.formatter = options.formatter || function defaultMessageFormatter(messages, context) {\r\n\t\t\t// Prepend the logger's name to the log message for easy identification.\r\n\t\t\tif (context.name) {\r\n\t\t\t\tmessages.unshift(\"[\" + context.name + \"]\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Map of timestamps by timer labels used to track `#time` and `#timeEnd()` invocations in environments\r\n\t\t// that don't offer a native console method.\r\n\t\tvar timerStartTimeByLabelMap = {};\r\n\r\n\t\t// Support for IE8+ (and other, slightly more sane environments)\r\n\t\tvar invokeConsoleMethod = function (hdlr, messages) {\r\n\t\t\tFunction.prototype.apply.call(hdlr, console, messages);\r\n\t\t};\r\n\r\n\t\t// Check for the presence of a logger.\r\n\t\tif (typeof console === \"undefined\") {\r\n\t\t\treturn function () { /* no console */ };\r\n\t\t}\r\n\r\n\t\treturn function(messages, context) {\r\n\t\t\t// Convert arguments object to Array.\r\n\t\t\tmessages = Array.prototype.slice.call(messages);\r\n\r\n\t\t\tvar hdlr = console.log;\r\n\t\t\tvar timerLabel;\r\n\r\n\t\t\tif (context.level === Logger.TIME) {\r\n\t\t\t\ttimerLabel = (context.name ? '[' + context.name + '] ' : '') + messages[0];\r\n\r\n\t\t\t\tif (messages[1] === 'start') {\r\n\t\t\t\t\tif (console.time) {\r\n\t\t\t\t\t\tconsole.time(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttimerStartTimeByLabelMap[timerLabel] = new Date().getTime();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (console.timeEnd) {\r\n\t\t\t\t\t\tconsole.timeEnd(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tinvokeConsoleMethod(hdlr, [ timerLabel + ': ' +\r\n\t\t\t\t\t\t\t(new Date().getTime() - timerStartTimeByLabelMap[timerLabel]) + 'ms' ]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Delegate through to custom warn/error loggers if present on the console.\r\n\t\t\t\tif (context.level === Logger.WARN && console.warn) {\r\n\t\t\t\t\thdlr = console.warn;\r\n\t\t\t\t} else if (context.level === Logger.ERROR && console.error) {\r\n\t\t\t\t\thdlr = console.error;\r\n\t\t\t\t} else if (context.level === Logger.INFO && console.info) {\r\n\t\t\t\t\thdlr = console.info;\r\n\t\t\t\t} else if (context.level === Logger.DEBUG && console.debug) {\r\n\t\t\t\t\thdlr = console.debug;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.formatter(messages, context);\r\n\t\t\t\tinvokeConsoleMethod(hdlr, messages);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// Configure and example a Default implementation which writes to the `window.console` (if present).  The\r\n\t// `options` hash can be used to configure the default logLevel and provide a custom message formatter.\r\n\tLogger.useDefaults = function(options) {\r\n\t\tLogger.setLevel(options && options.defaultLevel || Logger.DEBUG);\r\n\t\tLogger.setHandler(Logger.createDefaultHandler(options));\r\n\t};\r\n\r\n\t// Export to popular environments boilerplate.\r\n\tif (true) {\r\n\t\t!(__WEBPACK_AMD_DEFINE_FACTORY__ = (Logger),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t}\r\n\telse if (typeof module !== 'undefined' && module.exports) {\r\n\t\tmodule.exports = Logger;\r\n\t}\r\n\telse {\r\n\t\tLogger._prevLogger = global.Logger;\r\n\r\n\t\tLogger.noConflict = function () {\r\n\t\t\tglobal.Logger = Logger._prevLogger;\r\n\t\t\treturn Logger;\r\n\t\t};\r\n\r\n\t\tglobal.Logger = Logger;\r\n\t}\r\n}(this));\r\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\nvar Severity = {\n  /**\n   * An error occurred, but the Player is attempting to recover from the error.\n   *\n   * If the Player cannot ultimately recover, it still may not throw a CRITICAL\n   * error.  For example, retrying for a media segment will never result in\n   * a CRITICAL error (the Player will just retry forever).\n   */\n  'RECOVERABLE': 1,\n  /**\n   * A critical error that the library cannot recover from.  These usually cause\n   * the Player to stop loading or updating.  A new manifest must be loaded\n   * to reset the library.\n   */\n  'CRITICAL': 2\n};\n\nexports.Severity = Severity;\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\nvar Code = {\n  /**\n   * A network request was made using an unsupported URI scheme.\n   */\n  'UNSUPPORTED_SCHEME': 1000,\n\n  /**\n   * An HTTP network request returned an HTTP status that indicated a failure.\n   */\n  'BAD_HTTP_STATUS': 1001,\n\n  /**\n   * An HTTP network request failed with an error, but not from the server.\n   */\n  'HTTP_ERROR': 1002,\n\n  /**\n   * A network request timed out.\n   */\n  'TIMEOUT': 1003,\n\n  /**\n   * A network request was made with a malformed data URI.\n   */\n  'MALFORMED_DATA_URI': 1004,\n\n  /**\n   * A network request was made with a data URI using an unknown encoding.\n   */\n  'UNKNOWN_DATA_URI_ENCODING': 1005,\n\n  /**\n   * A request filter threw an error.\n   */\n  'REQUEST_FILTER_ERROR': 1006,\n\n  /**\n   * A response filter threw an error.\n   */\n  'RESPONSE_FILTER_ERROR': 1007,\n\n  /** The text parser failed to parse a text stream due to an invalid header. */\n  'INVALID_TEXT_HEADER': 2000,\n\n  /** The text parser failed to parse a text stream due to an invalid cue. */\n  'INVALID_TEXT_CUE': 2001,\n\n  /**\n   * Was unable to detect the encoding of the response text.  Suggest adding\n   * byte-order-markings to the response data.\n   */\n  'UNABLE_TO_DETECT_ENCODING': 2003,\n\n  /** The response data contains invalid Unicode character encoding. */\n  'BAD_ENCODING': 2004,\n\n  /**\n   * The XML parser failed to parse an xml stream, or the XML lacks mandatory\n   * elements for TTML.\n   * in the data is the URI associated with the XML.\n   */\n  'INVALID_XML': 2005,\n\n  /**\n   * MP4 segment does not contain TTML.\n   */\n  'INVALID_MP4_TTML': 2007,\n\n  /**\n   * MP4 segment does not contain VTT.\n   */\n  'INVALID_MP4_VTT': 2008,\n\n  /**\n   *  VTT module issue, see the date for more details\n   */\n  \"UNABLE_TO_CREATE_TEXT_CUE\": 2009,\n  /**\n   * error parsing the dash adapter error (for instance, could not parse an error shaka raised)\n   */\n  \"DASH_ADAPTER_ERROR_PARSE_ISSUE\": 2010,\n\n  /**\n   * Some component tried to read past the end of a buffer.  The segment index,\n   * init segment, or PSSH may be malformed.\n   */\n  'BUFFER_READ_OUT_OF_BOUNDS': 3000,\n\n  /**\n   * Some component tried to parse an integer that was too large to fit in a\n   * JavaScript number without rounding error.  JavaScript can only natively\n   * represent integers up to 53 bits.\n   */\n  'JS_INTEGER_OVERFLOW': 3001,\n\n  /**\n   * The EBML parser used to parse the WebM container encountered an integer,\n   * ID, or other field larger than the maximum supported by the parser.\n   */\n  'EBML_OVERFLOW': 3002,\n\n  /**\n   * The EBML parser used to parse the WebM container encountered a floating-\n   * point field of a size not supported by the parser.\n   */\n  'EBML_BAD_FLOATING_POINT_SIZE': 3003,\n\n  /**\n   * The MP4 SIDX parser found the wrong box type.\n   * Either the segment index range is incorrect or the data is corrupt.\n   */\n  'MP4_SIDX_WRONG_BOX_TYPE': 3004,\n\n  /**\n   * The MP4 SIDX parser encountered an invalid timescale.\n   * The segment index data may be corrupt.\n   */\n  'MP4_SIDX_INVALID_TIMESCALE': 3005,\n\n  /** The MP4 SIDX parser encountered a type of SIDX that is not supported. */\n  'MP4_SIDX_TYPE_NOT_SUPPORTED': 3006,\n\n  /**\n   * The WebM Cues parser was unable to locate the Cues element.\n   * The segment index data may be corrupt.\n   */\n  'WEBM_CUES_ELEMENT_MISSING': 3007,\n\n  /**\n   * The WebM header parser was unable to locate the Ebml element.\n   * The init segment data may be corrupt.\n   */\n  'WEBM_EBML_HEADER_ELEMENT_MISSING': 3008,\n\n  /**\n   * The WebM header parser was unable to locate the Segment element.\n   * The init segment data may be corrupt.\n   */\n  'WEBM_SEGMENT_ELEMENT_MISSING': 3009,\n\n  /**\n   * The WebM header parser was unable to locate the Info element.\n   * The init segment data may be corrupt.\n   */\n  'WEBM_INFO_ELEMENT_MISSING': 3010,\n\n  /**\n   * The WebM header parser was unable to locate the Duration element.\n   * The init segment data may be corrupt or may have been incorrectly encoded.\n   * Shaka requires a duration in WebM DASH content.\n   */\n  'WEBM_DURATION_ELEMENT_MISSING': 3011,\n\n  /**\n   * The WebM Cues parser was unable to locate the Cue Track Positions element.\n   * The segment index data may be corrupt.\n   */\n  'WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING': 3012,\n\n  /**\n   * The WebM Cues parser was unable to locate the Cue Time element.\n   * The segment index data may be corrupt.\n   */\n  'WEBM_CUE_TIME_ELEMENT_MISSING': 3013,\n\n  /**\n   * A MediaSource operation failed.\n   * a MediaError code from the video element.\n   */\n  'MEDIA_SOURCE_OPERATION_FAILED': 3014,\n\n  /**\n   * A MediaSource operation threw an exception.\n   */\n  'MEDIA_SOURCE_OPERATION_THREW': 3015,\n\n  /**\n   * The video element reported an error.\n   * - error.data[0] is a MediaError code.js from the video element.\n   * - On Edge & IE, error.data[1] is a Microsoft extended error code.js in hex.\n   * - On Chrome, error.data[2] is a string with details on the error.\n   */\n  'VIDEO_ERROR': 3016,\n\n  /**\n   * A MediaSource operation threw QuotaExceededError and recovery failed. The\n   * content cannot be played correctly because the segments are too large for\n   * the browser/platform. This may occur when attempting to play very high\n   * quality, very high bitrate content on low-end devices.\n   */\n  'QUOTA_EXCEEDED_ERROR': 3017,\n\n  /**\n   * a media error from hlsjs adapter\n   */\n  'HLS_FATAL_MEDIA_ERROR': 3018,\n\n  /**\n   * HLSJS fragment parsing issue\n   */\n  'HLS_FRAG_PARSING_ERROR': 3019,\n\n  /**\n   * HLSJS buffer append issue\n   */\n  'HLS_BUFFER_APPEND_ISSUE': 3020,\n  /**\n   * HLSJS buffer appending error\n   */\n  'HLS_BUFFER_APPENDING_ISSUE': 3021,\n  /**\n   * Native adapter error, more info in the data part\n   */\n  'NATIVE_ADAPTER_LOAD_FAILED': 3022,\n  /**\n   * HLSjs buffer stalled issue\n   */\n  'HLS_BUFFER_STALLED_ERROR': 3023,\n  /**\n   * The Player was unable to guess the manifest type based on file extension\n   * or MIME type.  To fix, try one of the following:\n   * Rename the manifest so that the URI ends in a well-known extension.\n   * Configure the server to send a recognizable Content-Type header.\n   * Configure the server to accept a HEAD request for the manifest.\n   */\n  'UNABLE_TO_GUESS_MANIFEST_TYPE': 4000,\n\n  /** The DASH Manifest contained invalid XML markup. */\n  'DASH_INVALID_XML': 4001,\n\n  /**\n   * The DASH Manifest contained a Representation with insufficient segment\n   * information.\n   */\n  'DASH_NO_SEGMENT_INFO': 4002,\n\n  /** The DASH Manifest contained an AdaptationSet with no Representations. */\n  'DASH_EMPTY_ADAPTATION_SET': 4003,\n\n  /** The DASH Manifest contained an Period with no AdaptationSets. */\n  'DASH_EMPTY_PERIOD': 4004,\n\n  /**\n   * The DASH Manifest does not specify an init segment with a WebM container.\n   */\n  'DASH_WEBM_MISSING_INIT': 4005,\n\n  /** The DASH Manifest contained an unsupported container format. */\n  'DASH_UNSUPPORTED_CONTAINER': 4006,\n\n  /** The embedded PSSH data has invalid encoding. */\n  'DASH_PSSH_BAD_ENCODING': 4007,\n\n  /**\n   * There is an AdaptationSet whose Representations do not have any common\n   * key-systems.\n   */\n  'DASH_NO_COMMON_KEY_SYSTEM': 4008,\n\n  /** Having multiple key IDs per Representation is not supported. */\n  'DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED': 4009,\n\n  /** The DASH Manifest specifies conflicting key IDs. */\n  'DASH_CONFLICTING_KEY_IDS': 4010,\n\n  /**\n   * The manifest contains a period with no playable streams.\n   * Either the period was originally empty, or the streams within cannot be\n   * played on this browser or platform.\n   */\n  'UNPLAYABLE_PERIOD': 4011,\n\n  /**\n   * There exist some streams that could be decoded, but restrictions imposed\n   * by the application or the key system prevent us from playing.  This may\n   * happen under the following conditions:\n   * The application has given restrictions to the Player that restrict\n   * at least one content type completely (e.g. no playable audio),\n   * The key system has imposed output restrictions that cannot be met\n   * (such as HDCP) and there are no unrestricted alternatives.\n   */\n  'RESTRICTIONS_CANNOT_BE_MET': 4012,\n\n  /**\n   * No valid periods were found in the manifest.  Please check that your\n   * manifest is correct and free of typos.\n   */\n  'NO_PERIODS': 4014,\n\n  /**\n   * HLS playlist doesn't start with a mandory #EXTM3U tag.\n   */\n  'HLS_PLAYLIST_HEADER_MISSING': 4015,\n\n  /**\n   * HLS tag has an invalid name that doesn't start with '#EXT'\n   */\n  'INVALID_HLS_TAG': 4016,\n\n  /**\n   * HLS playlist has both Master and Media/Segment tags.\n   */\n  'HLS_INVALID_PLAYLIST_HIERARCHY': 4017,\n\n  /**\n   * A Representation has an id that is the same as another Representation in\n   * the same Period.  This makes manifest updates impossible since we cannot\n   * map the updated Representation to the old one.\n   */\n  'DASH_DUPLICATE_REPRESENTATION_ID': 4018,\n\n  /**\n   * HLS manifest has several #EXT-X-MAP tags. We can only\n   * support one at the moment.\n   */\n  'HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND': 4020,\n\n  /**\n   * HLS parser was unable to guess mime type of a stream.\n   */\n  'HLS_COULD_NOT_GUESS_MIME_TYPE': 4021,\n\n  /**\n   * No Master Playlist has been provided. Master playlist provides\n   * vital information about the streams (like codecs) that is\n   * required for MediaSource. We don't support directly providing\n   * a Media Playlist.\n   */\n  'HLS_MASTER_PLAYLIST_NOT_PROVIDED': 4022,\n\n  /**\n   * One of the required attributes was not provided.\n   * HLS manifest is invalid.\n   */\n  'HLS_REQUIRED_ATTRIBUTE_MISSING': 4023,\n\n  /**\n   * One of the required tags was not provided.\n   * HLS manifest is invalid.\n   */\n  'HLS_REQUIRED_TAG_MISSING': 4024,\n\n  /**\n   * HLS parser was unable to guess codecs of a stream.\n   */\n  'HLS_COULD_NOT_GUESS_CODECS': 4025,\n\n  /**\n   * HLS parser has encountered encrypted content with unsupported\n   * KEYFORMAT attributes.\n   */\n  'HLS_KEYFORMATS_NOT_SUPPORTED': 4026,\n\n  /**\n   * The manifest parser only supports xlink links with\n   * xlink:actuate=\"onLoad\".\n   */\n  'DASH_UNSUPPORTED_XLINK_ACTUATE': 4027,\n\n  /**\n   * The manifest parser has hit its depth limit on\n   * xlink link chains.\n   */\n  'DASH_XLINK_DEPTH_LIMIT': 4028,\n\n  /**\n   * HLS parser encountered a live playlist.\n   */\n  'HLS_LIVE_CONTENT_NOT_SUPPORTED': 4029,\n\n  /**\n   * HLSJS cannot parse error\n   */\n  'HLSJS_CANNOT_PARSE': 4030,\n\n  /**\n   * The StreamingEngine called onChooseStreams() but the callback receiver\n   * did not return the correct number or type of Streams.\n   *\n   * This can happen when there is multi-Period content where one Period is\n   * video+audio and another is video-only or audio-only.  We don't support this\n   * case because it is incompatible with MSE.  When the browser reaches the\n   * transition, it will pause, waiting for the audio stream.\n   */\n  'INVALID_STREAMS_CHOSEN': 5005,\n\n  /**\n   * The manifest indicated protected content, but the manifest parser was\n   * unable to determine what key systems should be used.\n   */\n  'NO_RECOGNIZED_KEY_SYSTEMS': 6000,\n\n  /**\n   * None of the requested key system configurations are available.  This may\n   * happen under the following conditions:\n   *  The key system is not supported,\n   *  The key system does not support the features requested (e.g.\n   *        persistent state),\n   *  A user prompt was shown and the user denied access,\n   *   The key system is not available from unsecure contexts. (ie.\n   * requires HTTPS) See https://goo.gl/EEhZqT.\n   */\n  'REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE': 6001,\n\n  /**\n   * The browser found one of the requested key systems, but it failed to\n   * create an instance of the CDM for some unknown reason.\n   */\n  'FAILED_TO_CREATE_CDM': 6002,\n\n  /**\n   * The browser found one of the requested key systems and created an instance\n   * of the CDM, but it failed to attach the CDM to the video for some unknown\n   * reason.\n   */\n  'FAILED_TO_ATTACH_TO_VIDEO': 6003,\n\n  /**\n   * The CDM rejected the server certificate supplied by the application.\n   * The certificate may be malformed or in an unsupported format.\n   */\n  'INVALID_SERVER_CERTIFICATE': 6004,\n\n  /**\n   * The CDM refused to create a session for some unknown reason.\n   */\n  'FAILED_TO_CREATE_SESSION': 6005,\n\n  /**\n   * The CDM was unable to generate a license request for the init data it was\n   * given.  The init data may be malformed or in an unsupported format.\n   */\n  'FAILED_TO_GENERATE_LICENSE_REQUEST': 6006,\n\n  /**\n   * The license request failed.  This could be a timeout, a network failure, or\n   * a rejection by the server.\n   */\n  'LICENSE_REQUEST_FAILED': 6007,\n\n  /**\n   * The license response was rejected by the CDM.  The server's response may be\n   * invalid or malformed for this CDM.\n   */\n  'LICENSE_RESPONSE_REJECTED': 6008,\n\n  /**\n   * The manifest does not specify any DRM info, but the content is encrypted.\n   * Either the manifest or the manifest parser are broken.\n   */\n  'ENCRYPTED_CONTENT_WITHOUT_DRM_INFO': 6010,\n\n  /**\n   * No license server was given for the key system signaled by the manifest.\n   * A license server URI is required for every key system.\n   */\n  'NO_LICENSE_SERVER_GIVEN': 6012,\n\n  /**\n   * A required offline session was removed.  The content is not playable.\n   */\n  'OFFLINE_SESSION_REMOVED': 6013,\n\n  /**\n   * The license has expired.  This is triggered when playback is stalled on a\n   * 'waitingforkeys' event and there are any expired keys in the key status map\n   * of any active session.\n   */\n  'EXPIRED': 6014,\n  /**\n   * DRM\n   */\n  \"BAD_FAIRPLAY_RESPONSE\": 6015,\n  /**\n   * DRM\n   */\n  \"COULD_NOT_CREATE_MEDIA_KEYS\": 6016,\n  /**\n   * DRM\n   */\n  \"COULD_NOT_CREATE_KEY_SESSION\": 6017,\n\n  /**\n   * The call to Player.load() was interrupted by a call to Player.unload()\n   * or another call to Player.load().\n   */\n  'LOAD_INTERRUPTED': 7000,\n  /**\n   * HLSJS levelSwitchError - bitrate switch issue\n   */\n  'BITRATE_SWITCH_ISSUE': 7001,\n  /**\n   * The call to Player.load() failed. see other data for more details.\n   */\n  'LOAD_FAILED': 7002,\n  /**\n   * Build error. unregistered plugin\n   */\n  'RUNTIME_ERROR_NOT_REGISTERED_PLUGIN': 7003,\n  /**\n   * Build error. Unimplemnted method\n   */\n  'RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED': 7004,\n  /**\n   * Build error. not a valid handler\n   */\n  'RUNTIME_ERROR_NOT_VALID_HANDLER': 7005,\n  /**\n   * When the play API called without any source\n   */\n  'NO_SOURCE_PROVIDED': 7006,\n\n  /**\n   * The Cast API is unavailable.  This may be because of one of the following:\n   * - The browser may not have Cast support\n   * - The browser may be missing a necessary Cast extension\n   * - The Cast sender library may not be loaded in your app\n   */\n  'CAST_API_UNAVAILABLE': 8000,\n\n  /**\n   * No cast receivers are available at this time.\n   */\n  'NO_CAST_RECEIVERS': 8001,\n\n  /**\n   * The library is already casting.\n   */\n  'ALREADY_CASTING': 8002,\n\n  /**\n   * A Cast SDK error that we did not explicitly plan for has occurred.\n   * Check data[0] and refer to the Cast SDK documentation for details.\n   */\n  'UNEXPECTED_CAST_ERROR': 8003,\n\n  /**\n   * The cast operation was canceled by the user.\n   */\n  'CAST_CANCELED_BY_USER': 8004,\n\n  /**\n   * The cast connection timed out.\n   */\n  'CAST_CONNECTION_TIMED_OUT': 8005,\n\n  /**\n   * The requested receiver app ID does not exist or is unavailable.\n   * Check the requested app ID for typos.\n   */\n  'CAST_RECEIVER_APP_UNAVAILABLE': 8006,\n\n  /**\n   * Offline storage is not supported on this browser; it is required for\n   * offline support.\n   */\n  'STORAGE_NOT_SUPPORTED': 9000,\n\n  /**\n   * An unknown error occurred in the IndexedDB.\n   * On Firefox, one common source for UnknownError calls is reverting\n   * Firefox to an old version. This makes the indexedDB storage inaccessible\n   * for older versions. The only way to fix this is to delete the storage\n   * data in your profile. See https://goo.gl/eKVPPe.\n   */\n  'INDEXED_DB_ERROR': 9001,\n\n  /**\n   * The operation was aborted.  For example, by a call to destroy().\n   */\n  'OPERATION_ABORTED': 9002,\n\n  /**\n   * The specified item was not found in the IndexedDB.\n   */\n  'REQUESTED_ITEM_NOT_FOUND': 9003,\n\n  /**\n   * A network request was made with a malformed offline URI.\n   */\n  'MALFORMED_OFFLINE_URI': 9004,\n\n  /**\n   * The specified content is live or in-progress.\n   */\n  'CANNOT_STORE_LIVE_OFFLINE': 9005,\n\n  /**\n   * There is already a store operation in-progress, wait until it completes\n   * before starting another.\n   */\n  'STORE_ALREADY_IN_PROGRESS': 9006,\n\n  /**\n   * The specified manifest is encrypted but does not specify any init data.\n   * Without init data specified in the manifest, the content will not be\n   * playable offline.\n   */\n  'NO_INIT_DATA_FOR_OFFLINE': 9007,\n\n  /**\n   * shaka.offline.Storage was constructed with a Player proxy instead of a\n   * local player instance.  To fix this, use Player directly with Storage\n   * instead of the results of CastProxy.prototype.getPlayer().\n   */\n  'LOCAL_PLAYER_INSTANCE_REQUIRED': 9008,\n\n  /**\n   * When the manifest contains no period playable streams, it means the\n   * manifest is unsupported by the browser.\n   */\n  'CONTENT_UNSUPPORTED_BY_BROWSER': 9009,\n\n  /**\n   * VR plugin is not supported.\n   */\n  'VR_NOT_SUPPORTED': 11000\n\n};\nexports.Code = Code;\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\nvar Category = {\n  /** Errors from the network stack. */\n  'NETWORK': 1,\n\n  /** Errors parsing text streams. */\n  'TEXT': 2,\n\n  /** Errors parsing or processing audio or video streams. */\n  'MEDIA': 3,\n\n  /** Errors parsing the Manifest. */\n  'MANIFEST': 4,\n\n  /** Errors related to streaming. */\n  'STREAMING': 5,\n\n  /** Errors related to DRM. */\n  'DRM': 6,\n\n  /** Miscellaneous errors from the player. */\n  'PLAYER': 7,\n\n  /** Errors related to Ads. */\n  'ADS': 8,\n\n  /** Errors in the database storage (offline). */\n  'STORAGE': 9,\n\n  /** Errors from VR plugin. */\n  'VR': 11\n};\n\nexports.Category = Category;\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Locale class\n * @class\n *\n */\nvar Locale = function () {\n  function Locale() {\n    _classCallCheck(this, Locale);\n  }\n\n  _createClass(Locale, null, [{\n    key: \"language\",\n\n\n    /**\n     * tries to return the locale language in IOS-693-1 format(two-letter codes, one per language for)\n     * @returns {string} - the IOS-693-1 language string\n     * @static\n     */\n    get: function get() {\n      var lang = void 0;\n\n      if (navigator.languages && navigator.languages.length) {\n        // latest versions of Chrome and Firefox set this correctly\n        lang = navigator.languages[0];\n      } else if (navigator.userLanguage) {\n        // IE only\n        //$FlowFixMe - userLanguage is IE specific and flow doesn't have it in definitions\n        lang = navigator.userLanguage;\n      } else {\n        // latest versions of Chrome, Firefox, and Safari set this correctly\n        lang = navigator.language;\n      }\n\n      if (lang && lang.match(\"-\")) {\n        lang = lang.split(\"-\")[0];\n      }\n\n      return lang;\n    }\n  }]);\n\n  return Locale;\n}();\n\nexports.default = Locale;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _fakeEventTarget = __webpack_require__(9);\n\nvar _fakeEventTarget2 = _interopRequireDefault(_fakeEventTarget);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _eventManager = __webpack_require__(6);\n\nvar _eventManager2 = _interopRequireDefault(_eventManager);\n\nvar _eventType = __webpack_require__(4);\n\nvar _mediaSourceProvider = __webpack_require__(20);\n\nvar _mediaSourceProvider2 = _interopRequireDefault(_mediaSourceProvider);\n\nvar _videoTrack = __webpack_require__(10);\n\nvar _videoTrack2 = _interopRequireDefault(_videoTrack);\n\nvar _audioTrack = __webpack_require__(11);\n\nvar _audioTrack2 = _interopRequireDefault(_audioTrack);\n\nvar _textTrack = __webpack_require__(7);\n\nvar _vttCue = __webpack_require__(15);\n\nvar _util = __webpack_require__(3);\n\nvar Utils = _interopRequireWildcard(_util);\n\nvar _html5Autoplay = __webpack_require__(45);\n\nvar _html5Autoplay2 = _interopRequireDefault(_html5Autoplay);\n\nvar _html5IsSupported = __webpack_require__(47);\n\nvar _html5IsSupported2 = _interopRequireDefault(_html5IsSupported);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Html5 engine for playback.\n * @classdesc\n */\nvar Html5 = function (_FakeEventTarget) {\n  _inherits(Html5, _FakeEventTarget);\n\n  _createClass(Html5, null, [{\n    key: 'createEngine',\n\n\n    /**\n     * Factory method to create an engine.\n     * @param {PKMediaSourceObject} source - The selected source object.\n     * @param {Object} config - The player configuration.\n     * @returns {IEngine} - New instance of the run time engine.\n     * @public\n     * @static\n     */\n\n\n    /**\n     * A video element for browsers which block auto play.\n     * @type {HTMLVideoElement}\n     * @private\n     * @static\n     */\n\n\n    /**\n     * The html5 capabilities handlers.\n     * @private\n     * @static\n     */\n\n    /**\n     * Flag to indicate first time text track cue change.\n     * @type {Object<number, boolean>}\n     * @private\n     */\n\n    /**\n     * The selected media source adapter of the engine.\n     * @type {?IMediaSourceAdapter}\n     * @private\n     */\n\n    /**\n     * The video element.\n     * @type {HTMLVideoElement}\n     * @private\n     */\n    value: function createEngine(source, config) {\n      return new this(source, config);\n    }\n\n    /**\n     * Checks if the engine can play a given source.\n     * @param {PKMediaSourceObject} source - The source object to check.\n     * @param {boolean} preferNative - prefer native flag\n     * @returns {boolean} - Whether the engine can play the source.\n     * @public\n     * @static\n     */\n\n\n    /**\n     * @type {string} - The engine id.\n     * @public\n     * @static\n     */\n\n\n    /**\n     * The html5 class logger.\n     * @type {any}\n     * @static\n     * @private\n     */\n\n    /**\n     * Promise to indicate when a media source adapter can be loaded.\n     * @type {Promise<*>}\n     * @private\n     */\n\n    /**\n     * The player config object.\n     * @type {Object}\n     * @private\n     */\n\n    /**\n     * The event manager of the engine.\n     * @type {EventManager}\n     * @private\n     */\n\n  }, {\n    key: 'canPlaySource',\n    value: function canPlaySource(source, preferNative) {\n      return _mediaSourceProvider2.default.canPlaySource(source, preferNative);\n    }\n\n    /**\n     * Runs the html5 capabilities tests.\n     * @returns {void}\n     * @public\n     * @static\n     */\n\n  }, {\n    key: 'runCapabilities',\n    value: function runCapabilities() {\n      Html5._capabilities.forEach(function (capability) {\n        return capability.runCapability();\n      });\n    }\n\n    /**\n     * Gets the html5 capabilities.\n     * @return {Promise<Object>} - The html5 capabilities object.\n     * @public\n     * @static\n     */\n\n  }, {\n    key: 'getCapabilities',\n    value: function getCapabilities() {\n      var promises = [];\n      Html5._capabilities.forEach(function (capability) {\n        return promises.push(capability.getCapability());\n      });\n      return Promise.all(promises).then(function (arrayOfResults) {\n        var mergedResults = {};\n        arrayOfResults.forEach(function (res) {\n          return Object.assign(mergedResults, res);\n        });\n        return _defineProperty({}, Html5.id, mergedResults);\n      });\n    }\n\n    /**\n     * For browsers which block auto play, use the user gesture to open the video element and enable playing via API.\n     * @returns {void}\n     * @private\n     * @public\n     */\n\n  }, {\n    key: 'prepareVideoElement',\n    value: function prepareVideoElement() {\n      Html5._logger.debug('Prepare the video element for playing');\n      Html5._el = Utils.Dom.createElement(\"video\");\n      Html5._el.load();\n    }\n\n    /**\n     * @constructor\n     * @param {PKMediaSourceObject} source - The selected source object.\n     * @param {Object} config - The player configuration.\n     */\n\n  }]);\n\n  function Html5(source, config) {\n    _classCallCheck(this, Html5);\n\n    var _this = _possibleConstructorReturn(this, (Html5.__proto__ || Object.getPrototypeOf(Html5)).call(this));\n\n    _this._showTextTrackFirstTime = {};\n\n    _this._eventManager = new _eventManager2.default();\n    _this._canLoadMediaSourceAdapterPromise = Promise.resolve();\n    _this._createVideoElement();\n    _this._init(source, config);\n    return _this;\n  }\n\n  /**\n   * Restores the engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {void}\n   */\n\n\n  _createClass(Html5, [{\n    key: 'restore',\n    value: function restore(source, config) {\n      this.reset();\n      this._init(source, config);\n    }\n\n    /**\n     * Resets the engine.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.detach();\n      this._eventManager.removeAll();\n      if (this._mediaSourceAdapter) {\n        this._canLoadMediaSourceAdapterPromise = this._mediaSourceAdapter.destroy();\n        this._mediaSourceAdapter = null;\n      }\n      if (this._el && this._el.src) {\n        Utils.Dom.setAttribute(this._el, 'src', '');\n        Utils.Dom.removeAttribute(this._el, 'src');\n      }\n    }\n\n    /**\n     * Destroys the engine.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.detach();\n      if (this._el) {\n        this.pause();\n        Utils.Dom.removeAttribute(this._el, 'src');\n        Utils.Dom.removeChild(this._el.parentNode, this._el);\n      }\n      this._showTextTrackFirstTime = {};\n      this._eventManager.destroy();\n      _mediaSourceProvider2.default.destroy();\n      this._mediaSourceAdapter = null;\n    }\n\n    /**\n     * Get the engine's id\n     * @public\n     * @returns {string} the engine's id\n     */\n\n  }, {\n    key: 'attach',\n\n\n    /**\n     * Listen to the video element events and triggers them from the engine.\n     * @public\n     * @returns {void}\n     */\n    value: function attach() {\n      var _this2 = this;\n\n      Object.keys(_eventType.Html5EventType).forEach(function (html5Event) {\n        _this2._eventManager.listen(_this2._el, _eventType.Html5EventType[html5Event], function () {\n          if (_eventType.Html5EventType[html5Event] === _eventType.Html5EventType.ERROR) {\n            _this2._handleVideoError();\n          } else {\n            _this2.dispatchEvent(new _fakeEvent2.default(_eventType.Html5EventType[html5Event]));\n          }\n        });\n      });\n      if (this._mediaSourceAdapter) {\n        this._eventManager.listen(this._mediaSourceAdapter, _eventType.CustomEventType.VIDEO_TRACK_CHANGED, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _eventType.CustomEventType.AUDIO_TRACK_CHANGED, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _eventType.CustomEventType.TEXT_TRACK_CHANGED, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _eventType.CustomEventType.ABR_MODE_CHANGED, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _eventType.CustomEventType.TEXT_CUE_CHANGED, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _eventType.CustomEventType.TRACKS_CHANGED, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _eventType.Html5EventType.ERROR, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _eventType.Html5EventType.TIME_UPDATE, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _eventType.Html5EventType.PLAYING, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n        this._eventManager.listen(this._mediaSourceAdapter, _eventType.CustomEventType.MEDIA_RECOVERED, function (event) {\n          return _this2.dispatchEvent(event);\n        });\n      }\n    }\n\n    /**\n     * Handles errors from the video element\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_handleVideoError',\n    value: function _handleVideoError() {\n      if (!this._el.error) return;\n      var code = this._el.error.code;\n      if (code == 1 /* MEDIA_ERR_ABORTED */) {\n          // Ignore this error code.js, which should only occur when navigating away or\n          // deliberately stopping playback of HTTP content.\n          return;\n        }\n\n      // Extra error information from MS Edge and IE11:\n      var extended = this._getMsExtendedError();\n\n      // Extra error information from Chrome:\n      // $FlowFixMe\n      var message = this._el.error.message;\n\n      var error = new _error2.default(_error2.default.Severity.CRITICAL, _error2.default.Category.MEDIA, _error2.default.Code.VIDEO_ERROR, {\n        code: code,\n        extended: extended,\n        message: message\n      });\n      this.dispatchEvent(new _fakeEvent2.default(_eventType.Html5EventType.ERROR, error));\n    }\n\n    /**\n     * more info about the error\n     * @returns {string} info about the video element error\n     * @private\n     */\n\n  }, {\n    key: '_getMsExtendedError',\n    value: function _getMsExtendedError() {\n      // $FlowFixMe\n      var extended = this._el.error.msExtendedCode;\n      if (extended) {\n        // Convert to unsigned:\n        if (extended < 0) {\n          extended += Math.pow(2, 32);\n        }\n        // Format as hex:\n        extended = extended.toString(16);\n      }\n      return extended;\n    }\n\n    /**\n     * Remove the listeners of the video element events.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'detach',\n    value: function detach() {\n      var _this3 = this;\n\n      Object.keys(_eventType.Html5EventType).forEach(function (html5Event) {\n        _this3._eventManager.unlisten(_this3._el, _eventType.Html5EventType[html5Event]);\n      });\n      if (this._mediaSourceAdapter) {\n        this._eventManager.unlisten(this._mediaSourceAdapter, _eventType.CustomEventType.VIDEO_TRACK_CHANGED);\n        this._eventManager.unlisten(this._mediaSourceAdapter, _eventType.CustomEventType.AUDIO_TRACK_CHANGED);\n        this._eventManager.unlisten(this._mediaSourceAdapter, _eventType.CustomEventType.TEXT_TRACK_CHANGED);\n        this._eventManager.unlisten(this._mediaSourceAdapter, _eventType.CustomEventType.TEXT_CUE_CHANGED);\n      }\n    }\n\n    /**\n     * @returns {HTMLVideoElement} - The video element.\n     * @public\n     */\n\n  }, {\n    key: 'getVideoElement',\n    value: function getVideoElement() {\n      return this._el;\n    }\n\n    /**\n     * Select a new video track.\n     * @param {VideoTrack} videoTrack - The video track object to set.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'selectVideoTrack',\n    value: function selectVideoTrack(videoTrack) {\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.selectVideoTrack(videoTrack);\n      }\n    }\n\n    /**\n     * Select a new audio track.\n     * @param {AudioTrack} audioTrack - The video track object to set.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'selectAudioTrack',\n    value: function selectAudioTrack(audioTrack) {\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.selectAudioTrack(audioTrack);\n      }\n    }\n\n    /**\n     * Select a new text track.\n     * @param {PKTextTrack} textTrack - The playkit text track object to set.\n     * @returns {void}\n     */\n\n  }, {\n    key: 'selectTextTrack',\n    value: function selectTextTrack(textTrack) {\n      this._removeCueChangeListener();\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.selectTextTrack(textTrack);\n      }\n      this._addCueChangeListener(textTrack);\n    }\n\n    /**\n     * Hide the text track\n     * @function hideTextTrack\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'hideTextTrack',\n    value: function hideTextTrack() {\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.hideTextTrack();\n      }\n      this._removeCueChangeListener();\n    }\n\n    /**\n     * Enables adaptive bitrate switching according to the media source extension logic.\n     * @function enableAdaptiveBitrate\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'enableAdaptiveBitrate',\n    value: function enableAdaptiveBitrate() {\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.enableAdaptiveBitrate();\n      }\n    }\n\n    /**\n     * Checking if adaptive bitrate switching is enabled.\n     * @function isAdaptiveBitrateEnabled\n     * @returns {boolean} - Whether adaptive bitrate is enabled.\n     * @public\n     */\n\n  }, {\n    key: 'isAdaptiveBitrateEnabled',\n    value: function isAdaptiveBitrateEnabled() {\n      if (this._mediaSourceAdapter) {\n        return this._mediaSourceAdapter.isAdaptiveBitrateEnabled();\n      }\n      return false;\n    }\n\n    /**\n     * Seeking to live edge.\n     * @function seekToLiveEdge\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'seekToLiveEdge',\n    value: function seekToLiveEdge() {\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.seekToLiveEdge();\n      }\n    }\n\n    /**\n     * Get the start time of DVR window in live playback in seconds.\n     * @returns {Number} - start time of DVR window.\n     * @public\n     */\n\n  }, {\n    key: 'getStartTimeOfDvrWindow',\n    value: function getStartTimeOfDvrWindow() {\n      return this._mediaSourceAdapter ? this._mediaSourceAdapter.getStartTimeOfDvrWindow() : 0;\n    }\n\n    /**\n     * Checking if the current playback is live.\n     * @function isLive\n     * @returns {boolean} - Whether playback is live.\n     * @public\n     */\n\n  }, {\n    key: 'isLive',\n    value: function isLive() {\n      return this._mediaSourceAdapter ? this._mediaSourceAdapter.isLive() : false;\n    }\n\n    /**\n     * Start/resume playback.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'play',\n    value: function play() {\n      var _this4 = this;\n\n      var playPromise = this._el.play();\n      if (playPromise) {\n        playPromise.catch(function () {\n          return _this4.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.AUTOPLAY_FAILED));\n        });\n      }\n    }\n\n    /**\n     * Pause playback.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'pause',\n    value: function pause() {\n      return this._el.pause();\n    }\n\n    /**\n     * Load media.\n     * @param {number} startTime - Optional time to start the video from.\n     * @public\n     * @returns {Promise<Object>} - The loaded data\n     */\n\n  }, {\n    key: 'load',\n    value: function load(startTime) {\n      var _this5 = this;\n\n      this._el.load();\n      return this._canLoadMediaSourceAdapterPromise.then(function () {\n        if (_this5._mediaSourceAdapter) {\n          return _this5._mediaSourceAdapter.load(startTime).catch(function (error) {\n            return Promise.reject(error);\n          });\n        }\n        return Promise.resolve({});\n      }).catch(function (error) {\n        return Promise.reject(error);\n      });\n    }\n\n    /**\n     * Set a source.\n     * @param {string} source - Source to set.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'ready',\n    value: function ready() {}\n\n    /**\n     * Get paused state.\n     * @returns {boolean} - The paused value of the video element.\n     * @public\n     */\n\n  }, {\n    key: '_init',\n\n\n    /**\n     * Initializes the engine.\n     * @param {PKMediaSourceObject} source - The selected source object.\n     * @param {Object} config - The player configuration.\n     * @private\n     * @returns {void}\n     */\n    value: function _init(source, config) {\n      this._config = config;\n      this._loadMediaSourceAdapter(source);\n      this.attach();\n    }\n\n    /**\n     * Creates a video element dom object.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_createVideoElement',\n    value: function _createVideoElement() {\n      this._el = Html5._el || Utils.Dom.createElement(\"video\");\n      this._el.id = Utils.Generator.uniqueId(5);\n      this._el.controls = false;\n    }\n\n    /**\n     * Loads the appropriate media source extension adapter.\n     * @param {PKMediaSourceObject} source - The selected source object.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_loadMediaSourceAdapter',\n    value: function _loadMediaSourceAdapter(source) {\n      this._mediaSourceAdapter = _mediaSourceProvider2.default.getMediaSourceAdapter(this.getVideoElement(), source, this._config);\n    }\n\n    /**\n     * Add cuechange listener to active textTrack.\n     * @param {PKTextTrack} textTrack - The playkit text track object to set.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_addCueChangeListener',\n    value: function _addCueChangeListener(textTrack) {\n      var _this6 = this;\n\n      var textTrackEl = this._getSelectedTextTrackElement();\n      if (textTrackEl) {\n        /*\n         There's a quirk in TextTrackAPI that a text track added to video element will not fire cuechange event if it\n         didn't have it's mode set to showing for at least until a single cue has been change.\n         After first time it seems there's time tracking which allows the cuechange to fire even though the track mode\n         is set to hidden\n         This is not the case with a track DOM element added to a video element where cuechange will be fired even if\n         track mode is set only to hidden and was never set to showing\n         */\n        if (this._config.playback.useNativeTextTrack) {\n          textTrackEl.mode = \"showing\";\n        } else {\n          textTrackEl.oncuechange = function (e) {\n            return _this6._onCueChange(e);\n          };\n          textTrackEl.mode = this._showTextTrackFirstTime[textTrack.index] ? \"hidden\" : \"showing\";\n          this._showTextTrackFirstTime[textTrack.index] = true;\n        }\n      }\n    }\n\n    /**\n     * Remove cuechange listener to active textTrack\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_removeCueChangeListener',\n    value: function _removeCueChangeListener() {\n      var textTrackEl = this._getSelectedTextTrackElement();\n      if (textTrackEl) {\n        textTrackEl.oncuechange = null;\n      }\n    }\n\n    /**\n     * oncuechange event handler.\n     * @param {FakeEvent} e - The event arg.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_onCueChange',\n    value: function _onCueChange(e) {\n      var textTrack = e.currentTarget;\n      var activeCues = [];\n      textTrack.mode = 'hidden';\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = textTrack.activeCues[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var cue = _step.value;\n\n          //Normalize cues to be of type of VTT model\n          if (window.VTTCue && cue instanceof window.VTTCue) {\n            activeCues.push(cue);\n          } else if (window.TextTrackCue && cue instanceof window.TextTrackCue) {\n            try {\n              activeCues.push(new _vttCue.Cue(cue.startTime, cue.endTime, cue.text));\n            } catch (error) {\n              new _error2.default(_error2.default.Severity.RECOVERABLE, _error2.default.Category.TEXT, _error2.default.Code.UNABLE_TO_CREATE_TEXT_CUE, error);\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.TEXT_CUE_CHANGED, { cues: activeCues }));\n    }\n\n    /**\n     * Get currently selected text track\n     * @returns {?TextTrack} - returns the active text track element if available\n     * @private\n     */\n\n  }, {\n    key: '_getSelectedTextTrackElement',\n    value: function _getSelectedTextTrackElement() {\n      var textTracks = this._el.textTracks;\n      for (var track in textTracks) {\n        if (textTracks.hasOwnProperty(track)) {\n          var textTrack = textTracks[parseInt(track)];\n          if (textTrack && textTrack.mode !== \"disabled\") {\n            return textTrack;\n          }\n        }\n      }\n      return null;\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return Html5.id;\n    }\n  }, {\n    key: 'src',\n    set: function set(source) {\n      this._el.src = source;\n    }\n\n    /**\n     * Get the source url.\n     * @returns {string} - The source url.\n     * @public\n     */\n    ,\n    get: function get() {\n      if (this._mediaSourceAdapter) {\n        return this._mediaSourceAdapter.src;\n      }\n      return \"\";\n    }\n\n    /**\n     * Get the current time in seconds.\n     * @returns {Number} - The current playback time.\n     * @public\n     */\n\n  }, {\n    key: 'currentTime',\n    get: function get() {\n      return this._mediaSourceAdapter ? this._mediaSourceAdapter.currentTime : 0;\n    }\n\n    /**\n     * Set the current time in seconds.\n     * @param {Number} to - The number to set in seconds.\n     * @public\n     * @returns {void}\n     */\n    ,\n    set: function set(to) {\n      if (this._mediaSourceAdapter) {\n        this._mediaSourceAdapter.currentTime = to;\n      }\n    }\n\n    /**\n     * Get the duration in seconds.\n     * @returns {Number} - The playback duration.\n     * @public\n     */\n\n  }, {\n    key: 'duration',\n    get: function get() {\n      return this._mediaSourceAdapter ? this._mediaSourceAdapter.duration : NaN;\n    }\n\n    /**\n     * Set playback volume.\n     * @param {Number} vol - The volume to set.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'volume',\n    set: function set(vol) {\n      this._el.volume = vol;\n    }\n\n    /**\n     * Get playback volume.\n     * @returns {Number} - The volume value of the video element.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.volume;\n    }\n  }, {\n    key: 'paused',\n    get: function get() {\n      return this._el.paused;\n    }\n\n    /**\n     * Get seeking state.\n     * @returns {boolean} - The seeking value of the video element.\n     * @public\n     */\n\n  }, {\n    key: 'seeking',\n    get: function get() {\n      return this._el.seeking;\n    }\n\n    /**\n     * Get the first seekable range (part) of the video in seconds.\n     * @returns {TimeRanges} - First seekable range (part) of the video in seconds.\n     * @public\n     */\n\n  }, {\n    key: 'seekable',\n    get: function get() {\n      return this._el.seekable;\n    }\n\n    /**\n     * Get the first played range (part) of the video in seconds.\n     * @returns {TimeRanges} - First played range (part) of the video in seconds.\n     * @public\n     */\n\n  }, {\n    key: 'played',\n    get: function get() {\n      return this._el.played;\n    }\n\n    /**\n     * Get the first buffered range (part) of the video in seconds.\n     * @returns {TimeRanges} - First buffered range (part) of the video in seconds.\n     * @public\n     */\n\n  }, {\n    key: 'buffered',\n    get: function get() {\n      return this._el.buffered;\n    }\n\n    /**\n     * Set player muted state.\n     * @param {boolean} mute - The new mute value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'muted',\n    set: function set(mute) {\n      this._el.muted = mute;\n    }\n\n    /**\n     * Get player muted state.\n     * @returns {boolean} - The muted value of the video element.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.muted;\n    }\n\n    /**\n     * Get the default mute value.\n     * @returns {boolean} - The defaultMuted of the video element.\n     * @public\n     */\n\n  }, {\n    key: 'defaultMuted',\n    get: function get() {\n      return this._el.defaultMuted;\n    }\n\n    /**\n     * Sets an image to be shown while the video is downloading, or until the user hits the play button.\n     * @param {string} poster - The image url to be shown.\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'poster',\n    set: function set(poster) {\n      this._el.poster = poster;\n    }\n\n    /**\n     * Gets an image to be shown while the video is downloading, or until the user hits the play button.\n     * @returns {poster} - The image url.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.poster;\n    }\n\n    /**\n     * Specifies if and how the author thinks that the video should be loaded when the page loads.\n     * @param {string} preload - The preload value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'preload',\n    set: function set(preload) {\n      this._el.preload = preload;\n    }\n\n    /**\n     * Gets the preload value of the video element.\n     * @returns {string} - The preload value.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.preload;\n    }\n\n    /**\n     * Set if the video will automatically start playing as soon as it can do so without stopping.\n     * @param {boolean} autoplay - The autoplay value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'autoplay',\n    set: function set(autoplay) {\n      this._el.autoplay = autoplay;\n    }\n\n    /**\n     * Gets the autoplay value of the video element.\n     * @returns {boolean} - The autoplay value.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.autoplay;\n    }\n\n    /**\n     * Set to specifies that the video will start over again, every time it is finished.\n     * @param {boolean} loop - the loop value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'loop',\n    set: function set(loop) {\n      this._el.loop = loop;\n    }\n\n    /**\n     * Gets the loop value of the video element.\n     * @returns {boolean} - The loop value.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.loop;\n    }\n\n    /**\n     * Set to specifies that video controls should be displayed.\n     * @param {boolean} controls - the controls value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'controls',\n    set: function set(controls) {\n      this._el.controls = controls;\n    }\n\n    /**\n     * Gets the controls value of the video element.\n     * @returns {boolean} - The controls value.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.controls;\n    }\n\n    /**\n     * Sets the current playback speed of the audio/video.\n     * @param {Number} playbackRate - The playback speed value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'playbackRate',\n    set: function set(playbackRate) {\n      this._el.playbackRate = playbackRate;\n    }\n\n    /**\n     * Gets the current playback speed of the audio/video.\n     * @returns {Number} - The current playback speed value.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.playbackRate;\n    }\n\n    /**\n     * Sets the default playback speed of the audio/video.\n     * @param {Number} defaultPlaybackRate - The default playback speed value.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'defaultPlaybackRate',\n    set: function set(defaultPlaybackRate) {\n      this._el.defaultPlaybackRate = defaultPlaybackRate;\n    }\n\n    /**\n     * Gets the default playback speed of the audio/video.\n     * @returns {Number} - The default playback speed value.\n     * @public\n     */\n    ,\n    get: function get() {\n      return this._el.defaultPlaybackRate;\n    }\n\n    /**\n     * The ended property returns whether the playback of the audio/video has ended.\n     * @returns {boolean} - The ended value.\n     * @public\n     */\n\n  }, {\n    key: 'ended',\n    get: function get() {\n      return this._el.ended;\n    }\n\n    /**\n     * The error property returns a MediaError object.\n     * @returns {MediaError} - The MediaError object has a code property containing the error state of the audio/video.\n     * @public\n     */\n\n  }, {\n    key: 'error',\n    get: function get() {\n      return this._el.error;\n    }\n\n    /**\n     * @returns {Number} - The current network state (activity) of the audio/video.\n     * @public\n     */\n\n  }, {\n    key: 'networkState',\n    get: function get() {\n      return this._el.networkState;\n    }\n\n    /**\n     * Indicates if the audio/video is ready to play or not.\n     * @returns {Number} - The current ready state of the audio/video.\n     * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready.\n     * 1 = HAVE_METADATA - metadata for the audio/video is ready.\n     * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond.\n     * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available.\n     * 4 = HAVE_ENOUGH_DATA - enough data available to start playing.\n     */\n\n  }, {\n    key: 'readyState',\n    get: function get() {\n      return this._el.readyState;\n    }\n\n    /**\n     * @returns {Number} - The height of the video player, in pixels.\n     * @public\n     */\n\n  }, {\n    key: 'videoHeight',\n    get: function get() {\n      return this._el.videoHeight;\n    }\n\n    /**\n     * @returns {Number} - The width of the video player, in pixels.\n     * @public\n     */\n\n  }, {\n    key: 'videoWidth',\n    get: function get() {\n      return this._el.videoWidth;\n    }\n\n    /**\n     * @param {boolean} playsinline - Whether to set on the video tag the playsinline attribute.\n     */\n\n  }, {\n    key: 'playsinline',\n    set: function set(playsinline) {\n      if (playsinline) {\n        this._el.setAttribute('playsinline', '');\n      } else {\n        this._el.removeAttribute('playsinline');\n      }\n    }\n\n    /**\n     * @returns {boolean} - Whether the video tag has an attribute of playsinline.\n     */\n    ,\n    get: function get() {\n      return this._el.getAttribute('playsinline') === '';\n    }\n  }]);\n\n  return Html5;\n}(_fakeEventTarget2.default);\n\nHtml5._logger = (0, _logger2.default)('Html5');\nHtml5._capabilities = [_html5Autoplay2.default, _html5IsSupported2.default];\nHtml5.id = \"html5\";\nexports.default = Html5;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _eventManager = __webpack_require__(6);\n\nvar _eventManager2 = _interopRequireDefault(_eventManager);\n\nvar _eventType = __webpack_require__(4);\n\nvar _track = __webpack_require__(5);\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _videoTrack = __webpack_require__(10);\n\nvar _videoTrack2 = _interopRequireDefault(_videoTrack);\n\nvar _audioTrack = __webpack_require__(11);\n\nvar _audioTrack2 = _interopRequireDefault(_audioTrack);\n\nvar _textTrack = __webpack_require__(7);\n\nvar _baseMediaSourceAdapter = __webpack_require__(21);\n\nvar _baseMediaSourceAdapter2 = _interopRequireDefault(_baseMediaSourceAdapter);\n\nvar _resolution = __webpack_require__(42);\n\nvar _util = __webpack_require__(3);\n\nvar Utils = _interopRequireWildcard(_util);\n\nvar _fairplay = __webpack_require__(43);\n\nvar _fairplay2 = _interopRequireDefault(_fairplay);\n\nvar _env = __webpack_require__(12);\n\nvar _env2 = _interopRequireDefault(_env);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * An illustration of media source extension for progressive download\n * @classdesc\n * @implements {IMediaSourceAdapter}\n */\nvar NativeAdapter = function (_BaseMediaSourceAdapt) {\n  _inherits(NativeAdapter, _BaseMediaSourceAdapt);\n\n  _createClass(NativeAdapter, null, [{\n    key: 'canPlayType',\n\n\n    /**\n     * Checks if NativeAdapter can play a given mime type.\n     * @function canPlayType\n     * @param {string} mimeType - The mime type to check\n     * @returns {boolean} - Whether the native adapter can play a specific mime type\n     * @static\n     */\n\n    /**\n     * The event manager of the class.\n     * @member {EventManager} - _eventManager\n     * @type {EventManager}\n     * @private\n     */\n\n    /**\n     * The load promise\n     * @member {Promise<Object>} - _loadPromise\n     * @type {Promise<Object>}\n     * @private\n     */\n\n    /**\n     * The original progressive sources\n     * @member {Array<PKMediaSourceObject>} - _progressiveSources\n     * @private\n     */\n\n    /**\n     * The player tracks.\n     * @member {Array<Track>} - _playerTracks\n     * @private\n     */\n\n    /**\n     * The id of _liveDurationChangeInterval\n     * @member {?number} - _liveDurationChangeInterval\n     * @private\n     */\n\n    /**\n     * The live edge value\n     * @member {number} - _liveEdge\n     * @private\n     */\n\n    /**\n     * The DRM protocols implementations for native adapter.\n     * @type {Array<Function>}\n     * @private\n     * @static\n     */\n\n\n    /**\n     * The adapter logger\n     * @member {any} _logger\n     * @private\n     * @static\n     */\n    value: function canPlayType(mimeType) {\n      var canPlayType = false;\n      if (typeof mimeType === 'string') {\n        canPlayType = !!NativeAdapter.TEST_VIDEO.canPlayType(mimeType.toLowerCase());\n      }\n      NativeAdapter._logger.debug('canPlayType result for mimeType:' + mimeType + ' is ' + canPlayType.toString());\n      return canPlayType;\n    }\n\n    /**\n     * Checks if NativeAdapter can play a given drm data.\n     * @function canPlayDrm\n     * @param {Array<Object>} drmData - The drm data to check.\n     * @returns {boolean} - Whether the native adapter can play a specific drm data.\n     * @static\n     */\n\n    /**\n     * The DRM protocol for the current playback.\n     * @type {?Function}\n     * @private\n     * @static\n     */\n\n    /**\n     * static video element for canPlayType testing\n     * @member {} TEST_VIDEO\n     * @type {HTMLVideoElement}\n     * @static\n     */\n\n    /**\n     * The id of the Adapter\n     * @member {string} id\n     * @static\n     * @public\n     */\n\n  }, {\n    key: 'canPlayDrm',\n    value: function canPlayDrm(drmData) {\n      var canPlayDrm = false;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = NativeAdapter._drmProtocols[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var drmProtocol = _step.value;\n\n          if (drmProtocol.canPlayDrm(drmData)) {\n            NativeAdapter._drmProtocol = drmProtocol;\n            canPlayDrm = true;\n            break;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      NativeAdapter._logger.debug('canPlayDrm result is ' + canPlayDrm.toString(), drmData);\n      return canPlayDrm;\n    }\n\n    /**\n     * Factory method to create media source adapter.\n     * @function createAdapter\n     * @param {HTMLVideoElement} videoElement - The video element that the media source adapter work with.\n     * @param {PKMediaSourceObject} source - The source Object.\n     * @param {Object} config - The player configuration.\n     * @returns {IMediaSourceAdapter} - New instance of the run time media source adapter.\n     * @static\n     */\n\n  }, {\n    key: 'createAdapter',\n    value: function createAdapter(videoElement, source, config) {\n      return new this(videoElement, source, config);\n    }\n\n    /**\n     * @constructor\n     * @param {HTMLVideoElement} videoElement - The video element which bind to NativeAdapter\n     * @param {PKMediaSourceObject} source - The source object\n     * @param {Object} config - The player configuration\n     */\n\n  }]);\n\n  function NativeAdapter(videoElement, source, config) {\n    _classCallCheck(this, NativeAdapter);\n\n    NativeAdapter._logger.debug('Creating adapter');\n\n    var _this = _possibleConstructorReturn(this, (NativeAdapter.__proto__ || Object.getPrototypeOf(NativeAdapter)).call(this, videoElement, source));\n\n    _this._eventManager = new _eventManager2.default();\n    _this._maybeSetDrmPlayback();\n    _this._progressiveSources = config.sources.progressive;\n    _this._liveEdge = 0;\n    return _this;\n  }\n\n  /**\n   * dispatches an error (is given to a class the cannot dispatch, like static fair play class)\n   * @private\n   * @param {any} error - the error to dispatch\n   * @returns {void}\n   */\n\n\n  _createClass(NativeAdapter, [{\n    key: '_dispatchErrorCallback',\n    value: function _dispatchErrorCallback(error) {\n      this._trigger(_eventType.Html5EventType.ERROR, error);\n    }\n\n    /**\n     * Sets the DRM playback in case such needed.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_maybeSetDrmPlayback',\n    value: function _maybeSetDrmPlayback() {\n      var _this2 = this;\n\n      if (NativeAdapter._drmProtocol && this._sourceObj && this._sourceObj.drmData) {\n        NativeAdapter._drmProtocol.setDrmPlayback(this._videoElement, this._sourceObj.drmData, function (error) {\n          return _this2._dispatchErrorCallback(error);\n        });\n      }\n    }\n\n    /**\n     * Set the suitable progressive source according the current resolution\n     * @function _setProgressiveSource\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_setProgressiveSource',\n    value: function _setProgressiveSource() {\n      var suitableTrack = (0, _resolution.getSuitableSourceForResolution)(this._progressiveSources, this._videoElement.offsetWidth, this._videoElement.offsetHeight);\n      if (suitableTrack) {\n        this._sourceObj = suitableTrack;\n      }\n    }\n\n    /**\n     * Checks if the playback source is progressive\n     * @function _isProgressivePlayback\n     * @returns {boolean} - is progressive source\n     * @private\n     */\n\n  }, {\n    key: '_isProgressivePlayback',\n    value: function _isProgressivePlayback() {\n      return this._sourceObj ? this._sourceObj.mimetype === 'video/mp4' : false;\n    }\n\n    /**\n     * Load the video source\n     * @param {number} startTime - Optional time to start the video from.\n     * @function load\n     * @returns {Promise<Object>} - The loaded data\n     */\n\n  }, {\n    key: 'load',\n    value: function load(startTime) {\n      var _this3 = this;\n\n      if (!this._loadPromise) {\n        this._loadPromise = new Promise(function (resolve, reject) {\n          _this3._eventManager.listenOnce(_this3._videoElement, _eventType.Html5EventType.LOADED_DATA, _this3._onLoadedData.bind(_this3, resolve, startTime));\n          _this3._eventManager.listenOnce(_this3._videoElement, _eventType.Html5EventType.ERROR, _this3._onError.bind(_this3, reject));\n          if (_this3._isProgressivePlayback()) {\n            _this3._setProgressiveSource();\n          }\n          if (_this3._sourceObj && _this3._sourceObj.url) {\n            _this3._videoElement.src = _this3._sourceObj.url;\n            _this3._trigger(_eventType.CustomEventType.ABR_MODE_CHANGED, { mode: _this3._isProgressivePlayback() ? 'manual' : 'auto' });\n          }\n          _this3._videoElement.load();\n        });\n      }\n      return this._loadPromise;\n    }\n\n    /**\n     * Loaded data event handler.\n     * @param {Function} resolve - The resolve promise function.\n     * @param {number} startTime - Optional time to start the video from.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onLoadedData',\n    value: function _onLoadedData(resolve, startTime) {\n      var _this4 = this;\n\n      var parseTracksAndResolve = function parseTracksAndResolve() {\n        _this4._playerTracks = _this4._getParsedTracks();\n        _this4._addNativeAudioTrackChangeListener();\n        _this4._addNativeTextTrackChangeListener();\n        _this4._addNativeTextTrackAddedListener();\n        NativeAdapter._logger.debug('The source has been loaded successfully');\n        resolve({ tracks: _this4._playerTracks });\n        if (_this4.isLive()) {\n          _this4._handleLiveDurationChange();\n        }\n      };\n      if (startTime && startTime > -1) {\n        this._videoElement.currentTime = startTime;\n      }\n      if (this._videoElement.textTracks.length > 0) {\n        parseTracksAndResolve();\n      } else {\n        this._eventManager.listenOnce(this._videoElement, _eventType.Html5EventType.CAN_PLAY, parseTracksAndResolve.bind(this));\n      }\n    }\n\n    /**\n     * error event handler.\n     * @param {Function} reject - The reject promise function.\n     * @param {FakeEvent} error - The error fake event.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onError',\n    value: function _onError(reject, error) {\n      reject(new _error2.default(_error2.default.Severity.CRITICAL, _error2.default.Category.MEDIA, _error2.default.Code.NATIVE_ADAPTER_LOAD_FAILED, error.payload));\n    }\n\n    /**\n     * Destroys the native adapter.\n     * @function destroy\n     * @returns {Promise<*>} - The destroy promise.\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var _this5 = this;\n\n      NativeAdapter._logger.debug('destroy');\n      return _get(NativeAdapter.prototype.__proto__ || Object.getPrototypeOf(NativeAdapter.prototype), 'destroy', this).call(this).then(function () {\n        _this5._eventManager.destroy();\n        _this5._progressiveSources = [];\n        _this5._loadPromise = null;\n        _this5._liveEdge = 0;\n        if (_this5._liveDurationChangeInterval) {\n          clearInterval(_this5._liveDurationChangeInterval);\n          _this5._liveDurationChangeInterval = null;\n        }\n      });\n    }\n\n    /**\n     * Get the parsed tracks\n     * @function _getParsedTracks\n     * @returns {Array<Track>} - The parsed tracks\n     * @private\n     */\n\n  }, {\n    key: '_getParsedTracks',\n    value: function _getParsedTracks() {\n      var videoTracks = this._getParsedVideoTracks();\n      var audioTracks = this._getParsedAudioTracks();\n      var textTracks = this._getParsedTextTracks();\n      return videoTracks.concat(audioTracks).concat(textTracks);\n    }\n\n    /**\n     * Get the parsed video tracks\n     * @function _getParsedVideoTracks\n     * @returns {Array<Track>} - The parsed video tracks\n     * @private\n     */\n\n  }, {\n    key: '_getParsedVideoTracks',\n    value: function _getParsedVideoTracks() {\n      if (this._isProgressivePlayback()) {\n        return this._getParsedProgressiveVideoTracks();\n      } else {\n        return this._getParsedAdaptiveVideoTracks();\n      }\n    }\n\n    /**\n     * Get the parsed progressive video tracks\n     * @function _getParsedProgressiveVideoTracks\n     * @returns {Array<Track>} - The parsed progressive video tracks\n     * @private\n     */\n\n  }, {\n    key: '_getParsedProgressiveVideoTracks',\n    value: function _getParsedProgressiveVideoTracks() {\n      var videoTracks = this._progressiveSources;\n      var parsedTracks = [];\n      if (videoTracks) {\n        for (var i = 0; i < videoTracks.length; i++) {\n          var settings = {\n            id: videoTracks[i].id,\n            bandwidth: videoTracks[i].bandwidth,\n            width: videoTracks[i].width,\n            height: videoTracks[i].height,\n            active: this._sourceObj ? videoTracks[i].id === this._sourceObj.id : false,\n            index: i\n          };\n          parsedTracks.push(new _videoTrack2.default(settings));\n        }\n      }\n      return parsedTracks;\n    }\n\n    /**\n     * Get the parsed adaptive video tracks\n     * @function _getParsedAdaptiveVideoTracks\n     * @returns {Array<Track>} - The parsed adaptive video tracks\n     * @private\n     */\n\n  }, {\n    key: '_getParsedAdaptiveVideoTracks',\n    value: function _getParsedAdaptiveVideoTracks() {\n      //TODO check adaptation in safari hls\n      var videoTracks = this._videoElement.videoTracks;\n      var parsedTracks = [];\n      if (videoTracks) {\n        for (var i = 0; i < videoTracks.length; i++) {\n          var settings = {\n            //TODO calculate width/height/bandwidth\n            id: videoTracks[i].id,\n            active: videoTracks[i].selected,\n            label: videoTracks[i].label,\n            language: videoTracks[i].language,\n            index: i\n          };\n          parsedTracks.push(new _videoTrack2.default(settings));\n        }\n      }\n      return parsedTracks;\n    }\n\n    /**\n     * Get the parsed audio tracks\n     * @function _getParsedAudioTracks\n     * @returns {Array<AudioTrack>} - The parsed audio tracks\n     * @private\n     */\n\n  }, {\n    key: '_getParsedAudioTracks',\n    value: function _getParsedAudioTracks() {\n      var audioTracks = this._videoElement.audioTracks;\n      var parsedTracks = [];\n      if (audioTracks) {\n        for (var i = 0; i < audioTracks.length; i++) {\n          var settings = {\n            id: audioTracks[i].id,\n            active: audioTracks[i].enabled,\n            label: audioTracks[i].label,\n            language: audioTracks[i].language,\n            index: i\n          };\n          parsedTracks.push(new _audioTrack2.default(settings));\n        }\n      }\n      return parsedTracks;\n    }\n\n    /**\n     * Get the parsed text tracks\n     * @function _getParsedTextTracks\n     * @returns {Array<PKTextTrack>} - The parsed text tracks\n     * @private\n     */\n\n  }, {\n    key: '_getParsedTextTracks',\n    value: function _getParsedTextTracks() {\n      var textTracks = this._videoElement.textTracks;\n      var parsedTracks = [];\n      if (textTracks) {\n        for (var i = 0; i < textTracks.length; i++) {\n          var settings = {\n            kind: textTracks[i].kind,\n            active: textTracks[i].mode === 'showing',\n            label: textTracks[i].label,\n            language: textTracks[i].language,\n            index: i\n          };\n          if (settings.language || settings.label) {\n            parsedTracks.push(new _textTrack.TextTrack(settings));\n          }\n        }\n      }\n      return parsedTracks;\n    }\n\n    /**\n     * Select a video track\n     * @function selectVideoTrack\n     * @param {VideoTrack} videoTrack - the track to select\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'selectVideoTrack',\n    value: function selectVideoTrack(videoTrack) {\n      if (this._isProgressivePlayback()) {\n        this._selectProgressiveVideoTrack(videoTrack);\n      } else {\n        this.selectAdaptiveVideoTrack(videoTrack);\n      }\n    }\n\n    /**\n     * Select a progressive video track\n     * @function _selectProgressiveVideoTrack\n     * @param {VideoTrack} videoTrack - the track to select\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: '_selectProgressiveVideoTrack',\n    value: function _selectProgressiveVideoTrack(videoTrack) {\n      var _this6 = this;\n\n      var videoTracks = this._progressiveSources;\n      if (videoTrack instanceof _videoTrack2.default && videoTracks && videoTracks[videoTrack.index]) {\n        var currentTime = this._videoElement.currentTime;\n        var paused = this._videoElement.paused;\n        this._sourceObj = videoTracks[videoTrack.index];\n        this._eventManager.listenOnce(this._videoElement, _eventType.Html5EventType.LOADED_DATA, function () {\n          if (_env2.default.browser.name === 'Android Browser') {\n            // In android browser we have to seek only after some playback.\n            _this6._eventManager.listenOnce(_this6._videoElement, _eventType.Html5EventType.DURATION_CHANGE, function () {\n              _this6._videoElement.currentTime = currentTime;\n            });\n            _this6._eventManager.listenOnce(_this6._videoElement, _eventType.Html5EventType.SEEKED, function () {\n              _this6._onTrackChanged(videoTrack);\n              if (paused) {\n                _this6._videoElement.pause();\n              }\n            });\n            _this6._videoElement.play();\n          } else {\n            _this6._eventManager.listenOnce(_this6._videoElement, _eventType.Html5EventType.SEEKED, function () {\n              _this6._onTrackChanged(videoTrack);\n            });\n            _this6._videoElement.currentTime = currentTime;\n            if (!paused) {\n              _this6._videoElement.play();\n            }\n          }\n        });\n        this._videoElement.src = this._sourceObj ? this._sourceObj.url : \"\";\n      }\n    }\n\n    /**\n     * Select a native video track\n     * @function selectAdaptiveVideoTrack\n     * @param {VideoTrack} videoTrack - the track to select\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'selectAdaptiveVideoTrack',\n    value: function selectAdaptiveVideoTrack(videoTrack) {\n      var videoTracks = this._videoElement.videoTracks;\n      if (videoTrack instanceof _videoTrack2.default && videoTracks && videoTracks[videoTrack.index]) {\n        this._disableVideoTracks();\n        videoTracks[videoTrack.index].selected = true;\n        this._onTrackChanged(videoTrack);\n      }\n    }\n\n    /**\n     * Select an audio track\n     * @function selectAudioTrack\n     * @param {AudioTrack} audioTrack - the  audio track to select\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'selectAudioTrack',\n    value: function selectAudioTrack(audioTrack) {\n      var audioTracks = this._videoElement.audioTracks;\n      if (audioTrack instanceof _audioTrack2.default && audioTracks && audioTracks[audioTrack.index]) {\n        this._removeNativeAudioTrackChangeListener();\n        this._disableAudioTracks();\n        audioTracks[audioTrack.index].enabled = true;\n        this._onTrackChanged(audioTrack);\n        this._addNativeAudioTrackChangeListener();\n      }\n    }\n\n    /**\n     * Remove the onchange listenr of the video element AudioTrackList.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_removeNativeAudioTrackChangeListener',\n    value: function _removeNativeAudioTrackChangeListener() {\n      if (this._videoElement.audioTracks) {\n        this._eventManager.unlisten(this._videoElement.audioTracks, 'change');\n      }\n    }\n\n    /**\n     * Add the onchange listenr of the video element AudioTrackList.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_addNativeAudioTrackChangeListener',\n    value: function _addNativeAudioTrackChangeListener() {\n      var _this7 = this;\n\n      if (this._videoElement.audioTracks) {\n        this._eventManager.listen(this._videoElement.audioTracks, 'change', function () {\n          return _this7._onNativeAudioTrackChange();\n        });\n      }\n    }\n\n    /**\n     * Handler of the video element AudioTrackList onchange event.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onNativeAudioTrackChange',\n    value: function _onNativeAudioTrackChange() {\n      var _this8 = this;\n\n      var pkAudioTracks = this._playerTracks.filter(function (track) {\n        return track instanceof _audioTrack2.default;\n      });\n      var getActivePKAudioTrackIndex = function getActivePKAudioTrackIndex() {\n        var activeAudioTrack = pkAudioTracks.find(function (track) {\n          return track.active === true;\n        });\n        return activeAudioTrack ? activeAudioTrack.index : -1;\n      };\n      var getActiveVidAudioTrackIndex = function getActiveVidAudioTrackIndex() {\n        for (var i = 0; i < _this8._videoElement.audioTracks.length; i++) {\n          var audioTrack = _this8._videoElement.audioTracks[i];\n          if (audioTrack.enabled) {\n            return i;\n          }\n        }\n        return -1;\n      };\n      NativeAdapter._logger.debug('Video element audio track change');\n      var vidIndex = getActiveVidAudioTrackIndex();\n      var pkIndex = getActivePKAudioTrackIndex();\n      if (vidIndex !== pkIndex) {\n        var pkAudioTrack = pkAudioTracks.find(function (track) {\n          return track.index === vidIndex;\n        });\n        if (pkAudioTrack) {\n          NativeAdapter._logger.debug('Native selection of track, update the player audio track (' + pkIndex + ' -> ' + vidIndex + ')');\n          this._onTrackChanged(pkAudioTrack);\n        }\n      }\n    }\n\n    /**\n     * Select a text track\n     * @function selectTextTrack\n     * @param {PKTextTrack} textTrack - The playkit text track\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'selectTextTrack',\n    value: function selectTextTrack(textTrack) {\n      var textTracks = this._videoElement.textTracks;\n      if (textTrack instanceof _textTrack.TextTrack && (textTrack.kind === 'subtitles' || textTrack.kind === 'captions') && textTracks) {\n        this._removeNativeTextTrackChangeListener();\n        var selectedTrack = Array.from(textTracks).find(function (track) {\n          return track ? track.language === textTrack.language : false;\n        });\n        if (selectedTrack) {\n          this._disableTextTracks();\n          selectedTrack.mode = 'showing';\n          NativeAdapter._logger.debug('Text track changed', selectedTrack);\n          this._onTrackChanged(textTrack);\n          this._addNativeTextTrackChangeListener();\n        }\n      }\n    }\n\n    /**\n     * Remove the onchange listenr of the video element TextTrackList.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_removeNativeTextTrackChangeListener',\n    value: function _removeNativeTextTrackChangeListener() {\n      if (this._videoElement.textTracks) {\n        this._eventManager.unlisten(this._videoElement.textTracks, 'change');\n      }\n    }\n\n    /**\n     * Add the onchange listenr of the video element TextTrackList.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_addNativeTextTrackChangeListener',\n    value: function _addNativeTextTrackChangeListener() {\n      var _this9 = this;\n\n      if (this._videoElement.textTracks) {\n        this._eventManager.listen(this._videoElement.textTracks, 'change', function () {\n          return _this9._onNativeTextTrackChange();\n        });\n      }\n    }\n\n    /**\n     * Handler of the video element TextTrackList onchange event.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onNativeTextTrackChange',\n    value: function _onNativeTextTrackChange() {\n      var _this10 = this;\n\n      var pkTextTracks = this._playerTracks.filter(function (track) {\n        return track instanceof _textTrack.TextTrack;\n      });\n      var pkOffTrack = pkTextTracks.find(function (track) {\n        return track.language === 'off';\n      });\n      var getActivePKTextTrackIndex = function getActivePKTextTrackIndex() {\n        var activeTextTrack = pkTextTracks.find(function (track) {\n          return track.active === true;\n        });\n        return activeTextTrack ? activeTextTrack.index : -1;\n      };\n      var getActiveVidTextTrackIndex = function getActiveVidTextTrackIndex() {\n        for (var i = 0; i < _this10._videoElement.textTracks.length; i++) {\n          var textTrack = _this10._videoElement.textTracks[i];\n          if (textTrack.mode === 'showing') {\n            return i;\n          }\n        }\n        return -1;\n      };\n      NativeAdapter._logger.debug('Video element text track change');\n      var vidIndex = getActiveVidTextTrackIndex();\n      var pkIndex = getActivePKTextTrackIndex();\n\n      if (vidIndex !== pkIndex) {\n        // In case no text track with 'showing' mode\n        // we need to set the off track\n        if (vidIndex == -1) {\n          if (pkOffTrack) {\n            NativeAdapter._logger.debug('Native selection of track, update the player text track (' + pkIndex + ' -> off)');\n            this._onTrackChanged(pkOffTrack);\n          }\n        } else {\n          // In case the text track on the video element is\n          // different then the text track of the player\n          // we need to set the correct one\n          var pkTextTrack = pkTextTracks.find(function (track) {\n            return track.index === vidIndex;\n          });\n          if (pkTextTrack) {\n            NativeAdapter._logger.debug('Native selection of track, update the player text track (' + pkIndex + ' -> ' + vidIndex + ')');\n            this._onTrackChanged(pkTextTrack);\n          }\n        }\n      }\n    }\n\n    /**\n     * Add the onaddtrack listenr of the video element TextTrackList.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_addNativeTextTrackAddedListener',\n    value: function _addNativeTextTrackAddedListener() {\n      var _this11 = this;\n\n      if (!(this._config && this._config.playback && this._config.playback.useNativeTextTrack) && this._videoElement.textTracks) {\n        this._eventManager.listen(this._videoElement.textTracks, 'addtrack', function () {\n          return _this11._onNativeTextTrackAdded();\n        });\n      }\n    }\n\n    /**\n     * Handler of the video element TextTrackList onaddtrack event.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onNativeTextTrackAdded',\n    value: function _onNativeTextTrackAdded() {\n      this._playerTracks = this._getParsedTracks();\n      this._trigger(_eventType.CustomEventType.TRACKS_CHANGED, { tracks: this._playerTracks });\n    }\n\n    /**\n     * Hide the text track\n     * @function hideTextTrack\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'hideTextTrack',\n    value: function hideTextTrack() {\n      this._disableTextTracks();\n    }\n\n    /**\n     * Enables adaptive bitrate\n     * @function enableAdaptiveBitrate\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'enableAdaptiveBitrate',\n    value: function enableAdaptiveBitrate() {\n      NativeAdapter._logger.warn('Enabling adaptive bitrate is not supported for native playback');\n    }\n\n    /**\n     * Checking if adaptive bitrate switching is enabled.\n     * For progressive playback will always returns false.\n     * For adaptive playback will always returns true.\n     * @function isAdaptiveBitrateEnabled\n     * @returns {boolean} - Whether adaptive bitrate is enabled.\n     * @public\n     */\n\n  }, {\n    key: 'isAdaptiveBitrateEnabled',\n    value: function isAdaptiveBitrateEnabled() {\n      return !this._isProgressivePlayback();\n    }\n\n    /**\n     * Disables all the existing video tracks.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_disableVideoTracks',\n    value: function _disableVideoTracks() {\n      var videoTracks = this._videoElement.videoTracks;\n      if (videoTracks) {\n        for (var i = 0; i < videoTracks.length; i++) {\n          videoTracks[i].selected = false;\n        }\n      }\n    }\n\n    /**\n     * Disables all the existing audio tracks.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_disableAudioTracks',\n    value: function _disableAudioTracks() {\n      var audioTracks = this._videoElement.audioTracks;\n      if (audioTracks) {\n        for (var i = 0; i < audioTracks.length; i++) {\n          audioTracks[i].enabled = false;\n        }\n      }\n    }\n\n    /**\n     * Disables all the existing text tracks.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_disableTextTracks',\n    value: function _disableTextTracks() {\n      var textTracks = this._videoElement.textTracks;\n      if (textTracks) {\n        for (var i = 0; i < textTracks.length; i++) {\n          textTracks[i].mode = 'disabled';\n        }\n      }\n    }\n\n    /**\n     * Returns the live edge\n     * @returns {number} - live edge\n     * @private\n     */\n\n  }, {\n    key: '_getLiveEdge',\n    value: function _getLiveEdge() {\n      if (this._videoElement.seekable.length) {\n        return this._videoElement.seekable.end(this._videoElement.seekable.length - 1);\n      } else if (this._videoElement.buffered.length) {\n        return this._videoElement.buffered.end(this._videoElement.buffered.length - 1);\n      } else {\n        return this._videoElement.duration;\n      }\n    }\n\n    /**\n     * Seeking to live edge.\n     * @function seekToLiveEdge\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'seekToLiveEdge',\n    value: function seekToLiveEdge() {\n      try {\n        this._videoElement.currentTime = this._getLiveEdge();\n      } catch (e) {\n        return;\n      }\n    }\n\n    /**\n     * Checking if the current playback is live.\n     * @function isLive\n     * @returns {boolean} - Whether playback is live.\n     * @public\n     */\n\n  }, {\n    key: 'isLive',\n    value: function isLive() {\n      return this._videoElement.duration === Infinity;\n    }\n\n    /**\n     * Handling live duration change (as safari doesn't trigger durationchange event on live playback)\n     * @function _handleLiveDurationChange\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_handleLiveDurationChange',\n    value: function _handleLiveDurationChange() {\n      var _this12 = this;\n\n      this._liveDurationChangeInterval = setInterval(function () {\n        var liveEdge = _this12._getLiveEdge();\n        if (_this12._liveEdge !== liveEdge) {\n          _this12._liveEdge = liveEdge;\n          _this12._videoElement.dispatchEvent(new window.Event(_eventType.Html5EventType.DURATION_CHANGE));\n        }\n      }, 2000);\n    }\n\n    /**\n     * Get the start time of DVR window in live playback in seconds.\n     * @returns {Number} - start time of DVR window.\n     * @public\n     */\n\n  }, {\n    key: 'getStartTimeOfDvrWindow',\n    value: function getStartTimeOfDvrWindow() {\n      if (this.isLive() && this._videoElement.seekable.length) {\n        return this._videoElement.seekable.start(0);\n      } else {\n        return 0;\n      }\n    }\n  }]);\n\n  return NativeAdapter;\n}(_baseMediaSourceAdapter2.default);\n\nNativeAdapter.id = 'NativeAdapter';\nNativeAdapter._logger = _baseMediaSourceAdapter2.default.getLogger(NativeAdapter.id);\nNativeAdapter.TEST_VIDEO = Utils.Dom.createElement(\"video\");\nNativeAdapter._drmProtocols = [_fairplay2.default];\nNativeAdapter._drmProtocol = null;\nexports.default = NativeAdapter;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\n/**\n * Calculates the most suitable source to the container size\n * @function getSuitableSourceForResolution\n * @param {Array<Object>} tracks - The tracks\n * @param {number} width - The width to calculate with\n * @param {number} height - The height to calculate with\n * @returns {Object} - The most suitable source to the container size\n */\nfunction getSuitableSourceForResolution(tracks, width, height) {\n  var mostSuitableWidth = null;\n  if (height && tracks) {\n    var mostSuitableWidthTracks = [];\n    var minWidthDiff = Infinity;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = tracks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var track = _step.value;\n        // first filter the most width suitable\n        var widthDiff = Math.abs(track.width - width);\n        if (widthDiff < minWidthDiff) {\n          minWidthDiff = widthDiff;\n          mostSuitableWidthTracks = [track];\n        } else if (widthDiff === minWidthDiff) {\n          mostSuitableWidthTracks.push(track);\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    var videoRatio = width / height;\n    var mostSuitableWidthAndRatioTracks = mostSuitableWidthTracks;\n    var minRatioDiff = Infinity;\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = mostSuitableWidthTracks[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var _track = _step2.value;\n        // filter the most ratio suitable from the width filter results\n        if (_track.height) {\n          var ratioDiff = Math.abs(_track.width / _track.height - videoRatio);\n          if (ratioDiff < minRatioDiff) {\n            minRatioDiff = ratioDiff;\n            mostSuitableWidthAndRatioTracks = [_track];\n          } else if (ratioDiff === minRatioDiff) {\n            mostSuitableWidthAndRatioTracks.push(_track);\n          }\n        }\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    var maxBandwidth = 0;\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n      for (var _iterator3 = mostSuitableWidthAndRatioTracks[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n        var _track2 = _step3.value;\n        // select the top bitrate from the ratio filter results\n        if (_track2.bandwidth > maxBandwidth || !_track2.bandwidth) {\n          maxBandwidth = _track2.bandwidth || maxBandwidth;\n          mostSuitableWidth = _track2;\n        }\n      }\n    } catch (err) {\n      _didIteratorError3 = true;\n      _iteratorError3 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion3 && _iterator3.return) {\n          _iterator3.return();\n        }\n      } finally {\n        if (_didIteratorError3) {\n          throw _iteratorError3;\n        }\n      }\n    }\n  }\n  return mostSuitableWidth;\n}\n\nexports.getSuitableSourceForResolution = getSuitableSourceForResolution;\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _baseDrmProtocol = __webpack_require__(22);\n\nvar _baseDrmProtocol2 = _interopRequireDefault(_baseDrmProtocol);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FairPlay = function (_BaseDrmProtocol) {\n  _inherits(FairPlay, _BaseDrmProtocol);\n\n  function FairPlay() {\n    _classCallCheck(this, FairPlay);\n\n    return _possibleConstructorReturn(this, (FairPlay.__proto__ || Object.getPrototypeOf(FairPlay)).apply(this, arguments));\n  }\n\n  _createClass(FairPlay, null, [{\n    key: 'canPlayDrm',\n\n\n    /**\n     * FairPlay playback supports in case 2 conditions are met:\n     * 1. The environment supports FairPlay playback.\n     * 2. The drm data of the source object contains entry with FairPlay scheme.\n     * @param {Array<Object>} drmData - The drm data to check.\n     * @return {boolean} - Whether FairPlay can be play on the current environment.\n     */\n    value: function canPlayDrm(drmData) {\n      FairPlay._logger.debug(\"Can play DRM scheme of: \" + _baseDrmProtocol2.default.DrmScheme.FAIRPLAY);\n      return _baseDrmProtocol2.default.DrmSupport.isProtocolSupported(_baseDrmProtocol2.default.DrmScheme.FAIRPLAY, drmData);\n    }\n\n    /**\n     * Sets the FairPlay playback.\n     * @param {HTMLVideoElement} videoElement - The video element to manipulate.\n     * @param {Array<Object>} drmData - The drm data.\n     * @param {any} errorCallback - player error object\n     * @returns {void}\n     */\n\n  }, {\n    key: 'setDrmPlayback',\n    value: function setDrmPlayback(videoElement) {\n      var drmData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var errorCallback = arguments[2];\n\n      FairPlay._logger.debug(\"Sets DRM playback\");\n      videoElement.addEventListener(FairPlay._WebkitEvents.NEED_KEY, FairPlay._onWebkitNeedKey.bind(null, drmData), false);\n      FairPlay._errorCallback = errorCallback;\n    }\n  }, {\n    key: '_onWebkitNeedKey',\n    value: function _onWebkitNeedKey(drmData, event) {\n      FairPlay._logger.debug(\"Webkit need key triggered\");\n      var fpDrmData = drmData.find(function (drmEntry) {\n        return drmEntry.scheme === _baseDrmProtocol2.default.DrmScheme.FAIRPLAY;\n      });\n      if (!fpDrmData || FairPlay._keySession) {\n        return;\n      }\n      var fpCertificate = fpDrmData.certificate;\n      var videoElement = event.target;\n      var initData = event.initData;\n      var contentId = FairPlay._extractContentId(initData);\n      var aCertificate = FairPlay._base64DecodeUint8Array(fpCertificate);\n\n      initData = FairPlay._concatInitDataIdAndCertificate(initData, contentId, aCertificate);\n\n      if (!videoElement.webkitKeys) {\n        var keySystem = FairPlay._selectKeySystem();\n        FairPlay._logger.debug(\"Sets media keys\");\n        videoElement.webkitSetMediaKeys(new window.WebKitMediaKeys(keySystem));\n      }\n      if (!videoElement.webkitKeys) {\n        FairPlay._onError(_error2.default.Code.COULD_NOT_CREATE_MEDIA_KEYS);\n      }\n      FairPlay._logger.debug(\"Creates session\");\n      FairPlay._keySession = videoElement.webkitKeys.createSession('video/mp4', initData);\n      if (!FairPlay._keySession) {\n        FairPlay._onError(_error2.default.Code.COULD_NOT_CREATE_KEY_SESSION);\n      }\n      FairPlay._keySession.contentId = contentId;\n      FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_MESSAGE, FairPlay._onWebkitKeyMessage.bind(null, fpDrmData), false);\n      FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_ADDED, FairPlay._onWebkitKeyAdded, false);\n      FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_ERROR, FairPlay._onWebkitKeyError, false);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      FairPlay._keySession = null;\n    }\n  }, {\n    key: '_onWebkitKeyMessage',\n    value: function _onWebkitKeyMessage(drmData, event) {\n      FairPlay._logger.debug(\"Webkit key message triggered\");\n      var message = event.message;\n      var request = new XMLHttpRequest();\n      request.responseType = \"text\";\n      request.addEventListener(\"load\", FairPlay._licenseRequestLoaded, false);\n      request.addEventListener(\"error\", function () {\n        return FairPlay._onError(_error2.default.Code.LICENSE_REQUEST_FAILED);\n      }, false);\n      var params = FairPlay._base64EncodeUint8Array(message);\n      request.open('POST', drmData.licenseUrl, true);\n      request.setRequestHeader(\"Content-type\", \"application/json\");\n      FairPlay._logger.debug(\"Ready for license request\");\n      request.send(params);\n    }\n  }, {\n    key: '_onWebkitKeyAdded',\n    value: function _onWebkitKeyAdded() {\n      FairPlay._logger.debug(\"Decryption key was added to session\");\n    }\n  }, {\n    key: '_onWebkitKeyError',\n    value: function _onWebkitKeyError() {\n      FairPlay._logger.error(\"A decryption key error was encountered\");\n    }\n  }, {\n    key: '_licenseRequestLoaded',\n    value: function _licenseRequestLoaded(event) {\n      FairPlay._logger.debug(\"License request loaded\");\n      var request = event.target;\n      var keyText = request.responseText.trim();\n      var responseObj = {};\n      try {\n        responseObj = JSON.parse(keyText);\n      } catch (error) {\n        FairPlay._onError(_error2.default.Code.BAD_FAIRPLAY_RESPONSE, error);\n      }\n      var isValidResponse = FairPlay._validateResponse(responseObj);\n      if (isValidResponse.valid) {\n        var key = FairPlay._base64DecodeUint8Array(responseObj.ckc);\n        FairPlay._keySession.update(key);\n      } else {\n        FairPlay._onError(_error2.default.Code.BAD_FAIRPLAY_RESPONSE, isValidResponse);\n      }\n    }\n  }, {\n    key: '_onError',\n    value: function _onError(code, data) {\n      FairPlay._errorCallback(new _error2.default(_error2.default.Severity.CRITICAL, _error2.default.Category.DRM, code, data));\n    }\n  }, {\n    key: '_validateResponse',\n    value: function _validateResponse(responseObj) {\n      if (responseObj.message && responseObj.message.indexOf(\"error\") > 0 || responseObj.reference === null || responseObj.status_code === 500) {\n        return { //todo: create & edit an error object\n          valid: false,\n          details: \"internal server error\" // would be ERROR.INTERNAL or something like that\n        };\n      } else if (responseObj.ckc === \"\") {\n        return {\n          valid: false,\n          details: \"ckc is missing\" // would be ERROR.MISSING_CKC or something like that\n        };\n      } else {\n        return {\n          valid: true\n        };\n      }\n    }\n  }, {\n    key: '_extractContentId',\n    value: function _extractContentId(initData) {\n      var link = document.createElement('a');\n      link.href = FairPlay._arrayToString(initData);\n      return link.hostname;\n    }\n  }, {\n    key: '_selectKeySystem',\n    value: function _selectKeySystem() {\n      var keySystem = null;\n      if (window.WebKitMediaKeys.isTypeSupported(FairPlay._KeySystem, \"video/mp4\")) {\n        keySystem = FairPlay._KeySystem;\n      } else {\n        FairPlay._logger.warn(\"Key System not supported\");\n      }\n      return keySystem;\n    }\n  }, {\n    key: '_arrayToString',\n    value: function _arrayToString(array) {\n      return String.fromCharCode.apply(null, new Uint16Array(array.buffer));\n    }\n  }, {\n    key: '_base64DecodeUint8Array',\n    value: function _base64DecodeUint8Array(input) {\n      var raw = window.atob(input);\n      var rawLength = raw.length;\n      var array = new Uint8Array(new ArrayBuffer(rawLength));\n      for (var i = 0; i < rawLength; i++) {\n        array[i] = raw.charCodeAt(i);\n      }\n      return array;\n    }\n  }, {\n    key: '_concatInitDataIdAndCertificate',\n    value: function _concatInitDataIdAndCertificate(initData, id, cert) {\n      if (typeof id === \"string\") {\n        id = FairPlay._stringToArray(id);\n      }\n      var offset = 0;\n      var buffer = new ArrayBuffer(initData.byteLength + 4 + id.byteLength + 4 + cert.byteLength);\n      var dataView = new DataView(buffer);\n\n      var initDataArray = new Uint8Array(buffer, offset, initData.byteLength);\n      initDataArray.set(initData);\n      offset += initData.byteLength;\n\n      dataView.setUint32(offset, id.byteLength, true);\n      offset += 4;\n\n      var idArray = new Uint8Array(buffer, offset, id.byteLength);\n      idArray.set(id);\n      offset += idArray.byteLength;\n\n      dataView.setUint32(offset, cert.byteLength, true);\n      offset += 4;\n\n      var certArray = new Uint8Array(buffer, offset, cert.byteLength);\n      certArray.set(cert);\n\n      return new Uint8Array(buffer, 0, buffer.byteLength);\n    }\n  }, {\n    key: '_stringToArray',\n    value: function _stringToArray(string) {\n      var buffer = new ArrayBuffer(string.length * 2);\n      var array = new Uint16Array(buffer);\n      for (var i = 0, strLen = string.length; i < strLen; i++) {\n        array[i] = string.charCodeAt(i);\n      }\n      return array;\n    }\n  }, {\n    key: '_base64EncodeUint8Array',\n    value: function _base64EncodeUint8Array(input) {\n      var keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n      var output = \"\";\n      var chr1 = void 0,\n          chr2 = void 0,\n          chr3 = void 0,\n          enc1 = void 0,\n          enc2 = void 0,\n          enc3 = void 0,\n          enc4 = void 0;\n      var i = 0;\n      while (i < input.length) {\n        chr1 = input[i++];\n        chr2 = i < input.length ? input[i++] : Number.NaN;\n        chr3 = i < input.length ? input[i++] : Number.NaN;\n\n        enc1 = chr1 >> 2;\n        enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n        enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n        enc4 = chr3 & 63;\n\n        if (isNaN(chr2)) {\n          enc3 = enc4 = 64;\n        } else if (isNaN(chr3)) {\n          enc4 = 64;\n        }\n        output += keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);\n      }\n      return output;\n    }\n  }]);\n\n  return FairPlay;\n}(_baseDrmProtocol2.default);\n\nFairPlay._logger = _baseDrmProtocol2.default.getLogger('FairPlay');\nFairPlay._KeySystem = \"com.apple.fps.1_0\";\nFairPlay._WebkitEvents = {\n  NEED_KEY: 'webkitneedkey',\n  KEY_MESSAGE: 'webkitkeymessage',\n  KEY_ADDED: 'webkitkeyadded',\n  KEY_ERROR: 'webkitkeyerror'\n};\nexports.default = FairPlay;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _env = __webpack_require__(12);\n\nvar _env2 = _interopRequireDefault(_env);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _drmScheme = __webpack_require__(23);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NOT_SUPPORTED = 'not_supported_drm_playback';\n\nvar DrmSupport = function () {\n  function DrmSupport() {\n    _classCallCheck(this, DrmSupport);\n  }\n\n  _createClass(DrmSupport, null, [{\n    key: 'isProtocolSupported',\n\n\n    /**\n     * Checks if a certain DRM scheme is supported in the current environment.\n     * @param {string} scheme - The drm scheme.\n     * @param {Array<Object>} drmData - The drm data to check.\n     * @return {boolean} - Whether scheme can be play on the current environment.\n     */\n    value: function isProtocolSupported(scheme, drmData) {\n      var browser = _env2.default.browser.name;\n      if (typeof DrmSupport._Browsers[browser] === 'function') {\n        var drmScheme = DrmSupport._Browsers[browser]();\n        DrmSupport._logger.debug(\"Supported DRM scheme for current environment is: \" + drmScheme);\n        return drmScheme === scheme && !!drmData.find(function (drmEntry) {\n          return drmEntry.scheme === scheme;\n        });\n      }\n      return false;\n    }\n  }]);\n\n  return DrmSupport;\n}();\n\nDrmSupport._logger = (0, _logger2.default)('DrmSupport');\nDrmSupport._Browsers = {\n  Safari: function Safari() {\n    var device = _env2.default.device.type;\n    var os = _env2.default.os.name;\n    if (!device && os === 'Mac OS') {\n      return _drmScheme.DrmScheme.FAIRPLAY;\n    }\n    return NOT_SUPPORTED;\n  },\n  Chrome: function Chrome() {\n    var device = _env2.default.device.type;\n    var os = _env2.default.os.name;\n    if (!device || os === 'Android') {\n      return _drmScheme.DrmScheme.WIDEVINE;\n    }\n    return NOT_SUPPORTED;\n  },\n  Firefox: function Firefox() {\n    var device = _env2.default.device.type;\n    if (!device) {\n      return _drmScheme.DrmScheme.WIDEVINE;\n    }\n    return NOT_SUPPORTED;\n  },\n  Edge: function Edge() {\n    var device = _env2.default.device.type;\n    if (!device) {\n      return _drmScheme.DrmScheme.PLAYREADY;\n    }\n    return NOT_SUPPORTED;\n  },\n  IE: function IE() {\n    var device = _env2.default.device.type;\n    var os = _env2.default.os.name;\n    var osVersion = _env2.default.os.version;\n    if (!device && os === 'Windows' && Number.parseFloat(osVersion) >= 8.1) {\n      return _drmScheme.DrmScheme.PLAYREADY;\n    }\n    return NOT_SUPPORTED;\n  },\n  'Mobile Safari': function MobileSafari() {\n    var majorVersion = _env2.default.browser.major;\n    if (majorVersion >= 11) {\n      return _drmScheme.DrmScheme.FAIRPLAY;\n    }\n    return NOT_SUPPORTED;\n  }\n};\nexports.default = DrmSupport;\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = __webpack_require__(3);\n\nvar Utils = _interopRequireWildcard(_util);\n\nvar _encodingSources = __webpack_require__(46);\n\nvar EncodingSources = _interopRequireWildcard(_encodingSources);\n\nvar _eventType = __webpack_require__(4);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar WAIT_TIME = 500;\n\nvar testVideoElement = Utils.Dom.createElement('video');\ntestVideoElement.src = EncodingSources.Base64Mp4Source;\n// For iOS devices needs to turn the playsinline attribute on\ntestVideoElement.setAttribute('playsinline', '');\n\nvar Html5AutoPlayCapability = function () {\n  function Html5AutoPlayCapability() {\n    _classCallCheck(this, Html5AutoPlayCapability);\n  }\n\n  _createClass(Html5AutoPlayCapability, null, [{\n    key: 'runCapability',\n\n\n    /**\n     * Runs the test for autoplay capability.\n     * @public\n     * @static\n     * @returns {void}\n     */\n    value: function runCapability() {\n      Html5AutoPlayCapability._playPromiseResult = new Promise(function (resolve) {\n        Html5AutoPlayCapability._setMuted(false);\n        if (Html5AutoPlayCapability._isDataSaverMode()) {\n          resolve({ autoplay: false, mutedAutoPlay: false });\n        } else {\n          Html5AutoPlayCapability._getPlayPromise().then(function () {\n            return resolve({ autoplay: true, mutedAutoPlay: true });\n          }).catch(function () {\n            Html5AutoPlayCapability._setMuted(true);\n            Html5AutoPlayCapability._getPlayPromise().then(function () {\n              return resolve({ autoplay: false, mutedAutoPlay: true });\n            }).catch(function () {\n              return resolve({ autoplay: false, mutedAutoPlay: false });\n            });\n          });\n        }\n      });\n    }\n\n    /**\n     * Gets the test result for autoplay capability.\n     * @returns {Promise<CapabilityResult>} - The result object for autoplay capability.\n     * @static\n     * @public\n     */\n\n  }, {\n    key: 'getCapability',\n    value: function getCapability() {\n      return Html5AutoPlayCapability._playPromiseResult.then(function (res) {\n        // If autoplay is not allowed - try again and return the updated result\n        if (!res.autoplay) {\n          Html5AutoPlayCapability.runCapability();\n          return Html5AutoPlayCapability._playPromiseResult;\n        }\n        return res;\n      });\n    }\n\n    /**\n     * Checks if the device is in data saver mode.\n     * @returns {boolean} - If the device is in data saver mode.\n     * @private\n     */\n\n  }, {\n    key: '_isDataSaverMode',\n    value: function _isDataSaverMode() {\n      if (\"connection\" in navigator) {\n        // $FlowFixMe\n        return navigator.connection.saveData === true;\n      }\n      return false;\n    }\n\n    /**\n     * Gets the play promise.\n     * @return {Promise<*>} - Play promise which resolved or rejected.\n     * @private\n     */\n\n  }, {\n    key: '_getPlayPromise',\n    value: function _getPlayPromise() {\n      return testVideoElement.play() || Html5AutoPlayCapability._forcePromiseReturnValue();\n    }\n\n    /**\n     * Sets the test video element muted value.\n     * @param {boolean} muted - The muted value.\n     * @private\n     * @returns {void}\n     * @static\n     */\n\n  }, {\n    key: '_setMuted',\n    value: function _setMuted(muted) {\n      if (muted) {\n        testVideoElement.muted = true;\n        testVideoElement.setAttribute('muted', '');\n      } else {\n        testVideoElement.muted = false;\n        testVideoElement.removeAttribute('muted');\n      }\n    }\n\n    /**\n     * For browsers which are not supported promise return value from play()\n     * request we are simulate the same behaviour.\n     * @return {Promise<*>} - Play promise which resolved or rejected.\n     * @private\n     * @static\n     */\n\n  }, {\n    key: '_forcePromiseReturnValue',\n    value: function _forcePromiseReturnValue() {\n      return new Promise(function (resolve, reject) {\n        var supported = setTimeout(function () {\n          reject();\n        }, WAIT_TIME);\n        testVideoElement.addEventListener(_eventType.Html5EventType.PLAYING, function () {\n          clearTimeout(supported);\n          resolve();\n        });\n        testVideoElement.addEventListener(_eventType.Html5EventType.ERROR, function () {\n          clearTimeout(supported);\n          reject();\n        });\n      });\n    }\n  }]);\n\n  return Html5AutoPlayCapability;\n}();\n\nexports.default = Html5AutoPlayCapability;\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t\"Base64Mp4Source\": \"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=\"\n};\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = __webpack_require__(3);\n\nvar Utils = _interopRequireWildcard(_util);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Html5IsSupportedCapability = function () {\n  function Html5IsSupportedCapability() {\n    _classCallCheck(this, Html5IsSupportedCapability);\n  }\n\n  _createClass(Html5IsSupportedCapability, null, [{\n    key: 'runCapability',\n\n\n    /***\n     * Runs the test for isSupported capability.\n     * @public\n     * @static\n     * @returns {void}\n     */\n    value: function runCapability() {\n      try {\n        Html5IsSupportedCapability._vid.volume = 0.5;\n        Html5IsSupportedCapability._result = !!Html5IsSupportedCapability._vid.canPlayType;\n      } catch (e) {\n        Html5IsSupportedCapability._result = false;\n      }\n    }\n\n    /**\n     * Gets the test result for isSupported capability.\n     * @returns {Promise<CapabilityResult>} - The result object for isSupported capability.\n     * @static\n     * @public\n     */\n\n  }, {\n    key: 'getCapability',\n    value: function getCapability() {\n      return Promise.resolve({ isSupported: Html5IsSupportedCapability._result });\n    }\n  }]);\n\n  return Html5IsSupportedCapability;\n}();\n\nHtml5IsSupportedCapability._vid = Utils.Dom.createElement('video');\nexports.default = Html5IsSupportedCapability;\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = __webpack_require__(8);\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _eventManager = __webpack_require__(6);\n\nvar _eventManager2 = _interopRequireDefault(_eventManager);\n\nvar _state = __webpack_require__(49);\n\nvar _state2 = _interopRequireDefault(_state);\n\nvar _stateType = __webpack_require__(18);\n\nvar _eventType = __webpack_require__(4);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * This class responsible to manage all the state machine of the player.\n * @classdesc\n */\nvar StateManager = function () {\n\n  /**\n   * @constructor\n   * @param {Player} player - Reference to the player.\n   */\n\n  /**\n   * Holds the state history of the player.\n   * @member\n   * @type {Array<State>}\n   * @private\n   */\n\n  /**\n   * Holds the previous state of the player.\n   * @member\n   * @type {State | null}\n   * @private\n   */\n\n  /**\n   * The event manager of the class.\n   * @member\n   * @type {EventManager}\n   * @private\n   */\n\n  /**\n   * The logger of the class.\n   * @member\n   * @type {any}\n   * @private\n   */\n  function StateManager(player) {\n    var _this = this,\n        _StateType$IDLE,\n        _StateType$LOADING,\n        _StateType$PAUSED,\n        _StateType$PLAYING,\n        _StateType$BUFFERING,\n        _transitions;\n\n    _classCallCheck(this, StateManager);\n\n    this._transitions = (_transitions = {}, _defineProperty(_transitions, _stateType.StateType.IDLE, (_StateType$IDLE = {}, _defineProperty(_StateType$IDLE, _eventType.Html5EventType.LOAD_START, function () {\n      _this._updateState(_stateType.StateType.LOADING);\n      _this._dispatchEvent();\n    }), _defineProperty(_StateType$IDLE, _eventType.Html5EventType.PLAY, function () {\n      _this._updateState(_stateType.StateType.BUFFERING);\n      _this._dispatchEvent();\n    }), _StateType$IDLE)), _defineProperty(_transitions, _stateType.StateType.LOADING, (_StateType$LOADING = {}, _defineProperty(_StateType$LOADING, _eventType.Html5EventType.LOADED_METADATA, function () {\n      _this._updateState(_stateType.StateType.PAUSED);\n      _this._dispatchEvent();\n    }), _defineProperty(_StateType$LOADING, _eventType.Html5EventType.ERROR, function () {\n      _this._updateState(_stateType.StateType.IDLE);\n      _this._dispatchEvent();\n    }), _StateType$LOADING)), _defineProperty(_transitions, _stateType.StateType.PAUSED, (_StateType$PAUSED = {}, _defineProperty(_StateType$PAUSED, _eventType.Html5EventType.PLAY, function () {\n      _this._updateState(_stateType.StateType.PLAYING);\n      _this._dispatchEvent();\n    }), _defineProperty(_StateType$PAUSED, _eventType.Html5EventType.PLAYING, function () {\n      _this._updateState(_stateType.StateType.PLAYING);\n      _this._dispatchEvent();\n    }), _defineProperty(_StateType$PAUSED, _eventType.Html5EventType.ENDED, function () {\n      _this._updateState(_stateType.StateType.IDLE);\n      _this._dispatchEvent();\n    }), _StateType$PAUSED)), _defineProperty(_transitions, _stateType.StateType.PLAYING, (_StateType$PLAYING = {}, _defineProperty(_StateType$PLAYING, _eventType.Html5EventType.PAUSE, function () {\n      _this._updateState(_stateType.StateType.PAUSED);\n      _this._dispatchEvent();\n    }), _defineProperty(_StateType$PLAYING, _eventType.Html5EventType.WAITING, function () {\n      _this._updateState(_stateType.StateType.BUFFERING);\n      _this._lastWaitingTime = _this._player.currentTime;\n      _this._dispatchEvent();\n    }), _defineProperty(_StateType$PLAYING, _eventType.Html5EventType.ENDED, function () {\n      _this._updateState(_stateType.StateType.IDLE);\n      _this._dispatchEvent();\n    }), _defineProperty(_StateType$PLAYING, _eventType.Html5EventType.ERROR, function () {\n      _this._updateState(_stateType.StateType.IDLE);\n      _this._dispatchEvent();\n    }), _StateType$PLAYING)), _defineProperty(_transitions, _stateType.StateType.BUFFERING, (_StateType$BUFFERING = {}, _defineProperty(_StateType$BUFFERING, _eventType.Html5EventType.PLAYING, function () {\n      _this._updateState(_stateType.StateType.PLAYING);\n      _this._dispatchEvent();\n    }), _defineProperty(_StateType$BUFFERING, _eventType.Html5EventType.PAUSE, function () {\n      _this._updateState(_stateType.StateType.PAUSED);\n      _this._dispatchEvent();\n    }), _defineProperty(_StateType$BUFFERING, _eventType.Html5EventType.SEEKED, function () {\n      if (_this._prevState && _this._prevState.type === _stateType.StateType.PLAYING) {\n        _this._updateState(_stateType.StateType.PLAYING);\n        _this._dispatchEvent();\n      }\n    }), _defineProperty(_StateType$BUFFERING, _eventType.Html5EventType.TIME_UPDATE, function () {\n      if (_this._player.currentTime !== _this._lastWaitingTime && _this._prevState && _this._prevState.type === _stateType.StateType.PLAYING) {\n        _this._lastWaitingTime = null;\n        _this._updateState(_stateType.StateType.PLAYING);\n        _this._dispatchEvent();\n      }\n    }), _StateType$BUFFERING)), _transitions);\n\n    this._player = player;\n    this._logger = (0, _logger2.default)(\"StateManager\");\n    this._eventManager = new _eventManager2.default();\n    this._history = [];\n    this._prevState = null;\n    this._curState = new _state2.default(_stateType.StateType.IDLE);\n    this._attachListeners();\n  }\n\n  /**\n   * Register to all necessary events which impacts on the player state.\n   * @private\n   * @returns {void}\n   */\n\n  /**\n   * The possible transitions from one state to another.\n   * @type {Array<Transition>}\n   * @private\n   */\n\n  /**\n   * Holds the time of the beginning of the last buffering (waiting event)\n   * @member\n   * @type {number | null}\n   * @private\n   */\n\n  /**\n   * Holds the current state of the player.\n   * @member\n   * @type {State}\n   * @private\n   */\n\n  /**\n   * Reference to the actual player.\n   * @member\n   * @type {Player}\n   * @private\n   */\n\n\n  _createClass(StateManager, [{\n    key: '_attachListeners',\n    value: function _attachListeners() {\n      this._eventManager.listen(this._player, _eventType.Html5EventType.ERROR, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _eventType.Html5EventType.ENDED, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _eventType.Html5EventType.PLAY, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _eventType.Html5EventType.LOAD_START, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _eventType.Html5EventType.PLAYING, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _eventType.Html5EventType.LOADED_METADATA, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _eventType.Html5EventType.PAUSE, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _eventType.Html5EventType.WAITING, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _eventType.Html5EventType.SEEKED, this._doTransition.bind(this));\n      this._eventManager.listen(this._player, _eventType.Html5EventType.TIME_UPDATE, this._doTransition.bind(this));\n    }\n\n    /**\n     * Performs a state transition depends on the event which occurs in the player system.\n     * @param {FakeEvent} event - The event occurs in the player system.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_doTransition',\n    value: function _doTransition(event) {\n      if (event.type !== _eventType.Html5EventType.TIME_UPDATE || this._curState === _stateType.StateType.BUFFERING && event.type === _eventType.Html5EventType.TIME_UPDATE) {\n        this._logger.debug('Do transition request', event.type); // don't show most of 'timeupdate' events\n      }\n      var transition = this._transitions[this._curState.type];\n      if (typeof transition[event.type] === 'function') {\n        transition[event.type]();\n      }\n    }\n\n    /**\n     * Updates the player's state.\n     * @param {string} type - The type of the new state.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_updateState',\n    value: function _updateState(type) {\n      if (this._curState.type !== type) {\n        this._curState.duration = Date.now() / 1000;\n        this._history.push(this._curState);\n        this._prevState = this._curState;\n        this._curState = new _state2.default(type);\n        this._logger.debug('Switch player state: from ' + this._prevState.type + ' to ' + this._curState.type);\n      }\n    }\n\n    /**\n     * Fires the playerStateChanged event after state has been changed.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_dispatchEvent',\n    value: function _dispatchEvent() {\n      var event = new _fakeEvent2.default(_eventType.CustomEventType.PLAYER_STATE_CHANGED, {\n        'oldState': this._prevState,\n        'newState': this._curState\n      });\n      this._player.dispatchEvent(event);\n    }\n\n    /**\n     * Destroys the state manager.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._history = [];\n      this._eventManager.destroy();\n    }\n\n    /**\n     * Resets the state manager.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this._history = [];\n    }\n\n    /**\n     * Getter to the current state of the player.\n     * @public\n     * @returns {State} - The current state object\n     */\n\n  }, {\n    key: 'currentState',\n    get: function get() {\n      return this._curState;\n    }\n\n    /**\n     * Getter to the previous state of the player.\n     * @public\n     * @returns {State|null} - The previous state object, or null if such doesn't exists\n     */\n\n  }, {\n    key: 'previousState',\n    get: function get() {\n      return this._prevState;\n    }\n\n    /**\n     * Getter to the state history of the player.\n     * @public\n     * @returns {Array.<State>} - The full states history objects\n     */\n\n  }, {\n    key: 'history',\n    get: function get() {\n      return this._history;\n    }\n  }]);\n\n  return StateManager;\n}();\n\nexports.default = StateManager;\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * This class describes a player state.\n * @classdesc\n */\nvar State = function () {\n\n  /**\n   * @constructor\n   * @param {string} type - The type of the state.\n   */\n\n  /**\n   * The duration that the player was in this state.\n   * @member\n   * @type {number}\n   * @private\n   */\n  function State(type) {\n    _classCallCheck(this, State);\n\n    this.type = type;\n    this._duration = 0;\n    this._timestamp = Date.now() / 1000;\n  }\n\n  /**\n   * Getter for the duration of the state.\n   * @returns {number} - The duration of the state\n   */\n\n  /**\n   * The timestamp that this state started.\n   * @member\n   * @type {number}\n   * @private\n   */\n\n  /**\n   * The type of the state.\n   * Can be one of those describes in states.js\n   * @member\n   * @type {string}\n   * @public\n   */\n\n\n  _createClass(State, [{\n    key: \"duration\",\n    get: function get() {\n      return this._duration;\n    }\n\n    /**\n     * Setter for the duration of the state.\n     * @param {number} endTime - The timestamp of the next state.\n     */\n    ,\n    set: function set(endTime) {\n      this._duration = endTime - this._timestamp;\n    }\n  }]);\n\n  return State;\n}();\n\nexports.default = State;\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LabelToTrackMap = undefined;\n\nvar _LabelToTrackMap;\n\nvar _trackType = __webpack_require__(13);\n\nvar _labelOptions = __webpack_require__(51);\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar LabelToTrackMap = (_LabelToTrackMap = {}, _defineProperty(_LabelToTrackMap, _labelOptions.LabelOptions.AUDIO, _trackType.TrackType.AUDIO), _defineProperty(_LabelToTrackMap, _labelOptions.LabelOptions.CAPTIONS, _trackType.TrackType.TEXT), _defineProperty(_LabelToTrackMap, _labelOptions.LabelOptions.QUALITIES, _trackType.TrackType.VIDEO), _LabelToTrackMap);\n\nexports.LabelToTrackMap = LabelToTrackMap;\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar LabelOptions = {\n  AUDIO: 'audio',\n  CAPTIONS: 'captions',\n  QUALITIES: 'qualities'\n};\n\nexports.LabelOptions = LabelOptions;\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _middleware = __webpack_require__(53);\n\nvar _middleware2 = _interopRequireDefault(_middleware);\n\nvar _baseMiddleware = __webpack_require__(19);\n\nvar _baseMiddleware2 = _interopRequireDefault(_baseMiddleware);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * The playback middleware.\n */\nvar PlaybackMiddleware = function () {\n\n  /**\n   * @constructor\n   */\n\n  /**\n   * The middleware implementation.\n   * @private\n   * @member\n   */\n  function PlaybackMiddleware() {\n    _classCallCheck(this, PlaybackMiddleware);\n\n    this._middleware = new _middleware2.default(PlaybackMiddleware.Actions);\n  }\n\n  /**\n   * Registers a playback middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n\n  /**\n   * The actions of the playback middleware.\n   * @static\n   */\n\n\n  _createClass(PlaybackMiddleware, [{\n    key: 'use',\n    value: function use(middlewareInstance) {\n      this._middleware.use(middlewareInstance);\n    }\n\n    /**\n     * Runs a play chain.\n     * @param {Function} callback - The last play handler in the chain.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'play',\n    value: function play(callback) {\n      this._middleware.run(PlaybackMiddleware.Actions.PLAY, callback);\n    }\n\n    /**\n     * Runs a pause chain.\n     * @param {Function} callback - The last pause handler in the chain.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'pause',\n    value: function pause(callback) {\n      this._middleware.run(PlaybackMiddleware.Actions.PAUSE, callback);\n    }\n  }]);\n\n  return PlaybackMiddleware;\n}();\n\nPlaybackMiddleware.Actions = {\n  PLAY: 'play',\n  PAUSE: 'pause'\n};\nexports.default = PlaybackMiddleware;\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _multiMap = __webpack_require__(14);\n\nvar _multiMap2 = _interopRequireDefault(_multiMap);\n\nvar _baseMiddleware = __webpack_require__(19);\n\nvar _baseMiddleware2 = _interopRequireDefault(_baseMiddleware);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Generic middleware implementation.\n */\nvar Middleware = function () {\n\n  /**\n   * @constructor\n   * @param {Object} actions - The actions for the middleware.\n   */\n\n  /**\n   * The actions supported by the middleware.\n   * @private\n   * @member\n   */\n  function Middleware(actions) {\n    _classCallCheck(this, Middleware);\n\n    this._actions = actions;\n    this._middlewares = new _multiMap2.default();\n    this._logger = (0, _logger2.default)(\"Middleware\");\n  }\n\n  /**\n   * Registers a middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n\n  /**\n   * The logger of the middleware.\n   * @private\n   * @member\n   */\n\n  /**\n   * The registered middlewares.\n   * @private\n   * @member\n   */\n\n\n  _createClass(Middleware, [{\n    key: 'use',\n    value: function use(middlewareInstance) {\n      for (var _action in this._actions) {\n        var apiAction = this._actions[_action];\n        // $FlowFixMe\n        if (typeof middlewareInstance[apiAction] === 'function') {\n          this._logger.debug('Register <' + middlewareInstance.id + '> for action ' + apiAction);\n          // $FlowFixMe\n          this._middlewares.push(apiAction, middlewareInstance[apiAction].bind(middlewareInstance));\n        }\n      }\n    }\n\n    /**\n     * Runs a middleware chain for a specific action.\n     * @param {string} action - The action to run.\n     * @param {Function} callback - The callback function.\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'run',\n    value: function run(action, callback) {\n      var _this = this;\n\n      this._logger.debug(\"Start middleware chain for action \" + action);\n      var middlewares = this._middlewares.get(action);\n      this._executeMiddleware(middlewares, function () {\n        _this._logger.debug(\"Finish middleware chain for action \" + action);\n        callback();\n      });\n    }\n\n    /**\n     * Executes all the middlewares one by one.\n     * @param {Array<Function>} middlewares - The middlewares for a specific action.\n     * @param {Function} callback - The callback function.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_executeMiddleware',\n    value: function _executeMiddleware(middlewares, callback) {\n      // eslint-disable-next-line no-unused-vars\n      var composition = middlewares.reduceRight(function (next, fn) {\n        return function (v) {\n          fn(next);\n        };\n      }, callback);\n      composition();\n    }\n  }]);\n\n  return Middleware;\n}();\n\nexports.default = Middleware;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t\"logLevel\": \"ERROR\",\n\t\"sources\": {\n\t\t\"options\": {\n\t\t\t\"forceRedirectExternalStreams\": false\n\t\t},\n\t\t\"metadata\": {}\n\t},\n\t\"plugins\": {},\n\t\"playback\": {\n\t\t\"audioLanguage\": \"\",\n\t\t\"textLanguage\": \"\",\n\t\t\"useNativeTextTrack\": false,\n\t\t\"volume\": 1,\n\t\t\"startTime\": -1,\n\t\t\"playsinline\": true,\n\t\t\"preload\": \"none\",\n\t\t\"autoplay\": false,\n\t\t\"allowMutedAutoPlay\": true,\n\t\t\"muted\": false,\n\t\t\"options\": {\n\t\t\t\"html5\": {\n\t\t\t\t\"hls\": {},\n\t\t\t\t\"dash\": {}\n\t\t\t}\n\t\t},\n\t\t\"preferNative\": {\n\t\t\t\"hls\": false,\n\t\t\t\"dash\": false\n\t\t},\n\t\t\"streamPriority\": [\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"hls\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"dash\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"progressive\"\n\t\t\t}\n\t\t]\n\t}\n};\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(56);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(58)(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./style.css\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(57)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".playkit-container {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  color: #fff;\\n  outline: none;\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  -webkit-tap-highlight-color: transparent;\\n}\\n\\n.playkit-engine {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  object-fit: contain;\\n}\\n\\n.playkit-engine video::-webkit-media-controls-panel,\\n.playkit-engine video::-webkit-media-controls-panel-container,\\n.playkit-engine video::-webkit-media-controls-start-playback-button,\\n.playkit-engine video::-webkit-media-controls-play-button {\\n  display: none;\\n  -webkit-appearance: none\\n}\\n\\n.playkit-poster {\\n  position: absolute;\\n  display: block;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background-size: contain;\\n  background-position: center center;\\n  background-repeat: no-repeat;\\n  background-color: #000;\\n}\\n\\n.playkit-subtitles {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  right: 0;\\n  left: 0;\\n}\\n\\n.playkit-black-cover {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  background-color: black;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(59);\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports) {\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExternalCaptionsHandler = exports.ExternalCaptionsEventType = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nvar _util = __webpack_require__(3);\n\nvar Utils = _interopRequireWildcard(_util);\n\nvar _textTrackDisplay = __webpack_require__(16);\n\nvar _trackType = __webpack_require__(13);\n\nvar _textTrack = __webpack_require__(7);\n\nvar _textTrack2 = _interopRequireDefault(_textTrack);\n\nvar _track = __webpack_require__(5);\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _eventType = __webpack_require__(4);\n\nvar _fakeEvent = __webpack_require__(2);\n\nvar _fakeEvent2 = _interopRequireDefault(_fakeEvent);\n\nvar _logger = __webpack_require__(0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _eventManager = __webpack_require__(6);\n\nvar _eventManager2 = _interopRequireDefault(_eventManager);\n\nvar _fakeEventTarget = __webpack_require__(9);\n\nvar _fakeEventTarget2 = _interopRequireDefault(_fakeEventTarget);\n\nvar _vttCue = __webpack_require__(15);\n\nvar _player = __webpack_require__(8);\n\nvar _player2 = _interopRequireDefault(_player);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * enum for cues statuses\n * @const\n * @type {Object}\n */\nvar CuesStatus = {\n  'NOT_DOWNLOADED': 1,\n  'DOWNLOADING': 2,\n  'DOWNLOADED': 3\n};\n\nvar SRT_POSTFIX = 'srt';\n\nvar VTT_POSTFIX = 'vtt';\n\nvar ExternalCaptionsEventType = exports.ExternalCaptionsEventType = {\n  NATIVE_TEXT_TRACK_ADDED: 'nativetexttrackadded'\n};\n\nvar ExternalCaptionsHandler = function (_FakeEventTarget) {\n  _inherits(ExternalCaptionsHandler, _FakeEventTarget);\n\n  /**\n   * constructor\n   * @param {Player} player - the player object.\n   */\n\n  /**\n   * indicates if a current external (non native) track is active or not.\n   * @type {boolean}\n   * @private\n   */\n\n  /**\n   * a map that holds the current cues that are in process. process may be in download or that the cues are being parsed.\n   * @type {Object}\n   * @private\n   */\n\n  /**\n   * the player object.\n   * @type {Player}\n   * @private\n   */\n\n  /**\n   * event manager for the external caption handler\n   * @type {EventManager}\n   * @private\n   */\n\n  /**\n   * The external captions handler class logger.\n   * @type {any}\n   * @static\n   * @private\n   */\n  function ExternalCaptionsHandler(player) {\n    _classCallCheck(this, ExternalCaptionsHandler);\n\n    var _this = _possibleConstructorReturn(this, (ExternalCaptionsHandler.__proto__ || Object.getPrototypeOf(ExternalCaptionsHandler)).call(this));\n\n    _this._externalCueIndex = 0;\n    _this._textTrackModel = {};\n    _this._activeTextCues = [];\n    _this._isTextTrackActive = false;\n    _this._lastTimeUpdate = 0;\n\n    _this._player = player;\n    _this._eventManager = new _eventManager2.default();\n    return _this;\n  }\n\n  /**\n   * selects external track start listening to cues\n   * @returns {void}\n   * @public\n   */\n\n  /**\n   * indicates the last player time in the last time update event.\n   * @type {number}\n   * @private\n   */\n\n  /**\n   * array of the active text cues of current track\n   * @type {Array<Cue>}\n   * @private\n   */\n\n  /**\n   * Index that specifies the last cue that is playing / played in the text track cue array.\n   * @type {number}\n   * @private\n   */\n\n\n  _createClass(ExternalCaptionsHandler, [{\n    key: 'hideTextTrack',\n    value: function hideTextTrack() {\n      // only if external text track was active we need to hide it.\n      if (this._isTextTrackActive) {\n        this._eventManager.unlisten(this._player, _eventType.Html5EventType.TIME_UPDATE);\n        this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.TEXT_CUE_CHANGED, { cues: [] }));\n        this._activeTextCues = [];\n      }\n    }\n\n    /**\n     * get external tracks (native and/or player module tracks)\n     * @returns {Array<TextTrack>} returns an array with the new external tracks\n     * @param {Array<Track>} tracks array with the player text tracks.\n     * @public\n     */\n\n  }, {\n    key: 'getExternalTracks',\n    value: function getExternalTracks(tracks) {\n      var _this2 = this;\n\n      var captions = this._player.config.sources.captions;\n      if (!captions) {\n        return [];\n      }\n      this._eventManager.listen(this._player, this._player.Event.SEEKED, function (e) {\n        return _this2._maybeSetExternalCueIndex(e);\n      });\n      var textTracks = tracks.filter(function (track) {\n        return track instanceof _textTrack2.default;\n      });\n      var textTracksLength = textTracks.length || 0;\n      var newTextTracks = [];\n      captions.forEach(function (caption) {\n        var track = new _textTrack2.default({\n          active: false,\n          index: textTracksLength++,\n          kind: \"subtitles\",\n          label: caption.label,\n          language: caption.language,\n          external: true\n        });\n        var sameLangTrack = textTracks.find(function (textTrack) {\n          return caption.language === textTrack.language;\n        });\n        _this2._textTrackModel[caption.language] = {\n          cuesStatus: CuesStatus.NOT_DOWNLOADED,\n          cues: [],\n          url: caption.url,\n          type: caption.type\n        };\n        if (!sameLangTrack) {\n          if (_this2._player.config.playback.useNativeTextTrack) {\n            _this2._addNativeTextTrack(track);\n          }\n          newTextTracks.push(track);\n        } else {\n          ExternalCaptionsHandler._logger.warn('duplicated language, taking the inbend option. Language: ', sameLangTrack.language);\n        }\n      });\n      return newTextTracks;\n    }\n\n    /**\n     * selects external track start listening to cues\n     * @param {TextTrack} textTrack - selected text track\n     * @returns {void}\n     * @public\n     */\n\n  }, {\n    key: 'selectTextTrack',\n    value: function selectTextTrack(textTrack) {\n      var _this3 = this;\n\n      if (this._textTrackModel[textTrack.language]) {\n        if (this._textTrackModel[textTrack.language].cuesStatus === CuesStatus.DOWNLOADED && !this._player.config.playback.useNativeTextTrack) {\n          textTrack.active = true;\n          this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.TEXT_TRACK_CHANGED, { selectedTextTrack: textTrack }));\n          this._setTextTrack(textTrack);\n        } else if (this._textTrackModel[textTrack.language].cuesStatus === CuesStatus.NOT_DOWNLOADED) {\n          textTrack.active = true;\n          if (!this._player.config.playback.useNativeTextTrack) {\n            this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.TEXT_TRACK_CHANGED, { selectedTextTrack: textTrack }));\n          }\n          this._downloadAndParseCues(textTrack).then(function () {\n            _this3._textTrackModel[textTrack.language].cuesStatus = CuesStatus.DOWNLOADED;\n            if (_this3._player.config.playback.useNativeTextTrack) {\n              _this3._addCuesToNativeTextTrack(textTrack, _this3._textTrackModel[textTrack.language].cues);\n            } else {\n              _this3._setTextTrack(textTrack);\n            }\n          });\n        }\n      }\n    }\n\n    /**\n     * resets the handler\n     * @returns {void}\n     */\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this._textTrackModel = {};\n      this._activeTextCues = [];\n      this._eventManager.removeAll();\n    }\n\n    /**\n     * destroy function\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._textTrackModel = {};\n      this._eventManager.destroy();\n      this._activeTextCues = [];\n    }\n\n    /**\n     * Make a request to download a caption and parse it's content to cues.\n     * @param {TextTrack} textTrack - download and parse the cues of the text track\n     * @returns {Promise<any>} - resolves when the request returns and the caption string is parsed to cues.\n     * @private\n     */\n\n  }, {\n    key: '_getCuesString',\n    value: function _getCuesString(textTrack) {\n      var _this4 = this;\n\n      return new Promise(function (resolve, reject) {\n        var track = _this4._textTrackModel[textTrack.language];\n        var captionType = track.type || _this4._getFileType(track.url);\n        if (![SRT_POSTFIX, VTT_POSTFIX].includes(captionType)) {\n          reject(new _error2.default(_error2.default.Severity.RECOVERABLE, _error2.default.Category.TEXT, _error2.default.Code.UNKOWN_FILE_TYPE, { captionType: captionType }));\n        }\n        Utils.Http.execute(track.url, {}, 'GET').then(function (response) {\n          resolve(captionType === SRT_POSTFIX ? _this4._convertSrtToVtt(response) : response);\n        }).catch(function (error) {\n          reject(new _error2.default(_error2.default.Severity.RECOVERABLE, _error2.default.Category.TEXT, _error2.default.Code.HTTP_ERROR, error.payload));\n        });\n      });\n    }\n\n    /**\n     * this calls the VTTCue parser and parse the .vtt captions string into vttCues objects\n     * @param {string} vttStr - a string in a .vtt format to parse into VTTCues\n     * @returns {Promise<*>} - parsed cues array\n     * @private\n     */\n\n  }, {\n    key: '_parseCues',\n    value: function _parseCues(vttStr) {\n      return new Promise(function (resolve, reject) {\n        var parser = new _textTrackDisplay.Parser(window, (0, _textTrackDisplay.StringDecoder)());\n        var cues = [];\n        parser.oncue = function (cue) {\n          return cues.push(cue);\n        };\n        parser.onflush = function () {\n          ExternalCaptionsHandler._logger.debug('finished parsing external cues');\n          resolve(cues);\n        };\n        parser.parse(vttStr);\n        parser.flush();\n        parser.onparsingerror(function (e) {\n          return reject(e);\n        });\n      });\n    }\n\n    /**\n     * converts a .SRT string into .VTT string\n     * @param {string} str - a string in a .SRT format\n     * @returns {string} - a string in a .VTT format\n     * @private\n     */\n\n  }, {\n    key: '_convertSrtToVtt',\n    value: function _convertSrtToVtt(str) {\n      return str.replace(/(\\d\\d:\\d\\d:\\d\\d).(\\d\\d\\d) --> (\\d\\d:\\d\\d:\\d\\d).(\\d\\d\\d)/g, function (match, part1, part2, part3, part4) {\n        return part1 + ',' + part2 + ' --> ' + part3 + ',' + part4;\n      });\n    }\n\n    /**\n     * resolves with a caption object that contains all the caption data\n     * start the parsing, creation and addition of the external captions.\n     * @param {TextTrack} textTrack - create a single caption. when the process ends, this._textTrackModel is updated with\n     * DOWNLOADED status\n     * @returns {Promise<any>} - a promise that the action ended\n     * @private\n     */\n\n  }, {\n    key: '_downloadAndParseCues',\n    value: function _downloadAndParseCues(textTrack) {\n      var _this5 = this;\n\n      this._textTrackModel[textTrack.language].cuesStatus = CuesStatus.DOWNLOADING;\n      return new Promise(function (resolve) {\n        _this5._getCuesString(textTrack).then(function (vttString) {\n          return _this5._parseCues(vttString);\n        }).then(function (cuesArray) {\n          _this5._textTrackModel[textTrack.language].cues = cuesArray;\n          resolve();\n        });\n      });\n    }\n\n    /**\n     * getting the file extension\n     * @param {string} url - the url of the file\n     * @returns {string} type of the file\n     * @private\n     */\n\n  }, {\n    key: '_getFileType',\n    value: function _getFileType(url) {\n      return url.split(/[#?]/)[0].split('.').pop().trim();\n    }\n\n    /**\n     * callback for the 'timeupdate' event. on each time update this runs and checks if the active text cues array\n     * was changed.\n     * @param {TextTrack} track - the text track that that is currently displayed (active)\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_handleCaptionOnTimeUpdate',\n    value: function _handleCaptionOnTimeUpdate(track) {\n      var currentTime = this._player.currentTime;\n      if (currentTime) {\n        if (this._activeTextCues.length > 0 && currentTime < this._activeTextCues[this._activeTextCues.length - 1].startTime) {\n          this._activeTextCues = [];\n          this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.TEXT_CUE_CHANGED, { cues: [] }));\n        } else {\n          if (Math.abs(currentTime - this._lastTimeUpdate) > 1) {\n            this._maybeSetExternalCueIndex();\n          }\n          var cues = this._textTrackModel[track.language].cues;\n          var activeCuesChanged = false;\n          for (var activeTextCuesIndex = 0; activeTextCuesIndex < this._activeTextCues.length; activeTextCuesIndex++) {\n            var cue = this._activeTextCues[activeTextCuesIndex];\n            if (currentTime < cue.startTime || cue.endTime < currentTime) {\n              this._activeTextCues.splice(activeTextCuesIndex, 1);\n              activeCuesChanged = true;\n            }\n          }\n          while (this._externalCueIndex < cues.length && currentTime > cues[this._externalCueIndex].startTime) {\n            this._activeTextCues.push(cues[this._externalCueIndex]);\n            this._externalCueIndex++;\n            activeCuesChanged = true;\n          }\n          if (activeCuesChanged) {\n            this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.TEXT_CUE_CHANGED, { cues: this._activeTextCues }));\n          }\n        }\n        // sometimes the timeupdate event is fired before the seeked event - so we need to know the user seeked.\n        this._lastTimeUpdate = currentTime;\n      }\n    }\n\n    /**\n     * updating the index of the text cues to the right location after a user seeked.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_maybeSetExternalCueIndex',\n    value: function _maybeSetExternalCueIndex() {\n      var textTrack = this._player.getTracks(_trackType.TrackType.TEXT).find(function (track) {\n        return track instanceof _textTrack2.default && track.active && track.external;\n      });\n      if (textTrack && textTrack.external) {\n        var cues = this._textTrackModel[textTrack.language].cues;\n        var i = 0;\n        while (this._player.currentTime > cues[i].startTime && i < cues.length) {\n          i++;\n        }\n        this._externalCueIndex = i;\n      }\n    }\n\n    /**\n     * adding cues to an existing text element in a video tag\n     * @param {TextTrack} textTrack - adding cues to an exiting text track element\n     * @param {Array<Cue>} cues - the cues to be added\n     * @return {void}\n     */\n\n  }, {\n    key: '_addCuesToNativeTextTrack',\n    value: function _addCuesToNativeTextTrack(textTrack, cues) {\n      var videoElement = this._player.getVideoElement();\n      if (videoElement) {\n        var track = Array.from(videoElement.textTracks).find(function (track) {\n          return track ? track.language === textTrack.language : false;\n        });\n        if (track) {\n          cues.forEach(function (cue) {\n            return track.addCue(cue);\n          });\n        }\n      }\n    }\n\n    /**\n     * adds a new text track element to the video element or set an existing one\n     * (when adding a text track with existing language to the video element it will remove all its cues)\n     * @param {TextTrack} textTrack - the playkit text track object to be added\n     * @returns {void}\n     */\n\n  }, {\n    key: '_addNativeTextTrack',\n    value: function _addNativeTextTrack(textTrack) {\n      var videoElement = this._player.getVideoElement();\n      if (videoElement) {\n        var sameLanguageTrackIndex = Array.from(videoElement.textTracks).findIndex(function (track) {\n          return track ? track.language === textTrack.language : false;\n        });\n        if (sameLanguageTrackIndex > -1) {\n          var domTrack = videoElement.textTracks[sameLanguageTrackIndex];\n          if (domTrack.cues) {\n            Object.values(domTrack.cues).forEach(function (cue) {\n              return domTrack.removeCue(cue);\n            });\n          }\n        } else {\n          videoElement.addTextTrack(\"subtitles\", textTrack.label || textTrack.language, textTrack.language);\n        }\n        this.dispatchEvent(new _fakeEvent2.default(ExternalCaptionsEventType.NATIVE_TEXT_TRACK_ADDED));\n      }\n    }\n\n    /**\n     * triggering the text track changed event and start listening to the time update on the player (for the the external text track).\n     * @param {TextTrack} textTrack - text track to be set\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: '_setTextTrack',\n    value: function _setTextTrack(textTrack) {\n      var _this6 = this;\n\n      if (!this._player.config.playback.useNativeTextTrack) {\n        this._isTextTrackActive = true;\n        ExternalCaptionsHandler._logger.debug('External text track changed', textTrack);\n        this._activeTextCues = [];\n        this.dispatchEvent(new _fakeEvent2.default(_eventType.CustomEventType.TEXT_CUE_CHANGED, { cues: this._activeTextCues }));\n        this._eventManager.listen(this._player, _eventType.Html5EventType.TIME_UPDATE, function () {\n          return _this6._handleCaptionOnTimeUpdate(textTrack);\n        });\n      }\n    }\n  }]);\n\n  return ExternalCaptionsHandler;\n}(_fakeEventTarget2.default);\n\nExternalCaptionsHandler._logger = (0, _logger2.default)('ExternalCaptionsHandler');\nexports.ExternalCaptionsHandler = ExternalCaptionsHandler;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// playkit.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 30);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 59b4d2a8de1b8dbb5af0","//@flow\nimport * as JsLogger from 'js-logger';\n\nexport type LogLevelObject = { value: number, name: string };\nexport type LogLevels = { [level: string]: LogLevelObject };\nexport type LogLevelTypes = { [level: string]: string };\n\nconst LogLevel: LogLevels = {\n  DEBUG: JsLogger.DEBUG,\n  INFO: JsLogger.INFO,\n  TIME: JsLogger.TIME,\n  WARN: JsLogger.WARN,\n  ERROR: JsLogger.ERROR,\n  OFF: JsLogger.OFF\n};\n\nconst LogLevelType: LogLevelTypes = {};\n\n// Build the log level types enums according to the LogLevel object\nObject.keys(LogLevel).forEach(key => {\n  LogLevelType[key] = key;\n});\n\nJsLogger.useDefaults({defaultLevel: JsLogger.ERROR});\n\n/**\n * get a logger\n * @param {?string} name - the logger name\n * @returns {Object} - the logger class\n */\nfunction getLogger(name?: string): Object {\n  if (!name) {\n    return JsLogger;\n  }\n  return JsLogger.get(name);\n}\n\n/**\n * get the log level\n * @param {?string} name - the logger name\n * @returns {LogLevelObject} - the log level\n */\nfunction getLogLevel(name?: string): LogLevelObject {\n  return getLogger(name).getLevel();\n}\n\n/**\n * sets the logger level\n * @param {LogLevelObject} level - the log level\n * @param {?string} name - the logger name\n * @returns {void}\n */\nfunction setLogLevel(level: LogLevelObject, name?: string): void {\n  getLogger(name).setLevel(level);\n}\n\nexport default getLogger;\nexport {LogLevel, LogLevelType, getLogLevel, setLogLevel};\n\n\n\n// WEBPACK FOOTER //\n// ./utils/logger.js","//@flow\nimport getLogger, {getLogLevel, LogLevel} from '../utils/logger'\nimport {Severity} from './severity'\nimport type {SeverityType} from './severity'\nimport {Code} from './code'\nimport type {CodeType} from './code'\nimport {Category} from './category'\nimport type {CategoryType} from './category'\n\nconst CLASS_NAME: string = 'Error';\n\n/**\n * @classdesc This is a description of the error class.\n */\nexport default class Error {\n  severity: number;\n  category: number;\n  code: number;\n  data: any;\n  /**\n   * @enum {number}\n   */\n  static Severity: SeverityType = Severity;\n  /**\n   * @enum {number}\n   */\n  static Category: CategoryType = Category;\n  /**\n   * @enum {number}\n   */\n  static Code: CodeType = Code;\n  static _logger: any = getLogger(CLASS_NAME);\n\n  /**\n   * @constructor\n   * @param {number} severity - error's severity\n   * @param {number} category - error's category.\n   * @param {number} code - error's code.\n   * @param {any} data - additional data for the error.\n   */\n  constructor(severity: number, category: number, code: number, data: any = {}) {\n    this.severity = severity;\n    this.category = category;\n    this.code = code;\n    this.data = data;\n    if (getLogLevel(CLASS_NAME) !== LogLevel.OFF) {\n      Error._logger.error(`Category:${category} | Code:${code} |`, data);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./error/error.js","//@flow\n/**\n * Create an Event work-alike object based on the dictionary.\n * The event should contain all of the same properties from the dict.\n * @param {string} type -\n * @param {Object=} opt_dict -\n * @constructor\n * @extends {Event}\n */\nclass FakeEvent {\n  /** @const {boolean} */\n  bubbles: boolean;\n\n  /** @const {boolean} */\n  cancelable: boolean;\n\n  /** @const {boolean} */\n  defaultPrevented: boolean;\n\n  /**\n   * According to MDN, Chrome uses high-res timers instead of epoch time.\n   * Follow suit so that timeStamps on FakeEvents use the same base as\n   * on native Events.\n   * @const {number}\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n   */\n  timeStamp: number | Date;\n\n  /** @const {string} */\n  type: string;\n\n  /** @const {boolean} */\n  isTrusted: boolean;\n\n  /** @type {EventTarget} */\n  currentTarget: any;\n\n  /** @type {EventTarget} */\n  target: any;\n\n  /**\n   * Non-standard property read by FakeEventTarget to stop processing listeners.\n   * @type {boolean}\n   */\n  stopped: boolean;\n\n  payload: any;\n\n  constructor(type: string, payload: any) {\n    // These Properties below cannot be set by dict.  They are all provided for\n    // compatibility with native events.\n\n    /** @const {boolean} */\n    this.bubbles = false;\n\n    /** @const {boolean} */\n    this.cancelable = false;\n\n    /** @const {boolean} */\n    this.defaultPrevented = false;\n\n    /**\n     * According to MDN, Chrome uses high-res timers instead of epoch time.\n     * Follow suit so that timeStamps on FakeEvents use the same base as\n     * on native Events.\n     * @const {number}\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp\n     */\n    this.timeStamp = window.performance ? window.performance.now() : Date.now();\n\n    /** @const {string} */\n    this.type = type;\n\n    /** @const {boolean} */\n    this.isTrusted = false;\n\n    /** @type {EventTarget} */\n    this.currentTarget = null;\n\n    /** @type {EventTarget} */\n    this.target = null;\n\n\n    /**\n     * Non-standard property read by FakeEventTarget to stop processing listeners.\n     * @type {boolean}\n     */\n    this.stopped = false;\n\n    this.payload = payload;\n  }\n\n  /**\n   * Does nothing, since FakeEvents have no default.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  preventDefault() {\n  }\n\n  /**\n   * Stops processing event listeners for this event.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  stopImmediatePropagation() {\n    this.stopped = true;\n  }\n\n  /**\n   * Does nothing, since FakeEvents do not bubble.  Provided for compatibility\n   * with native Events.\n   * @override\n   */\n  stopPropagation() {\n  }\n}\n\nexport default FakeEvent;\n\n\n\n// WEBPACK FOOTER //\n// ./event/fake-event.js","//@flow\nimport {jsonp} from './jsonp'\n\n\"use strict\";\n\nconst _Number = {\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a number\n   */\n  isNumber: function (n: number): boolean {\n    return Number(n) === n;\n  },\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is an integer\n   */\n  isInt: function (n: number): boolean {\n    return this.isNumber(n) && n % 1 === 0;\n  },\n\n  /**\n   * @param {number} n - A certain number\n   * @returns {boolean} - If the input is a float\n   */\n  isFloat: function (n: number): boolean {\n    return this.isNumber(n) && n % 1 !== 0;\n  }\n};\n\nconst _String = {\n  /**\n   * Uppercase the first letter of a string\n   * @param  {String} string - String to be uppercased\n   * @return {String} - The uppercased string\n   * @public\n   * @method toTitleCase\n   */\n  capitlize: function (string: string): string {\n    if (typeof string !== 'string') {\n      return string;\n    }\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  },\n\n  /**\n   * @param {string} string - Certain string\n   * @param {string} searchString - Certain string\n   * @returns {boolean} - Whether the string: string is ending with string: searchString\n   */\n  endsWith: function (string: string, searchString: string): boolean {\n    if (typeof string !== 'string' || typeof searchString !== 'string') {\n      return false;\n    }\n    return string.indexOf(searchString, string.length - searchString.length) != -1;\n  }\n};\n\nconst _Object = {\n  /**\n   * @param {Array<Object>} objects - The objects to merge\n   * @returns {Object} - The merged object.\n   */\n  merge: function (objects: Array<Object>): Object {\n    let target = {};\n    for (let obj of objects) {\n      Object.assign(target, obj);\n    }\n    return target;\n  },\n\n  /**\n   * @param {any} item - The item to check.\n   * @returns {boolean} - Whether the item is an object.\n   */\n  isObject: function (item: any) {\n    return (item && typeof item === 'object' && !Array.isArray(item));\n  },\n\n  /**\n   * @param {any} target - The target object.\n   * @param {any} sources - The objects to merge.\n   * @returns {Object} - The merged object.\n   */\n  mergeDeep: function (target: any, ...sources: any): Object {\n    if (!sources.length) {\n      return target;\n    }\n    const source = sources.shift();\n    if (this.isObject(target) && this.isObject(source)) {\n      for (const key in source) {\n        if (this.isObject(source[key])) {\n          if (!target[key]) Object.assign(target, {[key]: {}});\n          this.mergeDeep(target[key], source[key]);\n        } else {\n          Object.assign(target, {[key]: source[key]});\n        }\n      }\n    }\n    return this.mergeDeep(target, ...sources);\n  },\n\n  /**\n   * @param {any} data - The data to copy.\n   * @returns {any} - The copied data.\n   */\n  copyDeep: function (data: any): any {\n    let node;\n    if (Array.isArray(data)) {\n      node = data.length > 0 ? data.slice(0) : [];\n      node.forEach((e, i) => {\n        if (\n          (typeof e === \"object\" && e !== {}) ||\n          (Array.isArray(e) && e.length > 0)\n        ) {\n          node[i] = this.copyDeep(e);\n        }\n      });\n    } else if (data !== null && typeof data === \"object\") {\n      if (data.clone && typeof data.clone === \"function\") {\n        node = data.clone();\n      } else {\n        node = Object.assign({__proto__: data.__proto__}, data);\n        Object.keys(node).forEach((key) => {\n          if (\n            (typeof node[key] === \"object\" && node[key] !== {}) ||\n            (Array.isArray(node[key]) && node[key].length > 0)\n          ) {\n            node[key] = this.copyDeep(node[key]);\n          }\n        });\n      }\n    } else {\n      node = data;\n    }\n    return node;\n  },\n\n  /**\n   * Checks if an object is an empy object.\n   * @param {Object} obj - The object to check\n   * @returns {boolean} - Whether the object is empty.\n   */\n  isEmptyObject: function (obj: Object): boolean {\n    for (let key in obj) {\n      if (obj.hasOwnProperty(key))\n        return false;\n    }\n    return true;\n  },\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - The value in this path.\n   */\n  getPropertyPath: function (obj: Object, propertyPath: string): any {\n    return propertyPath.split(\".\").reduce(function (o, x) {\n      return (typeof o === \"undefined\" || o === null) ? o : o[x];\n    }, obj);\n  },\n\n  /**\n   * Checks for nested object properties.\n   * @param {Object} obj - The object to check.\n   * @param {string} propertyPath - The path to check.\n   * @returns {boolean} - Whether the path exists in the object.\n   */\n  hasPropertyPath: function (obj: Object, propertyPath: string): boolean {\n    if (!propertyPath) {\n      return false;\n    }\n    let properties = propertyPath.split('.');\n    for (let i = 0; i < properties.length; i++) {\n      let prop = properties[i];\n      if (!obj || !obj.hasOwnProperty(prop)) {\n        return false;\n      } else {\n        obj = obj[prop];\n      }\n    }\n    return true;\n  },\n\n  /**\n   * Create an object with a given property path.\n   * @param {Object} obj - The object to create on.\n   * @param {string} path - The path to create in the object.\n   * @param {any} value - The value to set in the path.\n   * @returns {Object} - The result object.\n   */\n  createPropertyPath: function (obj: Object, path: string, value: any = null): Object {\n    let pathArray = path.split('.');\n    let current = obj;\n    while (pathArray.length > 1) {\n      const [head, ...tail] = pathArray;\n      pathArray = tail;\n      if (current[head] === undefined) {\n        current[head] = {};\n      }\n      current = current[head];\n    }\n    current[pathArray[0]] = value;\n    return obj;\n  },\n\n  /**\n   * Deleted a property path from an object.\n   * @param {Object} obj - The object to delete the property path from.\n   * @param {string} path - The path to delete in the object.\n   * @returns {void}\n   */\n  deletePropertyPath: function (obj: Object, path: string): void {\n    if (!obj || !path) {\n      return;\n    }\n    let pathArray = path.split('.');\n    for (let i = 0; i < pathArray.length - 1; i++) {\n      obj = obj[pathArray[i]];\n      if (typeof obj === 'undefined') {\n        return;\n      }\n    }\n    delete obj[pathArray.pop()];\n  },\n\n  /**\n   * Creates deferred promise which can resolved/rejected outside the promise scope.\n   * @returns {DeferredPromise} - The promise with resolve and reject props.\n   */\n  defer: function (): DeferredPromise {\n    let res, rej;\n    // $FlowFixMe\n    let promise = new Promise((resolve, reject) => {\n      res = resolve;\n      rej = reject;\n    });\n    // $FlowFixMe\n    promise.resolve = res;\n    // $FlowFixMe\n    promise.reject = rej;\n    return promise;\n  },\n\n  /**\n   * Binds an handler to a desired context.\n   * @param {any} thisObj - The handler context.\n   * @param {Function} fn - The handler.\n   * @returns {Function} - The new bound function.\n   * @public\n   */\n  bind: function (thisObj: any, fn: Function): Function {\n    return function () {\n      fn.apply(thisObj, arguments);\n    };\n  }\n};\n\nconst _Generator = {\n  /**\n   * Generates unique id.\n   * @param {number} length - The length of the id.\n   * @returns {string} - The generated id.\n   */\n  uniqueId: function (length: ?number) {\n    let from = 2;\n    let to = from + ((!length || length < 0) ? 0 : length - 2);\n    return '_' + Math.random().toString(36).substr(from, to);\n  },\n\n  /**\n   * Generates GUID.\n   * @return {string} - GUID\n   * @private\n   */\n  guid: function (): string {\n    let S4 = () => {\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    };\n    return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\n  }\n};\n\nconst _Dom = {\n  /**\n   * Adds class name to an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  addClassName(element: HTMLElement, className: string): void {\n    if (element.classList) {\n      element.classList.add(className);\n    } else {\n      if (!_Dom.hasClassName(element, className)) {\n        element.className += className;\n      }\n    }\n  },\n\n  /**\n   * Removes class name from an element\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {void}\n   */\n  removeClassName(element: HTMLElement, className: string): void {\n    if (element.classList) {\n      element.classList.remove(className);\n    } else {\n      if (_Dom.hasClassName(element, className)) {\n        element.className = element.className.replace(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'), ' ').replace(/^\\s+|\\s+$/g, '');\n      }\n    }\n  },\n  /**\n   * Checks if an element has a class name\n   * @param {Element} element - an HTML element\n   * @param {string} className - a class name\n   * @returns {boolean} - weather an element contains a class name\n   */\n  hasClassName(element: HTMLElement, className: string) {\n    return element.className && new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(element.className);\n  },\n  /**\n   * Add element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @param {string} value - attribute value\n   * @returns {void}\n   */\n  setAttribute(element: HTMLElement, name: string, value: string): void {\n    element.setAttribute(name, value);\n  },\n  /**\n   * Remove element attribute\n   * @param {Element} element - an HTML element\n   * @param {string} name - attribute name\n   * @returns {void}\n   */\n  removeAttribute(element: HTMLElement, name: string): void {\n    element.removeAttribute(name);\n  },\n  /**\n   * Set element style\n   * @param {Element} element - an HTML element\n   * @param {string} name - style name\n   * @param {string} value - style value\n   * @returns {void}\n   */\n  setStyle(element: HTMLElement, name: string, value: string): void {\n    if (element.style.getPropertyValue(name) !== undefined) {\n      element.style.setProperty(name, value);\n    }\n  },\n  /**\n   * Adds a node to the end of the list of children of a specified parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  appendChild(parent: ?Element, child: ?Element): void {\n    if (parent && child && parent.appendChild) {\n      parent.appendChild(child);\n    }\n  },\n  /**\n   * Removes an element from his parent node.\n   * @param {Element} parent - The parent node.\n   * @param {Element} child - The child node.\n   * @returns {void}\n   */\n  removeChild(parent: ?Node, child: ?Element): void {\n    if (parent && child && parent.removeChild) {\n      parent.removeChild(child);\n    }\n  },\n  /**\n   * Prepend HTML element\n   * @param {HTMLElement} child - the child to prepend\n   * @param {HTMLElement} parent - the parent to preprend to\n   * @returns {void}\n   */\n  prependTo(child: HTMLElement, parent: HTMLElement): void {\n    if (parent.firstChild) {\n      parent.insertBefore(child, parent.firstChild);\n    } else {\n      parent.appendChild(child);\n    }\n  },\n  /**\n   * Returns a reference to the element by its ID.\n   * @param {string} id - The desired id.\n   * @returns {Element} - The element with the desired id.\n   */\n  getElementById(id: string): any {\n    return document.getElementById(id);\n  },\n  /**\n   * Creates the HTML element specified by tagName.\n   * @param {string} tagName - The tag name.\n   * @returns {Element} - The element just created.\n   */\n  createElement(tagName: string): any {\n    return document.createElement(tagName);\n  },\n  /**\n   * Loads script asynchronously.\n   * @param {string} url - The url to load.\n   * @return {Promise} - The loading promise.\n   * @public\n   */\n  loadScriptAsync(url: string): Promise<*> {\n    return new Promise((resolve, reject) => {\n      let r = false,\n        t = document.getElementsByTagName(\"script\")[0],\n        s = this.createElement(\"script\");\n      s.type = \"text/javascript\";\n      s.src = url;\n      s.async = true;\n      s.onload = s.onreadystatechange = function () {\n        if (!r && (!this.readyState || this.readyState === \"complete\")) {\n          r = true;\n          resolve(this);\n        }\n      };\n      s.onerror = s.onabort = reject;\n      if (t && t.parentNode) {\n        t.parentNode.insertBefore(s, t);\n      }\n    });\n  },\n  /**\n   * Returns the first element that matches a specified CSS selector(s) in the document.\n   * @param {string} selector - One or more CSS selectors to match the element.\n   * @returns {Element} - The first element that matches a specified CSS selector(s) in the document.\n   */\n  getElementBySelector(selector: string): any {\n    try {\n      return document.querySelector(selector)\n    } catch (e) {\n      return;\n    }\n  },\n  /**\n   * Inserts a node as a child, right before an existing child.\n   * @param {HTMLElement} parent -  The parent node object.\n   * @param {HTMLElement} newChild -  The node object to insert.\n   * @param {?HTMLElement} existingChild - The child node to insert the new node before. If set to null, the insertBefore method will insert the newChild at the end.\n   * @returns {Element} - The first element that matches a specified CSS selector(s) in the document.\n   */\n  insertBefore(parent: HTMLElement, newChild: HTMLElement, existingChild: ?HTMLElement): ?HTMLElement {\n    try {\n      return parent.insertBefore(newChild, existingChild);\n    } catch (e) {\n      return null;\n    }\n  }\n};\n\nconst _Http = {\n  execute: function (url: string, params: any, method: string = \"POST\", headers?: Map<string, string>): Promise<any> {\n    let request = new XMLHttpRequest();\n    return new Promise((resolve, reject) => {\n      request.onreadystatechange = function () {\n        if (request.readyState === 4) {\n          if (request.status === 200) {\n            try {\n              let jsonResponse = JSON.parse(request.responseText);\n              resolve(jsonResponse);\n            } catch (e) {\n              resolve(request.responseText);\n            }\n          } else {\n            reject(request.responseText);\n          }\n        }\n      };\n      request.open(method, url);\n      if (headers) {\n        headers.forEach((value, key) => {\n          request.setRequestHeader(key, value);\n        });\n      }\n      request.send(params);\n    });\n  },\n  jsonp: jsonp\n};\n\nexport {\n  _Number as Number,\n  _String as String,\n  _Object as Object,\n  _Generator as Generator,\n  _Dom as Dom,\n  _Http as Http\n};\n\n\n\n// WEBPACK FOOTER //\n// ./utils/util.js","//@flow\nimport * as Utils from '../utils/util'\n\nexport type EventTypes = { [event: string]: string };\n\nconst Html5EventType: EventTypes = {\n  /**\n   * Fires when the loading of an audio/video is aborted\n   */\n  ABORT: 'abort',\n  /**\n   * Fires when the browser can start playing the audio/video\n   */\n  CAN_PLAY: 'canplay',\n  /**\n   * Fires when the browser can play through the audio/video without stopping for buffering\n   */\n  CAN_PLAY_THROUGH: 'canplaythrough',\n  /**\n   * Fires when the duration of the audio/video is changed\n   */\n  DURATION_CHANGE: 'durationchange',\n  /**\n   * Fires when the current playlist is empty\n   */\n  EMPTIED: 'emptied',\n  /**\n   * Fires when the current playlist is ended\n   */\n  ENDED: 'ended',\n  /**\n   * Fires when an error occurred during the loading of an audio/video\n   */\n  ERROR: 'error',\n  /**\n   * Fires when the browser has loaded the current frame of the audio/video\n   */\n  LOADED_DATA: 'loadeddata',\n  /**\n   * Fires when the browser has loaded meta data for the audio/video\n   */\n  LOADED_METADATA: 'loadedmetadata',\n  /**\n   * Fires when the browser starts looking for the audio/video\n   */\n  LOAD_START: 'loadstart',\n  /**\n   * Fires when the audio/video has been paused\n   */\n  PAUSE: 'pause',\n  /**\n   * Fires when the audio/video has been started or is no longer paused\n   */\n  PLAY: 'play',\n  /**\n   * Fires when the audio/video is playing after having been paused or stopped for buffering\n   */\n  PLAYING: 'playing',\n  /**\n   * Fires when the browser is downloading the audio/video\n   */\n  PROGRESS: 'progress',\n  /**\n   * Fires when the playing speed of the audio/video is changed\n   */\n  RATE_CHANGE: 'ratechange',\n  /**\n   * Fires when the user is finished moving/skipping to a new position in the audio/video\n   */\n  SEEKED: 'seeked',\n  /**\n   * Fires when the user starts moving/skipping to a new position in the audio/video\n   */\n  SEEKING: 'seeking',\n  /**\n   * Fires when the browser is trying to get media data, but data is not available\n   */\n  STALLED: 'stalled',\n  /**\n   * Fires when the browser is intentionally not getting media data\n   */\n  SUSPEND: 'suspend',\n  /**\n   * Fires when the current playback position has changed\n   */\n  TIME_UPDATE: 'timeupdate',\n  /**\n   * Fires when the volume has been changed\n   */\n  VOLUME_CHANGE: 'volumechange',\n  /**\n   * Fires when the video stops because it needs to buffer the next frame\n   */\n  WAITING: 'waiting'\n};\n\nconst CustomEventType: EventTypes = {\n  /**\n   * Fires when the media is loaded.\n   */\n  MEDIA_LOADED: 'medialoaded',\n  /**\n   * Fires when the player ends reset operation.\n   */\n  PLAYER_RESET: 'playerreset',\n  /**\n   * Fires when the player ends destroy operation.\n   */\n  PLAYER_DESTROY: 'playerdestroy',\n  /**\n   * Fires when the player enters fullscreen.\n   */\n  ENTER_FULLSCREEN: 'enterfullscreen',\n  /**\n   * Fires when the player exits fullscreen.\n   */\n  EXIT_FULLSCREEN: 'exitfullscreen',\n  /**\n   * Fires when the player received a request to enter fullscreen.\n   */\n  REQUESTED_ENTER_FULLSCREEN: 'requestedenterfullscreen',\n  /**\n   * Fires when the player received a request to exit fullscreen.\n   */\n  REQUESTED_EXIT_FULLSCREEN: 'requestedexitfullscreen',\n  /**\n   * Fires when browser fails to autoplay with sound.\n   */\n  AUTOPLAY_FAILED: 'autoplayfailed',\n  /**\n   * Fires when browser fails to autoplay with sound but start muted autoplay instead.\n   */\n  FALLBACK_TO_MUTED_AUTOPLAY: 'fallbacktomutedautoplay',\n  /**\n   * Fires when change source flow started.\n   */\n  CHANGE_SOURCE_STARTED: 'changesourcestarted',\n  /**\n   * Fires when change source flow ended.\n   */\n  CHANGE_SOURCE_ENDED: 'changesourceended',\n  /**\n   * Fires when the volume has been muted/unmute.\n   */\n  MUTE_CHANGE: 'mutechange',\n  /**\n   * Fires when the active video track has been changed.\n   */\n  VIDEO_TRACK_CHANGED: 'videotrackchanged',\n  /**\n   * Fires when the active audio track has been changed.\n   */\n  AUDIO_TRACK_CHANGED: 'audiotrackchanged',\n  /**\n   * Fires when the active text track has been changed.\n   */\n  TEXT_TRACK_CHANGED: 'texttrackchanged',\n  /**\n   * Fires when the active text track cue has changed.\n   */\n  TEXT_CUE_CHANGED: 'textcuechanged',\n  /**\n   * Fires when the player tracks have been changed.\n   */\n  TRACKS_CHANGED: 'trackschanged',\n  /**\n   * Fires when the abr mode change from 'auto' to 'manual' or vice versa.\n   */\n  ABR_MODE_CHANGED: 'abrmodechanged',\n  /**\n   * Fires when the player state has been changed.\n   */\n  PLAYER_STATE_CHANGED: 'playerstatechanged',\n  /**\n   * Fires on the first play.\n   */\n  FIRST_PLAY: 'firstplay',\n  /**\n   * Fires on the first time that playback has been started.\n   */\n  PLAYBACK_STARTED: 'playbackstarted',\n  /**\n   * Fires when the player has selected the source to play.\n   */\n  SOURCE_SELECTED: 'sourceselected',\n  /**\n   * Fires when the text track style has changed.\n   */\n  TEXT_STYLE_CHANGED: 'textstylechanged',\n  /**\n   * Fired when ad data is available.\n   */\n  AD_LOADED: 'adloaded',\n  /**\n   * Fired when the ad starts playing.\n   */\n  AD_STARTED: 'adstarted',\n  /**\n   * Fired when the ad is resumed.\n   */\n  AD_RESUMED: 'adresumed',\n  /**\n   * Fired when the ad is paused.\n   */\n  AD_PAUSED: 'adpaused',\n  /**\n   * Fired when the ad is clicked.\n   */\n  AD_CLICKED: 'adclicked',\n  /**\n   * Fired when the ad is skipped by the user.\n   */\n  AD_SKIPPED: 'adskipped',\n  /**\n   * Fired when the ad completes playing.\n   */\n  AD_COMPLETED: 'adcompleted',\n  /**\n   * Fired when an error occurred while the ad was loading or playing.\n   */\n  AD_ERROR: 'aderror',\n  /**\n   * Fired when the ads manager is done playing all the ads.\n   */\n  ALL_ADS_COMPLETED: 'alladscompleted',\n  /**\n   * Fired when content should be paused. This usually happens right before an ad is about to cover the content.\n   */\n  AD_BREAK_START: 'adbreakstart',\n  /**\n   * Fired when content should be resumed. This usually happens when an ad finishes or collapses.\n   */\n  AD_BREAK_END: 'adbreakend',\n  /**\n   * Fired when the ad playhead crosses first quartile.\n   */\n  AD_FIRST_QUARTILE: 'adfirstquartile',\n  /**\n   * Fired when the ad playhead crosses midpoint.\n   */\n  AD_MIDPOINT: 'admidpoint',\n  /**\n   * Fired when the ad playhead crosses third quartile.\n   */\n  AD_THIRD_QUARTILE: 'adthirdquartile',\n  /**\n   * Fired when the ad is closed by the user.\n   */\n  USER_CLOSED_AD: 'userclosedad',\n  /**\n   * Fired when the ad volume has changed.\n   */\n  AD_VOLUME_CHANGED: 'advolumechanged',\n  /**\n   * Fired when the ad volume has been muted.\n   */\n  AD_MUTED: 'admuted',\n  /**\n   * Fired on ad time progress.\n   */\n  AD_PROGRESS: 'adprogress',\n  /**\n   * Fired when the adapter recovered from a media error\n   */\n  MEDIA_RECOVERED: 'mediarecovered',\n  /**\n   * Fired when the vr stereo mode changed\n   */\n  VR_STEREO_MODE_CHANGED: 'vrstereomodechanged'\n};\n\nconst EventType: EventTypes = Utils.Object.merge([Html5EventType, CustomEventType]);\n\nexport {EventType, Html5EventType, CustomEventType};\n\n\n\n// WEBPACK FOOTER //\n// ./event/event-type.js","//@flow\n\n/**\n * General track representation of the player.\n * @classdesc\n */\nexport default class Track {\n  /**\n   * Comparing language strings.\n   * @param {string} inputLang - The configured language.\n   * @param {string} trackLang - The default track language.\n   * @returns {boolean} - Whether the strings are equal or starts with the same substring.\n   */\n  static langComparer(inputLang: string, trackLang: string): boolean {\n    try {\n      inputLang = inputLang.toLowerCase();\n      trackLang = trackLang.toLowerCase();\n      return inputLang ? (inputLang.startsWith(trackLang) || trackLang.startsWith(inputLang)) : false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  static clone<T>(track: any): T {\n    return (Object.assign(Object.create(Object.getPrototypeOf(track)), track): T);\n  }\n\n  /**\n   * The id of the track.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _id: ?string;\n  /**\n   * The active mode of the track.\n   * @member\n   * @type {boolean}\n   * @private\n   */\n  _active: boolean;\n  /**\n   * The label of the track.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _label: ?string;\n  /**\n   * The language of the track.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _language: string;\n  /**\n   * The index of the track.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _index: number;\n  /**\n   * The clone function reference.\n   * @member\n   * @type {Function}\n   * @public\n   */\n  clone: Function;\n\n  /**\n   * Getter for the track id.\n   * @public\n   * @returns {?string} - The track id.\n   */\n  get id(): ?string {\n    return this._id;\n  }\n\n  /**\n   * Getter for the active mode of the track.\n   * @public\n   * @returns {boolean} - The active mode of the track.\n   */\n  get active(): boolean {\n    return this._active;\n  }\n\n  /**\n   * Setter for the active mode of the track.\n   * @public\n   * @param {boolean} value - Whether the track is active or not.\n   */\n  set active(value: boolean) {\n    this._active = value;\n  }\n\n  /**\n   * Getter for the label of the track.\n   * @public\n   * @returns {string} - The label of the track.\n   */\n  get label(): ?string {\n    return this._label;\n  }\n\n  /**\n   * Getter for the language of the track.\n   * @public\n   * @returns {string} - The language of the track.\n   */\n  get language(): string {\n    return this._language;\n  }\n\n  /**\n   * Getter for the index of the track.\n   * @public\n   * @returns {number} - The index of the track.\n   */\n  get index(): number {\n    return this._index;\n  }\n\n  /**\n   * Setter for the index of the track.\n   * @public\n   * @param {number} value - The index of the track.\n   * @returns {void}\n   */\n  set index(value: number): void {\n    this._index = value;\n  }\n\n  /**\n   * Setter for the label of the track.\n   * @public\n   * @param {string} value - The label of the track.\n   */\n  set label(value: string) {\n    this._label = value;\n  }\n\n  /**\n   * @constructor\n   * @param {Object} settings - The track settings object.\n   */\n  constructor(settings: Object = {}) {\n    this._id = settings.id;\n    this._active = settings.active;\n    this._label = settings.label;\n    this._language = settings.language;\n    this._index = settings.index;\n    this.clone = Track.clone.bind(null, this);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./track/track.js","//@flow\nimport MultiMap from '../utils/multi-map'\nimport FakeEvent from './fake-event'\n\n/**\n * Creates a new EventManager. An EventManager maintains a collection of \"event\n * bindings\" between event targets and event listeners.\n *\n * @struct\n * @constructor\n * @implements {IDestroyable}\n */\nclass EventManager {\n  _bindingMap: MultiMap<Binding_> | null;\n\n  constructor() {\n    /**\n     * Maps an event type to an array of event bindings.\n     * @private {MultiMap.<!EventManager.Binding_>}\n     */\n    this._bindingMap = new MultiMap();\n  }\n\n  /**\n   * Detaches all event listeners.\n   * @override\n   */\n  destroy() {\n    this.removeAll();\n    this._bindingMap = null;\n    return Promise.resolve();\n  }\n\n  /**\n   * Attaches an event listener to an event target for only one time.\n   * @param {EventTarget} target - The event target.\n   * @param {string} type - The event type.\n   * @param {EventManager.ListenerType} listener - The event listener.\n   * @param {?Object} options - The event options.\n   * @returns {void}\n   */\n  listenOnce(target: any, type: string, listener: ListenerType, options: ?Object): void {\n    let oneListener = (event) => {\n      this.unlisten(target, type, oneListener);\n      listener.call(this, event)\n    };\n    this.listen(target, type, oneListener, options);\n  }\n\n\n  /**\n   * Attaches an event listener to an event target.\n   * @param {EventTarget} target The event target.\n   * @param {string} type The event type.\n   * @param {EventManager.ListenerType} listener The event listener.\n   * @param {?Object} options The event options.\n   * @returns {void}\n   */\n  listen(target: any, type: string, listener: ListenerType, options: ?Object): void {\n    let binding = new Binding_(target, type, listener, options);\n    if (this._bindingMap) {\n      this._bindingMap.push(type, binding);\n    }\n  }\n\n\n  /**\n   * Detaches an event listener from an event target.\n   * @param {EventTarget} target The event target.\n   * @param {string} type The event type.\n   * @param {EventManager.ListenerType} [listener] The event listener to detach. If no given, detaches all event listeners of the target and type.\n   * @returns {void}\n   */\n  unlisten(target: any, type: string, listener: ?ListenerType): void {\n    if (this._bindingMap) {\n      let list = this._bindingMap.get(type);\n\n      for (let i = 0; i < list.length; ++i) {\n        let binding = list[i];\n\n        if (binding.target === target && (binding.listener === listener || !listener)) {\n          binding.unlisten();\n          if (this._bindingMap) {\n            this._bindingMap.remove(type, binding);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Detaches all event listeners from all targets.\n   * @returns {void}\n   */\n  removeAll(): void {\n    if (this._bindingMap) {\n      let listeners = this._bindingMap.getAll();\n\n      for (let listener of listeners) {\n        listener.unlisten();\n      }\n      if (this._bindingMap) {\n        this._bindingMap.clear();\n      }\n    }\n  }\n}\n\n/**\n * @typedef {function(!Event)}\n */\ntype ListenerType = (event: FakeEvent) => any;\n\n/**\n * Creates a new Binding_ and attaches the event listener to the event target.\n * @param {EventTarget} target The event target.\n * @param {string} type The event type.\n * @param {EventManager.ListenerType} listener The event listener.\n * @constructor\n * @private\n */\nclass Binding_ {\n  target: any;\n  type: string;\n  listener: ?ListenerType;\n  options: ?Object;\n\n  constructor(target, type, listener, options) {\n    /** @type {EventTarget} */\n    this.target = target;\n\n    /** @type {string} */\n    this.type = type;\n\n    /** @type {?EventManager.ListenerType} */\n    this.listener = listener;\n\n    /** @type {?Object} */\n    this.options = options;\n\n    this.target.addEventListener(type, listener, options);\n  }\n\n\n  /**\n   * Detaches the event listener from the event target. This does nothing if the\n   * event listener is already detached.\n   * @returns {void}\n   */\n  unlisten(): void {\n    if (!this.target)\n      return;\n\n    this.target.removeEventListener(this.type, this.listener, this.options);\n\n    this.target = null;\n    this.listener = null;\n    this.options = null;\n  }\n}\n\nexport default EventManager;\n\n\n\n// WEBPACK FOOTER //\n// ./event/event-manager.js","//@flow\nimport Track from './track'\n\n/**\n * Text track representation of the player.\n * @classdesc\n */\nexport default class TextTrack extends Track {\n  /**\n   * The kind of the text track:\n   * subtitles/captions/metadata.\n   * @member\n   * @type {string}\n   * @private\n   */\n  _kind: string;\n  /**\n   * flag to know if it's external or not\n   * @member\n   * @type {boolean}\n   * @private\n   */\n  _external: boolean;\n\n  /**\n   * Getter for the kind of the text track.\n   * @public\n   * @returns {string} - The kind of the text track.\n   */\n  get kind(): string {\n    return this._kind;\n  }\n\n  /**\n   * Getter for the external of the text track.\n   * @public\n   * @returns {boolean} - The kind of the text track.\n   */\n  get external(): boolean {\n    return this._external;\n  }\n\n  /**\n   * @constructor\n   * @param {Object} settings - The track settings object.\n   */\n  constructor(settings: Object = {}) {\n    super(settings);\n    this._kind = settings.kind;\n    this._external = settings.external;\n  }\n}\n\nexport {TextTrack};\n\n\n\n// WEBPACK FOOTER //\n// ./track/text-track.js","//@flow\nimport Env from './utils/env'\nimport EventManager from './event/event-manager'\nimport PosterManager from './utils/poster-manager'\nimport FakeEvent from './event/fake-event'\nimport FakeEventTarget from './event/fake-event-target'\nimport type {EventTypes} from './event/event-type'\nimport {CustomEventType, EventType, Html5EventType} from './event/event-type'\nimport * as Utils from './utils/util'\nimport Locale from './utils/locale'\nimport type {LogLevels, LogLevelTypes} from './utils/logger'\nimport getLogger, {getLogLevel, LogLevel, LogLevelType, setLogLevel} from './utils/logger'\nimport Html5 from './engines/html5/html5'\nimport PluginManager from './plugin/plugin-manager'\nimport BasePlugin from './plugin/base-plugin'\nimport StateManager from './state/state-manager'\nimport Track from './track/track'\nimport VideoTrack from './track/video-track'\nimport AudioTrack from './track/audio-track'\nimport TextTrack from './track/text-track'\nimport TextStyle from './track/text-style'\nimport {Cue} from './track/vtt-cue'\nimport {processCues} from './track/text-track-display'\nimport type {StateTypes} from './state/state-type'\nimport {StateType} from './state/state-type'\nimport type {TrackTypes} from './track/track-type'\nimport {TrackType} from './track/track-type'\nimport {LabelToTrackMap} from './track/label-to-track-map'\nimport type {StreamTypes} from './engines/stream-type'\nimport {StreamType} from './engines/stream-type'\nimport type {EngineTypes} from './engines/engine-type'\nimport {EngineType} from './engines/engine-type'\nimport type {MediaTypes} from './media-type'\nimport {MediaType} from './media-type'\nimport type {AbrModes} from './track/abr-mode-type'\nimport {AbrMode} from './track/abr-mode-type'\nimport PlaybackMiddleware from './middleware/playback-middleware'\nimport DefaultPlayerConfig from './player-config.json'\nimport './assets/style.css'\nimport PKError from './error/error'\nimport {ExternalCaptionsEventType, ExternalCaptionsHandler} from './track/external-captions-handler'\n\n/**\n * The player playback rates.\n * @type {Array<number>}\n * @const\n */\nconst PLAYBACK_RATES = [0.5, 1, 2, 4];\n\n/**\n * The player default playback rate.\n * @type {number}\n * @const\n */\nconst DEFAULT_PLAYBACK_RATE = 1;\n/**\n * The black cover class name.\n * @type {string}\n * @const\n */\nconst BLACK_COVER_CLASS_NAME: string = 'playkit-black-cover';\n/**\n * The player container class name.\n * @type {string}\n * @const\n */\nconst CONTAINER_CLASS_NAME: string = 'playkit-container';\n\n/**\n /**\n * The player poster class name.\n * @type {string}\n * @const\n */\nconst POSTER_CLASS_NAME: string = 'playkit-poster';\n\n/**\n * The engine class name.\n * @type {string}\n * @const\n */\nconst ENGINE_CLASS_NAME: string = 'playkit-engine';\n\n/**\n * The text style id.\n * @type {string}\n * @const\n */\nconst SUBTITLES_STYLE_ID_NAME: string = 'playkit-subtitles-style';\n\n/**\n * The subtitles class name.\n * @type {string}\n * @const\n */\nconst SUBTITLES_CLASS_NAME: string = 'playkit-subtitles';\n\n/**\n *  The auto string, for captions\n *  @type {string}\n *  @const\n */\nconst AUTO: string = 'auto';\n\n/**\n *  The off string, for captions\n *  @type {string}\n *  @const\n */\nconst OFF: string = 'off';\n\n/**\n *  The duration offset, for seeking to duration safety.\n *  @type {number}\n *  @const\n */\nconst DURATION_OFFSET: number = 0.1;\n\n/**\n * The toggle fullscreen rendering timeout value\n * @type {number}\n * @const\n */\nconst REPOSITION_CUES_TIMEOUT: number = 1000;\n\n/**\n * The HTML5 player class.\n * @classdesc\n */\nexport default class Player extends FakeEventTarget {\n  /**\n   * The player class logger.\n   * @type {any}\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('Player');\n  /**\n   * The available engines of the player.\n   * @type {Array<typeof IEngine>}\n   * @private\n   * @static\n   */\n  static _engines: Array<typeof IEngine> = [Html5];\n  /**\n   * The player capabilities result object.\n   * @type {Object}\n   * @private\n   * @static\n   */\n  static _playerCapabilities: Object = {};\n\n  /**\n   * Runs the engines capabilities tests.\n   * @returns {void}\n   * @public\n   * @static\n   */\n  static runCapabilities(): void {\n    Player._logger.debug(\"Running player capabilities\");\n    Player._engines.forEach(Engine => Engine.runCapabilities());\n  }\n\n  /**\n   * Gets the engines capabilities.\n   * @param {?string} engineType - The engine type.\n   * @return {Promise<Object>} - The engines capabilities object.\n   * @public\n   * @static\n   */\n  static getCapabilities(engineType: ?string): Promise<{ [name: string]: any }> {\n    Player._logger.debug(\"Get player capabilities\", engineType);\n    const promises = [];\n    Player._engines.forEach(Engine => promises.push(Engine.getCapabilities()));\n    return Promise.all(promises)\n      .then((arrayOfResults) => {\n        const playerCapabilities = {};\n        arrayOfResults.forEach(res => Object.assign(playerCapabilities, res));\n        Utils.Object.mergeDeep(playerCapabilities, Player._playerCapabilities);\n        return (engineType ? playerCapabilities[engineType] : playerCapabilities);\n      });\n  }\n\n  /**\n   * Sets an engine capabilities.\n   * @param {string} engineType - The engine type.\n   * @param {Object} capabilities - The engine capabilities.\n   * @returns {void}\n   * @public\n   * @static\n   */\n  static setCapabilities(engineType: string, capabilities: { [name: string]: any }): void {\n    Player._logger.debug(\"Set player capabilities\", engineType, capabilities);\n    Player._playerCapabilities[engineType] = Utils.Object.mergeDeep({}, Player._playerCapabilities[engineType], capabilities);\n  }\n\n  /**\n   * For browsers which block auto play, use the user gesture to open the video element and enable playing via API.\n   * @returns {void}\n   * @private\n   * @static\n   */\n  static _prepareVideoElement(): void {\n    Player._engines.forEach((Engine: typeof IEngine) => {\n      Engine.prepareVideoElement();\n    });\n  }\n\n  /**\n   * The plugin manager of the player.\n   * @type {PluginManager}\n   * @private\n   */\n  _pluginManager: PluginManager;\n  /**\n   * The event manager of the player.\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The poster manager of the player.\n   * @type {PosterManager}\n   * @private\n   */\n  _posterManager: PosterManager;\n  /**\n   * The runtime configuration of the player.\n   * @type {Object}\n   * @private\n   */\n  _config: Object;\n  /**\n   * The playback engine.\n   * @type {IEngine}\n   * @private\n   */\n  _engine: IEngine;\n  /**\n   * The state manager of the player.\n   * @type {StateManager}\n   * @private\n   */\n  _stateManager: StateManager;\n  /**\n   * The tracks of the player.\n   * @type {Array<Track>}\n   * @private\n   */\n  _tracks: Array<Track>;\n  /**\n   * The player ready promise\n   * @type {Promise<*>}\n   * @private\n   */\n  _readyPromise: ?Promise<*>;\n  /**\n   * Whether the play is the first or not\n   * @type {boolean}\n   * @private\n   */\n  _firstPlay: boolean;\n  /**\n   * Whether the playback started for the first time\n   * @type {boolean}\n   * @private\n   */\n  _playbackStarted: boolean;\n  /**\n   * The player DOM element container.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _el: HTMLDivElement;\n  /**\n   * The player text DOM element container.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _textDisplayEl: HTMLDivElement;\n  /**\n   * The player black cover div.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _blackCoverEl: HTMLDivElement;\n  /**\n   * The player DOM id.\n   * @type {string}\n   * @private\n   */\n  _playerId: string;\n  /**\n   * The player last updated text cues list\n   * @type {Array<any>}\n   * @private\n   */\n  _activeTextCues: Array<any> = [];\n  /**\n   * The player text disaply settings\n   * @type {Object}\n   * @private\n   */\n  _textDisplaySettings: Object = {};\n  /**\n   * The player text style settings\n   * @type {TextStyle}\n   * @private\n   */\n  _textStyle: TextStyle;\n  /**\n   * The playback middleware of the player.\n   * @type {PlaybackMiddleware}\n   * @private\n   */\n  _playbackMiddleware: PlaybackMiddleware;\n  /**\n   * The environment(os,device,browser) object of the player.\n   * @type {Object}\n   * @private\n   */\n  _env: Object;\n  /**\n   * The currently selected engine type\n   * @type {string}\n   * @private\n   */\n  _engineType: string;\n  /**\n   * The currently selected stream type\n   * @type {string}\n   * @private\n   */\n  _streamType: string;\n  /**\n   * The current playback attributes state\n   * @type {Object}\n   * @private\n   */\n  _playbackAttributesState: { [attribute: string]: any } = {\n    muted: undefined,\n    volume: undefined,\n    rate: undefined,\n    audioLanguage: \"\",\n    textLanguage: \"\"\n  };\n  /**\n   * Fullscreen indicator flag\n   * @private\n   */\n  _fullscreen: boolean;\n  /**\n   * holds false or an id for the timeout the reposition the text cues after togelling full screen\n   * @type {any}\n   * @private\n   */\n  _repositionCuesTimeout: any;\n  /**\n   * Whether a load media request has sent, the player should wait to media.\n   * @type {boolean}\n   * @private\n   */\n  _loadingMedia: boolean;\n  /**\n   * Whether the player is loading a source.\n   * @type {boolean}\n   * @private\n   */\n  _loading: boolean;\n  /**\n   * Reset indicator state.\n   * @type {boolean}\n   * @private\n   */\n  _reset: boolean;\n  /**\n   * Destroyed indicator state.\n   * @type {boolean}\n   * @private\n   */\n  _destroyed: boolean;\n  /**\n   * Fallback to muted auto play mode indicator.\n   * @type {boolean}\n   * @private\n   */\n  _fallbackToMutedAutoPlay: boolean;\n  /**\n   * holds the external tracks handler controller\n   * @type {ExternalCaptionsHandler}\n   * @private\n   */\n  _externalCaptionsHandler: ExternalCaptionsHandler;\n\n  /**\n   * @param {Object} config - The configuration for the player instance.\n   * @constructor\n   */\n  constructor(config: Object = {}) {\n    super();\n    this._env = Env;\n    this._tracks = [];\n    this._firstPlay = true;\n    this._fullscreen = false;\n    this._repositionCuesTimeout = false;\n    this._loadingMedia = false;\n    this._loading = false;\n    this._playbackStarted = false;\n    this._reset = true;\n    this._destroyed = false;\n    this._fallbackToMutedAutoPlay = false;\n    this._config = Player._defaultConfig;\n    this._eventManager = new EventManager();\n    this._posterManager = new PosterManager();\n    this._stateManager = new StateManager(this);\n    this._pluginManager = new PluginManager();\n    this._playbackMiddleware = new PlaybackMiddleware();\n    this._textStyle = new TextStyle();\n    this._createReadyPromise();\n    this._createPlayerContainer();\n    this._appendDomElements();\n    this._externalCaptionsHandler = new ExternalCaptionsHandler(this);\n    this.configure(config);\n  }\n\n  // <editor-fold desc=\"Public API\">\n\n  // <editor-fold desc=\"Playback API\">\n\n  /**\n   * Configures the player according to a given configuration.\n   * @param {Object} config - The configuration for the player instance.\n   * @returns {void}\n   */\n  configure(config: Object = {}): void {\n    if (config.logLevel && LogLevel[config.logLevel]) {\n      setLogLevel(LogLevel[config.logLevel]);\n    }\n    if (this._hasSources(config.sources)) {\n      this._configureOrLoadPlugins(config.plugins);\n      const receivedSourcesWhenHasEngine: boolean = !!this._engine;\n      if (receivedSourcesWhenHasEngine) {\n        this.reset();\n        Player._logger.debug('Change source started');\n        this.dispatchEvent(new FakeEvent(CustomEventType.CHANGE_SOURCE_STARTED));\n      }\n      Utils.Object.mergeDeep(this._config, config);\n      this._reset = false;\n      if (this._selectEngineByPriority()) {\n        this._appendEngineEl();\n        this._attachMedia();\n        this._handlePlaybackOptions();\n        this._posterManager.setSrc(this._config.sources.poster);\n        this._handlePreload();\n        this._handleAutoPlay();\n        if (receivedSourcesWhenHasEngine) {\n          Player._logger.debug('Change source ended');\n          this.dispatchEvent(new FakeEvent(CustomEventType.CHANGE_SOURCE_ENDED));\n        }\n      }\n    } else {\n      Utils.Object.mergeDeep(this._config, config);\n      this._configureOrLoadPlugins(config.plugins);\n    }\n  }\n\n  /**\n   * The player readiness\n   * @public\n   * @returns {Promise<*>} - The ready promise\n   */\n  ready(): Promise<*> {\n    return this._readyPromise ? this._readyPromise : Promise.resolve();\n  }\n\n  /**\n   * Load media\n   * @public\n   * @returns {void}\n   */\n  load(): void {\n    const resetFlags = () => {\n      this._loading = false;\n      this._reset = false;\n    };\n    if (this._engine && !this.src && !this._loading) {\n      this._loading = true;\n      let startTime = this._config.playback.startTime;\n      this._engine.load(startTime).then((data) => {\n        this._updateTracks(data.tracks);\n        this._maybeSetTracksLabels();\n        this._setDefaultTracks();\n        this.dispatchEvent(new FakeEvent(CustomEventType.TRACKS_CHANGED, {tracks: this._tracks}));\n        resetFlags();\n      }).catch(error => {\n        this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, error));\n        resetFlags();\n      });\n    }\n  }\n\n  /**\n   * Checks for callbacks that should change the tracks, and call them on the\n   * respective track group (audio/text/video)\n   * @private\n   * @returns {void}\n   */\n  _maybeSetTracksLabels() {\n    const customLabels = this._config.customLabels;\n    if (customLabels) {\n      for (let callbackType in customLabels) {\n        this._setTracksCustomLabels(this._getTracksByType(LabelToTrackMap[callbackType]), customLabels[callbackType]);\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {Array<Track>} tracks - tracks\n   * @param {Function} callback - application label callback, returns a string\n   * @private\n   * @returns {void}\n   */\n  _setTracksCustomLabels(tracks: Array<Track>, callback: Function) {\n    tracks.forEach(track => {\n      const result = callback(Utils.Object.copyDeep(track));\n      if (result) {\n        track.label = result;\n      }\n    })\n  }\n\n  /**\n   * Start/resume playback.\n   * @returns {void}\n   * @public\n   */\n  play(): void {\n    if (this._engine) {\n      this._playbackMiddleware.play(() => this._play());\n    } else if (this._loadingMedia) {\n      // load media requested but the response is delayed\n      Player._prepareVideoElement();\n      this._playbackMiddleware.play(() => this._playAfterAsyncMiddleware());\n    } else {\n      this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, new PKError(PKError.Severity.CRITICAL, PKError.Category.PLAYER, PKError.Code.NO_SOURCE_PROVIDED, \"No Source Provided\")));\n    }\n  }\n\n  /**\n   * Pause playback.\n   * @returns {void}\n   * @public\n   */\n  pause(): void {\n    if (this._engine) {\n      this._playbackMiddleware.pause(this._pause.bind(this));\n    }\n  }\n\n  /**\n   * Gets the view of the player (i.e the dom container object).\n   * @return {HTMLElement} - The dom container.\n   * @public\n   */\n  getView(): HTMLElement {\n    return this._el;\n  }\n\n  /**\n   * @returns {HTMLVideoElement} - The video element.\n   * @public\n   */\n  getVideoElement(): ?HTMLVideoElement {\n    if (this._engine) {\n      return this._engine.getVideoElement();\n    }\n  }\n\n  /**\n   * Resets the necessary components before change media.\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    if (this._reset) return;\n    this.pause();\n    this._config.sources = {};\n    this._eventManager.removeAll();\n    this._createReadyPromise();\n    this._activeTextCues = [];\n    this._updateTextDisplay([]);\n    this._tracks = [];\n    this._resetStateFlags();\n    this._engineType = '';\n    this._streamType = '';\n    this._posterManager.reset();\n    this._stateManager.reset();\n    this._pluginManager.reset();\n    this._externalCaptionsHandler.reset();\n    this._engine.reset();\n    this._showBlackCover();\n    this._reset = true;\n    this.dispatchEvent(new FakeEvent(CustomEventType.PLAYER_RESET));\n  }\n\n  /**\n   * Destroys the player.\n   * @returns {void}\n   * @public\n   */\n  destroy(): void {\n    if (this._destroyed) return;\n    if (this._engine) {\n      this._engine.destroy();\n    }\n    this._externalCaptionsHandler.destroy();\n    this._posterManager.destroy();\n    this._eventManager.destroy();\n    this._pluginManager.destroy();\n    this._stateManager.destroy();\n    this._activeTextCues = [];\n    this._textDisplaySettings = {};\n    this._config = {};\n    this._tracks = [];\n    this._engineType = '';\n    this._streamType = '';\n    this._readyPromise = null;\n    this._resetStateFlags();\n    this._playbackAttributesState = {};\n    if (this._el) {\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n    this._destroyed = true;\n    this.dispatchEvent(new FakeEvent(CustomEventType.PLAYER_DESTROY));\n  }\n\n  /**\n   * Get the first buffered range of the engine.\n   * @returns {TimeRanges} - First buffered range of the engine in seconds.\n   * @public\n   */\n  get buffered(): ?TimeRanges {\n    if (this._engine) {\n      return this._engine.buffered;\n    }\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   */\n  set currentTime(to: number): void {\n    if (this._engine) {\n      if (Utils.Number.isNumber(to)) {\n        let boundedTo = to;\n        if (to < 0) {\n          boundedTo = 0;\n        }\n        if (boundedTo > this._engine.duration - DURATION_OFFSET) {\n          boundedTo = this._engine.duration - DURATION_OFFSET;\n        }\n        this._engine.currentTime = boundedTo;\n      }\n    }\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {?Number} - The playback current time.\n   * @public\n   */\n  get currentTime(): ?number {\n    if (this._engine) {\n      return this._engine.currentTime;\n    }\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {?Number} - The playback duration.\n   * @public\n   */\n  get duration(): ?number {\n    if (this._engine) {\n      return this._engine.duration;\n    }\n  }\n\n  /**\n   * Set playback volume.\n   * @param {Number} vol - The volume to set.\n   * @returns {void}\n   * @public\n   */\n  set volume(vol: number): void {\n    if (this._engine) {\n      if (Utils.Number.isFloat(vol) || (vol === 0) || (vol === 1)) {\n        let boundedVol = vol;\n        if (boundedVol < 0) {\n          boundedVol = 0;\n        }\n        if (boundedVol > 1) {\n          boundedVol = 1;\n        }\n        this._engine.volume = boundedVol;\n      }\n    }\n  }\n\n  /**\n   * Get playback volume.\n   * @returns {?Number} - The playback volume.\n   * @public\n   */\n  get volume(): ?number {\n    if (this._engine) {\n      return this._engine.volume;\n    }\n  }\n\n  /**\n   * Get paused state.\n   * @returns {?boolean} - Whether the video is paused or not.\n   * @public\n   */\n  get paused(): ?boolean {\n    if (this._engine) {\n      return this._engine.paused;\n    }\n  }\n\n  /**\n   * Get seeking state.\n   * @returns {?boolean} - Whether the video is seeking or not.\n   * @public\n   */\n  get seeking(): ?boolean {\n    if (this._engine) {\n      return this._engine.seeking;\n    }\n  }\n\n  /**\n   * Set playsinline attribute.\n   * Relevant for iOS 10 and up:\n   * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n   * @param {boolean} playsinline - Whether the video should plays in line.\n   */\n  set playsinline(playsinline: boolean): void {\n    if (this._engine) {\n      this._engine.playsinline = playsinline;\n    }\n  }\n\n  /**\n   * Get playsinline attribute.\n   * Relevant for iOS 10 and up:\n   * Elements will now be allowed to play inline, and will not automatically enter fullscreen mode when playback begins.\n   * @returns {boolean} - Whether the video plays in line.\n   */\n  get playsinline(): ?boolean {\n    if (this._engine) {\n      return this._engine.playsinline;\n    }\n  }\n\n  /**\n   * Set player muted state.\n   * @param {boolean} mute - The mute value.\n   * @returns {void}\n   * @public\n   */\n  set muted(mute: boolean): void {\n    if (this._engine) {\n      this._engine.muted = mute;\n      this.dispatchEvent(new FakeEvent(CustomEventType.MUTE_CHANGE, {mute: mute}));\n      if (mute === false) {\n        this._fallbackToMutedAutoPlay = mute;\n      }\n    }\n  }\n\n  /**\n   * Get player muted state.\n   * @returns {?boolean} - Whether the video is muted or not.\n   * @public\n   */\n  get muted(): ?boolean {\n    if (this._engine) {\n      return this._engine.muted;\n    }\n  }\n\n  /**\n   * Get the player source.\n   * @returns {?string} - The current source of the player.\n   * @public\n   */\n  get src(): ?string {\n    if (this._engine) {\n      return this._engine.src;\n    }\n  }\n\n  /**\n   * Get the dimensions of the player.\n   * @returns {{width: number, height: number}} - The dimensions of the player.\n   * @public\n   */\n  get dimensions(): Object {\n    return {\n      width: this._el.clientWidth,\n      height: this._el.clientHeight\n    };\n  }\n\n  /**\n   * Get the poster source URL\n   * @returns {string} - the poster image URL\n   */\n  get poster(): string {\n    return this._posterManager.src;\n  }\n\n  /**\n   * Sets the playbackRate property.\n   * @param {number} rate - The playback speed of the video.\n   */\n  set playbackRate(rate: number): void {\n    if (this._engine) {\n      this._engine.playbackRate = rate;\n    }\n  }\n\n  /**\n   * Gets the current playback speed of the video.\n   * @returns {number} - The current playback speed of the video.\n   */\n  get playbackRate(): ?number {\n    if (this._engine) {\n      return this._engine.playbackRate;\n    }\n  }\n\n  /**\n   * Gets the possible playback speeds of the video.\n   * @returns {Array<number>} - The possible playback speeds speed of the video.\n   */\n  get playbackRates(): Array<number> {\n    return PLAYBACK_RATES;\n  }\n\n  /**\n   * Gets the default playback speed of the video.\n   * @returns {number} - The default playback speed of the video.\n   */\n  get defaultPlaybackRate(): number {\n    return DEFAULT_PLAYBACK_RATE;\n  }\n\n  /**\n   * get the engine type\n   * @returns {string} - html5\n   */\n  get engineType(): ?string {\n    return this._engineType;\n  }\n\n  /**\n   * get the stream type\n   * @returns {string} - hls|dash|progressive\n   */\n  get streamType(): ?string {\n    return this._streamType;\n  }\n\n  /**\n   * Getter for the environment of the player instance.\n   * @return {Object} - The current environment object.\n   * @public\n   */\n  get env(): Object {\n    return this._env;\n  }\n\n  /**\n   * Get the player config.\n   * @returns {Object} - A copy of the player configuration.\n   * @public\n   */\n  get config(): Object {\n    return Utils.Object.mergeDeep({}, this._config);\n  }\n\n  /**\n   * Set the _loadingMedia flag to inform the player that a load media request has sent.\n   * @param {boolean} loading - Whether a load media request has sent.\n   * @returns {void}\n   * @public\n   */\n  set loadingMedia(loading: boolean): void {\n    this._loadingMedia = loading;\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Live API\">\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return !!(this._config.sources.type === MediaType.LIVE || (this._engine && this._engine.isLive()));\n  }\n\n  /**\n   * Checking if the current live playback has DVR window.\n   * @function isDvr\n   * @returns {boolean} - Whether live playback has DVR window.\n   * @public\n   */\n  isDvr(): boolean {\n    return this.isLive() && this._config.sources.dvr;\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    if (this._engine && this.isLive()) {\n      this._engine.seekToLiveEdge();\n    }\n  }\n\n  /**\n   * Get the start time of DVR window in live playback in seconds.\n   * @returns {Number} - start time of DVR window.\n   * @public\n   */\n  getStartTimeOfDvrWindow(): number {\n    return this._engine ? this._engine.getStartTimeOfDvrWindow() : 0;\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Tracks API\">\n\n  /**\n   * Returns the tracks according to the filter. if no filter given returns the all tracks.\n   * @function getTracks\n   * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n   * @returns {Array<Track>} - The parsed tracks.\n   * @public\n   */\n  getTracks(type?: string): Array<Track> {\n    return Utils.Object.copyDeep(this._getTracksByType(type));\n  }\n\n  /**\n   * Get an object includes the active video/audio/text tracks\n   * @return {{video: VideoTrack, audio: AudioTrack, text: TextTrack}} - The active tracks object\n   */\n  getActiveTracks(): Object {\n    return Utils.Object.copyDeep({\n      video: this._getTracksByType(TrackType.VIDEO).find(track => track.active),\n      audio: this._getTracksByType(TrackType.AUDIO).find(track => track.active),\n      text: this._getTracksByType(TrackType.TEXT).find(track => track.active),\n    });\n  }\n\n  /**\n   * Select a track\n   * @function selectTrack\n   * @param {?Track} track - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectTrack(track: ?Track): void {\n    if (this._engine) {\n      if (track instanceof VideoTrack) {\n        this._engine.selectVideoTrack(track);\n      } else if (track instanceof AudioTrack) {\n        this._engine.selectAudioTrack(track);\n      } else if (track instanceof TextTrack) {\n        if (track.language === OFF) {\n          this.hideTextTrack();\n          this._externalCaptionsHandler.hideTextTrack();\n          this._playbackAttributesState.textLanguage = OFF;\n        } else if (track.external && !this._config.playback.useNativeTextTrack) {\n          this._engine.hideTextTrack();\n          this._externalCaptionsHandler.selectTextTrack(track);\n        } else {\n          this._externalCaptionsHandler.hideTextTrack();\n          this._engine.selectTextTrack(track);\n        }\n      }\n    }\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    if (this._engine) {\n      this._engine.hideTextTrack();\n      this._activeTextCues = [];\n      this._updateTextDisplay([]);\n      const textTracks = this._getTracksByType(TrackType.TEXT);\n      textTracks.map(track => track.active = false);\n      const textTrack = textTracks.find(track => track.language === OFF);\n      if (textTrack) {\n        textTrack.active = true;\n        this._maybeDispatchTracksChanged(new FakeEvent(CustomEventType.TEXT_TRACK_CHANGED, {selectedTextTrack: textTrack}));\n      }\n    }\n  }\n\n  /**\n   * Enables adaptive bitrate switching.\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    if (this._engine) {\n      this._engine.enableAdaptiveBitrate();\n    }\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    if (this._engine) {\n      return this._engine.isAdaptiveBitrateEnabled();\n    }\n    return false;\n  }\n\n  /**\n   * update the text display settings\n   * @param {Object} settings - text cue display settings\n   * @public\n   * @returns {void}\n   */\n  setTextDisplaySettings(settings: Object): void {\n    this._textDisplaySettings = settings;\n    this._updateCueDisplaySettings();\n    for (let i = 0; i < this._activeTextCues.length; i++) {\n      this._activeTextCues[i].hasBeenReset = true;\n    }\n    this._updateTextDisplay(this._activeTextCues);\n  }\n\n  /**\n   * Sets style attributes for text tracks.\n   * @param {TextStyle} style - text styling settings\n   * @returns {void}\n   */\n  set textStyle(style: TextStyle): void {\n    if (!(style instanceof TextStyle)) {\n      throw new Error(\"Style must be instance of TextStyle\");\n    }\n    let element = Utils.Dom.getElementById(SUBTITLES_STYLE_ID_NAME);\n    if (!element) {\n      element = Utils.Dom.createElement('style');\n      Utils.Dom.setAttribute(element, 'id', SUBTITLES_STYLE_ID_NAME);\n      Utils.Dom.appendChild(document.head, element);\n    }\n    let sheet = element.sheet;\n\n    while (sheet.cssRules.length) {\n      sheet.deleteRule(0);\n    }\n\n    try {\n      if (this._config.playback.useNativeTextTrack) {\n        sheet.insertRule(`video.${ENGINE_CLASS_NAME}::cue { ${style.toCSS()} }`, 0);\n      } else {\n        sheet.insertRule(`#${this._playerId} .${SUBTITLES_CLASS_NAME} > div > div > div { ${style.toCSS()} }`, 0);\n      }\n      this._textStyle = style;\n      this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_STYLE_CHANGED));\n    } catch (e) {\n      Player._logger.error(e.message);\n    }\n  }\n\n  /**\n   * Gets style attributes for text tracks.\n   * @returns {?TextStyle} - the current style attribute\n   */\n  get textStyle(): ?TextStyle {\n    return this._textStyle.clone();\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Ads API\">\n\n  /**\n   * Skip on an ad.\n   * @public\n   * @returns {void}\n   */\n  skipAd(): void {\n    let adsPlugin: ?BasePlugin = this._pluginManager.get('ima');\n    if (adsPlugin && typeof adsPlugin.skipAd === 'function') {\n      adsPlugin.skipAd();\n    }\n  }\n\n  /**\n   * Start to play ad on demand.\n   * @param {string} adTagUrl - The ad tag url to play.\n   * @public\n   * @returns {void}\n   */\n  playAdNow(adTagUrl: string): void {\n    let adsPlugin: ?BasePlugin = this._pluginManager.get('ima');\n    if (adsPlugin && typeof adsPlugin.playAdNow === 'function') {\n      adsPlugin.playAdNow(adTagUrl);\n    }\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Fullscreen API\">\n\n  /**\n   * @returns {boolean} - Whether the player is in fullscreen mode.\n   * @public\n   */\n  isFullscreen(): boolean {\n    return this._fullscreen;\n  }\n\n  /**\n   * Notify the player that the ui application entered to fullscreen.\n   * @public\n   * @returns {void}\n   */\n  notifyEnterFullscreen(): void {\n    if (!this._fullscreen) {\n      this._fullscreen = true;\n      this.dispatchEvent(new FakeEvent(CustomEventType.ENTER_FULLSCREEN));\n    }\n  }\n\n  /**\n   * Notify the player that the ui application exited from fullscreen.\n   * @public\n   * @returns {void}\n   */\n  notifyExitFullscreen(): void {\n    if (this._fullscreen) {\n      this._fullscreen = false;\n      this.dispatchEvent(new FakeEvent(CustomEventType.EXIT_FULLSCREEN));\n    }\n  }\n\n  /**\n   * Request the player to enter fullscreen.\n   * @public\n   * @returns {void}\n   */\n  enterFullscreen(): void {\n    if (!this._fullscreen) {\n      this.dispatchEvent(new FakeEvent(CustomEventType.REQUESTED_ENTER_FULLSCREEN));\n    }\n  }\n\n  /**\n   * Request the player to exit fullscreen.\n   * @public\n   * @returns {void}\n   */\n  exitFullscreen(): void {\n    if (this._fullscreen) {\n      this.dispatchEvent(new FakeEvent(CustomEventType.REQUESTED_EXIT_FULLSCREEN));\n    }\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"VR API\">\n\n  /**\n   * Checking if the selected source is VR.\n   * @returns {boolean} - Whether is VR.\n   * @public\n   */\n  isVr(): boolean {\n    return !!(this._config.sources.vr);\n  }\n\n  /**\n   * Toggling the VR mode\n   * @returns {void}\n   * @public\n   */\n  toggleVrStereoMode(): void {\n    const vrPlugin: ?BasePlugin = this._pluginManager.get('vr');\n    if (vrPlugin && typeof vrPlugin.toggleVrStereoMode === 'function') {\n      vrPlugin.toggleVrStereoMode();\n    }\n  }\n\n  /**\n   * Checking if the VR stereo mode is active.\n   * @returns {boolean} - Whether is active.\n   * @public\n   */\n  isInVrStereoMode(): boolean {\n    const vrPlugin: ?BasePlugin = this._pluginManager.get('vr');\n    if (vrPlugin && typeof vrPlugin.isInStereoMode === 'function') {\n      return vrPlugin.isInStereoMode();\n    }\n    return false;\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Logger API\">\n\n  /**\n   * get the log level\n   * @param {?string} name - the logger name\n   * @returns {Object} - the log level\n   */\n  getLogLevel(name?: string): Object {\n    return getLogLevel(name);\n  }\n\n  /**\n   * sets the logger level\n   * @param {Object} level - the log level\n   * @param {?string} name - the logger name\n   * @returns {void}\n   */\n  setLogLevel(level: Object, name?: string) {\n    setLogLevel(level, name);\n  }\n\n  // </editor-fold>\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Private Methods\">\n\n  // <editor-fold desc=\"Playback\">\n\n  /**\n   * Check if sources has been received.\n   * @param {Object} sources - sources config object.\n   * @returns {boolean} - Whether sources has been received to the player.\n   * @private\n   */\n  _hasSources(sources: Object): boolean {\n    if (sources) {\n      return !!(Object.values(StreamType).find(type => (sources[type] && sources[type].length > 0)));\n    }\n    return false;\n  }\n\n  /**\n   * Creates the player container.\n   * @private\n   * @returns {void}\n   */\n  _createPlayerContainer(): void {\n    const el = this._el = Utils.Dom.createElement(\"div\");\n    Utils.Dom.addClassName(el, CONTAINER_CLASS_NAME);\n    this._playerId = Utils.Generator.uniqueId(5);\n    Utils.Dom.setAttribute(el, \"id\", this._playerId);\n    Utils.Dom.setAttribute(el, \"tabindex\", '-1');\n  }\n\n  /**\n   * Appends the engine's video element to the player's div container.\n   * @private\n   * @returns {void}\n   */\n  _appendEngineEl(): void {\n    if (this._el && this._engine) {\n      let engineEl = this._engine.getVideoElement();\n      const classname = `${ENGINE_CLASS_NAME}`;\n      Utils.Dom.addClassName(engineEl, classname);\n      const classnameWithId = `${ENGINE_CLASS_NAME}-${this._engine.id}`;\n      Utils.Dom.addClassName(engineEl, classnameWithId);\n      Utils.Dom.prependTo(engineEl, this._el);\n    }\n  }\n\n  /**\n   * Appends DOM elements by the following priority:\n   * 1. poster (strongest)\n   * 2. black screen\n   * 3. subtitles (weakest)\n   * @private\n   * @returns {void}\n   */\n  _appendDomElements(): void {\n    // Append playkit-subtitles\n    this._textDisplayEl = Utils.Dom.createElement(\"div\");\n    Utils.Dom.addClassName(this._textDisplayEl, SUBTITLES_CLASS_NAME);\n    Utils.Dom.appendChild(this._el, this._textDisplayEl);\n    // Append playkit-black-cover\n    this._blackCoverEl = Utils.Dom.createElement(\"div\");\n    Utils.Dom.addClassName(this._blackCoverEl, BLACK_COVER_CLASS_NAME);\n    Utils.Dom.appendChild(this._el, this._blackCoverEl);\n    // Append playkit-poster\n    const el = this._posterManager.getElement();\n    Utils.Dom.addClassName(el, POSTER_CLASS_NAME);\n    Utils.Dom.appendChild(this._el, el);\n  }\n\n  /**\n   * Configures or load the plugins defined in the configuration.\n   * @param {Object} plugins - The new received plugins configuration.\n   * @private\n   * @returns {void}\n   */\n  _configureOrLoadPlugins(plugins: Object = {}): void {\n    if (plugins) {\n      Object.keys(plugins).forEach((name) => {\n        // If the plugin is already exists in the registry we are updating his config\n        const plugin = this._pluginManager.get(name);\n        if (plugin) {\n          plugin.updateConfig(plugins[name]);\n          this._config.plugins[name] = plugin.getConfig();\n        } else {\n          // We allow to load plugins as long as the player has no engine\n          if (!this._engine) {\n            try {\n              this._pluginManager.load(name, this, plugins[name]);\n            } catch (e) {\n              //bounce the plugin load error up\n              this.dispatchEvent(e);\n            }\n            let plugin = this._pluginManager.get(name);\n            if (plugin) {\n              this._config.plugins[name] = plugin.getConfig();\n              if (typeof plugin.getMiddlewareImpl === \"function\") {\n                this._playbackMiddleware.use(plugin.getMiddlewareImpl());\n              }\n            }\n          } else {\n            delete this._config.plugins[name];\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Creates the ready promise.\n   * @private\n   * @returns {void}\n   */\n  _createReadyPromise(): void {\n    this._readyPromise = new Promise((resolve, reject) => {\n      this._eventManager.listenOnce(this, CustomEventType.TRACKS_CHANGED, () => {\n        this.dispatchEvent(new FakeEvent(CustomEventType.MEDIA_LOADED));\n        resolve();\n      });\n      this._eventManager.listen(this, Html5EventType.ERROR, reject);\n    }).catch(() => {\n      // silence the promise rejection, error is handled by the error event\n    });\n  }\n\n  /**\n   * Selects an engine to play a source according to a given stream priority.\n   * @return {boolean} - Whether a proper engine was found to play the given sources\n   * according to the priority.\n   * @private\n   */\n  _selectEngineByPriority(): boolean {\n    const streamPriority = this._config.playback.streamPriority;\n    const preferNative = this._config.playback.preferNative;\n    const sources = this._config.sources;\n    for (let priority of streamPriority) {\n      const engineId = (typeof priority.engine === 'string') ? priority.engine.toLowerCase() : '';\n      const format = (typeof priority.format === 'string') ? priority.format.toLowerCase() : '';\n      const Engine = Player._engines.find((Engine) => Engine.id === engineId);\n      if (Engine) {\n        const formatSources = sources[format];\n        if (formatSources && formatSources.length > 0) {\n          const source = formatSources[0];\n          if (Engine.canPlaySource(source, preferNative[format])) {\n            Player._logger.debug('Source selected: ', formatSources);\n            this._loadEngine(Engine, source);\n            this._engineType = engineId;\n            this._streamType = format;\n            this.dispatchEvent(new FakeEvent(CustomEventType.SOURCE_SELECTED, {selectedSource: formatSources}));\n            return true;\n          }\n        }\n      }\n    }\n    Player._logger.warn(\"No playable engines was found to play the given sources\");\n    return false;\n  }\n\n  /**\n   * Loads the selected engine.\n   * @param {IEngine} Engine - The selected engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @private\n   * @returns {void}\n   */\n  _loadEngine(Engine: typeof IEngine, source: PKMediaSourceObject) {\n    if (this._engine) {\n      if (this._engine.id === Engine.id) {\n        this._engine.restore(source, this._config);\n      } else {\n        this._engine.destroy();\n        this._engine = Engine.createEngine(source, this._config);\n      }\n    } else {\n      this._engine = Engine.createEngine(source, this._config);\n    }\n  }\n\n  /**\n   * Listen to all HTML5 defined events and trigger them on the player\n   * @private\n   * @returns {void}\n   */\n  _attachMedia(): void {\n    if (this._engine) {\n      Object.keys(Html5EventType).forEach((html5Event) => {\n        this._eventManager.listen(this._engine, Html5EventType[html5Event], (event: FakeEvent) => {\n          return this.dispatchEvent(event);\n        });\n      });\n      this._eventManager.listen(this._engine, Html5EventType.SEEKED, () => {\n        const browser = this._env.browser.name;\n        if (browser === 'Edge' || browser === 'IE') {\n          this._removeTextCuePatch();\n        }\n      });\n      this._eventManager.listen(this._engine, CustomEventType.VIDEO_TRACK_CHANGED, (event: FakeEvent) => {\n        this._markActiveTrack(event.payload.selectedVideoTrack);\n        return this.dispatchEvent(event);\n      });\n      this._eventManager.listen(this._engine, CustomEventType.AUDIO_TRACK_CHANGED, (event: FakeEvent) => {\n        this.ready().then(() => this._playbackAttributesState.audioLanguage = event.payload.selectedAudioTrack.language);\n        this._markActiveTrack(event.payload.selectedAudioTrack);\n        this._maybeDispatchTracksChanged(event);\n      });\n      this._eventManager.listen(this._engine, CustomEventType.TEXT_TRACK_CHANGED, (event: FakeEvent) => this._onTextTrackChanged(event));\n      this._eventManager.listen(this._engine, CustomEventType.TRACKS_CHANGED, (event: FakeEvent) => this._onTracksChanged(event));\n      this._eventManager.listen(this._engine, CustomEventType.TEXT_CUE_CHANGED, (event: FakeEvent) => this._onCueChange(event));\n      this._eventManager.listen(this._engine, CustomEventType.ABR_MODE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._engine, CustomEventType.AUTOPLAY_FAILED, (event: FakeEvent) => {\n        this.pause();\n        this.dispatchEvent(event)\n      });\n      this._eventManager.listen(this, Html5EventType.PLAY, this._onPlay.bind(this));\n      this._eventManager.listen(this, Html5EventType.PLAYING, this._onPlaying.bind(this));\n      this._eventManager.listen(this, Html5EventType.ENDED, this._onEnded.bind(this));\n      this._eventManager.listen(this, CustomEventType.MUTE_CHANGE, () => {\n        this._playbackAttributesState.muted = this.muted;\n      });\n      this._eventManager.listen(this, Html5EventType.VOLUME_CHANGE, () => {\n        this._playbackAttributesState.volume = this.volume;\n      });\n      this._eventManager.listen(this, Html5EventType.RATE_CHANGE, () => {\n        this._playbackAttributesState.rate = this.playbackRate;\n      });\n      this._eventManager.listen(this, CustomEventType.ENTER_FULLSCREEN, () => {\n        this._resetTextCuesAndReposition();\n      });\n      this._eventManager.listen(this, CustomEventType.EXIT_FULLSCREEN, () => {\n        this._resetTextCuesAndReposition();\n      });\n      this._eventManager.listen(this._engine, CustomEventType.MEDIA_RECOVERED, () => {\n        this._handleRecovered();\n      });\n      this._eventManager.listen(this._externalCaptionsHandler, CustomEventType.TEXT_CUE_CHANGED, (event: FakeEvent) => this._onCueChange(event));\n      this._eventManager.listen(this._externalCaptionsHandler, CustomEventType.TEXT_TRACK_CHANGED, (event: FakeEvent) => this._onTextTrackChanged(event));\n      this._eventManager.listen(this._externalCaptionsHandler, ExternalCaptionsEventType.NATIVE_TEXT_TRACK_ADDED, () => {\n        const getNativeLanguageTrackIndex = (textTrack: Track): number => {\n          const videoElement = this.getVideoElement();\n          return videoElement ? Array.from(videoElement.textTracks).findIndex(track => track ? track.language === textTrack.language : false) : -1;\n        };\n        this._getTracksByType(TrackType.TEXT).forEach(track => track.index = getNativeLanguageTrackIndex(track));\n      });\n    }\n  }\n\n  /**\n   * Dispatches track changed event only if we already started playing.\n   * also dispatch text track changed if it's an external text track. this is done on cases this is the default text\n   * track, and it is loaded and changed when the player is loaded.\n   * @param {FakeEvent} e - The track changed event.\n   * @private\n   * @returns {void}\n   */\n  _maybeDispatchTracksChanged(e: FakeEvent): void {\n    if (this._config.playback.useNativeTextTrack) {\n      this._externalCaptionsHandler.selectTextTrack(e.payload.selectedTextTrack);\n    }\n    if (this._playbackStarted) {\n      this.dispatchEvent(e);\n    }\n  }\n\n  /**\n   * if the media was recovered (after a media failure) then initiate play again (if that was the state before)\n   * @returns {void}\n   * @private\n   */\n  _handleRecovered(): void {\n    if (this._stateManager.currentState.type === StateType.PLAYING) {\n      this.play();\n    }\n  }\n\n  /**\n   * The text track changed event object\n   * @param {FakeEvent} event - payload with text track\n   * @returns {void}\n   * @private\n   */\n  _onTextTrackChanged(event: FakeEvent): void {\n    this.ready().then(() => this._playbackAttributesState.textLanguage = event.payload.selectedTextTrack.language);\n    this._markActiveTrack(event.payload.selectedTextTrack);\n    this._maybeDispatchTracksChanged(event);\n  }\n\n  /**\n   * Reset the active cues hasBeenReset = true and then reposition it, timeout here is for the screen to\n   * finish render the fullscreen\n   * @returns {void}\n   * @private\n   */\n  _resetTextCuesAndReposition(): void {\n    this._updateTextDisplay([]);\n    for (let i = 0; i < this._activeTextCues.length; i++) {\n      this._activeTextCues[i].hasBeenReset = true;\n    }\n    // handling only the last reposition\n    if (this._repositionCuesTimeout) {\n      clearTimeout(this._repositionCuesTimeout);\n    }\n    this._repositionCuesTimeout = setTimeout(() => {\n      processCues(window, this._activeTextCues, this._textDisplayEl);\n      this._repositionCuesTimeout = false;\n    }, REPOSITION_CUES_TIMEOUT);\n  }\n\n  /**\n   * Handles the cue text removal issue, when seeking to a time without captions in IE \\ edge the previous captions\n   * are not removed\n   * @returns {void}\n   * @private\n   */\n  _removeTextCuePatch(): void {\n    let filteredActiveTextCues = this._activeTextCues.filter((textCue) => {\n      const cueEndTime = textCue._endTime;\n      const cueStartTime = textCue._startTime;\n      const currTime = this.currentTime;\n      if (currTime < cueEndTime && currTime > cueStartTime) {\n        return textCue;\n      }\n    });\n    this._updateTextDisplay(filteredActiveTextCues);\n  }\n\n  /**\n   * Handles the playback options, from current state or config.\n   * @returns {void}\n   * @private\n   */\n  _handlePlaybackOptions(): void {\n    this._config.playback = this._config.playback || {};\n    if (typeof this._playbackAttributesState.muted === 'boolean') {\n      this.muted = this._playbackAttributesState.muted;\n    } else if (typeof this._config.playback.muted === 'boolean') {\n      this.muted = this._config.playback.muted;\n    }\n    if (typeof this._playbackAttributesState.volume === 'number') {\n      this.volume = this._playbackAttributesState.volume;\n    } else if (typeof this._config.playback.volume === 'number') {\n      this.volume = this._config.playback.volume;\n    }\n    if (typeof this._config.playback.playsinline === 'boolean') {\n      this.playsinline = this._config.playback.playsinline;\n    }\n  }\n\n  /**\n   * Handles preload.\n   * @returns {void}\n   * @private\n   */\n  _handlePreload(): void {\n    if (this._config.playback.preload === \"auto\" && !this._config.playback.autoplay && this._canPreload()) {\n      this.load();\n    }\n  }\n\n  /**\n   * If ads plugin enabled it's his responsibility to preload the content player.\n   * So to avoid loading the player twice which can cause errors on MSEs we are not\n   * calling load from the player.\n   * TODO: Change it to check the ads configuration when we will develop the ads manager.\n   * @returns {boolean} - Whether the player can perform preload.\n   * @private\n   */\n  _canPreload(): boolean {\n    return !this._config.plugins || (this._config.plugins && !this._config.plugins.ima ||\n      (this._config.plugins.ima && this._config.plugins.ima.disable));\n  }\n\n  /**\n   * Handles auto play.\n   * @returns {void}\n   * @private\n   */\n  _handleAutoPlay(): void {\n    if (this._config.playback.autoplay === true) {\n      const allowMutedAutoPlay = this._config.playback.allowMutedAutoPlay;\n      Player.getCapabilities(this.engineType)\n        .then((capabilities) => {\n          if (capabilities.autoplay) {\n            onAutoPlay();\n          } else {\n            if (capabilities.mutedAutoPlay) {\n              if (this.muted && !this._fallbackToMutedAutoPlay) {\n                onMutedAutoPlay();\n              } else if (allowMutedAutoPlay) {\n                onFallbackToMutedAutoPlay();\n              } else {\n                onAutoPlayFailed();\n              }\n            } else {\n              onAutoPlayFailed();\n            }\n          }\n        });\n    } else {\n      this._posterManager.show();\n    }\n\n    const onAutoPlay = () => {\n      Player._logger.debug(\"Start autoplay\");\n      // If the previous state was fallback to muted autoplay:\n      // unmute the player and clear the fallback state\n      if (this._fallbackToMutedAutoPlay) {\n        this._fallbackToMutedAutoPlay = false;\n        this.muted = false;\n      }\n      this.play();\n    };\n\n    const onMutedAutoPlay = () => {\n      Player._logger.debug(\"Start muted autoplay\");\n      this.play();\n    };\n\n    const onFallbackToMutedAutoPlay = () => {\n      Player._logger.debug(\"Fallback to muted autoplay\");\n      this._fallbackToMutedAutoPlay = true;\n      this.muted = true;\n      this.dispatchEvent(new FakeEvent(CustomEventType.FALLBACK_TO_MUTED_AUTOPLAY));\n      this.play();\n    };\n\n    const onAutoPlayFailed = () => {\n      Player._logger.warn(\"Autoplay failed, pause player\");\n      this._posterManager.show();\n      if (this._canPreload()) {\n        this.load();\n      }\n      this.ready().then(() => this.pause());\n      this.dispatchEvent(new FakeEvent(CustomEventType.AUTOPLAY_FAILED));\n    };\n  }\n\n  /**\n   * Play after async ads\n   * @private\n   * @returns {void}\n   */\n  _playAfterAsyncMiddleware(): void {\n    if (this._engine) {\n      this._play();\n    } else {\n      this._eventManager.listenOnce(this, CustomEventType.SOURCE_SELECTED, () => this._play());\n    }\n  }\n\n  /**\n   * Start/resume the engine playback.\n   * @private\n   * @returns {void}\n   */\n  _play(): void {\n    if (!this._engine.src) {\n      this.load();\n    }\n    this.ready().then(() => {\n      if (this.isLive() && !this.isDvr()) {\n        this.seekToLiveEdge();\n      }\n      this._engine.play();\n    }).catch((error) => {\n      this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, error));\n    });\n  }\n\n  /**\n   * Starts the engine pause.\n   * @private\n   * @returns {void}\n   */\n  _pause(): void {\n    this._engine.pause();\n  }\n\n  /**\n   * @function _onPlay\n   * @return {void}\n   * @private\n   */\n  _onPlay(): void {\n    if (this._firstPlay) {\n      this._firstPlay = false;\n      this.dispatchEvent(new FakeEvent(CustomEventType.FIRST_PLAY));\n      this._posterManager.hide();\n      this._hideBlackCover();\n      if (typeof this._playbackAttributesState.rate === 'number') {\n        this.playbackRate = this._playbackAttributesState.rate;\n      }\n    }\n  }\n\n  /**\n   * @function _onPlaying\n   * @return {void}\n   * @private\n   */\n  _onPlaying(): void {\n    if (!this._playbackStarted) {\n      this._playbackStarted = true;\n      this.dispatchEvent(new FakeEvent(CustomEventType.PLAYBACK_STARTED));\n    }\n  }\n\n  /**\n   * Hides the black cover div.\n   * @private\n   * @returns {void}\n   */\n  _hideBlackCover(): void {\n    if (this._blackCoverEl) {\n      this._blackCoverEl.style.visibility = 'hidden';\n    }\n  }\n\n  /**\n   * Shows the black cover div.\n   * @private\n   * @returns {void}\n   */\n  _showBlackCover(): void {\n    if (this._blackCoverEl) {\n      this._blackCoverEl.style.visibility = 'visible';\n    }\n  }\n\n  /**\n   * @function _onEnded\n   * @return {void}\n   * @private\n   */\n  _onEnded(): void {\n    if (!this.paused) {\n      this._pause();\n    }\n  }\n\n  /**\n   * Resets the state flags of the player.\n   * @returns {void}\n   * @private\n   */\n  _resetStateFlags(): void {\n    this._loading = false;\n    this._firstPlay = true;\n    this._loadingMedia = false;\n    this._playbackStarted = false;\n  }\n\n  /**\n   * @returns {Object} - The default configuration of the player.\n   * @private\n   * @static\n   */\n  static get _defaultConfig(): Object {\n    return Utils.Object.copyDeep(DefaultPlayerConfig);\n  }\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Tracks\">\n\n  /**\n   * handle tracks change\n   * @param {FakeEvent} event - the tracks change event payload\n   * @private\n   * @returns {void}\n   */\n  _onTracksChanged(event: FakeEvent): void {\n    this._updateTracks(event.payload.tracks);\n    this.dispatchEvent(event);\n  }\n\n  /**\n   * update the player tracks\n   * @param {Array<Track>} tracks - the player tracks\n   * @private\n   * @returns {void}\n   */\n  _updateTracks(tracks: Array<Track>): void {\n    Player._logger.debug('Tracks changed', tracks);\n    this._tracks = [...tracks, ...this._externalCaptionsHandler.getExternalTracks(tracks)];\n    this._addTextTrackOffOption();\n  }\n\n  /**\n   * Returns the tracks according to the filter. if no filter given returns the all tracks.\n   * @function _getTracksByType\n   * @param {string} [type] - a tracks filter, should be 'video', 'audio' or 'text'.\n   * @returns {Array<Track>} - The parsed tracks.\n   * @private\n   */\n  _getTracksByType(type?: string): Array<Track> {\n    return !type ? this._tracks : this._tracks.filter((track: Track) => {\n      if (type === TrackType.VIDEO) {\n        return track instanceof VideoTrack;\n      } else if (type === TrackType.AUDIO) {\n        return track instanceof AudioTrack;\n      } else if (type === TrackType.TEXT) {\n        return track instanceof TextTrack;\n      } else {\n        return true;\n      }\n    });\n  }\n\n  /**\n   * Mark the selected track as active\n   * @function _markActiveTrack\n   * @param {Track} track - the track to mark\n   * @returns {void}\n   * @private\n   */\n  _markActiveTrack(track: Track): void {\n    let type;\n    if (track instanceof VideoTrack) {\n      type = TrackType.VIDEO;\n    } else if (track instanceof AudioTrack) {\n      type = TrackType.AUDIO;\n    } else if (track instanceof TextTrack) {\n      type = TrackType.TEXT;\n    }\n    if (type) {\n      const tracks = this._getTracksByType(type);\n      for (let i = 0; i < tracks.length; i++) {\n        tracks[i].active = track.index === tracks[i].index;\n      }\n    }\n  }\n\n  /**\n   * handle text cue change\n   * @param {FakeEvent} event - the cue change event payload\n   * @private\n   * @returns {void}\n   */\n  _onCueChange(event: FakeEvent): void {\n    Player._logger.debug('Text cue changed', event.payload.cues);\n    this._activeTextCues = event.payload.cues;\n    this._updateCueDisplaySettings();\n    this._updateTextDisplay(this._activeTextCues)\n  }\n\n  /**\n   * update the text cue display settings\n   * @private\n   * @returns {void}\n   */\n  _updateCueDisplaySettings(): void {\n    const activeCues = this._activeTextCues;\n    const settings = this._textDisplaySettings;\n    for (let i = 0; i < activeCues.length; i++) {\n      let cue = activeCues[i];\n      for (let name in settings) {\n        cue[name] = settings[name];\n      }\n    }\n  }\n\n  /**\n   * update the text display\n   * @param {Array<Cue>} cues - list of cues\n   * @private\n   * @returns {void}\n   */\n  _updateTextDisplay(cues: Array<Cue>): void {\n    processCues(window, cues, this._textDisplayEl);\n  }\n\n  /**\n   * Add off text track if there are actual text tracks associated with media\n   * setting this track is the same as calling Player's hideTextTrack\n   * @private\n   * @returns {void}\n   */\n  _addTextTrackOffOption(): void {\n    const textTracks = this._getTracksByType(TrackType.TEXT);\n    if (textTracks && textTracks.length) {\n      this._tracks.push(new TextTrack({\n        active: false,\n        index: textTracks.length,\n        kind: \"subtitles\",\n        label: \"Off\",\n        language: OFF\n      }));\n    }\n  }\n\n  /**\n   * Sets the default tracks defined in the player config.\n   * @returns {void}\n   * @private\n   */\n  _setDefaultTracks(): void {\n    const activeTracks = this.getActiveTracks();\n    const playbackConfig = this.config.playback;\n    const offTextTrack: ?Track = this._getTracksByType(TrackType.TEXT).find(track => TextTrack.langComparer(OFF, track.language));\n    this.hideTextTrack();\n    let currentOrConfiguredTextLang = this._playbackAttributesState.textLanguage || this._getLanguage(playbackConfig.textLanguage, activeTracks.text, TrackType.TEXT);\n    let currentOrConfiguredAudioLang = this._playbackAttributesState.audioLanguage || playbackConfig.audioLanguage;\n    this._setDefaultTrack(TrackType.TEXT, currentOrConfiguredTextLang, offTextTrack);\n    this._setDefaultTrack(TrackType.AUDIO, currentOrConfiguredAudioLang, activeTracks.audio);\n  }\n\n  /**\n   * Gets the track language that should be set by default.\n   * @param {string} configuredLanguage - The configured language (can be also \"auto\").\n   * @param {Track} defaultTrack - The default track.\n   * @param {string} type - The track type.\n   * @private\n   * @returns {string} - The track language to set by default.\n   */\n  _getLanguage(configuredLanguage: string, defaultTrack: ?Track, type: string): string {\n    let language = configuredLanguage;\n    if (language === AUTO) {\n      const tracks = this._getTracksByType(type);\n      const localeTrack: ?Track = tracks.find(track => Track.langComparer(Locale.language, track.language));\n      if (localeTrack) {\n        language = localeTrack.language;\n      } else if (defaultTrack && defaultTrack.language !== OFF) {\n        language = defaultTrack.language;\n      } else if (tracks && tracks.length > 0) {\n        language = tracks[0].language;\n      }\n    }\n    return language;\n  }\n\n  /**\n   * Sets a specific default track.\n   * @param {string} type - The track type.\n   * @param {string} language - The track language.\n   * @param {?Track} defaultTrack - The default track to set in case there is no language configured.\n   * @returns {void}\n   * @private\n   */\n  _setDefaultTrack(type: string, language: string, defaultTrack: ?Track): void {\n    const track: ?Track = this._getTracksByType(type).find(track => Track.langComparer(language, track.language));\n    if (track) {\n      this.selectTrack(track);\n    } else if (defaultTrack && !defaultTrack.active) {\n      this.selectTrack(defaultTrack);\n    }\n  }\n\n  // </editor-fold>\n\n  // </editor-fold>\n\n  // <editor-fold desc=\"Enums\">\n\n  /**\n   * Gets the player event types.\n   * @returns {EventTypes} - The event types of the player.\n   * @public\n   */\n  get Event(): EventTypes {\n    return EventType;\n  }\n\n  /**\n   * Gets the player TextStyle.\n   * @returns {TextStyle} - The TextStyle class\n   * @public\n   */\n  get TextStyle(): typeof TextStyle {\n    return TextStyle;\n  }\n\n  /**\n   * Gets the player state types.\n   * @returns {StateTypes} - The state types of the player.\n   * @public\n   */\n  get State(): StateTypes {\n    return StateType;\n  }\n\n  /**\n   * Gets the player tracks types.\n   * @returns {TrackTypes} - The tracks types of the player.\n   * @public\n   */\n  get Track(): TrackTypes {\n    return TrackType;\n  }\n\n  /**\n   * Gets the player log level types.\n   * @returns {LogLevelTypes} - The log level types of the player.\n   * @public\n   */\n  get LogLevelType(): LogLevelTypes {\n    return LogLevelType;\n  }\n\n  /**\n   * Gets the player log level objects.\n   * @returns {LogLevels} - The log levels objects of the player.\n   * @public\n   */\n  get LogLevel(): LogLevels {\n    return LogLevel;\n  }\n\n  /**\n   * Gets the player abr modes.\n   * @returns {AbrModes} - The abr modes of the player.\n   * @public\n   */\n  get AbrMode(): AbrModes {\n    return AbrMode;\n  }\n\n  /**\n   * Gets the player media types.\n   * @returns {MediaTypes} - The media types of the player.\n   * @public\n   */\n  get MediaType(): MediaTypes {\n    return MediaType;\n  }\n\n  /**\n   * Gets the player stream types.\n   * @returns {StreamTypes} - The stream types of the player.\n   * @public\n   */\n  get StreamType(): StreamTypes {\n    return StreamType;\n  }\n\n  /**\n   * Gets the player engine types.\n   * @returns {EngineTypes} - The engine types of the player.\n   * @public\n   */\n  get EngineType(): EngineTypes {\n    return EngineType;\n  }\n\n  // </editor-fold>\n}\n\n\n\n// WEBPACK FOOTER //\n// ./player.js","//@flow\nimport FakeEvent from './fake-event'\nimport MultiMap from '../utils/multi-map'\n\n/**\n * A work-alike for EventTarget.  Only DOM elements may be true EventTargets,\n * but this can be used as a base class to provide event dispatch to non-DOM\n * classes.  Only FakeEvents should be dispatched.\n *\n * @struct\n * @constructor\n * @implements {EventTarget}\n * @export\n */\nclass FakeEventTarget {\n  _listeners: MultiMap<ListenerType>;\n  dispatchTarget: FakeEventTarget;\n\n  constructor() {\n    /**\n     * @private {!MultiMap.<FakeEventTarget.ListenerType>}\n     */\n    this._listeners = new MultiMap();\n\n    /**\n     * The target of all dispatched events.  Defaults to |this|.\n     * @type {EventTarget}\n     */\n    this.dispatchTarget = this;\n  }\n\n  /**\n   * Add an event listener to this object.\n   *\n   * @param {string} type The event type to listen for.\n   * @param {FakeEventTarget.ListenerType} listener The callback or\n   *   listener object to invoke.\n   * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n   *   parents, so events neither capture nor bubble.\n   * @override\n   * @export\n   */\n  addEventListener(type: string, listener: ListenerType) {\n    this._listeners.push(type, listener);\n  }\n\n  /**\n   * Remove an event listener from this object.\n   *\n   * @param {string} type The event type for which you wish to remove a listener.\n   * @param {FakeEventTarget.ListenerType} listener The callback or\n   *   listener object to remove.\n   * @param {boolean=} opt_capturing Ignored.  FakeEventTargets do not have\n   *   parents, so events neither capture nor bubble.\n   * @override\n   * @export\n   */\n  removeEventListener(type: string, listener: ListenerType) {\n    this._listeners.remove(type, listener);\n  }\n\n  /**\n   * Dispatch an event from this object.\n   *\n   * @param {!Event} event The event to be dispatched from this object.\n   * @return {boolean} True if the default action was prevented.\n   * @override\n   * @export\n   */\n  dispatchEvent(event: FakeEvent) {\n    // In many browsers, it is complex to overwrite properties of actual Events.\n    // Here we expect only to dispatch FakeEvents, which are simpler.\n    //goog.asserts.assert(event instanceof FakeEvent,\n    //    'FakeEventTarget can only dispatch FakeEvents!');\n\n    let list = this._listeners.get(event.type) || [];\n\n    for (let i = 0; i < list.length; ++i) {\n      // Do this every time, since events can be re-dispatched from handlers.\n      event.target = this.dispatchTarget;\n      event.currentTarget = this.dispatchTarget;\n\n      let listener = list[i];\n      try {\n        if (listener.handleEvent) {\n          listener.handleEvent(event);\n        } else {\n          listener.call(this, event);\n        }\n      } catch (exception) {\n        // Exceptions during event handlers should not affect the caller,\n        // but should appear on the console as uncaught, according to MDN:\n        // http://goo.gl/N6Ff27\n        // TODO: add log\n      }\n\n      if (event.stopped) {\n        break;\n      }\n    }\n\n    return event.defaultPrevented;\n  }\n}\n\n/**\n * These are the listener types defined in the closure extern for EventTarget.\n * @typedef {EventListener|function(!Event):(boolean|undefined)}\n */\ndeclare function ListenerType(event: FakeEvent): (boolean | void);\n\nexport default FakeEventTarget;\n\n\n\n// WEBPACK FOOTER //\n// ./event/fake-event-target.js","//@flow\nimport Track from './track'\n\n/**\n * Video track representation of the player.\n * @classdesc\n */\nexport default class VideoTrack extends Track {\n  /**\n   * @member {number} _bandwidth - The bandwidth of the video track\n   * @type {number}\n   * @private\n   */\n  _bandwidth: number;\n\n  /**\n   * @member {number} _width - The width of the video track\n   * @type {number}\n   * @private\n   */\n  _width: number;\n\n  /**\n   * @member {number} _height - The height of the video track\n   * @type {number}\n   * @private\n   */\n  _height: number;\n\n  /**\n   * @public\n   * @returns {number} - The bandwidth of the video track\n   */\n  get bandwidth(): number {\n    return this._bandwidth;\n  }\n\n  /**\n   * @public\n   * @returns {number} - The width of the video track\n   */\n  get width(): number {\n    return this._width;\n  }\n\n  /**\n   * @public\n   * @returns {number} - The height of the video track\n   */\n  get height(): number {\n    return this._height;\n  }\n\n  /**\n   * @constructor\n   * @param {Object} settings - The track settings object\n   */\n  constructor(settings: Object = {}) {\n    super(settings);\n    this._bandwidth = settings.bandwidth;\n    this._width = settings.width;\n    this._height = settings.height;\n    this._label = settings.label ? settings.label : this._height ? this._height + 'p' : undefined;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./track/video-track.js","//@flow\nimport Track from './track'\n\n/**\n * Audio track representation of the player.\n * @classdesc\n */\nexport default class AudioTrack extends Track {}\n\n\n\n// WEBPACK FOOTER //\n// ./track/audio-track.js","// @flow\nimport UAParser from 'ua-parser-js'\nconst Env = new UAParser().getResult();\nexport default Env;\n\n\n\n// WEBPACK FOOTER //\n// ./utils/env.js","//@flow\nexport type TrackTypes = { [track: string]: string };\n\nconst TrackType: TrackTypes = {\n  VIDEO: \"video\",\n  AUDIO: \"audio\",\n  TEXT: \"text\"\n};\n\nexport {TrackType};\n\n\n\n// WEBPACK FOOTER //\n// ./track/track-type.js","//@flow\n\n/**\n * A simple multimap template.\n * @constructor\n * @struct\n * @template T\n */\nclass MultiMap<T> {\n  _map: Map<string, T[]>;\n\n  constructor() {\n    /** @private {!Object.<string, !Array.<T>>} */\n    this._map = new Map();\n  }\n\n  /**\n   * Add a key, value pair to the map.\n   * @param {string} key -\n   * @param {T} value  -\n   * @returns {void}\n   */\n  push(key: string, value: T): void {\n    if (this._map.has(key)) {\n      let list = this._map.get(key);\n      if (Array.isArray(list)) {\n        list.push(value);\n        this._map.set(key, list);\n      }\n    } else {\n      this._map.set(key, [value]);\n    }\n  }\n\n  /**\n   * Set an array of values for the key, overwriting any previous data.\n   * @param {string} key -\n   * @param {!Array.<T>} values -\n   * @returns {void}\n   */\n  set(key: string, values: T[]): void {\n    this._map.set(key, values);\n  }\n\n  /**\n   * Check for a key.\n   * @param {string} key -\n   * @return {boolean} true if the key exists.\n   */\n  has(key: string): boolean {\n    return this._map.has(key);\n  }\n\n  /**\n   * Get a list of values by key.\n   * @param {string} key -\n   * @return {Array.<T>} or null if no suZch key exists.\n   */\n  get(key: string): Array<T> {\n    let list = this._map.get(key);\n    // slice() clones the list so that it and the map can each be modified\n    // without affecting the other.\n    return list ? list.slice() : [];\n  }\n\n  /**\n   * Get a list of all values.\n   * @returns {!Array.<T>} -\n   */\n  getAll(): T[] {\n    let list: T[] = [];\n    for (var value of this._map.values()) {\n      list = list.concat(value);\n    }\n    return list;\n  }\n\n  /**\n   * Remove a specific value, if it exists.\n   * @param {string} key -\n   * @param {T} value -\n   * @returns {void}\n   */\n  remove(key: string, value: T): void {\n    if (!this._map.has(key)) return;\n    let list = this._map.get(key);\n    if (Array.isArray(list)) {\n      for (let i = 0; i < list.length; ++i) {\n        if (list[i] == value) {\n          list.splice(i, 1);\n          --i;\n        }\n      }\n    }\n  }\n\n  /**\n   * Get all keys from the multimap.\n   * @return {!Array.<string>}\n   */\n  // eslint-disable-next-line no-undef\n  keys(): Iterator<string> {\n    return this._map.keys();\n  }\n\n\n  /**\n   * Clear all keys and values from the multimap.\n   * @returns {void}\n   */\n  clear(): void {\n    this._map.clear();\n  }\n}\n\nexport default MultiMap;\n\n\n\n// WEBPACK FOOTER //\n// ./utils/multi-map.js","//@flow\nimport {convertCueToDOMTree} from './text-track-display'\n\nconst autoKeyword: string = \"auto\";\nconst directionSetting: { [string]: boolean } = {\n  \"\": true,\n  \"lr\": true,\n  \"rl\": true\n};\nconst alignSetting: { [string]: boolean } = {\n  \"start\": true,\n  \"middle\": true,\n  \"end\": true,\n  \"left\": true,\n  \"right\": true\n};\n\n/**\n * helper\n * @param {string} value - the string to find\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findDirectionSetting(value): string | boolean {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  const dir = directionSetting[value.toLowerCase()];\n  return dir ? value.toLowerCase() : false;\n}\n\n/**\n * helper\n * @param {string} value - the string\n * @returns {string | boolean} - the aligned sting if found\n */\nfunction findAlignSetting(value: string): string | boolean {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  const align = alignSetting[value.toLowerCase()];\n  return align ? value.toLowerCase() : false;\n}\n\n/**\n * VTTCue model\n * @class\n * @classdesc VTT Cue model to represent VTT cues internally\n */\nclass VTTCue {\n\n  /**\n   * // Lets us know when the VTTCue's data has changed in such a way that we need\n   * to recompute its display state. This lets us compute its display state lazily.\n   * @type {boolean}\n   */\n  hasBeenReset: boolean = false;\n\n  /**\n   * This is used as part of the rendering model, to keep cues in a consistent position.\n   * http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n   * @type {undefined}\n   */\n  displayState: any = undefined;\n  /**\n   * VTTCue and TextTrackCue properties\n   * http://dev.w3.org/html5/webvtt/#vttcue-interface\n   */\n  /**\n   * An arbitrary string.\n   * @type {string}\n   * @private\n   */\n  _id: string = \"\";\n  /**\n   * A boolean indicating whether playback of the media resource is to pause when the end of the\n   * range to which the cue applies is reached.\n   * @type {boolean}\n   * @private\n   */\n  _pauseOnExit: boolean = false;\n  /**\n   * The time, in seconds and fractions of a second, that describes the beginning of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n  _startTime: number;\n  /**\n   * The time, in seconds and fractions of a second, that describes the end of the range of\n   * the media data to which the cue applies.\n   * @type {number}\n   * @private\n   */\n  _endTime: number;\n  /**\n   * The raw text of the cue, and rules for its interpretation, allowing the text to be\n   * rendered and converted to a DOM fragment.\n   * @type {string}\n   * @private\n   */\n  _text: string;\n  /**\n   * An optional WebVTT region to which a cue belongs.\n   * By default, the region is set to null.\n   * @type {null}\n   * @private\n   */\n  _region: ?string = null;\n  /**\n   * configures the cue to use vertical text layout rather than horizontal text layout.\n   * Vertical text layout is sometimes used in Japanese, for example. The default is horizontal layout\n   * @type {string}\n   * @private\n   */\n  _vertical: string = \"\";\n  /**\n   * A boolean indicating whether the line is an integer number of lines (using the line dimensions of\n   * the first line of the cue), or whether it is a percentage of the dimension of the video.\n   * The flag is set to true when lines are counted, and false otherwise.\n   * @type {boolean}\n   * @private\n   */\n  _snapToLines: boolean = true;\n  /**\n   * The line defines positioning of the cue box.\n   * @type {string | number}\n   * @private\n   */\n  _line: string | number = \"auto\";\n  /**\n   * An alignment for the cue box’s line, one of start/center/end alignment\n   * @type {string}\n   * @private\n   */\n  _lineAlign: string = \"start\";\n  /**\n   * The position defines the indent of the cue box in the direction defined by the writing direction\n   * @type {number}\n   * @private\n   */\n  _position: number = 50;\n  /**\n   * An alignment for the cue box in the dimension of the writing direction, describing what the position\n   * is anchored to\n   * @type {string}\n   * @private\n   */\n  _positionAlign: string = \"middle\";\n  /**\n   * A number giving the size of the cue box, to be interpreted as a percentage of the video, as defined\n   * by the writing direction.\n   * @type {number}\n   * @private\n   */\n  _size: number = 50;\n  /**\n   * An alignment for all lines of text within the cue box, in the dimension of the writing direction\n   * @type {string}\n   * @private\n   */\n  _align: string = \"middle\";\n\n  constructor(startTime: number, endTime: number, text: string) {\n    this._startTime = startTime;\n    this._endTime = endTime;\n    this._text = text;\n    /**\n     * Other <track> spec defined properties\n     */\n  }\n\n  resetCue(): void {\n    this.hasBeenReset = true;\n  }\n\n  get id(): string {\n    return this._id;\n  }\n\n  set id(value: string) {\n    this._id = \"\" + value;\n  }\n\n  get pauseOnExit(): boolean {\n    return this._pauseOnExit;\n  }\n\n  set pauseOnExit(value: boolean) {\n    this._pauseOnExit = value;\n  }\n\n  get startTime(): number {\n    return this._endTime;\n  }\n\n  set startTime(value: number) {\n    if (typeof value !== \"number\") {\n      throw new TypeError(\"Start time must be set to a number.\");\n    }\n    this._endTime = value;\n    this.resetCue();\n\n  }\n\n  get endTime(): number {\n    return this._endTime;\n  }\n\n  set endTime(value: number) {\n    if (typeof value !== \"number\") {\n      throw new TypeError(\"End time must be set to a number.\");\n    }\n    this._endTime = value;\n    this.resetCue();\n  }\n\n  get text(): string {\n    return this._text;\n  }\n\n  set text(value: string) {\n    this._text = \"\" + value;\n    this.resetCue();\n  }\n\n  get region(): ?string {\n    return this._region;\n  }\n\n  set region(value: string) {\n    this._region = value;\n    this.resetCue();\n  }\n\n  get vertical(): string {\n    return this._vertical;\n  }\n\n  set vertical(value: string) {\n    const setting = findDirectionSetting(value);\n    // Have to check for false because the setting an be an empty string.\n    if (setting === false) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._vertical = setting;\n      this.resetCue();\n    }\n  }\n\n  get snapToLines(): boolean {\n    return this._snapToLines;\n  }\n\n  set snapToLines(value: boolean) {\n    this._snapToLines = value;\n    this.resetCue();\n  }\n\n  get line(): string | number {\n    return this._line;\n  }\n\n  set line(value: string | number) {\n    if (typeof value !== \"number\" && value !== autoKeyword) {\n      throw new SyntaxError(\"An invalid number or illegal string was specified.\");\n    }\n    this._line = value;\n    this.resetCue();\n  }\n\n  get lineAlign(): string {\n    return this._lineAlign;\n  }\n\n  set lineAlign(value: string) {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._lineAlign = setting;\n      this.resetCue();\n    }\n  }\n\n  get position(): number {\n    return this._position;\n  }\n\n  set position(value: number) {\n    if (value < 0 || value > 100) {\n      throw new Error(\"Position must be between 0 and 100.\");\n    }\n    this._position = value;\n    this.resetCue();\n  }\n\n  get positionAlign(): string {\n    return this._positionAlign;\n  }\n\n  set positionAlign(value: string) {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._positionAlign = setting;\n      this.resetCue();\n    }\n  }\n\n  get size(): number | boolean {\n    return this._size;\n  }\n\n  set size(value: number): void {\n    if (value < 0 || value > 100\n    ) {\n      throw new Error(\"Size must be between 0 and 100.\");\n    }\n    this._size = value;\n    this.resetCue();\n  }\n\n  get align(): string {\n    return this._align;\n  }\n\n  set align(value: string): void {\n    const setting = findAlignSetting(value);\n    if (!setting) {\n      throw new SyntaxError(\"An invalid or illegal string was specified.\");\n    } else if (typeof(setting) === \"string\") {\n      this._align = (setting: string);\n      this.resetCue();\n    }\n  }\n\n  getCueAsHTML() {\n    return convertCueToDOMTree(window, this.text);\n  }\n}\n\nlet Cue;\nif (typeof window !== 'undefined' && window.VTTCue) {\n  Cue = window.VTTCue;\n} else {\n  Cue = VTTCue;\n}\n\nexport {Cue};\n\n\n\n// WEBPACK FOOTER //\n// ./track/vtt-cue.js","/* eslint-disable */\n/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n\nconst fontScale = 1;\n\n// Try to parse input as a time stamp.\nfunction parseTimeStamp(input) {\n\n  function computeSeconds(h, m, s, f) {\n    return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n  }\n\n  const m = input.match(/^(\\d+):(\\d{2})(:\\d{2})?\\.(\\d{3})/);\n  if (!m) {\n    return null;\n  }\n\n  if (m[3]) {\n    // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n    return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n  } else if (m[1] > 59) {\n    // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n    // First position is hours as it's over 59.\n    return computeSeconds(m[1], m[2], 0, m[4]);\n  } else {\n    // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n    return computeSeconds(0, m[1], m[2], m[4]);\n  }\n}\n\nconst ESCAPE = {\n  \"&amp;\": \"&\",\n  \"&lt;\": \"<\",\n  \"&gt;\": \">\",\n  \"&lrm;\": \"\\u200e\",\n  \"&rlm;\": \"\\u200f\",\n  \"&nbsp;\": \"\\u00a0\"\n};\n\nconst TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\"\n};\n\nconst TAG_ANNOTATION = {\n  v: \"title\",\n  lang: \"lang\"\n};\n\nconst NEEDS_PARENT = {\n  rt: \"ruby\"\n};\n\n\n// A settings object holds key/value pairs and will ignore anything but the first\n// assignment to a specific key.\nfunction Settings() {\n  this.values = _objCreate(null);\n}\n\nSettings.prototype = {\n  // Only accept the first assignment to any key.\n  set: function (k, v) {\n    if (!this.get(k) && v !== \"\") {\n      this.values[k] = v;\n    }\n  },\n  // Return the value for a key, or a default value.\n  // If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n  // a number of possible default values as properties where 'defaultKey' is\n  // the key of the property that will be chosen; otherwise it's assumed to be\n  // a single value.\n  get: function (k, dflt, defaultKey) {\n    if (defaultKey) {\n      return this.has(k) ? this.values[k] : dflt[defaultKey];\n    }\n    return this.has(k) ? this.values[k] : dflt;\n  },\n  // Check whether we have a value for a key.\n  has: function (k) {\n    return k in this.values;\n  },\n  // Accept a setting if its one of the given alternatives.\n  alt: function (k, v, a) {\n    for (var n = 0; n < a.length; ++n) {\n      if (v === a[n]) {\n        this.set(k, v);\n        break;\n      }\n    }\n  },\n  // Accept a setting if its a valid (signed) integer.\n  integer: function (k, v) {\n    if (/^-?\\d+$/.test(v)) { // integer\n      this.set(k, parseInt(v, 10));\n    }\n  },\n  // Accept a setting if its a valid percentage.\n  percent: function (k, v) {\n    var m;\n    if ((m = v.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/))) {\n      v = parseFloat(v);\n      if (v >= 0 && v <= 100) {\n        this.set(k, v);\n        return true;\n      }\n    }\n    return false;\n  }\n};\n\n// Helper function to parse input into groups separated by 'groupDelim', and\n// interprete each group as a key/value pair separated by 'keyValueDelim'.\nfunction parseOptions(input, callback, keyValueDelim, groupDelim) {\n  var groups = groupDelim ? input.split(groupDelim) : [input];\n  for (var i in groups) {\n    if (typeof groups[i] !== \"string\") {\n      continue;\n    }\n    var kv = groups[i].split(keyValueDelim);\n    if (kv.length !== 2) {\n      continue;\n    }\n    var k = kv[0];\n    var v = kv[1];\n    callback(k, v);\n  }\n}\n\n\nfunction parseCue(input, cue, regionList) {\n  // Remember the original input if we need to throw an error.\n  var oInput = input;\n\n  // 4.1 WebVTT timestamp\n  function consumeTimeStamp() {\n    var ts = parseTimeStamp(input);\n    if (ts === null) {\n      throw new ParsingError(ParsingError.Errors.BadTimeStamp,\n        \"Malformed timestamp: \" + oInput);\n    }\n    // Remove time stamp from input.\n    input = input.replace(/^[^\\sa-zA-Z-]+/, \"\");\n    return ts;\n  }\n\n  // 4.4.2 WebVTT cue settings\n  function consumeCueSettings(input, cue) {\n    var settings = new Settings();\n\n    parseOptions(input, function (k, v) {\n      switch (k) {\n        case \"region\":\n          // Find the last region we parsed with the same region id.\n          for (var i = regionList.length - 1; i >= 0; i--) {\n            if (regionList[i].id === v) {\n              settings.set(k, regionList[i].region);\n              break;\n            }\n          }\n          break;\n        case \"vertical\":\n          settings.alt(k, v, [\"rl\", \"lr\"]);\n          break;\n        case \"line\":\n          var vals = v.split(\",\"),\n            vals0 = vals[0];\n          settings.integer(k, vals0);\n          settings.percent(k, vals0) ? settings.set(\"snapToLines\", false) : null;\n          settings.alt(k, vals0, [\"auto\"]);\n          if (vals.length === 2) {\n            settings.alt(\"lineAlign\", vals[1], [\"start\", \"middle\", \"end\"]);\n          }\n          break;\n        case \"position\":\n          vals = v.split(\",\");\n          settings.percent(k, vals[0]);\n          if (vals.length === 2) {\n            settings.alt(\"positionAlign\", vals[1], [\"start\", \"middle\", \"end\"]);\n          }\n          break;\n        case \"size\":\n          settings.percent(k, v);\n          break;\n        case \"align\":\n          settings.alt(k, v, [\"start\", \"middle\", \"end\", \"left\", \"right\"]);\n          break;\n      }\n    }, /:/, /\\s/);\n\n    // Apply default values for any missing fields.\n    cue.region = settings.get(\"region\", null);\n    cue.vertical = settings.get(\"vertical\", \"\");\n    cue.line = settings.get(\"line\", cue.line || \"auto\");\n    cue.lineAlign = settings.get(\"lineAlign\", \"start\");\n    cue.snapToLines = settings.get(\"snapToLines\", true);\n    cue.size = settings.get(\"size\", 100);\n    cue.align = settings.get(\"align\", \"middle\");\n    cue.position = settings.get(\"position\", cue.position || \"auto\");\n    cue.positionAlign = settings.get(\"positionAlign\", {\n      start: \"start\",\n      left: \"start\",\n      middle: \"middle\",\n      end: \"end\",\n      right: \"end\"\n    }, cue.align);\n  }\n\n  function skipWhitespace() {\n    input = input.replace(/^\\s+/, \"\");\n  }\n\n  // 4.1 WebVTT cue timings.\n  skipWhitespace();\n  cue.startTime = consumeTimeStamp();   // (1) collect cue start time\n  skipWhitespace();\n  if (input.substr(0, 3) !== \"-->\") {     // (3) next characters must match \"-->\"\n    throw new ParsingError(ParsingError.Errors.BadTimeStamp,\n      \"Malformed time stamp (time stamps must be separated by '-->'): \" +\n      oInput);\n  }\n  input = input.substr(3);\n  skipWhitespace();\n  cue.endTime = consumeTimeStamp();     // (5) collect cue end time\n\n  // 4.1 WebVTT cue settings list.\n  skipWhitespace();\n  consumeCueSettings(input, cue);\n}\n\n\n// Parse content into a document fragment.\nfunction parseContent(window, input) {\n  function nextToken() {\n    // Check for end-of-string.\n    if (!input) {\n      return null;\n    }\n\n    // Consume 'n' characters from the input.\n    function consume(result) {\n      input = input.substr(result.length);\n      return result;\n    }\n\n    const m = input.match(/^([^<]*)(<[^>]+>?)?/);\n    // If there is some text before the next tag, return it, otherwise return\n    // the tag.\n    return consume(m[1] ? m[1] : m[2]);\n  }\n\n  // Unescape a string 's'.\n  function unescape1(e) {\n    return ESCAPE[e];\n  }\n\n  function unescape(s) {\n    let m;\n    while ((m = s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/))) {\n      s = s.replace(m[0], unescape1);\n    }\n    return s;\n  }\n\n  function shouldAdd(current, element) {\n    return !NEEDS_PARENT[element.localName] ||\n      NEEDS_PARENT[element.localName] === current.localName;\n  }\n\n  // Create an element for this tag.\n  function createElement(type, annotation) {\n    const tagName = TAG_NAME[type];\n    if (!tagName) {\n      return null;\n    }\n    let element = window.document.createElement(tagName);\n    element.localName = tagName;\n    const name = TAG_ANNOTATION[type];\n    if (name && annotation) {\n      element[name] = annotation.trim();\n    }\n    return element;\n  }\n\n  let rootDiv = window.document.createElement(\"div\"),\n    current = rootDiv,\n    t,\n    tagStack = [];\n\n  while ((t = nextToken()) !== null) {\n    if (t[0] === '<') {\n      if (t[1] === \"/\") {\n        // If the closing tag matches, move back up to the parent node.\n        if (tagStack.length &&\n          tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n          tagStack.pop();\n          current = current.parentNode;\n        }\n        // Otherwise just ignore the end tag.\n        continue;\n      }\n      let ts = parseTimeStamp(t.substr(1, t.length - 2));\n      let node;\n      if (ts) {\n        // Timestamps are lead nodes as well.\n        node = window.document.createProcessingInstruction(\"timestamp\", ts);\n        current.appendChild(node);\n        continue;\n      }\n      const m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/);\n      // If we can't parse the tag, skip to the next tag.\n      if (!m) {\n        continue;\n      }\n      // Try to construct an element, and ignore the tag if we couldn't.\n      node = createElement(m[1], m[3]);\n      if (!node) {\n        continue;\n      }\n      // Determine if the tag should be added based on the context of where it\n      // is placed in the cuetext.\n      if (!shouldAdd(current, node)) {\n        continue;\n      }\n      // Set the class list (as a list of classes, separated by space).\n      if (m[2]) {\n        node.className = m[2].substr(1).replace('.', ' ');\n      }\n      // Append the node to the current node, and enter the scope of the new\n      // node.\n      tagStack.push(m[1]);\n      current.appendChild(node);\n      current = node;\n      continue;\n    }\n\n    // Text nodes are leaf nodes.\n    current.appendChild(window.document.createTextNode(unescape(t)));\n  }\n\n  return rootDiv;\n}\n\n// This is a list of all the Unicode characters that have a strong\n// right-to-left category. What this means is that these characters are\n// written right-to-left for sure. It was generated by pulling all the strong\n// right-to-left characters out of the Unicode data table. That table can\n// found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\nconst strongRTLRanges = [[0x5be, 0x5be], [0x5c0, 0x5c0], [0x5c3, 0x5c3], [0x5c6, 0x5c6],\n  [0x5d0, 0x5ea], [0x5f0, 0x5f4], [0x608, 0x608], [0x60b, 0x60b], [0x60d, 0x60d],\n  [0x61b, 0x61b], [0x61e, 0x64a], [0x66d, 0x66f], [0x671, 0x6d5], [0x6e5, 0x6e6],\n  [0x6ee, 0x6ef], [0x6fa, 0x70d], [0x70f, 0x710], [0x712, 0x72f], [0x74d, 0x7a5],\n  [0x7b1, 0x7b1], [0x7c0, 0x7ea], [0x7f4, 0x7f5], [0x7fa, 0x7fa], [0x800, 0x815],\n  [0x81a, 0x81a], [0x824, 0x824], [0x828, 0x828], [0x830, 0x83e], [0x840, 0x858],\n  [0x85e, 0x85e], [0x8a0, 0x8a0], [0x8a2, 0x8ac], [0x200f, 0x200f],\n  [0xfb1d, 0xfb1d], [0xfb1f, 0xfb28], [0xfb2a, 0xfb36], [0xfb38, 0xfb3c],\n  [0xfb3e, 0xfb3e], [0xfb40, 0xfb41], [0xfb43, 0xfb44], [0xfb46, 0xfbc1],\n  [0xfbd3, 0xfd3d], [0xfd50, 0xfd8f], [0xfd92, 0xfdc7], [0xfdf0, 0xfdfc],\n  [0xfe70, 0xfe74], [0xfe76, 0xfefc], [0x10800, 0x10805], [0x10808, 0x10808],\n  [0x1080a, 0x10835], [0x10837, 0x10838], [0x1083c, 0x1083c], [0x1083f, 0x10855],\n  [0x10857, 0x1085f], [0x10900, 0x1091b], [0x10920, 0x10939], [0x1093f, 0x1093f],\n  [0x10980, 0x109b7], [0x109be, 0x109bf], [0x10a00, 0x10a00], [0x10a10, 0x10a13],\n  [0x10a15, 0x10a17], [0x10a19, 0x10a33], [0x10a40, 0x10a47], [0x10a50, 0x10a58],\n  [0x10a60, 0x10a7f], [0x10b00, 0x10b35], [0x10b40, 0x10b55], [0x10b58, 0x10b72],\n  [0x10b78, 0x10b7f], [0x10c00, 0x10c48], [0x1ee00, 0x1ee03], [0x1ee05, 0x1ee1f],\n  [0x1ee21, 0x1ee22], [0x1ee24, 0x1ee24], [0x1ee27, 0x1ee27], [0x1ee29, 0x1ee32],\n  [0x1ee34, 0x1ee37], [0x1ee39, 0x1ee39], [0x1ee3b, 0x1ee3b], [0x1ee42, 0x1ee42],\n  [0x1ee47, 0x1ee47], [0x1ee49, 0x1ee49], [0x1ee4b, 0x1ee4b], [0x1ee4d, 0x1ee4f],\n  [0x1ee51, 0x1ee52], [0x1ee54, 0x1ee54], [0x1ee57, 0x1ee57], [0x1ee59, 0x1ee59],\n  [0x1ee5b, 0x1ee5b], [0x1ee5d, 0x1ee5d], [0x1ee5f, 0x1ee5f], [0x1ee61, 0x1ee62],\n  [0x1ee64, 0x1ee64], [0x1ee67, 0x1ee6a], [0x1ee6c, 0x1ee72], [0x1ee74, 0x1ee77],\n  [0x1ee79, 0x1ee7c], [0x1ee7e, 0x1ee7e], [0x1ee80, 0x1ee89], [0x1ee8b, 0x1ee9b],\n  [0x1eea1, 0x1eea3], [0x1eea5, 0x1eea9], [0x1eeab, 0x1eebb], [0x10fffd, 0x10fffd]];\n\nfunction isStrongRTLChar(charCode) {\n  for (let i = 0; i < strongRTLRanges.length; i++) {\n    const currentRange = strongRTLRanges[i];\n    if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction determineBidi(cueDiv) {\n  let nodeStack = [],\n    text = \"\",\n    charCode;\n\n  if (!cueDiv || !cueDiv.childNodes) {\n    return \"ltr\";\n  }\n\n  function pushNodes(nodeStack, node) {\n    for (let i = node.childNodes.length - 1; i >= 0; i--) {\n      nodeStack.push(node.childNodes[i]);\n    }\n  }\n\n  function nextTextNode(nodeStack) {\n    if (!nodeStack || !nodeStack.length) {\n      return null;\n    }\n\n    const node = nodeStack.pop(),\n      text = node.textContent || node.innerText;\n    if (text) {\n      // TODO: This should match all unicode type B characters (paragraph\n      // separator characters). See issue #115.\n      const m = text.match(/^.*(\\n|\\r)/);\n      if (m) {\n        nodeStack.length = 0;\n        return m[0];\n      }\n      return text;\n    }\n    if (node.tagName === \"ruby\") {\n      return nextTextNode(nodeStack);\n    }\n    if (node.childNodes) {\n      pushNodes(nodeStack, node);\n      return nextTextNode(nodeStack);\n    }\n  }\n\n  pushNodes(nodeStack, cueDiv);\n  while ((text = nextTextNode(nodeStack))) {\n    for (let i = 0; i < text.length; i++) {\n      charCode = text.charCodeAt(i);\n      if (isStrongRTLChar(charCode)) {\n        return \"rtl\";\n      }\n    }\n  }\n  return \"ltr\";\n}\n\nfunction computeLinePos(cue) {\n  if (typeof cue.line === \"number\" &&\n    (cue.snapToLines || (cue.line >= 0 && cue.line <= 100))) {\n    return cue.line;\n  }\n  if (!cue.track || !cue.track.textTrackList ||\n    !cue.track.textTrackList.mediaElement) {\n    return -1;\n  }\n  const track = cue.track;\n  const trackList = track.textTrackList;\n  let count = 0;\n  for (let i = 0; i < trackList.length && trackList[i] !== track; i++) {\n    if (trackList[i].mode === \"showing\") {\n      count++;\n    }\n  }\n  return ++count * -1;\n}\n\nclass StyleBox {\n\n  constructor() {\n  }\n\n  // Apply styles to a div. If there is no div passed then it defaults to the\n  // div on 'this'.\n  applyStyles(styles, div) {\n    div = div || this.div;\n    for (let prop in styles) {\n      if (styles.hasOwnProperty(prop)) {\n        div.style[prop] = styles[prop];\n      }\n    }\n  }\n\n  formatStyle(val, unit) {\n    return val === 0 ? 0 : val + unit;\n  }\n}\n\n// Constructs the computed display state of the cue (a div). Places the div\n// into the overlay which should be a block level element (usually a div).\nclass CueStyleBox extends StyleBox {\n  constructor(window, cue, styleOptions) {\n    super();\n    const isIE8 = (typeof navigator !== \"undefined\") &&\n      (/MSIE\\s8\\.0/).test(navigator.userAgent);\n    let color = \"rgba(255, 255, 255, 1)\";\n    let backgroundColor = \"rgba(0, 0, 0, 0.8)\";\n    let textShadow = \"\";\n\n    if (typeof WebVTTSet !== \"undefined\") {\n      color = WebVTTSet.fontSet;\n      backgroundColor = WebVTTSet.backgroundSet;\n      textShadow = WebVTTSet.edgeSet;\n    }\n\n    if (isIE8) {\n      color = \"rgb(255, 255, 255)\";\n      backgroundColor = \"rgb(0, 0, 0)\";\n    }\n\n    this.cue = cue;\n\n    // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n    // have inline positioning and will function as the cue background box.\n    this.cueDiv = parseContent(window, cue.text);\n    let styles = {\n      color: color,\n      backgroundColor: backgroundColor,\n      textShadow: textShadow,\n      position: \"relative\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      display: \"inline\"\n    };\n\n    if (!isIE8) {\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n        : cue.vertical === \"lr\" ? \"vertical-lr\"\n          : \"vertical-rl\";\n      styles.unicodeBidi = \"plaintext\";\n    }\n    this.applyStyles(styles, this.cueDiv);\n\n    // Create an absolutely positioned div that will be used to position the cue\n    // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n    // mirrors of them except \"middle\" which is \"center\" in CSS.\n    this.div = window.document.createElement(\"div\");\n    styles = {\n      textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n      font: styleOptions.font,\n      whiteSpace: \"pre-line\",\n      position: \"absolute\"\n    };\n\n    if (!isIE8) {\n      styles.direction = determineBidi(this.cueDiv);\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n        : cue.vertical === \"lr\" ? \"vertical-lr\"\n          : \"vertical-rl\".stylesunicodeBidi = \"plaintext\";\n    }\n\n    this.applyStyles(styles);\n\n    this.div.appendChild(this.cueDiv);\n\n    // Calculate the distance from the reference edge of the viewport to the text\n    // position of the cue box. The reference edge will be resolved later when\n    // the box orientation styles are applied.\n    let textPos = 0;\n    switch (cue.positionAlign) {\n      case \"start\":\n        textPos = cue.position;\n        break;\n      case \"middle\":\n        textPos = cue.position - (cue.size / 2);\n        break;\n      case \"end\":\n        textPos = cue.position - cue.size;\n        break;\n    }\n\n    // Horizontal box orientation; textPos is the distance from the left edge of the\n    // area to the left edge of the box and cue.size is the distance extending to\n    // the right from there.\n    if (cue.vertical === \"\") {\n      this.applyStyles({\n        left: this.formatStyle(textPos, \"%\"),\n        width: this.formatStyle(cue.size, \"%\")\n      });\n      // Vertical box orientation; textPos is the distance from the top edge of the\n      // area to the top edge of the box and cue.size is the height extending\n      // downwards from there.\n    } else {\n      this.applyStyles({\n        top: this.formatStyle(textPos, \"%\"),\n        height: this.formatStyle(cue.size, \"%\")\n      });\n    }\n\n    this.move = function (box) {\n      this.applyStyles({\n        top: this.formatStyle(box.top, \"px\"),\n        bottom: this.formatStyle(box.bottom, \"px\"),\n        left: this.formatStyle(box.left, \"px\"),\n        right: this.formatStyle(box.right, \"px\"),\n        height: this.formatStyle(box.height, \"px\"),\n        width: this.formatStyle(box.width, \"px\")\n      });\n    };\n  }\n}\n\n// Represents the co-ordinates of an Element in a way that we can easily\n// compute things with such as if it overlaps or intersects with another Element.\n// Can initialize it with either a StyleBox or another BoxPosition.\nclass BoxPosition {\n  constructor(obj) {\n    let isIE8 = (typeof navigator !== \"undefined\") &&\n      (/MSIE\\s8\\.0/).test(navigator.userAgent);\n\n    // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n    // was passed in and we need to copy the results of 'getBoundingClientRect'\n    // as the object returned is readonly. All co-ordinate values are in reference\n    // to the viewport origin (top left).\n    let lh, height, width, top;\n    if (obj.div) {\n      height = obj.div.offsetHeight;\n      width = obj.div.offsetWidth;\n      top = obj.div.offsetTop;\n\n      let rects = (rects = obj.div.childNodes) && (rects = rects[0]) &&\n        rects.getClientRects && rects.getClientRects();\n      obj = obj.div.getBoundingClientRect();\n      // In certain cases the outter div will be slightly larger then the sum of\n      // the inner div's lines. This could be due to bold text, etc, on some platforms.\n      // In this case we should get the average line height and use that. This will\n      // result in the desired behaviour.\n      lh = rects ? Math.max((rects[0] && rects[0].height) || 0, obj.height / rects.length)\n        : 0;\n\n    }\n    this.left = obj.left;\n    this.right = obj.right;\n    this.top = obj.top || top;\n    this.height = obj.height || height;\n    this.bottom = obj.bottom || (top + (obj.height || height));\n    this.width = obj.width || width;\n    this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n\n    if (isIE8 && !this.lineHeight) {\n      this.lineHeight = 13;\n    }\n  }\n\n  // Move the box along a particular axis. Optionally pass in an amount to move\n  // the box. If no amount is passed then the default is the line height of the\n  // box.\n  move(axis, toMove) {\n    toMove = toMove !== undefined ? toMove : this.lineHeight;\n    switch (axis) {\n      case \"+x\":\n        this.left += toMove;\n        this.right += toMove;\n        break;\n      case \"-x\":\n        this.left -= toMove;\n        this.right -= toMove;\n        break;\n      case \"+y\":\n        this.top += toMove;\n        this.bottom += toMove;\n        break;\n      case \"-y\":\n        this.top -= toMove;\n        this.bottom -= toMove;\n        break;\n    }\n  }\n\n  // Check if this box overlaps another box, b2.\n  overlaps = function (b2) {\n    return this.left < b2.right &&\n      this.right > b2.left &&\n      this.top < b2.bottom &&\n      this.bottom > b2.top;\n  }\n\n  // Check if this box overlaps any other boxes in boxes.\n  overlapsAny(boxes) {\n    for (let i = 0; i < boxes.length; i++) {\n      if (this.overlaps(boxes[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // Check if this box is within another box.\n  within(container) {\n    return this.top >= container.top &&\n      this.bottom <= container.bottom &&\n      this.left >= container.left &&\n      this.right <= container.right;\n  }\n\n  // Check if this box is entirely within the container or it is overlapping\n  // on the edge opposite of the axis direction passed. For example, if \"+x\" is\n  // passed and the box is overlapping on the left edge of the container, then\n  // return true.\n  overlapsOppositeAxis(container, axis) {\n    switch (axis) {\n      case \"+x\":\n        return this.left < container.left;\n      case \"-x\":\n        return this.right > container.right;\n      case \"+y\":\n        return this.top < container.top;\n      case \"-y\":\n        return this.bottom > container.bottom;\n    }\n  }\n\n  // Find the percentage of the area that this box is overlapping with another\n  // box.\n  intersectPercentage(b2) {\n    let x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n      y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n      intersectArea = x * y;\n    return intersectArea / (this.height * this.width);\n  }\n\n  // Convert the positions from this box to CSS compatible positions using\n  // the reference container's positions. This has to be done because this\n  // box's positions are in reference to the viewport origin, whereas, CSS\n  // values are in referecne to their respective edges.\n  toCSSCompatValues(reference) {\n    return {\n      top: this.top - reference.top,\n      bottom: reference.bottom - this.bottom,\n      left: this.left - reference.left,\n      right: reference.right - this.right,\n      height: this.height,\n      width: this.width\n    };\n  }\n\n  // Get an object that represents the box's position without anything extra.\n  // Can pass a StyleBox, HTMLElement, or another BoxPositon.\n  static getSimpleBoxPosition(obj) {\n    let height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n    let width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n    let top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n\n    obj = obj.div ? obj.div.getBoundingClientRect() :\n      obj.tagName ? obj.getBoundingClientRect() : obj;\n    return {\n      left: obj.left,\n      right: obj.right,\n      top: obj.top || top,\n      height: obj.height || height,\n      bottom: obj.bottom || (top + (obj.height || height)),\n      width: obj.width || width\n    };\n  };\n}\n\n// Move a StyleBox to its specified, or next best, position. The containerBox\n// is the box that contains the StyleBox, such as a div. boxPositions are\n// a list of other boxes that the styleBox can't overlap with.\nfunction moveBoxToLinePosition(styleBox, containerBox, boxPositions) {\n\n  // Find the best position for a cue box, b, on the video. The axis parameter\n  // is a list of axis, the order of which, it will move the box along. For example:\n  // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n  // direction. If it doesn't find a good position for it there it will then move\n  // it along the x axis in the negative direction.\n  function findBestPosition(b, axis) {\n    let bestPosition,\n      specifiedPosition = new BoxPosition(b),\n      percentage = 1; // Highest possible so the first thing we get is better.\n\n    for (let i = 0; i < axis.length; i++) {\n      while (b.overlapsOppositeAxis(containerBox, axis[i]) ||\n      (b.within(containerBox) && b.overlapsAny(boxPositions))) {\n        b.move(axis[i]);\n      }\n      // We found a spot where we aren't overlapping anything. This is our\n      // best position.\n      if (b.within(containerBox)) {\n        return b;\n      }\n      let p = b.intersectPercentage(containerBox);\n      // If we're outside the container box less then we were on our last try\n      // then remember this position as the best position.\n      if (percentage > p) {\n        bestPosition = new BoxPosition(b);\n        percentage = p;\n      }\n      // Reset the box position to the specified position.\n      b = new BoxPosition(specifiedPosition);\n    }\n    return bestPosition || specifiedPosition;\n  }\n\n  let boxPosition = new BoxPosition(styleBox),\n    cue = styleBox.cue,\n    linePos = computeLinePos(cue),\n    axis = [];\n\n  // If we have a line number to align the cue to.\n  if (cue.snapToLines) {\n    let size;\n    switch (cue.vertical) {\n      case \"\":\n        axis = [\"+y\", \"-y\"];\n        size = \"height\";\n        break;\n      case \"rl\":\n        axis = [\"+x\", \"-x\"];\n        size = \"width\";\n        break;\n      case \"lr\":\n        axis = [\"-x\", \"+x\"];\n        size = \"width\";\n        break;\n    }\n\n    let step = boxPosition.lineHeight,\n      position = step * Math.round(linePos),\n      maxPosition = containerBox[size] + step,\n      initialAxis = axis[0];\n\n    // If the specified intial position is greater then the max position then\n    // clamp the box to the amount of steps it would take for the box to\n    // reach the max position.\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    }\n\n    // If computed line position returns negative then line numbers are\n    // relative to the bottom of the video instead of the top. Therefore, we\n    // need to increase our initial position by the length or width of the\n    // video, depending on the writing direction, and reverse our axis directions.\n    if (linePos < 0) {\n      position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n      axis = axis.reverse();\n    }\n\n    // Move the box to the specified position. This may not be its best\n    // position.\n    boxPosition.move(initialAxis, position);\n\n  } else {\n    // If we have a percentage line value for the cue.\n    let calculatedPercentage = (boxPosition.lineHeight / containerBox.height) * 100;\n\n    switch (cue.lineAlign) {\n      case \"middle\":\n        linePos -= (calculatedPercentage / 2);\n        break;\n      case \"end\":\n        linePos -= calculatedPercentage;\n        break;\n    }\n\n    // Apply initial line position to the cue box.\n    switch (cue.vertical) {\n      case \"\":\n        styleBox.applyStyles({\n          top: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"rl\":\n        styleBox.applyStyles({\n          left: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"lr\":\n        styleBox.applyStyles({\n          right: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n    }\n\n    axis = [\"+y\", \"-x\", \"+x\", \"-y\"];\n\n    // Get the box position again after we've applied the specified positioning\n    // to it.\n    boxPosition = new BoxPosition(styleBox);\n  }\n\n  let bestPosition = findBestPosition(boxPosition, axis);\n  styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n}\n\nfunction convertCueToDOMTree(window, cuetext) {\n  if (!window || !cuetext) {\n    return null;\n  }\n  return parseContent(window, cuetext);\n}\n\nconst FONT_SIZE_PERCENT = 0.05;\nconst FONT_STYLE = \"sans-serif\";\nconst CUE_BACKGROUND_PADDING = \"1.5%\";\n\n// Runs the processing model over the cues and regions passed to it.\n// @param overlay A block level element (usually a div) that the computed cues\n//                and regions will be placed into.\nfunction processCues(window, cues, overlay) {\n  if (!window || !cues || !overlay) {\n    return null;\n  }\n\n  // Remove all previous children.\n  while (overlay.firstChild) {\n    overlay.removeChild(overlay.firstChild);\n  }\n\n  let paddedOverlay = window.document.createElement(\"div\");\n  paddedOverlay.style.position = \"absolute\";\n  paddedOverlay.style.left = \"0\";\n  paddedOverlay.style.right = \"0\";\n  paddedOverlay.style.top = \"0\";\n  paddedOverlay.style.bottom = \"0\";\n  paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n  overlay.appendChild(paddedOverlay);\n\n  // Determine if we need to compute the display states of the cues. This could\n  // be the case if a cue's state has been changed since the last computation or\n  // if it has not been computed yet.\n  function shouldCompute(cues) {\n    for (let i = 0; i < cues.length; i++) {\n      if (cues[i].hasBeenReset || !cues[i].displayState) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // We don't need to recompute the cues' display states. Just reuse them.\n  if (!shouldCompute(cues)) {\n    for (let i = 0; i < cues.length; i++) {\n      paddedOverlay.appendChild(cues[i].displayState);\n    }\n    return;\n  }\n\n  let boxPositions = [],\n    containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n    fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n  let styleOptions = {\n    font: (fontSize * fontScale) + \"px \" + FONT_STYLE\n  };\n\n  (function () {\n    let styleBox, cue;\n\n    for (let i = 0; i < cues.length; i++) {\n      cue = cues[i];\n\n      // Compute the intial position and styles of the cue div.\n      styleBox = new CueStyleBox(window, cue, styleOptions);\n      paddedOverlay.appendChild(styleBox.div);\n\n      // Move the cue div to it's correct line position.\n      moveBoxToLinePosition(styleBox, containerBox, boxPositions);\n\n      // Remember the computed div so that we don't have to recompute it later\n      // if we don't have too.\n      cue.displayState = styleBox.div;\n\n      boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n    }\n  })();\n};\n\nlet Parser = function (window, decoder) {\n  this.window = window;\n  this.state = \"INITIAL\";\n  this.buffer = \"\";\n  this.decoder = decoder || new TextDecoder(\"utf8\");\n  this.regionList = [];\n};\n\nlet StringDecoder = function () {\n  return {\n    decode: function (data) {\n      if (!data) {\n        return \"\";\n      }\n      if (typeof data !== \"string\") {\n        throw new Error(\"Error - expected string data.\");\n      }\n      return decodeURIComponent(encodeURIComponent(data));\n    }\n  };\n};\n\nvar _objCreate = Object.create || (function () {\n  function F() {\n  }\n\n  return function (o) {\n    if (arguments.length !== 1) {\n      throw new Error('Object.create shim only accepts one parameter.');\n    }\n    F.prototype = o;\n    return new F();\n  };\n})();\n\n// Creates a new ParserError object from an errorData object. The errorData\n// object should have default code and message properties. The default message\n// property can be overriden by passing in a message parameter.\n// See ParsingError.Errors below for acceptable errors.\nfunction ParsingError(errorData, message) {\n  this.name = \"ParsingError\";\n  this.code = errorData.code;\n  this.message = message || errorData.message;\n}\n\nParsingError.prototype = _objCreate(Error.prototype);\nParsingError.prototype.constructor = ParsingError;\n\n// ParsingError metadata for acceptable ParsingErrors.\nParsingError.Errors = {\n  BadSignature: {\n    code: 0,\n    message: \"Malformed WebVTT signature.\"\n  },\n  BadTimeStamp: {\n    code: 1,\n    message: \"Malformed time stamp.\"\n  }\n};\n\nParser.prototype = {\n  // If the error is a ParsingError then report it to the consumer if\n  // possible. If it's not a ParsingError then throw it like normal.\n  reportOrThrowError: function (e) {\n    if (e instanceof ParsingError) {\n      this.onparsingerror && this.onparsingerror(e);\n    } else {\n      throw e;\n    }\n  },\n  parse: function (data) {\n    var self = this;\n\n    // If there is no data then we won't decode it, but will just try to parse\n    // whatever is in buffer already. This may occur in circumstances, for\n    // example when flush() is called.\n    if (data) {\n      // Try to decode the data that we received.\n      self.buffer += self.decoder.decode(data, {stream: true});\n    }\n\n    function collectNextLine() {\n      var buffer = self.buffer;\n      var pos = 0;\n      while (pos < buffer.length && buffer[pos] !== '\\r' && buffer[pos] !== '\\n') {\n        ++pos;\n      }\n      var line = buffer.substr(0, pos);\n      // Advance the buffer early in case we fail below.\n      if (buffer[pos] === '\\r') {\n        ++pos;\n      }\n      if (buffer[pos] === '\\n') {\n        ++pos;\n      }\n      self.buffer = buffer.substr(pos);\n      return line;\n    }\n\n    // 3.4 WebVTT region and WebVTT region settings syntax\n    function parseRegion(input) {\n      var settings = new Settings();\n\n      parseOptions(input, function (k, v) {\n        switch (k) {\n          case \"id\":\n            settings.set(k, v);\n            break;\n          case \"width\":\n            settings.percent(k, v);\n            break;\n          case \"lines\":\n            settings.integer(k, v);\n            break;\n          case \"regionanchor\":\n          case \"viewportanchor\":\n            var xy = v.split(',');\n            if (xy.length !== 2) {\n              break;\n            }\n            // We have to make sure both x and y parse, so use a temporary\n            // settings object here.\n            var anchor = new Settings();\n            anchor.percent(\"x\", xy[0]);\n            anchor.percent(\"y\", xy[1]);\n            if (!anchor.has(\"x\") || !anchor.has(\"y\")) {\n              break;\n            }\n            settings.set(k + \"X\", anchor.get(\"x\"));\n            settings.set(k + \"Y\", anchor.get(\"y\"));\n            break;\n          case \"scroll\":\n            settings.alt(k, v, [\"up\"]);\n            break;\n        }\n      }, /=/, /\\s/);\n\n      // Create the region, using default values for any values that were not\n      // specified.\n      if (settings.has(\"id\")) {\n        var region = new self.window.VTTRegion();\n        region.width = settings.get(\"width\", 100);\n        region.lines = settings.get(\"lines\", 3);\n        region.regionAnchorX = settings.get(\"regionanchorX\", 0);\n        region.regionAnchorY = settings.get(\"regionanchorY\", 100);\n        region.viewportAnchorX = settings.get(\"viewportanchorX\", 0);\n        region.viewportAnchorY = settings.get(\"viewportanchorY\", 100);\n        region.scroll = settings.get(\"scroll\", \"\");\n        // Register the region.\n        self.onregion && self.onregion(region);\n        // Remember the VTTRegion for later in case we parse any VTTCues that\n        // reference it.\n        self.regionList.push({\n          id: settings.get(\"id\"),\n          region: region\n        });\n      }\n    }\n\n    // 3.2 WebVTT metadata header syntax\n    function parseHeader(input) {\n      parseOptions(input, function (k, v) {\n        switch (k) {\n          case \"Region\":\n            // 3.3 WebVTT region metadata header syntax\n            parseRegion(v);\n            break;\n        }\n      }, /:/);\n    }\n\n    // 5.1 WebVTT file parsing.\n    try {\n      var line;\n      if (self.state === \"INITIAL\") {\n        // We can't start parsing until we have the first line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        line = collectNextLine();\n\n        var m = line.match(/^WEBVTT([ \\t].*)?$/);\n        if (!m || !m[0]) {\n          throw new ParsingError(ParsingError.Errors.BadSignature);\n        }\n\n        self.state = \"HEADER\";\n      }\n\n      var alreadyCollectedLine = false;\n      while (self.buffer) {\n        // We can't parse a line until we have the full line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        if (!alreadyCollectedLine) {\n          line = collectNextLine();\n        } else {\n          alreadyCollectedLine = false;\n        }\n\n        switch (self.state) {\n          case \"HEADER\":\n            // 13-18 - Allow a header (metadata) under the WEBVTT line.\n            if (/:/.test(line)) {\n              parseHeader(line);\n            } else if (!line) {\n              // An empty line terminates the header and starts the body (cues).\n              self.state = \"ID\";\n            }\n            continue;\n          case \"NOTE\":\n            // Ignore NOTE blocks.\n            if (!line) {\n              self.state = \"ID\";\n            }\n            continue;\n          case \"ID\":\n            // Check for the start of NOTE blocks.\n            if (/^NOTE($|[ \\t])/.test(line)) {\n              self.state = \"NOTE\";\n              break;\n            }\n            // 19-29 - Allow any number of line terminators, then initialize new cue values.\n            if (!line) {\n              continue;\n            }\n            self.cue = new self.window.VTTCue(0, 0, \"\");\n            self.state = \"CUE\";\n            // 30-39 - Check if self line contains an optional identifier or timing data.\n            if (line.indexOf(\"-->\") === -1) {\n              self.cue.id = line;\n              continue;\n            }\n          // Process line as start of a cue.\n          /*falls through*/\n          case \"CUE\":\n            // 40 - Collect cue timings and settings.\n            try {\n              parseCue(line, self.cue, self.regionList);\n            } catch (e) {\n              self.reportOrThrowError(e);\n              // In case of an error ignore rest of the cue.\n              self.cue = null;\n              self.state = \"BADCUE\";\n              continue;\n            }\n            self.state = \"CUETEXT\";\n            continue;\n          case \"CUETEXT\":\n            var hasSubstring = line.indexOf(\"-->\") !== -1;\n            // 34 - If we have an empty line then report the cue.\n            // 35 - If we have the special substring '-->' then report the cue,\n            // but do not collect the line as we need to process the current\n            // one as a new cue.\n            if (!line || hasSubstring && (alreadyCollectedLine = true)) {\n              // We are done parsing self cue.\n              self.oncue && self.oncue(self.cue);\n              self.cue = null;\n              self.state = \"ID\";\n              continue;\n            }\n            if (self.cue.text) {\n              self.cue.text += \"\\n\";\n            }\n            self.cue.text += line;\n            continue;\n          case \"BADCUE\": // BADCUE\n            // 54-62 - Collect and discard the remaining cue.\n            if (!line) {\n              self.state = \"ID\";\n            }\n            continue;\n        }\n      }\n    } catch (e) {\n      self.reportOrThrowError(e);\n\n      // If we are currently parsing a cue, report what we have.\n      if (self.state === \"CUETEXT\" && self.cue && self.oncue) {\n        self.oncue(self.cue);\n      }\n      self.cue = null;\n      // Enter BADWEBVTT state if header was not parsed correctly otherwise\n      // another exception occurred so enter BADCUE state.\n      self.state = self.state === \"INITIAL\" ? \"BADWEBVTT\" : \"BADCUE\";\n    }\n    return this;\n  },\n  flush: function () {\n    var self = this;\n    try {\n      // Finish decoding the stream.\n      self.buffer += self.decoder.decode();\n      // Synthesize the end of the current cue or region.\n      if (self.cue || self.state === \"HEADER\") {\n        self.buffer += \"\\n\\n\";\n        self.parse();\n      }\n      // If we've flushed, parsed, and we're still on the INITIAL state then\n      // that means we don't have enough of the stream to parse the first\n      // line.\n      if (self.state === \"INITIAL\") {\n        throw new ParsingError(ParsingError.Errors.BadSignature);\n      }\n    } catch (e) {\n      self.reportOrThrowError(e);\n    }\n    self.onflush && self.onflush();\n    return this;\n  }\n};\n\n\nexport {processCues, convertCueToDOMTree, Parser, StringDecoder};\n\n\n\n// WEBPACK FOOTER //\n// ./track/text-track-display.js","//@flow\nimport Player from '../player'\nimport getLogger from '../utils/logger'\nimport * as Utils from '../utils/util'\nimport EventManager from '../event/event-manager'\nimport Error from '../error/error';\nimport FakeEvent from '../event/fake-event'\n\n/** The BasePlugin responsible to implement the plugin interface.\n * Contains several default implementations.\n * Other plugins should extend this class.\n * @classdesc\n */\nexport default class BasePlugin implements IPlugin {\n  /**\n   * The runtime configuration of the plugin.\n   * @member\n   */\n  config: Object;\n  /**\n   * The name of the plugin.\n   * @member\n   */\n  name: string;\n  /**\n   * The logger of the plugin.\n   * @member\n   */\n  logger: any;\n  /**\n   * Reference to the actual player.\n   * @member\n   */\n  player: Player;\n  /**\n   * The event manager of the plugin.\n   * @member\n   */\n  eventManager: EventManager;\n  /**\n   * The default configuration of the plugin.\n   * Inherited plugins should override this property.\n   * @type {Object}\n   * @static\n   * @member\n   */\n  static defaultConfig: Object = {};\n\n  /**\n   * Factory method to create the actual plugin.\n   * @param {string} name - The plugin name\n   * @param {Player} player - The player reference\n   * @param {Object} config - The plugin configuration\n   * @returns {BasePlugin} - New runtime plugin instance\n   * @static\n   * @public\n   */\n  static createPlugin(name: string, player: Player, config: Object = {}): BasePlugin {\n    return new this(name, player, config);\n  }\n\n  /**\n   * Returns under what conditions the plugin is valid.\n   * Plugin must implement this method.\n   * @returns {boolean} - Whether the plugin is valid and can be initiated. Default implementation is true\n   * @static\n   * @public\n   * @abstract\n   */\n  static isValid(): boolean {\n    throw new Error(Error.Severity.CRITICAL, Error.Category.PLAYER, Error.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, 'isValid()');\n  }\n\n  /**\n   * constructor\n   * @param {string} name - The plugin name\n   * @param {Player} player - The player reference\n   * @param {Object} config - The plugin configuration\n   * @constructor\n   * @private\n   */\n  constructor(name: string, player: Player, config: Object) {\n    this.name = name;\n    this.player = player;\n    this.eventManager = new EventManager();\n    this.logger = getLogger(Utils.String.capitlize(this.name));\n    this.config = {};\n    Utils.Object.mergeDeep(this.config, this.constructor.defaultConfig, config);\n  }\n\n  /**\n   * Getter for the configuration of the plugin.\n   * @param {string} attr - The key in the plugin configuration (optional).\n   * @returns {*} - If attribute is provided, returns its value. Else, Returns the config of the plugin.\n   * @public\n   */\n  getConfig(attr?: string): any {\n    if (attr) {\n      return Utils.Object.copyDeep(this.config[attr]);\n    }\n    return Utils.Object.copyDeep(this.config);\n  }\n\n  /**\n   * Updates the config of the plugin.\n   * @param {Object} update - The updated configuration.\n   * @public\n   * @returns {void}\n   */\n  updateConfig(update: Object): void {\n    Utils.Object.mergeDeep(this.config, update);\n  }\n\n  /**\n   * Runs the destroy logic of the plugin.\n   * plugin must implement this method.\n   * @public\n   * @virtual\n   * @returns {void}\n   */\n  destroy(): void {\n  }\n\n  /**\n   * Runs the reset logic of the plugin.\n   * plugin must implement this method.\n   * @public\n   * @virtual\n   * @returns {void}\n   */\n  reset(): void {\n  }\n\n  /**\n   * Getter for the plugin's name.\n   * @returns {string} - The name of the plugin.\n   * @public\n   */\n  getName(): string {\n    return this.name;\n  }\n\n  /**\n   * Dispatch an event via the plugin.\n   * @param {string} name - The event name.\n   * @param {any} payload - The event payload.\n   * @returns {void}\n   */\n  dispatchEvent(name: string, payload: any): void {\n    this.logger.debug(\"Fire event: \" + name, payload);\n    this.player.dispatchEvent(new FakeEvent(name, payload));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./plugin/base-plugin.js","//@flow\nexport type StateTypes = { [state: string]: string };\n\nconst StateType: StateTypes = {\n  IDLE: \"idle\",\n  LOADING: \"loading\",\n  PLAYING: \"playing\",\n  PAUSED: \"paused\",\n  BUFFERING: \"buffering\"\n};\n\nexport {StateType};\n\n\n\n// WEBPACK FOOTER //\n// ./state/state-type.js","// @flow\n\n/**\n * Base middleware.\n * @classdesc\n */\nexport default class BaseMiddleware {\n  /**\n   * Id of the middleware instance.\n   * @public\n   */\n  id: string;\n\n  /**\n   * Calls the next handler in the middleware chain.\n   * @param {Function} next - The next handler in the middleware chain.\n   * @returns {void}\n   */\n  callNext(next: Function): void {\n    if (next) {\n      next();\n    }\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/base-middleware.js","//@flow\nimport NativeAdapter from './adapters/native-adapter'\nimport getLogger from '../../../utils/logger'\n\n/**\n * Media source provider\n * @classdesc\n */\nexport default class MediaSourceProvider {\n  /**\n   * The logger of the media source provider.\n   * @member {any} _logger\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('MediaSourceProvider');\n  /**\n   * The media source adapter registry.\n   * @member {Array<IMediaSourceAdapter>} _mediaSourceAdapters\n   * @static\n   * @private\n   */\n  static _mediaSourceAdapters: Array<typeof IMediaSourceAdapter> = [NativeAdapter];\n  /**\n   * The selected adapter for playback.\n   * @type {null|IMediaSourceAdapter}\n   * @static\n   * @private\n   */\n  static _selectedAdapter: ?(typeof IMediaSourceAdapter) = null;\n\n  /**\n   * Add a media source adapter to the registry.\n   * @function register\n   * @param {IMediaSourceAdapter} mediaSourceAdapter - The media source adapter to register.\n   * @static\n   * @returns {void}\n   */\n  static register(mediaSourceAdapter: typeof IMediaSourceAdapter): void {\n    if (mediaSourceAdapter) {\n      if (!MediaSourceProvider._mediaSourceAdapters.includes(mediaSourceAdapter)) {\n        MediaSourceProvider._logger.debug(`Adapter <${mediaSourceAdapter.id}> has been registered successfully`);\n        MediaSourceProvider._mediaSourceAdapters.push(mediaSourceAdapter);\n      } else {\n        MediaSourceProvider._logger.debug(`Adapter <${mediaSourceAdapter.id}> is already registered, do not register again`);\n      }\n    }\n  }\n\n  /**\n   * Remove a media source adapter from the registry.\n   * @function unRegister\n   * @param {IMediaSourceAdapter} mediaSourceAdapter - The media source adapter to unRegister.\n   * @static\n   * @returns {void}\n   */\n  static unRegister(mediaSourceAdapter: typeof IMediaSourceAdapter): void {\n    let index = MediaSourceProvider._mediaSourceAdapters.indexOf(mediaSourceAdapter);\n    if (index > -1) {\n      MediaSourceProvider._logger.debug(`Unregistered <${mediaSourceAdapter.id}> adapter`);\n      MediaSourceProvider._mediaSourceAdapters.splice(index, 1);\n    }\n  }\n\n  /**\n   * Checks if the a media source adapter can play a given source.\n   * @param {PKMediaSourceObject} source - The source object to check.\n   *  @param {boolean} [preferNative=true] - prefer native flag\n   * @returns {boolean} - Whether a media source adapter can play the source.\n   * @public\n   * @static\n   */\n  static canPlaySource(source: PKMediaSourceObject, preferNative: boolean = true): boolean {\n    MediaSourceProvider._orderMediaSourceAdapters(preferNative);\n    let mediaSourceAdapters = MediaSourceProvider._mediaSourceAdapters;\n    if (source && source.mimetype) {\n      for (let i = 0; i < mediaSourceAdapters.length; i++) {\n        if (mediaSourceAdapters[i].canPlayType(source.mimetype) && (!source.drmData || mediaSourceAdapters[i].canPlayDrm(source.drmData))) {\n          MediaSourceProvider._selectedAdapter = mediaSourceAdapters[i];\n          MediaSourceProvider._logger.debug(`Selected adapter is <${MediaSourceProvider._selectedAdapter.id}>`);\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Orders the media source adapters array according to the preferNative value.\n   * @param {boolean} preferNative - Whether to prefer native playback.\n   * @private\n   * @returns {void}\n   */\n  static _orderMediaSourceAdapters(preferNative: boolean): void {\n    MediaSourceProvider._mediaSourceAdapters =\n      MediaSourceProvider._mediaSourceAdapters.filter(mse => mse.id !== 'NativeAdapter');\n    if (preferNative) {\n      MediaSourceProvider._mediaSourceAdapters.unshift(NativeAdapter);\n    } else {\n      MediaSourceProvider._mediaSourceAdapters.push(NativeAdapter);\n    }\n  }\n\n  /**\n   * Get the appropriate media source adapter to the video source.\n   * @function getMediaSourceAdapter\n   * @param {HTMLVideoElement} videoElement - The video element which requires adapter for a given mimeType.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {IMediaSourceAdapter|null} - The selected media source adapter, or null if such doesn't exists.\n   * @static\n   */\n  static getMediaSourceAdapter(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: Object): ?IMediaSourceAdapter {\n    if (videoElement && source && config) {\n      if (!MediaSourceProvider._selectedAdapter) {\n        MediaSourceProvider.canPlaySource(source, true);\n      }\n      return MediaSourceProvider._selectedAdapter ? MediaSourceProvider._selectedAdapter.createAdapter(videoElement, source, config) : null;\n    }\n    return null;\n  }\n\n  /**\n   * Destroys the media source adapter provider necessary props.\n   * @static\n   * @returns {void}\n   */\n  static destroy(): void {\n    MediaSourceProvider._selectedAdapter = null;\n  }\n}\n\nconst registerMediaSourceAdapter = MediaSourceProvider.register;\nexport {registerMediaSourceAdapter};\n\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/media-source/media-source-provider.js","//@flow\n/* eslint-disable no-unused-vars */\nimport FakeEvent from '../../../event/fake-event'\nimport FakeEventTarget from '../../../event/fake-event-target'\nimport Error from '../../../error/error'\nimport {CustomEventType, Html5EventType} from '../../../event/event-type'\nimport getLogger from '../../../utils/logger'\nimport Track from '../../../track/track'\nimport VideoTrack from '../../../track/video-track'\nimport AudioTrack from '../../../track/audio-track'\nimport TextTrack from '../../../track/text-track'\n\nexport default class BaseMediaSourceAdapter extends FakeEventTarget implements IMediaSourceAdapter {\n  /**\n   * Passing the getLogger function to the actual media source adapter.\n   * @type {Function}\n   * @static\n   */\n  static getLogger: Function = getLogger;\n\n  /**\n   * The adapter config.\n   * @member {Object} _config\n   * @private\n   */\n  _config: ?Object;\n\n  /**\n   * The source object.\n   * @member {PKMediaSourceObject} _sourceObj\n   * @private\n   */\n  _sourceObj: ?PKMediaSourceObject;\n\n  /**\n   * The dom video element.\n   * @member {HTMLVideoElement} _videoElement\n   * @private\n   */\n  _videoElement: HTMLVideoElement;\n\n  /**\n   * Checks if the media source adapter is supported.\n   * @function isSupported\n   * @returns {boolean} - Whether the media source adapter is supported.\n   * @static\n   */\n  static isSupported(): boolean {\n    return true;\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLVideoElement} videoElement - The video element which bind to media source adapter.\n   * @param {PKMediaSourceObject} source - The source object.\n   * @param {Object} config - The media source adapter configuration.\n   */\n  constructor(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: Object = {}) {\n    super();\n    this._videoElement = videoElement;\n    this._sourceObj = source;\n    this._config = config;\n    this._handleLiveTimeUpdate();\n  }\n\n  /**\n   * Destroys the media source adapter.\n   * @function destroy\n   * @returns {void}\n   */\n  destroy(): Promise<*> {\n    this._sourceObj = null;\n    this._config = null;\n    return Promise.resolve();\n  }\n\n  /**\n   * Triggers the appropriate track changed event.\n   * @param {Track} track - The selected track.\n   * @private\n   * @returns {void}\n   */\n  _onTrackChanged(track: Track): void {\n    if (track instanceof VideoTrack) {\n      this._trigger(CustomEventType.VIDEO_TRACK_CHANGED, {selectedVideoTrack: track});\n    } else if (track instanceof AudioTrack) {\n      this._trigger(CustomEventType.AUDIO_TRACK_CHANGED, {selectedAudioTrack: track});\n    } else if (track instanceof TextTrack) {\n      this._trigger(CustomEventType.TEXT_TRACK_CHANGED, {selectedTextTrack: track});\n    }\n  }\n\n  /**\n   * Dispatch an adapter event forward.\n   * @param {string} name - The name of the event.\n   * @param {?Object} payload - The event payload.\n   * @returns {void}\n   */\n  _trigger(name: string, payload?: Object): void {\n    this.dispatchEvent(new FakeEvent(name, payload));\n  }\n\n  /** Must implemented methods by the derived media source adapter **/\n\n  static canPlayType(mimeType: string, preferNative: boolean): boolean {\n    return BaseMediaSourceAdapter._throwNotImplementedError('static canPlayType');\n  }\n\n  load(): Promise<Object> {\n    return BaseMediaSourceAdapter._throwNotImplementedError('load');\n  }\n\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    return BaseMediaSourceAdapter._throwNotImplementedError('selectVideoTrack');\n  }\n\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('selectAudioTrack');\n  }\n\n  selectTextTrack(textTrack: TextTrack): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('selectTextTrack');\n  }\n\n  hideTextTrack(): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('hideTextTrack');\n  }\n\n  enableAdaptiveBitrate(): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('enableAdaptiveBitrate');\n  }\n\n  isAdaptiveBitrateEnabled(): boolean {\n    return BaseMediaSourceAdapter._throwNotImplementedError('isAdaptiveBitrateEnabled');\n  }\n\n  _getLiveEdge(): number {\n    return BaseMediaSourceAdapter._throwNotImplementedError('_getLiveEdge');\n  }\n\n  seekToLiveEdge(): void {\n    BaseMediaSourceAdapter._throwNotImplementedError('seekToLiveEdge');\n  }\n\n  isLive(): boolean {\n    return BaseMediaSourceAdapter._throwNotImplementedError('isLive');\n  }\n\n  /**\n   * Handling live time update (as is not triggered when video is paused, but the current time changed)\n   * @function _handleLiveTimeUpdate\n   * @returns {void}\n   * @private\n   */\n  _handleLiveTimeUpdate(): void {\n    this._videoElement.addEventListener(Html5EventType.DURATION_CHANGE, () => {\n      if (this.isLive() && this._videoElement.paused) {\n        this._trigger(Html5EventType.TIME_UPDATE);\n      }\n    });\n  }\n\n  getStartTimeOfDvrWindow(): number {\n    return BaseMediaSourceAdapter._throwNotImplementedError('getStartTimeOfDvrWindow');\n  }\n\n  /**\n   * throw a run time error\n   * @param {string} name of the unimplemented function\n   * @returns {any} void/string/boolean\n   */\n  static _throwNotImplementedError(name: string): any {\n    throw new Error(Error.Severity.CRITICAL, Error.Category.PLAYER, Error.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, name);\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {Number} - The current playback time.\n   * @public\n   */\n  get currentTime(): number {\n    if (this.isLive()) {\n      return this._videoElement.currentTime - this.getStartTimeOfDvrWindow();\n    } else {\n      return this._videoElement.currentTime;\n    }\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   * @returns {void}\n   */\n  set currentTime(to: number): void {\n    if (this.isLive()) {\n      to += this.getStartTimeOfDvrWindow();\n    }\n    this._videoElement.currentTime = to;\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {Number} - The playback duration.\n   * @public\n   */\n  get duration(): number {\n    if (this.isLive()) {\n      return this._getLiveEdge() - this.getStartTimeOfDvrWindow();\n    } else {\n      return this._videoElement.duration;\n    }\n  }\n\n  /**\n   * Getter for the src that the adapter plays on the video element.\n   * In case the adapter preformed a load it will return the manifest url.\n   * @public\n   * @returns {string} - The src url.\n   */\n  get src(): string {\n    if (this._loadPromise && this._sourceObj) {\n      return this._sourceObj.url;\n    }\n    return \"\";\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/media-source/base-media-source-adapter.js","// @flow\n/* eslint-disable no-unused-vars */\nimport getLogger from '../utils/logger'\nimport Error from '../error/error'\nimport DrmSupport from './drm-support'\nimport {DrmScheme} from './drm-scheme'\n\nexport default class BaseDrmProtocol implements IDrmProtocol {\n  static getLogger = getLogger;\n  static DrmSupport = DrmSupport;\n  static DrmScheme = DrmScheme;\n\n  static canPlayDrm(drmData: Array<Object>): boolean {\n    throw new Error(Error.Severity.CRITICAL, Error.Category.PLAYER, Error.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, 'static canPlayDrm');\n  }\n\n  static setDrmPlayback(...args): void {\n    throw new Error(Error.Severity.CRITICAL, Error.Category.PLAYER, Error.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED, 'static setDrmPlayback');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drm/base-drm-protocol.js","// @flow\nexport const DrmScheme = {\n  WIDEVINE: 'com.widevine.alpha',\n  PLAYREADY: 'com.microsoft.playready',\n  FAIRPLAY: 'com.apple.fairplay'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./drm/drm-scheme.js","//@flow\nimport BasePlugin from './base-plugin'\nimport Error from '../error/error'\nimport Player from '../player'\nimport getLogger from '../utils/logger'\n\n/**\n * The logger of the PluginManager class.\n * @private\n * @const\n */\nconst logger = getLogger(\"PluginManager\");\n\n/** The PluginManager responsible for register plugins definitions and store plugins instances.\n * @classdesc\n */\nexport default class PluginManager {\n  /**\n   * The registry of the plugins.\n   * Maps plugin's name to his class.\n   * @type {Map}\n   * @static\n   * @private\n   */\n  static _registry: Map<string, Function> = new Map();\n  /**\n   * The active plugins in the player.\n   * Maps plugin's name to his instance.\n   * @type {Map}\n   * @private\n   */\n  _plugins: Map<string, BasePlugin> = new Map();\n\n  /**\n   * Writes the plugin in the registry.\n   * Maps: plugin name -> plugin class.\n   * @param {string} name - The plugin name\n   * @param {Function} handler - The plugin class\n   * @returns {boolean} - If the registration request succeeded\n   * @static\n   * @public\n   */\n  static register(name: string, handler: Function): boolean {\n    if (typeof handler !== 'function' || handler.prototype instanceof BasePlugin === false) {\n      logger.error(`Plugin <${name}> registration failed, either plugin is not an instance of BasePlugin or plugin handler is not a function`);\n      return false;\n    }\n    if (!PluginManager._registry.has(name)) {\n      PluginManager._registry.set(name, handler);\n      logger.debug(`Plugin <${name}> has been registered successfully`);\n      return true;\n    }\n    logger.debug(`Plugin <${name}> is already registered, do not register again`);\n    return false;\n  }\n\n  /**\n   * Removes the plugin from the registry.\n   * @param {string} name - The plugin name\n   * @static\n   * @public\n   * @returns {void}\n   */\n  static unRegister(name: string): void {\n    if (PluginManager._registry.has(name)) {\n      PluginManager._registry.delete(name);\n      logger.debug(`Unregistered <${name}> plugin.`);\n    }\n  }\n\n  /**\n   * Creates and store new instance of the plugin in case isValid() of the plugin returns true.\n   * @param {string} name - The plugin name\n   * @param {Player} player - The player reference\n   * @param {Object} [config={}] - The plugin configuration\n   * @returns {boolean} - Whether the plugin load was successful\n   * @public\n   */\n  load(name: string, player: Player, config: Object = {}): boolean {\n    if (!PluginManager._registry.has(name)) {\n      logger.warn(`Plugin <${name}> loading failed, plugin is not registered`);\n      throw new Error(Error.Severity.RECOVERABLE, Error.Category.PLAYER, Error.Code.RUNTIME_ERROR_NOT_REGISTERED_PLUGIN, name);\n    }\n    let pluginClass = PluginManager._registry.get(name);\n    if (pluginClass && pluginClass.isValid() && !config.disable) {\n      this._plugins.set(name, pluginClass.createPlugin(name, player, config));\n      logger.debug(`Plugin <${name}> has been loaded`);\n      return true;\n    }\n    logger.debug(`Plugin <${name}> isn\\'t loaded, isValid()=false, disabled=${config.disable}`);\n    return false;\n  }\n\n  /**\n   * Iterates over all the plugins and calls private _destroy.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this._plugins.forEach(this._destroy.bind(this));\n  }\n\n  /**\n   * Iterates over all the plugins and calls reset() method of the plugin's impl.\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._plugins.forEach((plugin: BasePlugin) => {\n      plugin.reset();\n    });\n  }\n\n  /**\n   * Calls destroy() method of the plugin's impl.\n   * @param {BasePlugin} plugin - The plugin instance\n   * @param {string} name - The plugin name\n   * @private\n   * @returns {void}\n   */\n  _destroy(plugin: BasePlugin, name: string): void {\n    plugin.destroy();\n    this._plugins.delete(name);\n  }\n\n  /**\n   * Returns the plugin's instance.\n   * @param {string} name - The plugin name\n   * @returns {BasePlugin} - The plugin instance\n   * @public\n   */\n  get(name: string): ?BasePlugin {\n    return this._plugins.get(name);\n  }\n}\n\n/**\n * Export the register method.\n * @type {function}\n * @constant\n */\nconst registerPlugin = PluginManager.register;\nexport {registerPlugin};\n\n\n\n// WEBPACK FOOTER //\n// ./plugin/plugin-manager.js","// @flow\n\n/**\n * Creates a TextStyle object.\n *\n * <p><i>\n * Note that although this API is based on FCC guidelines, we cannot guarantee\n * that your application is in compliance with this or any other guideline.\n * </i></p>\n *\n * @constructor\n * @struct\n * @export\n */\nclass TextStyle {\n\n  /**\n   * Defined set of font families\n   * @enum {Object.<string, string>}}\n   * @export\n   */\n  static FontFamily: {[string]: string} = {\n    \"ARIAL\": \"Arial\",\n    \"HELVETICA\": \"Helvetica\",\n    \"VERDANA\": \"Verdana\",\n    \"SANS_SERIF\": \"sans-serif\"\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111, footnote\n   * 448.  Each value is an array of the three RGB values for that color.\n   * @enum {Object.<string, Array.<number>>}}\n   * @export\n   */\n  static StandardColors: {[string]: Array<number>} = {\n    'WHITE': [255, 255, 255],\n    'BLACK': [0, 0, 0],\n    'RED': [255, 0, 0],\n    'GREEN': [0, 255, 0],\n    'BLUE': [0, 0, 255],\n    'YELLOW': [255, 255, 0],\n    'MAGENTA': [255, 0, 255],\n    'CYAN': [0, 255, 255]\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * @enum {Object.<string, number>}}\n   * @export\n   */\n  static StandardOpacities: {[string]: number} = {\n    'OPAQUE': 1,\n    'SEMI_HIGH': 0.75,\n    'SEMI_LOW': 0.25,\n    'TRANSPARENT': 0\n  };\n\n  /**\n   * Defined in {@link https://goo.gl/ZcqOOM FCC 12-9}, paragraph 111.\n   * The styles to achieve these effects are not specified anywhere.\n   *\n   * Each inner array represents a shadow, and is composed of RGB values for the\n   * shadow color, followed by pixel values for x-offset, y-offset, and blur.\n   *\n   * @enum {!Array.<!Array.<number>>}\n   * @export\n   */\n  static EdgeStyles: { [string]: Array<Array<number>> } = {\n    'NONE': [],\n    'RAISED': [\n      [34, 34, 34, 1, 1, 0],\n      [34, 34, 34, 2, 2, 0],\n      [34, 34, 34, 3, 3, 0]],\n    'DEPRESSED': [\n      [204, 204, 204, 1, 1, 0],\n      [204, 204, 204, 0, 1, 0],\n      [34, 34, 34, -1, -1, 0],\n      [34, 34, 34, 0, -1, 0]],\n    'UNIFORM': [\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4],\n      [34, 34, 34, 0, 0, 4]],\n    'DROP': [\n      [34, 34, 34, 2, 2, 3],\n      [34, 34, 34, 2, 2, 4],\n      [34, 34, 34, 2, 2, 5]]\n  };\n\n  static FontSizes: Array<string> = [\n    \"50%\",\n    \"75%\",\n    \"100%\",\n    \"200%\",\n    \"300%\",\n    \"400%\"\n  ];\n\n  /**\n   * Creates a CSS RGBA sctring for a given color and opacity values\n   * @param {TextStyle.StandardColors} color - color value in RGB\n   * @param {TextStyle.StandardOpacities} opacity - opacity value\n   * @return {string} - CSS rgba string\n   * @private\n   */\n  static _toRGBA(color: Array<number>, opacity: number): string {\n    // shaka.asserts.assert(color.length == 3);\n    return 'rgba(' + color.concat(opacity).join(',') + ')';\n  }\n\n  /**\n   * Font size, such as 50%, 75%, 100%, 200%, or 300%.\n   * @type {string}\n   */\n  fontSize: string = '100%';\n\n  /**\n   * @type {TextStyle.FontFamily}\n   */\n  fontFamily: string = TextStyle.FontFamily.SANS_SERIF;\n\n  /**\n   * @type {TextStyle.StandardColors}\n   */\n  fontColor: Array<number> = TextStyle.StandardColors.WHITE;\n\n  /**\n   * @type {TextStyle.StandardOpacities}\n   * @expose\n   */\n  fontOpacity: number = TextStyle.StandardOpacities.OPAQUE;\n\n  /**\n   * @type {TextStyle.StandardColors}\n   */\n  backgroundColor: Array<number> = TextStyle.StandardColors.BLACK;\n\n  /**\n   * @type {TextStyle.StandardOpacities}\n   */\n  backgroundOpacity: number = TextStyle.StandardOpacities.OPAQUE;\n\n  /**\n   * @type {TextStyle.EdgeStyles}\n   * @expose\n   */\n  fontEdge: Array<Array<number>> = TextStyle.EdgeStyles.NONE;\n\n  /**\n   * Compute the CSS text necessary to represent this TextStyle.\n   * Output does not contain any selectors.\n   *\n   * @return {string} - ::CUE CSS string\n   */\n  toCSS(): string {\n    let attributes: Array<string> = [];\n\n    attributes.push('font-family: ' + this.fontFamily);\n    attributes.push('font-size: ' + this.fontSize);\n    attributes.push('color: ' + TextStyle._toRGBA(this.fontColor, this.fontOpacity));\n    attributes.push('background-color: ' +\n      TextStyle._toRGBA(this.backgroundColor, this.backgroundOpacity));\n\n    // A given edge effect may be implemented with multiple shadows.\n    // Collect them all into an array, then combine into one attribute.\n    let shadows: Array<string> = [];\n    for (let i = 0; i < this.fontEdge.length; i++) {\n      // shaka.asserts.assert(this.fontEdge[i].length == 6);\n      const color: Array<number> = this.fontEdge[i].slice(0, 3);\n      let shadow: Array<number> = this.fontEdge[i].slice(3, 6);\n      shadows.push(TextStyle._toRGBA(color, this.fontOpacity) + ' ' +\n        shadow.join('px ') + 'px');\n    }\n    attributes.push('text-shadow: ' + shadows.join(','));\n\n    return attributes.join('!important; ');\n  }\n\n  /**\n   * clones the textStyle object\n   * @returns {TextStyle} the cloned textStyle object\n   */\n  clone(): TextStyle{\n    let clonedTextStyle = new TextStyle();\n    clonedTextStyle.fontEdge = this.fontEdge;\n    clonedTextStyle.fontSize = this.fontSize;\n    clonedTextStyle.fontColor = this.fontColor;\n    clonedTextStyle.fontOpacity = this.fontOpacity;\n    clonedTextStyle.backgroundColor = this.backgroundColor;\n    clonedTextStyle.backgroundOpacity = this.backgroundOpacity;\n    return clonedTextStyle;\n  }\n}\n\nexport default TextStyle;\n\n\n\n// WEBPACK FOOTER //\n// ./track/text-style.js","// @flow\nexport type StreamTypes = { [stream: string]: string };\n\nconst StreamType: StreamTypes = {\n  DASH: \"dash\",\n  HLS: \"hls\",\n  PROGRESSIVE: \"progressive\"\n};\n\nexport {StreamType};\n\n\n\n// WEBPACK FOOTER //\n// ./engines/stream-type.js","// @flow\nexport type EngineTypes = { [engine: string]: string };\n\nconst EngineType: EngineTypes = {\n  HTML5: \"html5\",\n  FLASH: \"flash\",\n  SILVERLIGHT: \"silverlight\"\n};\n\nexport {EngineType};\n\n\n\n// WEBPACK FOOTER //\n// ./engines/engine-type.js","// @flow\nexport type MediaTypes = { [media: string]: string };\n\nconst MediaType: MediaTypes = {\n  VOD: \"Vod\",\n  LIVE: \"Live\",\n  AUDIO: \"Audio\",\n  UNKNOWN: \"Unknown\"\n};\n\nexport {MediaType};\n\n\n\n// WEBPACK FOOTER //\n// ./media-type.js","// @flow\nexport type AbrModes = { [mode: string]: string };\n\nconst AbrMode: AbrModes = {\n  MANUAL: \"manual\",\n  AUTO: \"auto\"\n};\n\nexport {AbrMode};\n\n\n\n// WEBPACK FOOTER //\n// ./track/abr-mode-type.js","//@flow\nimport Player from './player'\nimport BaseMediaSourceAdapter from './engines/html5/media-source/base-media-source-adapter'\nimport {registerMediaSourceAdapter} from './engines/html5/media-source/media-source-provider'\nimport {registerPlugin} from './plugin/plugin-manager'\nimport BaseDrmProtocol from './drm/base-drm-protocol'\nimport BaseMiddleware from './middleware/base-middleware'\nimport BasePlugin from './plugin/base-plugin'\nimport Track from './track/track'\nimport VideoTrack from './track/video-track'\nimport AudioTrack from './track/audio-track'\nimport TextTrack from './track/text-track'\nimport TextStyle from './track/text-style'\nimport Env from './utils/env'\nimport * as Utils from './utils/util'\nimport Error from './error/error'\nimport FakeEvent from './event/fake-event'\nimport FakeEventTarget from './event/fake-event-target'\nimport EventManager from './event/event-manager'\nimport {StateType} from './state/state-type'\nimport {TrackType} from './track/track-type'\nimport {StreamType} from './engines/stream-type'\nimport {EngineType} from './engines/engine-type'\nimport {MediaType} from './media-type'\nimport {EventType} from './event/event-type'\nimport {AbrMode} from './track/abr-mode-type'\nimport {LogLevelType} from './utils/logger'\n\nPlayer.runCapabilities();\n\ndeclare var __VERSION__: string;\ndeclare var __NAME__: string;\n\n/**\n * @param {Object} config - The configuration of the player\n * @returns {Player} - The player instance\n */\nexport function loadPlayer(config: ?Object) {\n  return new Player(config || {});\n}\n\n// Export the media source adapters necessary utils\nexport {registerMediaSourceAdapter, BaseMediaSourceAdapter};\n\n// Export the plugin framework\nexport {registerPlugin, BasePlugin, BaseMiddleware};\n\n// Export the tracks classes\nexport {Track, VideoTrack, AudioTrack, TextTrack, TextStyle};\n\n// Export utils library\nexport {Utils};\n\n// Export Error class\nexport {Error};\n\n// Export Event system\nexport {FakeEvent, FakeEventTarget, EventManager}\n\n// Export version\nexport {__VERSION__ as VERSION};\n\n// Export player name\nexport {__NAME__ as PLAYER_NAME};\n\n// Export environment data\nexport {Env};\n\n// Export base DRM protocol\nexport {BaseDrmProtocol};\n\n// Export the player capabilities\nconst getCapabilities = Player.getCapabilities;\nconst setCapabilities = Player.setCapabilities;\nexport {getCapabilities, setCapabilities};\n\n// Export enums\nexport {EventType, StateType, TrackType, EngineType, MediaType, StreamType, AbrMode, LogLevelType};\n\nexport default loadPlayer;\n\n\n\n// WEBPACK FOOTER //\n// ./playkit.js","/**\n * UAParser.js v0.7.13\n * Lightweight JavaScript-based User-Agent string parser\n * https://github.com/faisalman/ua-parser-js\n *\n * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>\n * Dual licensed under GPLv2 & MIT\n */\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '0.7.13',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major', // deprecated\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded';\n\n\n    ///////////\n    // Helper\n    //////////\n\n\n    var util = {\n        extend : function (regexes, extensions) {\n            var margedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    margedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    margedRegexes[i] = regexes[i];\n                }\n            }\n            return margedRegexes;\n        },\n        has : function (str1, str2) {\n          if (typeof str1 === \"string\") {\n            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n          } else {\n            return false;\n          }\n        },\n        lowerize : function (str) {\n            return str.toLowerCase();\n        },\n        major : function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g,'').split(\".\")[0] : undefined;\n        },\n        trim : function (str) {\n          return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n        }\n    };\n\n\n    ///////////////\n    // Map helper\n    //////////////\n\n\n    var mapper = {\n\n        rgx : function (ua, arrays) {\n\n            //var result = {},\n            var i = 0, j, k, p, q, matches, match;//, args = arguments;\n\n            /*// construct object barebones\n            for (p = 0; p < args[1].length; p++) {\n                q = args[1][p];\n                result[typeof q === OBJ_TYPE ? q[0] : q] = undefined;\n            }*/\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length == 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length == 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length == 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n            //console.log(this);\n            //return this;\n        },\n\n        str : function (str, map) {\n\n            for (var i in map) {\n                // check if array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (util.has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (util.has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n        }\n    };\n\n\n    ///////////////\n    // String map\n    //////////////\n\n\n    var maps = {\n\n        browser : {\n            oldsafari : {\n                version : {\n                    '1.0'   : '/8',\n                    '1.2'   : '/1',\n                    '1.3'   : '/3',\n                    '2.0'   : '/412',\n                    '2.0.2' : '/416',\n                    '2.0.3' : '/417',\n                    '2.0.4' : '/419',\n                    '?'     : '/'\n                }\n            }\n        },\n\n        device : {\n            amazon : {\n                model : {\n                    'Fire Phone' : ['SD', 'KF']\n                }\n            },\n            sprint : {\n                model : {\n                    'Evo Shift 4G' : '7373KT'\n                },\n                vendor : {\n                    'HTC'       : 'APA',\n                    'Sprint'    : 'Sprint'\n                }\n            }\n        },\n\n        os : {\n            windows : {\n                version : {\n                    'ME'        : '4.90',\n                    'NT 3.11'   : 'NT3.51',\n                    'NT 4.0'    : 'NT4.0',\n                    '2000'      : 'NT 5.0',\n                    'XP'        : ['NT 5.1', 'NT 5.2'],\n                    'Vista'     : 'NT 6.0',\n                    '7'         : 'NT 6.1',\n                    '8'         : 'NT 6.2',\n                    '8.1'       : 'NT 6.3',\n                    '10'        : ['NT 6.4', 'NT 10.0'],\n                    'RT'        : 'ARM'\n                }\n            }\n        }\n    };\n\n\n    //////////////\n    // Regex map\n    /////////////\n\n\n    var regexes = {\n\n        browser : [[\n\n            // Presto based\n            /(opera\\smini)\\/([\\w\\.-]+)/i,                                       // Opera Mini\n            /(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i,                      // Opera Mobi/Tablet\n            /(opera).+version\\/([\\w\\.]+)/i,                                     // Opera > 9.80\n            /(opera)[\\/\\s]+([\\w\\.]+)/i                                          // Opera < 9.80\n            ], [NAME, VERSION], [\n\n            /(opios)[\\/\\s]+([\\w\\.]+)/i                                          // Opera mini on iphone >= 8.0\n            ], [[NAME, 'Opera Mini'], VERSION], [\n\n            /\\s(opr)\\/([\\w\\.]+)/i                                               // Opera Webkit\n            ], [[NAME, 'Opera'], VERSION], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]+)*/i,\n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n            // Trident based\n            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,\n                                                                                // Avant/IEMobile/SlimBrowser/Baidu\n            /(?:ms|\\()(ie)\\s([\\w\\.]+)/i,                                        // Internet Explorer\n\n            // Webkit/KHTML based\n            /(rekonq)\\/([\\w\\.]+)*/i,                                            // Rekonq\n            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\\/([\\w\\.-]+)/i\n                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser\n            ], [NAME, VERSION], [\n\n            /(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i                         // IE11\n            ], [[NAME, 'IE'], VERSION], [\n\n            /(edge)\\/((\\d+)?[\\w\\.]+)/i                                          // Microsoft Edge\n            ], [NAME, VERSION], [\n\n            /(yabrowser)\\/([\\w\\.]+)/i                                           // Yandex\n            ], [[NAME, 'Yandex'], VERSION], [\n\n            /(puffin)\\/([\\w\\.]+)/i                                              // Puffin\n            ], [[NAME, 'Puffin'], VERSION], [\n\n            /(uc\\s?browser)[\\/\\s]?([\\w\\.]+)/i,\n            /ucweb.+(ucbrowser)[\\/\\s]?([\\w\\.]+)/i,\n            /juc.+(ucweb)[\\/\\s]?([\\w\\.]+)/i,\n            /(ucbrowser)\\/([\\w\\.]+)/i\n                                                                                // UCBrowser\n            ], [[NAME, 'UCBrowser'], VERSION], [\n\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(micromessenger)\\/([\\w\\.]+)/i                                      // WeChat\n            ], [[NAME, 'WeChat'], VERSION], [\n\n            /m?(qqbrowser)[\\/\\s]?([\\w\\.]+)/i                                    // QQBrowser\n            ], [NAME, VERSION], [\n\n            /xiaomi\\/miuibrowser\\/([\\w\\.]+)/i                                   // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI Browser']], [\n\n            /;fbav\\/([\\w\\.]+);/i                                                // Facebook App for iOS & Android\n            ], [VERSION, [NAME, 'Facebook']], [\n\n            /(headlesschrome) ([\\w\\.]+)/i                                       // Chrome Headless\n            ], [VERSION, [NAME, 'Chrome Headless']], [\n\n            /\\swv\\).+(chrome)\\/([\\w\\.]+)/i                                      // Chrome WebView\n            ], [[NAME, /(.+)/, '$1 WebView'], VERSION], [\n\n            /android.+samsungbrowser\\/([\\w\\.]+)/i,\n            /android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)*/i        // Android Browser\n            ], [VERSION, [NAME, 'Android Browser']], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i\n                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /(dolfin)\\/([\\w\\.]+)/i                                              // Dolphin\n            ], [[NAME, 'Dolphin'], VERSION], [\n\n            /((?:android.+)crmo|crios)\\/([\\w\\.]+)/i                             // Chrome for Android/iOS\n            ], [[NAME, 'Chrome'], VERSION], [\n\n            /(coast)\\/([\\w\\.]+)/i                                               // Opera Coast\n            ], [[NAME, 'Opera Coast'], VERSION], [\n\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, 'Firefox']], [\n\n            /version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                       // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n\n            /version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i                    // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n\n            /webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i                     // Safari < 3.0\n            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [\n\n            /(konqueror)\\/([\\w\\.]+)/i,                                          // Konqueror\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape)\\/([\\w\\.-]+)/i                                 // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\\/([\\w\\.-]+)/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                          // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\n            /(links)\\s\\(([\\w\\.]+)/i,                                            // Links\n            /(gobrowser)\\/?([\\w\\.]+)*/i,                                        // GoBrowser\n            /(ice\\s?browser)\\/v?([\\w\\._]+)/i,                                   // ICE Browser\n            /(mosaic)[\\/\\s]([\\w\\.]+)/i                                          // Mosaic\n            ], [NAME, VERSION]\n\n            /* /////////////////////\n            // Media players BEGIN\n            ////////////////////////\n\n            , [\n\n            /(apple(?:coremedia|))\\/((\\d+)[\\w\\._]+)/i,                          // Generic Apple CoreMedia\n            /(coremedia) v((\\d+)[\\w\\._]+)/i\n            ], [NAME, VERSION], [\n\n            /(aqualung|lyssna|bsplayer)\\/((\\d+)?[\\w\\.-]+)/i                     // Aqualung/Lyssna/BSPlayer\n            ], [NAME, VERSION], [\n\n            /(ares|ossproxy)\\s((\\d+)[\\w\\.-]+)/i                                 // Ares/OSSProxy\n            ], [NAME, VERSION], [\n\n            /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\\/((\\d+)[\\w\\.-]+)/i,\n                                                                                // Audacious/AudiMusicStream/Amarok/BASS/OpenCORE/Dalvik/GnomeMplayer/MoC\n                                                                                // NSPlayer/PSP-InternetRadioPlayer/Videos\n            /(clementine|music player daemon)\\s((\\d+)[\\w\\.-]+)/i,               // Clementine/MPD\n            /(lg player|nexplayer)\\s((\\d+)[\\d\\.]+)/i,\n            /player\\/(nexplayer|lg player)\\s((\\d+)[\\w\\.-]+)/i                   // NexPlayer/LG Player\n            ], [NAME, VERSION], [\n            /(nexplayer)\\s((\\d+)[\\w\\.-]+)/i                                     // Nexplayer\n            ], [NAME, VERSION], [\n\n            /(flrp)\\/((\\d+)[\\w\\.-]+)/i                                          // Flip Player\n            ], [[NAME, 'Flip Player'], VERSION], [\n\n            /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i\n                                                                                // FStream/NativeHost/QuerySeekSpider/IA Archiver/facebookexternalhit\n            ], [NAME], [\n\n            /(gstreamer) souphttpsrc (?:\\([^\\)]+\\)){0,1} libsoup\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // Gstreamer\n            ], [NAME, VERSION], [\n\n            /(htc streaming player)\\s[\\w_]+\\s\\/\\s((\\d+)[\\d\\.]+)/i,              // HTC Streaming Player\n            /(java|python-urllib|python-requests|wget|libcurl)\\/((\\d+)[\\w\\.-_]+)/i,\n                                                                                // Java/urllib/requests/wget/cURL\n            /(lavf)((\\d+)[\\d\\.]+)/i                                             // Lavf (FFMPEG)\n            ], [NAME, VERSION], [\n\n            /(htc_one_s)\\/((\\d+)[\\d\\.]+)/i                                      // HTC One S\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(mplayer)(?:\\s|\\/)(?:(?:sherpya-){0,1}svn)(?:-|\\s)(r\\d+(?:-\\d+[\\w\\.-]+){0,1})/i\n                                                                                // MPlayer SVN\n            ], [NAME, VERSION], [\n\n            /(mplayer)(?:\\s|\\/|[unkow-]+)((\\d+)[\\w\\.-]+)/i                      // MPlayer\n            ], [NAME, VERSION], [\n\n            /(mplayer)/i,                                                       // MPlayer (no other info)\n            /(yourmuze)/i,                                                      // YourMuze\n            /(media player classic|nero showtime)/i                             // Media Player Classic/Nero ShowTime\n            ], [NAME], [\n\n            /(nero (?:home|scout))\\/((\\d+)[\\w\\.-]+)/i                           // Nero Home/Nero Scout\n            ], [NAME, VERSION], [\n\n            /(nokia\\d+)\\/((\\d+)[\\w\\.-]+)/i                                      // Nokia\n            ], [NAME, VERSION], [\n\n            /\\s(songbird)\\/((\\d+)[\\w\\.-]+)/i                                    // Songbird/Philips-Songbird\n            ], [NAME, VERSION], [\n\n            /(winamp)3 version ((\\d+)[\\w\\.-]+)/i,                               // Winamp\n            /(winamp)\\s((\\d+)[\\w\\.-]+)/i,\n            /(winamp)mpeg\\/((\\d+)[\\w\\.-]+)/i\n            ], [NAME, VERSION], [\n\n            /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i  // OCMS-bot/tap in radio/tunein/unknown/winamp (no other info)\n                                                                                // inlight radio\n            ], [NAME], [\n\n            /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // QuickTime/RealMedia/RadioApp/RadioClientApplication/\n                                                                                // SoundTap/Totem/Stagefright/Streamium\n            ], [NAME, VERSION], [\n\n            /(smp)((\\d+)[\\d\\.]+)/i                                              // SMP\n            ], [NAME, VERSION], [\n\n            /(vlc) media player - version ((\\d+)[\\w\\.]+)/i,                     // VLC Videolan\n            /(vlc)\\/((\\d+)[\\w\\.-]+)/i,\n            /(xbmc|gvfs|xine|xmms|irapp)\\/((\\d+)[\\w\\.-]+)/i,                    // XBMC/gvfs/Xine/XMMS/irapp\n            /(foobar2000)\\/((\\d+)[\\d\\.]+)/i,                                    // Foobar2000\n            /(itunes)\\/((\\d+)[\\d\\.]+)/i                                         // iTunes\n            ], [NAME, VERSION], [\n\n            /(wmplayer)\\/((\\d+)[\\w\\.-]+)/i,                                     // Windows Media Player\n            /(windows-media-player)\\/((\\d+)[\\w\\.-]+)/i\n            ], [[NAME, /-/g, ' '], VERSION], [\n\n            /windows\\/((\\d+)[\\w\\.-]+) upnp\\/[\\d\\.]+ dlnadoc\\/[\\d\\.]+ (home media server)/i\n                                                                                // Windows Media Server\n            ], [VERSION, [NAME, 'Windows']], [\n\n            /(com\\.riseupradioalarm)\\/((\\d+)[\\d\\.]*)/i                          // RiseUP Radio Alarm\n            ], [NAME, VERSION], [\n\n            /(rad.io)\\s((\\d+)[\\d\\.]+)/i,                                        // Rad.io\n            /(radio.(?:de|at|fr))\\s((\\d+)[\\d\\.]+)/i\n            ], [[NAME, 'rad.io'], VERSION]\n\n            //////////////////////\n            // Media players END\n            ////////////////////*/\n\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i                     // AMD64\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, util.lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows\\s(ce|mobile);\\sppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i                           // PowerPC\n            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+;))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, util.lowerize]]\n        ],\n\n        device : [[\n\n            /\\((ipad|playbook);[\\w\\s\\);-]+(rim|apple)/i                         // iPad/PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/                                  // iPad\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [\n\n            /(apple\\s{0,1}tv)/i                                                 // Apple TV\n            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [\n\n            /(archos)\\s(gamepad2?)/i,                                           // Archos\n            /(hp).+(touchpad)/i,                                                // HP TouchPad\n            /(hp).+(tablet)/i,                                                  // HP Tablet\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /\\s(nook)[\\w\\s]+build\\/(\\w+)/i,                                     // Nook\n            /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i                                  // Dell Streak\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(kf[A-z]+)\\sbuild\\/[\\w\\.]+.*silk\\//i                               // Kindle Fire HD\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n            /(sd|kf)[0349hijorstuw]+\\sbuild\\/[\\w\\.]+.*silk\\//i                  // Fire Phone\n            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [\n\n            /\\((ip[honed|\\s\\w*]+);.+(apple)/i                                   // iPod/iPhone\n            ], [MODEL, VENDOR, [TYPE, MOBILE]], [\n            /\\((ip[honed|\\s\\w*]+);/i                                            // iPod/iPhone\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [\n\n            /(blackberry)[\\s-]?(\\w+)/i,                                         // BlackBerry\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\\s_-]?([\\w-]+)*/i,\n                                                                                // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Huawei/Meizu/Motorola/Polytron\n            /(hp)\\s([\\w\\s]+\\w)/i,                                               // HP iPAQ\n            /(asus)-?(\\w+)/i                                                    // Asus\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /\\(bb10;\\s(\\w+)/i                                                   // BlackBerry 10\n            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\n                                                                                // Asus Tablets\n            /android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7|padfone)/i\n            ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [\n\n            /(sony)\\s(tablet\\s[ps])\\sbuild\\//i,                                  // Sony\n            /(sony)?(?:sgp.+)\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [\n            /(?:sony)?(?:(?:(?:c|d)\\d{4})|(?:so[-l].+))\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Phone'], [TYPE, MOBILE]], [\n\n            /\\s(ouya)\\s/i,                                                      // Ouya\n            /(nintendo)\\s([wids3u]+)/i                                          // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n\n            /android.+;\\s(shield)\\sbuild/i                                      // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n\n            /(playstation\\s[34portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [\n\n            /(sprint\\s(\\w+))/i                                                  // Sprint Phones\n            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [\n\n            /(lenovo)\\s?(S(?:5000|6000)+(?:[-][\\w+]))/i                         // Lenovo tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(htc)[;_\\s-]+([\\w\\s]+(?=\\))|\\w+)*/i,                               // HTC\n            /(zte)-(\\w+)*/i,                                                    // ZTE\n            /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]+)*/i\n                                                                                // Alcatel/GeeksPhone/Huawei/Lenovo/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            /(nexus\\s9)/i                                                       // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n\n            /(nexus\\s6p)/i                                                      // Huawei Nexus 6P\n            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [\n\n            /(microsoft);\\s(lumia[\\s\\w]+)/i                                     // Microsoft Lumia\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i                                   // Microsoft Xbox\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\n\n                                                                                // Motorola\n            /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?(:?\\s4g)?)[\\w\\s]+build\\//i,\n            /mot[\\s-]?(\\w+)*/i,\n            /(XT\\d{3,4}) build\\//i,\n            /(nexus\\s6)/i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [\n            /android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [\n\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i            // HbbTV devices\n            ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [\n\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [\n\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n\n            /android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n\\d+|sgh-t8[56]9|nexus 10))/i,\n            /((SM-T\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung\n            /smart-tv.+(samsung)/i\n            ], [VENDOR, [TYPE, SMARTTV], MODEL], [\n            /((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-\\w[\\w\\d]+))/i,\n            /(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)*/i,\n            /sec-((sgh\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [\n\n            /sie-(\\w+)*/i                                                       // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n\n            /(maemo|nokia).*(n900|lumia\\s\\d+)/i,                                // Nokia\n            /(nokia)[\\s_-]?([\\w-]+)*/i\n            ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(a\\d{3})/i                                 // Acer\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet\n            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [\n            /(lg) netcast\\.tv/i                                                 // LG SmartTV\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /(nexus\\s[45])/i,                                                   // LG\n            /lg[e;\\s\\/-]+(\\w+)*/i\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [\n\n            /android.+(ideatab[a-z0-9\\-\\s]+)/i                                  // Lenovo\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            /linux;.+((jolla));/i                                               // Jolla\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /((pebble))app\\/[\\d\\.]+\\s/i                                         // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n\n            /android.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i                            // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, 'Chromecast'], [VENDOR, 'Google']], [\n\n            /android.+;\\s(glass)\\s\\d/i                                          // Google Glass\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [\n\n            /android.+;\\s(pixel c)\\s/i                                          // Google Pixel C\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [\n\n            /android.+;\\s(pixel xl|pixel)\\s/i                                   // Google Pixel\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [\n\n            /android.+(\\w+)\\s+build\\/hm\\1/i,                                    // Xiaomi Hongmi 'numeric' models\n            /android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i,               // Xiaomi Hongmi\n            /android.+(mi[\\s\\-_]*(?:one|one[\\s_]plus|note lte)?[\\s_]*(?:\\d\\w)?)\\s+build/i    // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [\n\n            /android.+a000(1)\\s+build/i                                         // OnePlus\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            /\\s(tablet)[;\\/]/i,                                                 // Unidentifiable Tablet\n            /\\s(mobile)(?:[;\\/]|\\ssafari)/i                                     // Unidentifiable Mobile\n            ], [[TYPE, util.lowerize], VENDOR, MODEL]\n\n            /*//////////////////////////\n            // TODO: move to string map\n            ////////////////////////////\n\n            /(C6603)/i                                                          // Sony Xperia Z C6603\n            ], [[MODEL, 'Xperia Z C6603'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n            /(C6903)/i                                                          // Sony Xperia Z 1\n            ], [[MODEL, 'Xperia Z 1'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n            /(SM-G900[F|H])/i                                                   // Samsung Galaxy S5\n            ], [[MODEL, 'Galaxy S5'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G7102)/i                                                       // Samsung Galaxy Grand 2\n            ], [[MODEL, 'Galaxy Grand 2'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G530H)/i                                                       // Samsung Galaxy Grand Prime\n            ], [[MODEL, 'Galaxy Grand Prime'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G313HZ)/i                                                      // Samsung Galaxy V\n            ], [[MODEL, 'Galaxy V'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T805)/i                                                        // Samsung Galaxy Tab S 10.5\n            ], [[MODEL, 'Galaxy Tab S 10.5'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n            /(SM-G800F)/i                                                       // Samsung Galaxy S5 Mini\n            ], [[MODEL, 'Galaxy S5 Mini'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T311)/i                                                        // Samsung Galaxy Tab 3 8.0\n            ], [[MODEL, 'Galaxy Tab 3 8.0'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n\n            /(T3C)/i                                                            // Advan Vandroid T3C\n            ], [MODEL, [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN T1J\\+)/i                                                    // Advan Vandroid T1J+\n            ], [[MODEL, 'Vandroid T1J+'], [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN S4A)/i                                                      // Advan Vandroid S4A\n            ], [[MODEL, 'Vandroid S4A'], [VENDOR, 'Advan'], [TYPE, MOBILE]], [\n\n            /(V972M)/i                                                          // ZTE V972M\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n\n            /(i-mobile)\\s(IQ\\s[\\d\\.]+)/i                                        // i-mobile IQ\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(IQ6.3)/i                                                          // i-mobile IQ IQ 6.3\n            ], [[MODEL, 'IQ 6.3'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n            /(i-mobile)\\s(i-style\\s[\\d\\.]+)/i                                   // i-mobile i-STYLE\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(i-STYLE2.1)/i                                                     // i-mobile i-STYLE 2.1\n            ], [[MODEL, 'i-STYLE 2.1'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n\n            /(mobiistar touch LAI 512)/i                                        // mobiistar touch LAI 512\n            ], [[MODEL, 'Touch LAI 512'], [VENDOR, 'mobiistar'], [TYPE, MOBILE]], [\n\n            /////////////\n            // END TODO\n            ///////////*/\n\n        ],\n\n        engine : [[\n\n            /windows.+\\sedge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, 'EdgeHTML']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i,     // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\n            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]+).*(gecko)/i                                           // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows based\n            /microsoft\\s(windows)\\s(vista|xp)/i                                 // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n            /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s]+\\w)*/i,                  // Windows Phone\n            /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\n            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\n            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n            // Mobile/Embedded OS\n            /\\((bb)(10);/i                                                      // BlackBerry 10\n            ], [[NAME, 'BlackBerry'], VERSION], [\n            /(blackberry)\\w*\\/?([\\w\\.]+)*/i,                                    // Blackberry\n            /(tizen)[\\/\\s]([\\w\\.]+)/i,                                          // Tizen\n            /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|contiki)[\\/\\s-]?([\\w\\.]+)*/i,\n                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki\n            /linux;.+(sailfish);/i                                              // Sailfish OS\n            ], [NAME, VERSION], [\n            /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]+)*/i                 // Symbian\n            ], [[NAME, 'Symbian'], VERSION], [\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME], [\n            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n            ], [[NAME, 'Firefox OS'], VERSION], [\n\n            // Console\n            /(nintendo|playstation)\\s([wids34portablevu]+)/i,                   // Nintendo/Playstation\n\n            // GNU/Linux based\n            /(mint)[\\/\\s\\(]?(\\w+)*/i,                                           // Mint\n            /(mageia|vectorlinux)[;\\s]/i,                                       // Mageia/VectorLinux\n            /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?(?!chrom)([\\w\\.-]+)*/i,\n                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n            /(hurd|linux)\\s?([\\w\\.]+)*/i,                                       // Hurd/Linux\n            /(gnu)\\s?([\\w\\.]+)*/i                                               // GNU\n            ], [NAME, VERSION], [\n\n            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Solaris\n            /(sunos)\\s?([\\w\\.]+\\d)*/i                                           // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n\n            // BSD based\n            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]+)*/i                   // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n            ], [NAME, VERSION],[\n\n            /(haiku)\\s(\\w+)/i                                                  // Haiku\n            ], [NAME, VERSION],[\n\n            /(ip[honead]+)(?:.*os\\s([\\w]+)*\\slike\\smac|;\\sopera)/i              // iOS\n            ], [[NAME, 'iOS'], [VERSION, /_/g, '.']], [\n\n            /(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*/i,\n            /(macintosh|mac(?=_powerpc)\\s)/i                                    // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Other\n            /((?:open)?solaris)[\\/\\s-]?([\\w\\.]+)*/i,                            // Solaris\n            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.]*)*/i,                               // AIX\n            /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms)/i,\n                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS\n            /(unix)\\s?([\\w\\.]+)*/i                                              // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var Browser = function (name, version) {\n        this[NAME] = name;\n        this[VERSION] = version;\n    };\n    var CPU = function (arch) {\n        this[ARCHITECTURE] = arch;\n    };\n    var Device = function (vendor, model, type) {\n        this[VENDOR] = vendor;\n        this[MODEL] = model;\n        this[TYPE] = type;\n    };\n    var Engine = Browser;\n    var OS = Browser;\n\n    var UAParser = function (uastring, extensions) {\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(uastring, extensions).getResult();\n        }\n\n        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n        var browser = new Browser();\n        var cpu = new CPU();\n        var device = new Device();\n        var engine = new Engine();\n        var os = new OS();\n\n        this.getBrowser = function () {\n            mapper.rgx.call(browser, ua, rgxmap.browser);\n            browser.major = util.major(browser.version); // deprecated\n            return browser;\n        };\n        this.getCPU = function () {\n            mapper.rgx.call(cpu, ua, rgxmap.cpu);\n            return cpu;\n        };\n        this.getDevice = function () {\n            mapper.rgx.call(device, ua, rgxmap.device);\n            return device;\n        };\n        this.getEngine = function () {\n            mapper.rgx.call(engine, ua, rgxmap.engine);\n            return engine;\n        };\n        this.getOS = function () {\n            mapper.rgx.call(os, ua, rgxmap.os);\n            return os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return ua;\n        };\n        this.setUA = function (uastring) {\n            ua = uastring;\n            browser = new Browser();\n            cpu = new CPU();\n            device = new Device();\n            engine = new Engine();\n            os = new OS();\n            return this;\n        };\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER = {\n        NAME    : NAME,\n        MAJOR   : MAJOR, // deprecated\n        VERSION : VERSION\n    };\n    UAParser.CPU = {\n        ARCHITECTURE : ARCHITECTURE\n    };\n    UAParser.DEVICE = {\n        MODEL   : MODEL,\n        VENDOR  : VENDOR,\n        TYPE    : TYPE,\n        CONSOLE : CONSOLE,\n        MOBILE  : MOBILE,\n        SMARTTV : SMARTTV,\n        TABLET  : TABLET,\n        WEARABLE: WEARABLE,\n        EMBEDDED: EMBEDDED\n    };\n    UAParser.ENGINE = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    UAParser.OS = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    //UAParser.Utils = util;\n\n    ///////////\n    // Export\n    //////////\n\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = window.jQuery || window.Zepto;\n    if (typeof $ !== UNDEF_TYPE) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (uastring) {\n            parser.setUA(uastring);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/ua-parser-js/src/ua-parser.js\n// module id = 31\n// module chunks = 0","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/webpack/buildin/amd-options.js\n// module id = 32\n// module chunks = 0","// @flow\nimport * as Utils from './util'\n\nclass PosterManager {\n  /**\n   * Poster image URL\n   * @type {string}\n   * @private\n   */\n  _posterUrl: string;\n  /**\n   * The poster HTML Div element.\n   * @type {HTMLDivElement}\n   * @private\n   */\n  _el: HTMLDivElement;\n\n  constructor() {\n    this._createEl();\n  }\n\n  /**\n   * Set the poster source URL\n   * @param {string} posterUrl - the poster image URL\n   * @public\n   * @returns {void}\n   */\n  setSrc(posterUrl: ?string): void {\n    if (posterUrl) {\n      this._posterUrl = posterUrl;\n      Utils.Dom.setStyle(this._el, \"background-image\", `url(\"${this._posterUrl}\")`);\n      this.hide();\n    }\n  }\n\n  /**\n   * Get the poster source URL\n   * @public\n   * @returns {string} - the poster image URL\n   */\n  get src(): string {\n    return this._posterUrl;\n  }\n\n  /**\n   * Get the poster HTML Div element\n   * @public\n   * @returns {HTMLDivElement} - Poster HTML Dom element\n   */\n  getElement(): HTMLDivElement {\n    return this._el;\n  }\n\n  /**\n   * Create the HTML Div element of the poster\n   * @private\n   * @returns {void}\n   */\n  _createEl(): void {\n    if (!this._el) {\n      const el = this._el = Utils.Dom.createElement(\"div\");\n      Utils.Dom.setAttribute(el, \"id\", Utils.Generator.uniqueId(5));\n      Utils.Dom.setAttribute(el, \"tabindex\", '-1');\n    }\n  }\n\n  /**\n   * Removes the poster element from the dom\n   * @private\n   * @returns {void}\n   */\n  _removeEl(): void {\n    if (this._el) {\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n  }\n\n  /**\n   * Show the poster image\n   * @public\n   * @private\n   * @returns {void}\n   */\n  show(): void {\n    Utils.Dom.setStyle(this._el, \"display\", \"\");\n  }\n\n  /**\n   * Hide the poster image\n   * @public\n   * @returns {void}\n   */\n  hide(): void {\n    Utils.Dom.setStyle(this._el, \"display\", \"none\");\n  }\n\n  /**\n   * Resets the poster url and the background image\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._posterUrl = '';\n    Utils.Dom.setStyle(this._el, \"background-image\", '');\n  }\n\n  /**\n   * Destroys the poster element\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.reset();\n    this._removeEl();\n  }\n}\n\nexport default PosterManager;\n\n\n\n// WEBPACK FOOTER //\n// ./utils/poster-manager.js","// @flow\nimport Error from '../error/error'\n\nconst JSONP_TIMEOUT: number = 5000;\nconst CALLBACK_PREFIX: string = 'jsonpcallback';\nconst JSONP_FORMAT_STRING: string = 'responseFormat=jsonp&callback=';\n\n/**\n * JSONP utility.\n * @param {string} url - The url of the request.\n * @param {string} callback - Callback function to be called when the request returns.\n * @param {Object} options - Object contains configuration (currently only timeout).\n * @returns {Promise<*>} - A promise with the callback output.\n */\nfunction jsonp(url: string, callback: Function, options: Object): Promise<*> {\n  options = options || {};\n  const timeout = options.timeout ? options.timeout : JSONP_TIMEOUT;\n  const script = document.createElement(\"script\");\n  const callbackId = CALLBACK_PREFIX + Math.round(Date.now() + Math.random() * 1000001);\n  let scriptUri = url;\n  let timer;\n\n  /**\n   * function to clean the DOM from the script tag and from the function\n   * @returns {void}\n   */\n  const _cleanup = () => {\n    if (script && script.parentNode) {\n      script.parentNode.removeChild(script);\n    }\n    window[callbackId] = () => {\n    };\n    if (timer) {\n      clearTimeout(timer);\n    }\n  };\n\n  return new Promise((resolve, reject) => {\n    if (timeout) {\n      timer = setTimeout(function () {\n        _cleanup();\n        reject(new Error(\n          Error.Severity.CRITICAL,\n          Error.Category.NETWORK,\n          Error.Code.TIMEOUT,\n          url\n        ));\n      }, timeout);\n    }\n\n    /**\n     * a wrapper to the callback function, to save a closure\n     * @param {Object} data - the data we get from the server, in response to the request\n     * @returns {void}\n     */\n    window[callbackId] = (data: Object) => {\n      const callbackResult = callback(data, url);\n      _cleanup();\n      resolve(callbackResult);\n    };\n\n    if (scriptUri.match(/\\?/)) {\n      scriptUri += \"&\" + JSONP_FORMAT_STRING + callbackId;\n    } else {\n      scriptUri += \"?\" + JSONP_FORMAT_STRING + callbackId;\n    }\n\n    script.type = 'text/javascript';\n    script.src = scriptUri;\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n}\n\nexport {jsonp};\n\n\n\n// WEBPACK FOOTER //\n// ./utils/jsonp.js","/*!\r\n * js-logger - http://github.com/jonnyreeves/js-logger\r\n * Jonny Reeves, http://jonnyreeves.co.uk/\r\n * js-logger may be freely distributed under the MIT license.\r\n */\r\n(function (global) {\r\n\t\"use strict\";\r\n\r\n\t// Top level module for the global, static logger instance.\r\n\tvar Logger = { };\r\n\r\n\t// For those that are at home that are keeping score.\r\n\tLogger.VERSION = \"1.4.1\";\r\n\r\n\t// Function which handles all incoming log messages.\r\n\tvar logHandler;\r\n\r\n\t// Map of ContextualLogger instances by name; used by Logger.get() to return the same named instance.\r\n\tvar contextualLoggersByNameMap = {};\r\n\r\n\t// Polyfill for ES5's Function.bind.\r\n\tvar bind = function(scope, func) {\r\n\t\treturn function() {\r\n\t\t\treturn func.apply(scope, arguments);\r\n\t\t};\r\n\t};\r\n\r\n\t// Super exciting object merger-matron 9000 adding another 100 bytes to your download.\r\n\tvar merge = function () {\r\n\t\tvar args = arguments, target = args[0], key, i;\r\n\t\tfor (i = 1; i < args.length; i++) {\r\n\t\t\tfor (key in args[i]) {\r\n\t\t\t\tif (!(key in target) && args[i].hasOwnProperty(key)) {\r\n\t\t\t\t\ttarget[key] = args[i][key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t};\r\n\r\n\t// Helper to define a logging level object; helps with optimisation.\r\n\tvar defineLogLevel = function(value, name) {\r\n\t\treturn { value: value, name: name };\r\n\t};\r\n\r\n\t// Predefined logging levels.\r\n\tLogger.DEBUG = defineLogLevel(1, 'DEBUG');\r\n\tLogger.INFO = defineLogLevel(2, 'INFO');\r\n\tLogger.TIME = defineLogLevel(3, 'TIME');\r\n\tLogger.WARN = defineLogLevel(4, 'WARN');\r\n\tLogger.ERROR = defineLogLevel(8, 'ERROR');\r\n\tLogger.OFF = defineLogLevel(99, 'OFF');\r\n\r\n\t// Inner class which performs the bulk of the work; ContextualLogger instances can be configured independently\r\n\t// of each other.\r\n\tvar ContextualLogger = function(defaultContext) {\r\n\t\tthis.context = defaultContext;\r\n\t\tthis.setLevel(defaultContext.filterLevel);\r\n\t\tthis.log = this.info;  // Convenience alias.\r\n\t};\r\n\r\n\tContextualLogger.prototype = {\r\n\t\t// Changes the current logging level for the logging instance.\r\n\t\tsetLevel: function (newLevel) {\r\n\t\t\t// Ensure the supplied Level object looks valid.\r\n\t\t\tif (newLevel && \"value\" in newLevel) {\r\n\t\t\t\tthis.context.filterLevel = newLevel;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// Gets the current logging level for the logging instance\r\n\t\tgetLevel: function () {\r\n\t\t\treturn this.context.filterLevel;\r\n\t\t},\r\n\r\n\t\t// Is the logger configured to output messages at the supplied level?\r\n\t\tenabledFor: function (lvl) {\r\n\t\t\tvar filterLevel = this.context.filterLevel;\r\n\t\t\treturn lvl.value >= filterLevel.value;\r\n\t\t},\r\n\r\n\t\tdebug: function () {\r\n\t\t\tthis.invoke(Logger.DEBUG, arguments);\r\n\t\t},\r\n\r\n\t\tinfo: function () {\r\n\t\t\tthis.invoke(Logger.INFO, arguments);\r\n\t\t},\r\n\r\n\t\twarn: function () {\r\n\t\t\tthis.invoke(Logger.WARN, arguments);\r\n\t\t},\r\n\r\n\t\terror: function () {\r\n\t\t\tthis.invoke(Logger.ERROR, arguments);\r\n\t\t},\r\n\r\n\t\ttime: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'start' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttimeEnd: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'end' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Invokes the logger callback if it's not being filtered.\r\n\t\tinvoke: function (level, msgArgs) {\r\n\t\t\tif (logHandler && this.enabledFor(level)) {\r\n\t\t\t\tlogHandler(msgArgs, merge({ level: level }, this.context));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Protected instance which all calls to the to level `Logger` module will be routed through.\r\n\tvar globalLogger = new ContextualLogger({ filterLevel: Logger.OFF });\r\n\r\n\t// Configure the global Logger instance.\r\n\t(function() {\r\n\t\t// Shortcut for optimisers.\r\n\t\tvar L = Logger;\r\n\r\n\t\tL.enabledFor = bind(globalLogger, globalLogger.enabledFor);\r\n\t\tL.debug = bind(globalLogger, globalLogger.debug);\r\n\t\tL.time = bind(globalLogger, globalLogger.time);\r\n\t\tL.timeEnd = bind(globalLogger, globalLogger.timeEnd);\r\n\t\tL.info = bind(globalLogger, globalLogger.info);\r\n\t\tL.warn = bind(globalLogger, globalLogger.warn);\r\n\t\tL.error = bind(globalLogger, globalLogger.error);\r\n\r\n\t\t// Don't forget the convenience alias!\r\n\t\tL.log = L.info;\r\n\t}());\r\n\r\n\t// Set the global logging handler.  The supplied function should expect two arguments, the first being an arguments\r\n\t// object with the supplied log messages and the second being a context object which contains a hash of stateful\r\n\t// parameters which the logging function can consume.\r\n\tLogger.setHandler = function (func) {\r\n\t\tlogHandler = func;\r\n\t};\r\n\r\n\t// Sets the global logging filter level which applies to *all* previously registered, and future Logger instances.\r\n\t// (note that named loggers (retrieved via `Logger.get`) can be configured independently if required).\r\n\tLogger.setLevel = function(level) {\r\n\t\t// Set the globalLogger's level.\r\n\t\tglobalLogger.setLevel(level);\r\n\r\n\t\t// Apply this level to all registered contextual loggers.\r\n\t\tfor (var key in contextualLoggersByNameMap) {\r\n\t\t\tif (contextualLoggersByNameMap.hasOwnProperty(key)) {\r\n\t\t\t\tcontextualLoggersByNameMap[key].setLevel(level);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Gets the global logging filter level\r\n\tLogger.getLevel = function() {\r\n\t\treturn globalLogger.getLevel();\r\n\t};\r\n\r\n\t// Retrieve a ContextualLogger instance.  Note that named loggers automatically inherit the global logger's level,\r\n\t// default context and log handler.\r\n\tLogger.get = function (name) {\r\n\t\t// All logger instances are cached so they can be configured ahead of use.\r\n\t\treturn contextualLoggersByNameMap[name] ||\r\n\t\t\t(contextualLoggersByNameMap[name] = new ContextualLogger(merge({ name: name }, globalLogger.context)));\r\n\t};\r\n\r\n\t// CreateDefaultHandler returns a handler function which can be passed to `Logger.setHandler()` which will\r\n\t// write to the window's console object (if present); the optional options object can be used to customise the\r\n\t// formatter used to format each log message.\r\n\tLogger.createDefaultHandler = function (options) {\r\n\t\toptions = options || {};\r\n\r\n\t\toptions.formatter = options.formatter || function defaultMessageFormatter(messages, context) {\r\n\t\t\t// Prepend the logger's name to the log message for easy identification.\r\n\t\t\tif (context.name) {\r\n\t\t\t\tmessages.unshift(\"[\" + context.name + \"]\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Map of timestamps by timer labels used to track `#time` and `#timeEnd()` invocations in environments\r\n\t\t// that don't offer a native console method.\r\n\t\tvar timerStartTimeByLabelMap = {};\r\n\r\n\t\t// Support for IE8+ (and other, slightly more sane environments)\r\n\t\tvar invokeConsoleMethod = function (hdlr, messages) {\r\n\t\t\tFunction.prototype.apply.call(hdlr, console, messages);\r\n\t\t};\r\n\r\n\t\t// Check for the presence of a logger.\r\n\t\tif (typeof console === \"undefined\") {\r\n\t\t\treturn function () { /* no console */ };\r\n\t\t}\r\n\r\n\t\treturn function(messages, context) {\r\n\t\t\t// Convert arguments object to Array.\r\n\t\t\tmessages = Array.prototype.slice.call(messages);\r\n\r\n\t\t\tvar hdlr = console.log;\r\n\t\t\tvar timerLabel;\r\n\r\n\t\t\tif (context.level === Logger.TIME) {\r\n\t\t\t\ttimerLabel = (context.name ? '[' + context.name + '] ' : '') + messages[0];\r\n\r\n\t\t\t\tif (messages[1] === 'start') {\r\n\t\t\t\t\tif (console.time) {\r\n\t\t\t\t\t\tconsole.time(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttimerStartTimeByLabelMap[timerLabel] = new Date().getTime();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (console.timeEnd) {\r\n\t\t\t\t\t\tconsole.timeEnd(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tinvokeConsoleMethod(hdlr, [ timerLabel + ': ' +\r\n\t\t\t\t\t\t\t(new Date().getTime() - timerStartTimeByLabelMap[timerLabel]) + 'ms' ]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Delegate through to custom warn/error loggers if present on the console.\r\n\t\t\t\tif (context.level === Logger.WARN && console.warn) {\r\n\t\t\t\t\thdlr = console.warn;\r\n\t\t\t\t} else if (context.level === Logger.ERROR && console.error) {\r\n\t\t\t\t\thdlr = console.error;\r\n\t\t\t\t} else if (context.level === Logger.INFO && console.info) {\r\n\t\t\t\t\thdlr = console.info;\r\n\t\t\t\t} else if (context.level === Logger.DEBUG && console.debug) {\r\n\t\t\t\t\thdlr = console.debug;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.formatter(messages, context);\r\n\t\t\t\tinvokeConsoleMethod(hdlr, messages);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// Configure and example a Default implementation which writes to the `window.console` (if present).  The\r\n\t// `options` hash can be used to configure the default logLevel and provide a custom message formatter.\r\n\tLogger.useDefaults = function(options) {\r\n\t\tLogger.setLevel(options && options.defaultLevel || Logger.DEBUG);\r\n\t\tLogger.setHandler(Logger.createDefaultHandler(options));\r\n\t};\r\n\r\n\t// Export to popular environments boilerplate.\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine(Logger);\r\n\t}\r\n\telse if (typeof module !== 'undefined' && module.exports) {\r\n\t\tmodule.exports = Logger;\r\n\t}\r\n\telse {\r\n\t\tLogger._prevLogger = global.Logger;\r\n\r\n\t\tLogger.noConflict = function () {\r\n\t\t\tglobal.Logger = Logger._prevLogger;\r\n\t\t\treturn Logger;\r\n\t\t};\r\n\r\n\t\tglobal.Logger = Logger;\r\n\t}\r\n}(this));\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/js-logger/src/logger.js\n// module id = 35\n// module chunks = 0","//@flow\n\ntype SeverityType = { [severity: string]: number };\n\nconst Severity: SeverityType = {\n  /**\n   * An error occurred, but the Player is attempting to recover from the error.\n   *\n   * If the Player cannot ultimately recover, it still may not throw a CRITICAL\n   * error.  For example, retrying for a media segment will never result in\n   * a CRITICAL error (the Player will just retry forever).\n   */\n  'RECOVERABLE': 1,\n  /**\n   * A critical error that the library cannot recover from.  These usually cause\n   * the Player to stop loading or updating.  A new manifest must be loaded\n   * to reset the library.\n   */\n  'CRITICAL': 2\n};\n\nexport {Severity}\nexport type {SeverityType}\n\n\n\n// WEBPACK FOOTER //\n// ./error/severity.js","//@flow\ntype CodeType = { [code: string]: number };\n\nconst Code: CodeType = {\n  /**\n   * A network request was made using an unsupported URI scheme.\n   */\n  'UNSUPPORTED_SCHEME': 1000,\n\n  /**\n   * An HTTP network request returned an HTTP status that indicated a failure.\n   */\n  'BAD_HTTP_STATUS': 1001,\n\n  /**\n   * An HTTP network request failed with an error, but not from the server.\n   */\n  'HTTP_ERROR': 1002,\n\n  /**\n   * A network request timed out.\n   */\n  'TIMEOUT': 1003,\n\n  /**\n   * A network request was made with a malformed data URI.\n   */\n  'MALFORMED_DATA_URI': 1004,\n\n  /**\n   * A network request was made with a data URI using an unknown encoding.\n   */\n  'UNKNOWN_DATA_URI_ENCODING': 1005,\n\n  /**\n   * A request filter threw an error.\n   */\n  'REQUEST_FILTER_ERROR': 1006,\n\n  /**\n   * A response filter threw an error.\n   */\n  'RESPONSE_FILTER_ERROR': 1007,\n\n  /** The text parser failed to parse a text stream due to an invalid header. */\n  'INVALID_TEXT_HEADER': 2000,\n\n  /** The text parser failed to parse a text stream due to an invalid cue. */\n  'INVALID_TEXT_CUE': 2001,\n\n  /**\n   * Was unable to detect the encoding of the response text.  Suggest adding\n   * byte-order-markings to the response data.\n   */\n  'UNABLE_TO_DETECT_ENCODING': 2003,\n\n  /** The response data contains invalid Unicode character encoding. */\n  'BAD_ENCODING': 2004,\n\n  /**\n   * The XML parser failed to parse an xml stream, or the XML lacks mandatory\n   * elements for TTML.\n   * in the data is the URI associated with the XML.\n   */\n  'INVALID_XML': 2005,\n\n  /**\n   * MP4 segment does not contain TTML.\n   */\n  'INVALID_MP4_TTML': 2007,\n\n  /**\n   * MP4 segment does not contain VTT.\n   */\n  'INVALID_MP4_VTT': 2008,\n\n  /**\n   *  VTT module issue, see the date for more details\n   */\n  \"UNABLE_TO_CREATE_TEXT_CUE\": 2009,\n  /**\n   * error parsing the dash adapter error (for instance, could not parse an error shaka raised)\n   */\n  \"DASH_ADAPTER_ERROR_PARSE_ISSUE\": 2010,\n\n\n  /**\n   * Some component tried to read past the end of a buffer.  The segment index,\n   * init segment, or PSSH may be malformed.\n   */\n  'BUFFER_READ_OUT_OF_BOUNDS': 3000,\n\n  /**\n   * Some component tried to parse an integer that was too large to fit in a\n   * JavaScript number without rounding error.  JavaScript can only natively\n   * represent integers up to 53 bits.\n   */\n  'JS_INTEGER_OVERFLOW': 3001,\n\n  /**\n   * The EBML parser used to parse the WebM container encountered an integer,\n   * ID, or other field larger than the maximum supported by the parser.\n   */\n  'EBML_OVERFLOW': 3002,\n\n  /**\n   * The EBML parser used to parse the WebM container encountered a floating-\n   * point field of a size not supported by the parser.\n   */\n  'EBML_BAD_FLOATING_POINT_SIZE': 3003,\n\n  /**\n   * The MP4 SIDX parser found the wrong box type.\n   * Either the segment index range is incorrect or the data is corrupt.\n   */\n  'MP4_SIDX_WRONG_BOX_TYPE': 3004,\n\n  /**\n   * The MP4 SIDX parser encountered an invalid timescale.\n   * The segment index data may be corrupt.\n   */\n  'MP4_SIDX_INVALID_TIMESCALE': 3005,\n\n  /** The MP4 SIDX parser encountered a type of SIDX that is not supported. */\n  'MP4_SIDX_TYPE_NOT_SUPPORTED': 3006,\n\n  /**\n   * The WebM Cues parser was unable to locate the Cues element.\n   * The segment index data may be corrupt.\n   */\n  'WEBM_CUES_ELEMENT_MISSING': 3007,\n\n  /**\n   * The WebM header parser was unable to locate the Ebml element.\n   * The init segment data may be corrupt.\n   */\n  'WEBM_EBML_HEADER_ELEMENT_MISSING': 3008,\n\n  /**\n   * The WebM header parser was unable to locate the Segment element.\n   * The init segment data may be corrupt.\n   */\n  'WEBM_SEGMENT_ELEMENT_MISSING': 3009,\n\n  /**\n   * The WebM header parser was unable to locate the Info element.\n   * The init segment data may be corrupt.\n   */\n  'WEBM_INFO_ELEMENT_MISSING': 3010,\n\n  /**\n   * The WebM header parser was unable to locate the Duration element.\n   * The init segment data may be corrupt or may have been incorrectly encoded.\n   * Shaka requires a duration in WebM DASH content.\n   */\n  'WEBM_DURATION_ELEMENT_MISSING': 3011,\n\n  /**\n   * The WebM Cues parser was unable to locate the Cue Track Positions element.\n   * The segment index data may be corrupt.\n   */\n  'WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING': 3012,\n\n  /**\n   * The WebM Cues parser was unable to locate the Cue Time element.\n   * The segment index data may be corrupt.\n   */\n  'WEBM_CUE_TIME_ELEMENT_MISSING': 3013,\n\n  /**\n   * A MediaSource operation failed.\n   * a MediaError code from the video element.\n   */\n  'MEDIA_SOURCE_OPERATION_FAILED': 3014,\n\n  /**\n   * A MediaSource operation threw an exception.\n   */\n  'MEDIA_SOURCE_OPERATION_THREW': 3015,\n\n  /**\n   * The video element reported an error.\n   * - error.data[0] is a MediaError code.js from the video element.\n   * - On Edge & IE, error.data[1] is a Microsoft extended error code.js in hex.\n   * - On Chrome, error.data[2] is a string with details on the error.\n   */\n  'VIDEO_ERROR': 3016,\n\n  /**\n   * A MediaSource operation threw QuotaExceededError and recovery failed. The\n   * content cannot be played correctly because the segments are too large for\n   * the browser/platform. This may occur when attempting to play very high\n   * quality, very high bitrate content on low-end devices.\n   */\n  'QUOTA_EXCEEDED_ERROR': 3017,\n\n  /**\n   * a media error from hlsjs adapter\n   */\n  'HLS_FATAL_MEDIA_ERROR': 3018,\n\n  /**\n   * HLSJS fragment parsing issue\n   */\n  'HLS_FRAG_PARSING_ERROR': 3019,\n\n  /**\n   * HLSJS buffer append issue\n   */\n  'HLS_BUFFER_APPEND_ISSUE': 3020,\n  /**\n   * HLSJS buffer appending error\n   */\n  'HLS_BUFFER_APPENDING_ISSUE': 3021,\n  /**\n   * Native adapter error, more info in the data part\n   */\n  'NATIVE_ADAPTER_LOAD_FAILED': 3022,\n  /**\n   * HLSjs buffer stalled issue\n   */\n  'HLS_BUFFER_STALLED_ERROR': 3023,\n  /**\n   * The Player was unable to guess the manifest type based on file extension\n   * or MIME type.  To fix, try one of the following:\n   * Rename the manifest so that the URI ends in a well-known extension.\n   * Configure the server to send a recognizable Content-Type header.\n   * Configure the server to accept a HEAD request for the manifest.\n   */\n  'UNABLE_TO_GUESS_MANIFEST_TYPE': 4000,\n\n  /** The DASH Manifest contained invalid XML markup. */\n  'DASH_INVALID_XML': 4001,\n\n  /**\n   * The DASH Manifest contained a Representation with insufficient segment\n   * information.\n   */\n  'DASH_NO_SEGMENT_INFO': 4002,\n\n  /** The DASH Manifest contained an AdaptationSet with no Representations. */\n  'DASH_EMPTY_ADAPTATION_SET': 4003,\n\n  /** The DASH Manifest contained an Period with no AdaptationSets. */\n  'DASH_EMPTY_PERIOD': 4004,\n\n  /**\n   * The DASH Manifest does not specify an init segment with a WebM container.\n   */\n  'DASH_WEBM_MISSING_INIT': 4005,\n\n  /** The DASH Manifest contained an unsupported container format. */\n  'DASH_UNSUPPORTED_CONTAINER': 4006,\n\n  /** The embedded PSSH data has invalid encoding. */\n  'DASH_PSSH_BAD_ENCODING': 4007,\n\n  /**\n   * There is an AdaptationSet whose Representations do not have any common\n   * key-systems.\n   */\n  'DASH_NO_COMMON_KEY_SYSTEM': 4008,\n\n  /** Having multiple key IDs per Representation is not supported. */\n  'DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED': 4009,\n\n  /** The DASH Manifest specifies conflicting key IDs. */\n  'DASH_CONFLICTING_KEY_IDS': 4010,\n\n  /**\n   * The manifest contains a period with no playable streams.\n   * Either the period was originally empty, or the streams within cannot be\n   * played on this browser or platform.\n   */\n  'UNPLAYABLE_PERIOD': 4011,\n\n  /**\n   * There exist some streams that could be decoded, but restrictions imposed\n   * by the application or the key system prevent us from playing.  This may\n   * happen under the following conditions:\n   * The application has given restrictions to the Player that restrict\n   * at least one content type completely (e.g. no playable audio),\n   * The key system has imposed output restrictions that cannot be met\n   * (such as HDCP) and there are no unrestricted alternatives.\n   */\n  'RESTRICTIONS_CANNOT_BE_MET': 4012,\n\n  /**\n   * No valid periods were found in the manifest.  Please check that your\n   * manifest is correct and free of typos.\n   */\n  'NO_PERIODS': 4014,\n\n  /**\n   * HLS playlist doesn't start with a mandory #EXTM3U tag.\n   */\n  'HLS_PLAYLIST_HEADER_MISSING': 4015,\n\n  /**\n   * HLS tag has an invalid name that doesn't start with '#EXT'\n   */\n  'INVALID_HLS_TAG': 4016,\n\n  /**\n   * HLS playlist has both Master and Media/Segment tags.\n   */\n  'HLS_INVALID_PLAYLIST_HIERARCHY': 4017,\n\n  /**\n   * A Representation has an id that is the same as another Representation in\n   * the same Period.  This makes manifest updates impossible since we cannot\n   * map the updated Representation to the old one.\n   */\n  'DASH_DUPLICATE_REPRESENTATION_ID': 4018,\n\n  /**\n   * HLS manifest has several #EXT-X-MAP tags. We can only\n   * support one at the moment.\n   */\n  'HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND': 4020,\n\n  /**\n   * HLS parser was unable to guess mime type of a stream.\n   */\n  'HLS_COULD_NOT_GUESS_MIME_TYPE': 4021,\n\n  /**\n   * No Master Playlist has been provided. Master playlist provides\n   * vital information about the streams (like codecs) that is\n   * required for MediaSource. We don't support directly providing\n   * a Media Playlist.\n   */\n  'HLS_MASTER_PLAYLIST_NOT_PROVIDED': 4022,\n\n  /**\n   * One of the required attributes was not provided.\n   * HLS manifest is invalid.\n   */\n  'HLS_REQUIRED_ATTRIBUTE_MISSING': 4023,\n\n  /**\n   * One of the required tags was not provided.\n   * HLS manifest is invalid.\n   */\n  'HLS_REQUIRED_TAG_MISSING': 4024,\n\n  /**\n   * HLS parser was unable to guess codecs of a stream.\n   */\n  'HLS_COULD_NOT_GUESS_CODECS': 4025,\n\n  /**\n   * HLS parser has encountered encrypted content with unsupported\n   * KEYFORMAT attributes.\n   */\n  'HLS_KEYFORMATS_NOT_SUPPORTED': 4026,\n\n  /**\n   * The manifest parser only supports xlink links with\n   * xlink:actuate=\"onLoad\".\n   */\n  'DASH_UNSUPPORTED_XLINK_ACTUATE': 4027,\n\n  /**\n   * The manifest parser has hit its depth limit on\n   * xlink link chains.\n   */\n  'DASH_XLINK_DEPTH_LIMIT': 4028,\n\n  /**\n   * HLS parser encountered a live playlist.\n   */\n  'HLS_LIVE_CONTENT_NOT_SUPPORTED': 4029,\n\n  /**\n   * HLSJS cannot parse error\n   */\n  'HLSJS_CANNOT_PARSE': 4030,\n\n  /**\n   * The StreamingEngine called onChooseStreams() but the callback receiver\n   * did not return the correct number or type of Streams.\n   *\n   * This can happen when there is multi-Period content where one Period is\n   * video+audio and another is video-only or audio-only.  We don't support this\n   * case because it is incompatible with MSE.  When the browser reaches the\n   * transition, it will pause, waiting for the audio stream.\n   */\n  'INVALID_STREAMS_CHOSEN': 5005,\n\n\n  /**\n   * The manifest indicated protected content, but the manifest parser was\n   * unable to determine what key systems should be used.\n   */\n  'NO_RECOGNIZED_KEY_SYSTEMS': 6000,\n\n  /**\n   * None of the requested key system configurations are available.  This may\n   * happen under the following conditions:\n   *  The key system is not supported,\n   *  The key system does not support the features requested (e.g.\n   *        persistent state),\n   *  A user prompt was shown and the user denied access,\n   *   The key system is not available from unsecure contexts. (ie.\n   * requires HTTPS) See https://goo.gl/EEhZqT.\n   */\n  'REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE': 6001,\n\n  /**\n   * The browser found one of the requested key systems, but it failed to\n   * create an instance of the CDM for some unknown reason.\n   */\n  'FAILED_TO_CREATE_CDM': 6002,\n\n  /**\n   * The browser found one of the requested key systems and created an instance\n   * of the CDM, but it failed to attach the CDM to the video for some unknown\n   * reason.\n   */\n  'FAILED_TO_ATTACH_TO_VIDEO': 6003,\n\n  /**\n   * The CDM rejected the server certificate supplied by the application.\n   * The certificate may be malformed or in an unsupported format.\n   */\n  'INVALID_SERVER_CERTIFICATE': 6004,\n\n  /**\n   * The CDM refused to create a session for some unknown reason.\n   */\n  'FAILED_TO_CREATE_SESSION': 6005,\n\n  /**\n   * The CDM was unable to generate a license request for the init data it was\n   * given.  The init data may be malformed or in an unsupported format.\n   */\n  'FAILED_TO_GENERATE_LICENSE_REQUEST': 6006,\n\n  /**\n   * The license request failed.  This could be a timeout, a network failure, or\n   * a rejection by the server.\n   */\n  'LICENSE_REQUEST_FAILED': 6007,\n\n  /**\n   * The license response was rejected by the CDM.  The server's response may be\n   * invalid or malformed for this CDM.\n   */\n  'LICENSE_RESPONSE_REJECTED': 6008,\n\n  /**\n   * The manifest does not specify any DRM info, but the content is encrypted.\n   * Either the manifest or the manifest parser are broken.\n   */\n  'ENCRYPTED_CONTENT_WITHOUT_DRM_INFO': 6010,\n\n  /**\n   * No license server was given for the key system signaled by the manifest.\n   * A license server URI is required for every key system.\n   */\n  'NO_LICENSE_SERVER_GIVEN': 6012,\n\n  /**\n   * A required offline session was removed.  The content is not playable.\n   */\n  'OFFLINE_SESSION_REMOVED': 6013,\n\n  /**\n   * The license has expired.  This is triggered when playback is stalled on a\n   * 'waitingforkeys' event and there are any expired keys in the key status map\n   * of any active session.\n   */\n  'EXPIRED': 6014,\n  /**\n   * DRM\n   */\n  \"BAD_FAIRPLAY_RESPONSE\": 6015,\n  /**\n   * DRM\n   */\n  \"COULD_NOT_CREATE_MEDIA_KEYS\": 6016,\n  /**\n   * DRM\n   */\n  \"COULD_NOT_CREATE_KEY_SESSION\": 6017,\n\n  /**\n   * The call to Player.load() was interrupted by a call to Player.unload()\n   * or another call to Player.load().\n   */\n  'LOAD_INTERRUPTED': 7000,\n  /**\n   * HLSJS levelSwitchError - bitrate switch issue\n   */\n  'BITRATE_SWITCH_ISSUE': 7001,\n  /**\n   * The call to Player.load() failed. see other data for more details.\n   */\n  'LOAD_FAILED': 7002,\n  /**\n   * Build error. unregistered plugin\n   */\n  'RUNTIME_ERROR_NOT_REGISTERED_PLUGIN': 7003,\n  /**\n   * Build error. Unimplemnted method\n   */\n  'RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED': 7004,\n  /**\n   * Build error. not a valid handler\n   */\n  'RUNTIME_ERROR_NOT_VALID_HANDLER': 7005,\n  /**\n   * When the play API called without any source\n   */\n  'NO_SOURCE_PROVIDED': 7006,\n\n  /**\n   * The Cast API is unavailable.  This may be because of one of the following:\n   * - The browser may not have Cast support\n   * - The browser may be missing a necessary Cast extension\n   * - The Cast sender library may not be loaded in your app\n   */\n  'CAST_API_UNAVAILABLE': 8000,\n\n  /**\n   * No cast receivers are available at this time.\n   */\n  'NO_CAST_RECEIVERS': 8001,\n\n  /**\n   * The library is already casting.\n   */\n  'ALREADY_CASTING': 8002,\n\n  /**\n   * A Cast SDK error that we did not explicitly plan for has occurred.\n   * Check data[0] and refer to the Cast SDK documentation for details.\n   */\n  'UNEXPECTED_CAST_ERROR': 8003,\n\n  /**\n   * The cast operation was canceled by the user.\n   */\n  'CAST_CANCELED_BY_USER': 8004,\n\n  /**\n   * The cast connection timed out.\n   */\n  'CAST_CONNECTION_TIMED_OUT': 8005,\n\n  /**\n   * The requested receiver app ID does not exist or is unavailable.\n   * Check the requested app ID for typos.\n   */\n  'CAST_RECEIVER_APP_UNAVAILABLE': 8006,\n\n\n  /**\n   * Offline storage is not supported on this browser; it is required for\n   * offline support.\n   */\n  'STORAGE_NOT_SUPPORTED': 9000,\n\n  /**\n   * An unknown error occurred in the IndexedDB.\n   * On Firefox, one common source for UnknownError calls is reverting\n   * Firefox to an old version. This makes the indexedDB storage inaccessible\n   * for older versions. The only way to fix this is to delete the storage\n   * data in your profile. See https://goo.gl/eKVPPe.\n   */\n  'INDEXED_DB_ERROR': 9001,\n\n  /**\n   * The operation was aborted.  For example, by a call to destroy().\n   */\n  'OPERATION_ABORTED': 9002,\n\n  /**\n   * The specified item was not found in the IndexedDB.\n   */\n  'REQUESTED_ITEM_NOT_FOUND': 9003,\n\n  /**\n   * A network request was made with a malformed offline URI.\n   */\n  'MALFORMED_OFFLINE_URI': 9004,\n\n  /**\n   * The specified content is live or in-progress.\n   */\n  'CANNOT_STORE_LIVE_OFFLINE': 9005,\n\n  /**\n   * There is already a store operation in-progress, wait until it completes\n   * before starting another.\n   */\n  'STORE_ALREADY_IN_PROGRESS': 9006,\n\n  /**\n   * The specified manifest is encrypted but does not specify any init data.\n   * Without init data specified in the manifest, the content will not be\n   * playable offline.\n   */\n  'NO_INIT_DATA_FOR_OFFLINE': 9007,\n\n  /**\n   * shaka.offline.Storage was constructed with a Player proxy instead of a\n   * local player instance.  To fix this, use Player directly with Storage\n   * instead of the results of CastProxy.prototype.getPlayer().\n   */\n  'LOCAL_PLAYER_INSTANCE_REQUIRED': 9008,\n\n  /**\n   * When the manifest contains no period playable streams, it means the\n   * manifest is unsupported by the browser.\n   */\n  'CONTENT_UNSUPPORTED_BY_BROWSER': 9009,\n\n  /**\n   * VR plugin is not supported.\n   */\n  'VR_NOT_SUPPORTED': 11000\n\n};\n\nexport {Code}\nexport type {CodeType}\n\n\n\n// WEBPACK FOOTER //\n// ./error/code.js","//@flow\n\ntype CategoryType = { [category: string]: number };\n\nconst Category: CategoryType = {\n  /** Errors from the network stack. */\n  'NETWORK': 1,\n\n  /** Errors parsing text streams. */\n  'TEXT': 2,\n\n  /** Errors parsing or processing audio or video streams. */\n  'MEDIA': 3,\n\n  /** Errors parsing the Manifest. */\n  'MANIFEST': 4,\n\n  /** Errors related to streaming. */\n  'STREAMING': 5,\n\n  /** Errors related to DRM. */\n  'DRM': 6,\n\n  /** Miscellaneous errors from the player. */\n  'PLAYER': 7,\n\n  /** Errors related to Ads. */\n  'ADS': 8,\n\n  /** Errors in the database storage (offline). */\n  'STORAGE': 9,\n\n  /** Errors from VR plugin. */\n  'VR': 11\n};\n\nexport {Category}\nexport type {CategoryType}\n\n\n\n// WEBPACK FOOTER //\n// ./error/category.js","//@flow\n/**\n * Locale class\n * @class\n *\n */\nexport default class Locale {\n\n  /**\n   * tries to return the locale language in IOS-693-1 format(two-letter codes, one per language for)\n   * @returns {string} - the IOS-693-1 language string\n   * @static\n   */\n  static get language(): string {\n    let lang: string;\n\n    if (navigator.languages && navigator.languages.length) {\n      // latest versions of Chrome and Firefox set this correctly\n      lang = navigator.languages[0]\n    } else if (navigator.userLanguage) {\n      // IE only\n      //$FlowFixMe - userLanguage is IE specific and flow doesn't have it in definitions\n      lang = (navigator.userLanguage: string);\n    } else {\n      // latest versions of Chrome, Firefox, and Safari set this correctly\n      lang = navigator.language\n    }\n\n    if (lang && lang.match(\"-\")) {\n      lang = lang.split(\"-\")[0];\n    }\n\n    return lang\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/locale.js","//@flow\nimport FakeEventTarget from '../../event/fake-event-target'\nimport FakeEvent from '../../event/fake-event'\nimport EventManager from '../../event/event-manager'\nimport {CustomEventType, Html5EventType} from '../../event/event-type'\nimport MediaSourceProvider from './media-source/media-source-provider'\nimport VideoTrack from '../../track/video-track'\nimport AudioTrack from '../../track/audio-track'\nimport {TextTrack as PKTextTrack} from '../../track/text-track'\nimport {Cue} from '../../track/vtt-cue'\nimport * as Utils from '../../utils/util'\nimport Html5AutoPlayCapability from './capabilities/html5-autoplay'\nimport Html5IsSupportedCapability from './capabilities/html5-is-supported'\nimport Error from '../../error/error'\nimport getLogger from '../../utils/logger'\n\n/**\n * Html5 engine for playback.\n * @classdesc\n */\nexport default class Html5 extends FakeEventTarget implements IEngine {\n  /**\n   * The video element.\n   * @type {HTMLVideoElement}\n   * @private\n   */\n  _el: HTMLVideoElement;\n  /**\n   * The event manager of the engine.\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The selected media source adapter of the engine.\n   * @type {?IMediaSourceAdapter}\n   * @private\n   */\n  _mediaSourceAdapter: ?IMediaSourceAdapter;\n  /**\n   * The player config object.\n   * @type {Object}\n   * @private\n   */\n  _config: Object;\n  /**\n   * Flag to indicate first time text track cue change.\n   * @type {Object<number, boolean>}\n   * @private\n   */\n  _showTextTrackFirstTime: { [number]: boolean } = {};\n  /**\n   * Promise to indicate when a media source adapter can be loaded.\n   * @type {Promise<*>}\n   * @private\n   */\n  _canLoadMediaSourceAdapterPromise: Promise<*>;\n\n  /**\n   * The html5 class logger.\n   * @type {any}\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('Html5');\n\n  /**\n   * The html5 capabilities handlers.\n   * @private\n   * @static\n   */\n  static _capabilities: Array<typeof ICapability> = [Html5AutoPlayCapability, Html5IsSupportedCapability];\n\n  /**\n   * @type {string} - The engine id.\n   * @public\n   * @static\n   */\n  static id: string = \"html5\";\n\n  /**\n   * A video element for browsers which block auto play.\n   * @type {HTMLVideoElement}\n   * @private\n   * @static\n   */\n  static _el: HTMLVideoElement;\n\n  /**\n   * Factory method to create an engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {IEngine} - New instance of the run time engine.\n   * @public\n   * @static\n   */\n  static createEngine(source: PKMediaSourceObject, config: Object): IEngine {\n    return new this(source, config);\n  }\n\n  /**\n   * Checks if the engine can play a given source.\n   * @param {PKMediaSourceObject} source - The source object to check.\n   * @param {boolean} preferNative - prefer native flag\n   * @returns {boolean} - Whether the engine can play the source.\n   * @public\n   * @static\n   */\n  static canPlaySource(source: PKMediaSourceObject, preferNative: boolean): boolean {\n    return MediaSourceProvider.canPlaySource(source, preferNative);\n  }\n\n  /**\n   * Runs the html5 capabilities tests.\n   * @returns {void}\n   * @public\n   * @static\n   */\n  static runCapabilities(): void {\n    Html5._capabilities.forEach(capability => capability.runCapability());\n  }\n\n  /**\n   * Gets the html5 capabilities.\n   * @return {Promise<Object>} - The html5 capabilities object.\n   * @public\n   * @static\n   */\n  static getCapabilities(): Promise<Object> {\n    let promises = [];\n    Html5._capabilities.forEach(capability => promises.push(capability.getCapability()));\n    return Promise.all(promises)\n      .then((arrayOfResults) => {\n        const mergedResults = {};\n        arrayOfResults.forEach(res => Object.assign(mergedResults, res));\n        return {[Html5.id]: mergedResults};\n      });\n  }\n\n  /**\n   * For browsers which block auto play, use the user gesture to open the video element and enable playing via API.\n   * @returns {void}\n   * @private\n   * @public\n   */\n  static prepareVideoElement(): void {\n    Html5._logger.debug('Prepare the video element for playing');\n    Html5._el = Utils.Dom.createElement(\"video\");\n    Html5._el.load();\n  }\n\n  /**\n   * @constructor\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   */\n  constructor(source: PKMediaSourceObject, config: Object) {\n    super();\n    this._eventManager = new EventManager();\n    this._canLoadMediaSourceAdapterPromise = Promise.resolve();\n    this._createVideoElement();\n    this._init(source, config);\n  }\n\n  /**\n   * Restores the engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @returns {void}\n   */\n  restore(source: PKMediaSourceObject, config: Object): void {\n    this.reset();\n    this._init(source, config);\n  }\n\n  /**\n   * Resets the engine.\n   * @returns {void}\n   */\n  reset(): void {\n    this.detach();\n    this._eventManager.removeAll();\n    if (this._mediaSourceAdapter) {\n      this._canLoadMediaSourceAdapterPromise = this._mediaSourceAdapter.destroy();\n      this._mediaSourceAdapter = null;\n    }\n    if (this._el && this._el.src) {\n      Utils.Dom.setAttribute(this._el, 'src', '');\n      Utils.Dom.removeAttribute(this._el, 'src');\n    }\n  }\n\n  /**\n   * Destroys the engine.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.detach();\n    if (this._el) {\n      this.pause();\n      Utils.Dom.removeAttribute(this._el, 'src');\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n    this._showTextTrackFirstTime = {};\n    this._eventManager.destroy();\n    MediaSourceProvider.destroy();\n    this._mediaSourceAdapter = null;\n  }\n\n  /**\n   * Get the engine's id\n   * @public\n   * @returns {string} the engine's id\n   */\n  get id(): string {\n    return Html5.id;\n  }\n\n  /**\n   * Listen to the video element events and triggers them from the engine.\n   * @public\n   * @returns {void}\n   */\n  attach(): void {\n    Object.keys(Html5EventType).forEach((html5Event) => {\n      this._eventManager.listen(this._el, Html5EventType[html5Event], () => {\n        if (Html5EventType[html5Event] === Html5EventType.ERROR) {\n          this._handleVideoError();\n        } else {\n          this.dispatchEvent(new FakeEvent(Html5EventType[html5Event]));\n        }\n      });\n    });\n    if (this._mediaSourceAdapter) {\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.VIDEO_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.AUDIO_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.TEXT_TRACK_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.ABR_MODE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.TEXT_CUE_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.TRACKS_CHANGED, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, Html5EventType.ERROR, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, Html5EventType.TIME_UPDATE, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, Html5EventType.PLAYING, (event: FakeEvent) => this.dispatchEvent(event));\n      this._eventManager.listen(this._mediaSourceAdapter, CustomEventType.MEDIA_RECOVERED, (event: FakeEvent) => this.dispatchEvent(event));\n    }\n  }\n\n  /**\n   * Handles errors from the video element\n   * @returns {void}\n   * @private\n   */\n  _handleVideoError(): void {\n    if (!this._el.error) return;\n    const code = this._el.error.code;\n    if (code == 1 /* MEDIA_ERR_ABORTED */) {\n      // Ignore this error code.js, which should only occur when navigating away or\n      // deliberately stopping playback of HTTP content.\n      return;\n    }\n\n    // Extra error information from MS Edge and IE11:\n    let extended = this._getMsExtendedError();\n\n    // Extra error information from Chrome:\n    // $FlowFixMe\n    const message = this._el.error.message;\n\n    const error = new Error(\n      Error.Severity.CRITICAL,\n      Error.Category.MEDIA,\n      Error.Code.VIDEO_ERROR, {\n        code: code,\n        extended: extended,\n        message: message\n      });\n    this.dispatchEvent(new FakeEvent(Html5EventType.ERROR, error));\n  }\n\n  /**\n   * more info about the error\n   * @returns {string} info about the video element error\n   * @private\n   */\n  _getMsExtendedError(): string {\n    // $FlowFixMe\n    let extended = this._el.error.msExtendedCode;\n    if (extended) {\n      // Convert to unsigned:\n      if (extended < 0) {\n        extended += Math.pow(2, 32);\n      }\n      // Format as hex:\n      extended = extended.toString(16);\n    }\n    return extended;\n  }\n\n  /**\n   * Remove the listeners of the video element events.\n   * @public\n   * @returns {void}\n   */\n  detach(): void {\n    Object.keys(Html5EventType).forEach((html5Event) => {\n      this._eventManager.unlisten(this._el, Html5EventType[html5Event]);\n    });\n    if (this._mediaSourceAdapter) {\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEventType.VIDEO_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEventType.AUDIO_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEventType.TEXT_TRACK_CHANGED);\n      this._eventManager.unlisten(this._mediaSourceAdapter, CustomEventType.TEXT_CUE_CHANGED);\n    }\n  }\n\n  /**\n   * @returns {HTMLVideoElement} - The video element.\n   * @public\n   */\n  getVideoElement(): HTMLVideoElement {\n    return this._el;\n  }\n\n  /**\n   * Select a new video track.\n   * @param {VideoTrack} videoTrack - The video track object to set.\n   * @returns {void}\n   */\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectVideoTrack(videoTrack);\n    }\n  }\n\n  /**\n   * Select a new audio track.\n   * @param {AudioTrack} audioTrack - The video track object to set.\n   * @returns {void}\n   */\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectAudioTrack(audioTrack);\n    }\n  }\n\n  /**\n   * Select a new text track.\n   * @param {PKTextTrack} textTrack - The playkit text track object to set.\n   * @returns {void}\n   */\n  selectTextTrack(textTrack: PKTextTrack): void {\n    this._removeCueChangeListener();\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.selectTextTrack(textTrack);\n    }\n    this._addCueChangeListener(textTrack);\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.hideTextTrack();\n    }\n    this._removeCueChangeListener();\n  }\n\n  /**\n   * Enables adaptive bitrate switching according to the media source extension logic.\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.enableAdaptiveBitrate();\n    }\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.isAdaptiveBitrateEnabled();\n    }\n    return false;\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.seekToLiveEdge();\n    }\n  }\n\n  /**\n   * Get the start time of DVR window in live playback in seconds.\n   * @returns {Number} - start time of DVR window.\n   * @public\n   */\n  getStartTimeOfDvrWindow(): number {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.getStartTimeOfDvrWindow() : 0;\n  }\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.isLive() : false;\n  }\n\n  /**\n   * Start/resume playback.\n   * @public\n   * @returns {void}\n   */\n  play(): void {\n    let playPromise = this._el.play();\n    if (playPromise) {\n      playPromise.catch(() => this.dispatchEvent(new FakeEvent(CustomEventType.AUTOPLAY_FAILED)));\n    }\n  }\n\n  /**\n   * Pause playback.\n   * @public\n   * @returns {void}\n   */\n  pause(): void {\n    return this._el.pause();\n  }\n\n  /**\n   * Load media.\n   * @param {number} startTime - Optional time to start the video from.\n   * @public\n   * @returns {Promise<Object>} - The loaded data\n   */\n  load(startTime: ?number): Promise<Object> {\n    this._el.load();\n    return this._canLoadMediaSourceAdapterPromise.then(() => {\n      if (this._mediaSourceAdapter) {\n        return this._mediaSourceAdapter.load(startTime).catch((error) => {\n          return Promise.reject(error);\n        });\n      }\n      return Promise.resolve({});\n    }).catch((error) => {\n      return Promise.reject(error);\n    });\n  }\n\n  /**\n   * Set a source.\n   * @param {string} source - Source to set.\n   * @public\n   * @returns {void}\n   */\n  set src(source: string): void {\n    this._el.src = source;\n  }\n\n  /**\n   * Get the source url.\n   * @returns {string} - The source url.\n   * @public\n   */\n  get src(): string {\n    if (this._mediaSourceAdapter) {\n      return this._mediaSourceAdapter.src;\n    }\n    return \"\";\n  }\n\n  /**\n   * Get the current time in seconds.\n   * @returns {Number} - The current playback time.\n   * @public\n   */\n  get currentTime(): number {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.currentTime : 0;\n  }\n\n  /**\n   * Set the current time in seconds.\n   * @param {Number} to - The number to set in seconds.\n   * @public\n   * @returns {void}\n   */\n  set currentTime(to: number): void {\n    if (this._mediaSourceAdapter) {\n      this._mediaSourceAdapter.currentTime = to;\n    }\n  }\n\n  /**\n   * Get the duration in seconds.\n   * @returns {Number} - The playback duration.\n   * @public\n   */\n  get duration(): number {\n    return this._mediaSourceAdapter ? this._mediaSourceAdapter.duration : NaN;\n  }\n\n  /**\n   * Set playback volume.\n   * @param {Number} vol - The volume to set.\n   * @public\n   * @returns {void}\n   */\n  set volume(vol: number): void {\n    this._el.volume = vol;\n  }\n\n  /**\n   * Get playback volume.\n   * @returns {Number} - The volume value of the video element.\n   * @public\n   */\n  get volume(): number {\n    return this._el.volume;\n  }\n\n  ready() {\n  }\n\n  /**\n   * Get paused state.\n   * @returns {boolean} - The paused value of the video element.\n   * @public\n   */\n  get paused(): boolean {\n    return this._el.paused;\n  }\n\n  /**\n   * Get seeking state.\n   * @returns {boolean} - The seeking value of the video element.\n   * @public\n   */\n  get seeking(): boolean {\n    return this._el.seeking;\n  }\n\n  /**\n   * Get the first seekable range (part) of the video in seconds.\n   * @returns {TimeRanges} - First seekable range (part) of the video in seconds.\n   * @public\n   */\n  get seekable(): TimeRanges {\n    return this._el.seekable;\n  }\n\n  /**\n   * Get the first played range (part) of the video in seconds.\n   * @returns {TimeRanges} - First played range (part) of the video in seconds.\n   * @public\n   */\n  get played(): TimeRanges {\n    return this._el.played;\n  }\n\n  /**\n   * Get the first buffered range (part) of the video in seconds.\n   * @returns {TimeRanges} - First buffered range (part) of the video in seconds.\n   * @public\n   */\n  get buffered(): TimeRanges {\n    return this._el.buffered;\n  }\n\n  /**\n   * Set player muted state.\n   * @param {boolean} mute - The new mute value.\n   * @public\n   * @returns {void}\n   */\n  set muted(mute: boolean): void {\n    this._el.muted = mute;\n  }\n\n  /**\n   * Get player muted state.\n   * @returns {boolean} - The muted value of the video element.\n   * @public\n   */\n  get muted(): boolean {\n    return this._el.muted;\n  }\n\n  /**\n   * Get the default mute value.\n   * @returns {boolean} - The defaultMuted of the video element.\n   * @public\n   */\n  get defaultMuted(): boolean {\n    return this._el.defaultMuted;\n  }\n\n  /**\n   * Sets an image to be shown while the video is downloading, or until the user hits the play button.\n   * @param {string} poster - The image url to be shown.\n   * @returns {void}\n   * @public\n   */\n  set poster(poster: string): void {\n    this._el.poster = poster;\n  }\n\n  /**\n   * Gets an image to be shown while the video is downloading, or until the user hits the play button.\n   * @returns {poster} - The image url.\n   * @public\n   */\n  get poster(): string {\n    return this._el.poster;\n  }\n\n  /**\n   * Specifies if and how the author thinks that the video should be loaded when the page loads.\n   * @param {string} preload - The preload value.\n   * @public\n   * @returns {void}\n   */\n  set preload(preload: string): void {\n    this._el.preload = preload;\n  }\n\n  /**\n   * Gets the preload value of the video element.\n   * @returns {string} - The preload value.\n   * @public\n   */\n  get preload(): string {\n    return this._el.preload;\n  }\n\n  /**\n   * Set if the video will automatically start playing as soon as it can do so without stopping.\n   * @param {boolean} autoplay - The autoplay value.\n   * @public\n   * @returns {void}\n   */\n  set autoplay(autoplay: boolean): void {\n    this._el.autoplay = autoplay;\n  }\n\n  /**\n   * Gets the autoplay value of the video element.\n   * @returns {boolean} - The autoplay value.\n   * @public\n   */\n  get autoplay(): boolean {\n    return this._el.autoplay;\n  }\n\n  /**\n   * Set to specifies that the video will start over again, every time it is finished.\n   * @param {boolean} loop - the loop value.\n   * @public\n   * @returns {void}\n   */\n  set loop(loop: boolean) {\n    this._el.loop = loop;\n  }\n\n  /**\n   * Gets the loop value of the video element.\n   * @returns {boolean} - The loop value.\n   * @public\n   */\n  get loop(): boolean {\n    return this._el.loop;\n  }\n\n  /**\n   * Set to specifies that video controls should be displayed.\n   * @param {boolean} controls - the controls value.\n   * @public\n   * @returns {void}\n   */\n  set controls(controls: boolean): void {\n    this._el.controls = controls;\n  }\n\n  /**\n   * Gets the controls value of the video element.\n   * @returns {boolean} - The controls value.\n   * @public\n   */\n  get controls(): boolean {\n    return this._el.controls;\n  }\n\n  /**\n   * Sets the current playback speed of the audio/video.\n   * @param {Number} playbackRate - The playback speed value.\n   * @public\n   * @returns {void}\n   */\n  set playbackRate(playbackRate: number): void {\n    this._el.playbackRate = playbackRate;\n  }\n\n  /**\n   * Gets the current playback speed of the audio/video.\n   * @returns {Number} - The current playback speed value.\n   * @public\n   */\n  get playbackRate(): number {\n    return this._el.playbackRate;\n  }\n\n  /**\n   * Sets the default playback speed of the audio/video.\n   * @param {Number} defaultPlaybackRate - The default playback speed value.\n   * @public\n   * @returns {void}\n   */\n  set defaultPlaybackRate(defaultPlaybackRate: number) {\n    this._el.defaultPlaybackRate = defaultPlaybackRate;\n  }\n\n  /**\n   * Gets the default playback speed of the audio/video.\n   * @returns {Number} - The default playback speed value.\n   * @public\n   */\n  get defaultPlaybackRate(): number {\n    return this._el.defaultPlaybackRate;\n  }\n\n  /**\n   * The ended property returns whether the playback of the audio/video has ended.\n   * @returns {boolean} - The ended value.\n   * @public\n   */\n  get ended(): boolean {\n    return this._el.ended;\n  }\n\n  /**\n   * The error property returns a MediaError object.\n   * @returns {MediaError} - The MediaError object has a code property containing the error state of the audio/video.\n   * @public\n   */\n  get error(): ?MediaError {\n    return this._el.error;\n  }\n\n  /**\n   * @returns {Number} - The current network state (activity) of the audio/video.\n   * @public\n   */\n  get networkState(): number {\n    return this._el.networkState;\n  }\n\n  /**\n   * Indicates if the audio/video is ready to play or not.\n   * @returns {Number} - The current ready state of the audio/video.\n   * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready.\n   * 1 = HAVE_METADATA - metadata for the audio/video is ready.\n   * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond.\n   * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available.\n   * 4 = HAVE_ENOUGH_DATA - enough data available to start playing.\n   */\n  get readyState(): number {\n    return this._el.readyState;\n  }\n\n  /**\n   * @returns {Number} - The height of the video player, in pixels.\n   * @public\n   */\n  get videoHeight(): number {\n    return this._el.videoHeight;\n  }\n\n  /**\n   * @returns {Number} - The width of the video player, in pixels.\n   * @public\n   */\n  get videoWidth(): number {\n    return this._el.videoWidth;\n  }\n\n  /**\n   * @param {boolean} playsinline - Whether to set on the video tag the playsinline attribute.\n   */\n  set playsinline(playsinline: boolean): void {\n    if (playsinline) {\n      this._el.setAttribute('playsinline', '');\n    } else {\n      this._el.removeAttribute('playsinline');\n    }\n  }\n\n  /**\n   * @returns {boolean} - Whether the video tag has an attribute of playsinline.\n   */\n  get playsinline(): boolean {\n    return this._el.getAttribute('playsinline') === '';\n  }\n\n  /**\n   * Initializes the engine.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @param {Object} config - The player configuration.\n   * @private\n   * @returns {void}\n   */\n  _init(source: PKMediaSourceObject, config: Object): void {\n    this._config = config;\n    this._loadMediaSourceAdapter(source);\n    this.attach();\n  }\n\n  /**\n   * Creates a video element dom object.\n   * @private\n   * @returns {void}\n   */\n  _createVideoElement(): void {\n    this._el = Html5._el || Utils.Dom.createElement(\"video\");\n    this._el.id = Utils.Generator.uniqueId(5);\n    this._el.controls = false;\n  }\n\n  /**\n   * Loads the appropriate media source extension adapter.\n   * @param {PKMediaSourceObject} source - The selected source object.\n   * @private\n   * @returns {void}\n   */\n  _loadMediaSourceAdapter(source: PKMediaSourceObject): void {\n    this._mediaSourceAdapter = MediaSourceProvider.getMediaSourceAdapter(this.getVideoElement(), source, this._config);\n  }\n\n  /**\n   * Add cuechange listener to active textTrack.\n   * @param {PKTextTrack} textTrack - The playkit text track object to set.\n   * @returns {void}\n   * @private\n   */\n  _addCueChangeListener(textTrack: PKTextTrack): void {\n    let textTrackEl = this._getSelectedTextTrackElement();\n    if (textTrackEl) {\n      /*\n       There's a quirk in TextTrackAPI that a text track added to video element will not fire cuechange event if it\n       didn't have it's mode set to showing for at least until a single cue has been change.\n       After first time it seems there's time tracking which allows the cuechange to fire even though the track mode\n       is set to hidden\n       This is not the case with a track DOM element added to a video element where cuechange will be fired even if\n       track mode is set only to hidden and was never set to showing\n       */\n      if (this._config.playback.useNativeTextTrack) {\n        textTrackEl.mode = \"showing\";\n      } else {\n        textTrackEl.oncuechange = (e) => this._onCueChange(e);\n        textTrackEl.mode = this._showTextTrackFirstTime[textTrack.index] ? \"hidden\" : \"showing\";\n        this._showTextTrackFirstTime[textTrack.index] = true;\n      }\n    }\n  }\n\n  /**\n   * Remove cuechange listener to active textTrack\n   * @returns {void}\n   * @private\n   */\n  _removeCueChangeListener(): void {\n    let textTrackEl: TextTrack = this._getSelectedTextTrackElement();\n    if (textTrackEl) {\n      textTrackEl.oncuechange = null;\n    }\n  }\n\n  /**\n   * oncuechange event handler.\n   * @param {FakeEvent} e - The event arg.\n   * @returns {void}\n   * @private\n   */\n  _onCueChange(e: FakeEvent): void {\n    let textTrack: TextTrack = e.currentTarget;\n    let activeCues: Array<Cue> = [];\n    textTrack.mode = 'hidden';\n    for (let cue of textTrack.activeCues) {\n      //Normalize cues to be of type of VTT model\n      if (window.VTTCue && cue instanceof window.VTTCue) {\n        activeCues.push(cue);\n      } else if (window.TextTrackCue && cue instanceof window.TextTrackCue) {\n        try {\n          activeCues.push(new Cue(cue.startTime, cue.endTime, cue.text))\n        } catch (error) {\n          new Error(Error.Severity.RECOVERABLE, Error.Category.TEXT, Error.Code.UNABLE_TO_CREATE_TEXT_CUE, error);\n        }\n      }\n    }\n    this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_CUE_CHANGED, {cues: activeCues}));\n  }\n\n  /**\n   * Get currently selected text track\n   * @returns {?TextTrack} - returns the active text track element if available\n   * @private\n   */\n  _getSelectedTextTrackElement(): ?TextTrack {\n    const textTracks = this._el.textTracks;\n    for (let track in textTracks) {\n      if (textTracks.hasOwnProperty(track)) {\n        const textTrack = textTracks[parseInt(track)];\n        if (textTrack && textTrack.mode !== \"disabled\") {\n          return textTrack;\n        }\n      }\n    }\n    return null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/html5.js","//@flow\nimport EventManager from '../../../../event/event-manager'\nimport {CustomEventType, Html5EventType} from '../../../../event/event-type'\nimport Track from '../../../../track/track'\nimport VideoTrack from '../../../../track/video-track'\nimport AudioTrack from '../../../../track/audio-track'\nimport {TextTrack as PKTextTrack} from '../../../../track/text-track'\nimport BaseMediaSourceAdapter from '../base-media-source-adapter'\nimport {getSuitableSourceForResolution} from '../../../../utils/resolution'\nimport * as Utils from '../../../../utils/util'\nimport FairPlay from '../../../../drm/fairplay'\nimport Env from '../../../../utils/env'\nimport FakeEvent from '../../../../event/fake-event'\nimport Error from '../../../../error/error'\n\n/**\n * An illustration of media source extension for progressive download\n * @classdesc\n * @implements {IMediaSourceAdapter}\n */\nexport default class NativeAdapter extends BaseMediaSourceAdapter {\n  /**\n   * The id of the Adapter\n   * @member {string} id\n   * @static\n   * @public\n   */\n  static id: string = 'NativeAdapter';\n\n  /**\n   * The adapter logger\n   * @member {any} _logger\n   * @private\n   * @static\n   */\n  static _logger = BaseMediaSourceAdapter.getLogger(NativeAdapter.id);\n  /**\n   * static video element for canPlayType testing\n   * @member {} TEST_VIDEO\n   * @type {HTMLVideoElement}\n   * @static\n   */\n  static TEST_VIDEO: HTMLVideoElement = Utils.Dom.createElement(\"video\");\n  /**\n   * The DRM protocols implementations for native adapter.\n   * @type {Array<Function>}\n   * @private\n   * @static\n   */\n  static _drmProtocols: Array<Function> = [FairPlay];\n  /**\n   * The DRM protocol for the current playback.\n   * @type {?Function}\n   * @private\n   * @static\n   */\n  static _drmProtocol: ?Function = null;\n  /**\n   * The event manager of the class.\n   * @member {EventManager} - _eventManager\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * The load promise\n   * @member {Promise<Object>} - _loadPromise\n   * @type {Promise<Object>}\n   * @private\n   */\n  _loadPromise: ?Promise<Object>;\n  /**\n   * The original progressive sources\n   * @member {Array<PKMediaSourceObject>} - _progressiveSources\n   * @private\n   */\n  _progressiveSources: Array<PKMediaSourceObject>;\n  /**\n   * The player tracks.\n   * @member {Array<Track>} - _playerTracks\n   * @private\n   */\n  _playerTracks: Array<Track>;\n  /**\n   * The id of _liveDurationChangeInterval\n   * @member {?number} - _liveDurationChangeInterval\n   * @private\n   */\n  _liveDurationChangeInterval: ?number;\n  /**\n   * The live edge value\n   * @member {number} - _liveEdge\n   * @private\n   */\n  _liveEdge: number;\n\n  /**\n   * Checks if NativeAdapter can play a given mime type.\n   * @function canPlayType\n   * @param {string} mimeType - The mime type to check\n   * @returns {boolean} - Whether the native adapter can play a specific mime type\n   * @static\n   */\n  static canPlayType(mimeType: string): boolean {\n    let canPlayType = false;\n    if (typeof mimeType === 'string') {\n      canPlayType = !!(NativeAdapter.TEST_VIDEO.canPlayType(mimeType.toLowerCase()));\n    }\n    NativeAdapter._logger.debug('canPlayType result for mimeType:' + mimeType + ' is ' + canPlayType.toString());\n    return canPlayType;\n  }\n\n  /**\n   * Checks if NativeAdapter can play a given drm data.\n   * @function canPlayDrm\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @returns {boolean} - Whether the native adapter can play a specific drm data.\n   * @static\n   */\n  static canPlayDrm(drmData: Array<Object>): boolean {\n    let canPlayDrm = false;\n    for (let drmProtocol of NativeAdapter._drmProtocols) {\n      if (drmProtocol.canPlayDrm(drmData)) {\n        NativeAdapter._drmProtocol = drmProtocol;\n        canPlayDrm = true;\n        break;\n      }\n    }\n    NativeAdapter._logger.debug('canPlayDrm result is ' + canPlayDrm.toString(), drmData);\n    return canPlayDrm;\n  }\n\n  /**\n   * Factory method to create media source adapter.\n   * @function createAdapter\n   * @param {HTMLVideoElement} videoElement - The video element that the media source adapter work with.\n   * @param {PKMediaSourceObject} source - The source Object.\n   * @param {Object} config - The player configuration.\n   * @returns {IMediaSourceAdapter} - New instance of the run time media source adapter.\n   * @static\n   */\n  static createAdapter(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: Object): IMediaSourceAdapter {\n    return new this(videoElement, source, config);\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLVideoElement} videoElement - The video element which bind to NativeAdapter\n   * @param {PKMediaSourceObject} source - The source object\n   * @param {Object} config - The player configuration\n   */\n  constructor(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: Object) {\n    NativeAdapter._logger.debug('Creating adapter');\n    super(videoElement, source);\n    this._eventManager = new EventManager();\n    this._maybeSetDrmPlayback();\n    this._progressiveSources = config.sources.progressive;\n    this._liveEdge = 0;\n  }\n\n  /**\n   * dispatches an error (is given to a class the cannot dispatch, like static fair play class)\n   * @private\n   * @param {any} error - the error to dispatch\n   * @returns {void}\n   */\n  _dispatchErrorCallback(error: any): void {\n    this._trigger(Html5EventType.ERROR, error);\n  }\n\n  /**\n   * Sets the DRM playback in case such needed.\n   * @private\n   * @returns {void}\n   */\n  _maybeSetDrmPlayback(): void {\n    if (NativeAdapter._drmProtocol && this._sourceObj && this._sourceObj.drmData) {\n      NativeAdapter._drmProtocol.setDrmPlayback(this._videoElement, this._sourceObj.drmData, (error) => this._dispatchErrorCallback(error));\n    }\n  }\n\n  /**\n   * Set the suitable progressive source according the current resolution\n   * @function _setProgressiveSource\n   * @returns {void}\n   * @private\n   */\n  _setProgressiveSource(): void {\n    let suitableTrack = getSuitableSourceForResolution(this._progressiveSources, this._videoElement.offsetWidth, this._videoElement.offsetHeight);\n    if (suitableTrack) {\n      this._sourceObj = suitableTrack;\n    }\n  }\n\n  /**\n   * Checks if the playback source is progressive\n   * @function _isProgressivePlayback\n   * @returns {boolean} - is progressive source\n   * @private\n   */\n  _isProgressivePlayback(): boolean {\n    return this._sourceObj ? this._sourceObj.mimetype === 'video/mp4' : false;\n  }\n\n  /**\n   * Load the video source\n   * @param {number} startTime - Optional time to start the video from.\n   * @function load\n   * @returns {Promise<Object>} - The loaded data\n   */\n  load(startTime: ?number): Promise<Object> {\n    if (!this._loadPromise) {\n      this._loadPromise = new Promise((resolve, reject) => {\n        this._eventManager.listenOnce(this._videoElement, Html5EventType.LOADED_DATA, this._onLoadedData.bind(this, resolve, startTime));\n        this._eventManager.listenOnce(this._videoElement, Html5EventType.ERROR, this._onError.bind(this, reject));\n        if (this._isProgressivePlayback()) {\n          this._setProgressiveSource();\n        }\n        if (this._sourceObj && this._sourceObj.url) {\n          this._videoElement.src = this._sourceObj.url;\n          this._trigger(CustomEventType.ABR_MODE_CHANGED, {mode: this._isProgressivePlayback() ? 'manual' : 'auto'});\n        }\n        this._videoElement.load();\n      });\n    }\n    return this._loadPromise;\n  }\n\n  /**\n   * Loaded data event handler.\n   * @param {Function} resolve - The resolve promise function.\n   * @param {number} startTime - Optional time to start the video from.\n   * @private\n   * @returns {void}\n   */\n  _onLoadedData(resolve: Function, startTime: ?number): void {\n    const parseTracksAndResolve = () => {\n      this._playerTracks = this._getParsedTracks();\n      this._addNativeAudioTrackChangeListener();\n      this._addNativeTextTrackChangeListener();\n      this._addNativeTextTrackAddedListener();\n      NativeAdapter._logger.debug('The source has been loaded successfully');\n      resolve({tracks: this._playerTracks});\n      if (this.isLive()) {\n        this._handleLiveDurationChange();\n      }\n    };\n    if (startTime && startTime > -1) {\n      this._videoElement.currentTime = startTime;\n    }\n    if (this._videoElement.textTracks.length > 0) {\n      parseTracksAndResolve();\n    } else {\n      this._eventManager.listenOnce(this._videoElement, Html5EventType.CAN_PLAY, parseTracksAndResolve.bind(this));\n    }\n  }\n\n  /**\n   * error event handler.\n   * @param {Function} reject - The reject promise function.\n   * @param {FakeEvent} error - The error fake event.\n   * @private\n   * @returns {void}\n   */\n  _onError(reject: Function, error: FakeEvent): void {\n    reject(new Error(Error.Severity.CRITICAL, Error.Category.MEDIA, Error.Code.NATIVE_ADAPTER_LOAD_FAILED, error.payload));\n  }\n\n  /**\n   * Destroys the native adapter.\n   * @function destroy\n   * @returns {Promise<*>} - The destroy promise.\n   */\n  destroy(): Promise<*> {\n    NativeAdapter._logger.debug('destroy');\n    return super.destroy().then(() => {\n      this._eventManager.destroy();\n      this._progressiveSources = [];\n      this._loadPromise = null;\n      this._liveEdge = 0;\n      if (this._liveDurationChangeInterval) {\n        clearInterval(this._liveDurationChangeInterval);\n        this._liveDurationChangeInterval = null;\n      }\n    });\n  }\n\n  /**\n   * Get the parsed tracks\n   * @function _getParsedTracks\n   * @returns {Array<Track>} - The parsed tracks\n   * @private\n   */\n  _getParsedTracks(): Array<Track> {\n    const videoTracks = this._getParsedVideoTracks();\n    const audioTracks = this._getParsedAudioTracks();\n    const textTracks = this._getParsedTextTracks();\n    return videoTracks.concat(audioTracks).concat(textTracks);\n  }\n\n  /**\n   * Get the parsed video tracks\n   * @function _getParsedVideoTracks\n   * @returns {Array<Track>} - The parsed video tracks\n   * @private\n   */\n  _getParsedVideoTracks(): Array<Track> {\n    if (this._isProgressivePlayback()) {\n      return this._getParsedProgressiveVideoTracks();\n    } else {\n      return this._getParsedAdaptiveVideoTracks();\n    }\n  }\n\n  /**\n   * Get the parsed progressive video tracks\n   * @function _getParsedProgressiveVideoTracks\n   * @returns {Array<Track>} - The parsed progressive video tracks\n   * @private\n   */\n  _getParsedProgressiveVideoTracks(): Array<Track> {\n    const videoTracks = this._progressiveSources;\n    const parsedTracks = [];\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        const settings = {\n          id: videoTracks[i].id,\n          bandwidth: videoTracks[i].bandwidth,\n          width: videoTracks[i].width,\n          height: videoTracks[i].height,\n          active: this._sourceObj ? videoTracks[i].id === this._sourceObj.id : false,\n          index: i\n        };\n        parsedTracks.push(new VideoTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed adaptive video tracks\n   * @function _getParsedAdaptiveVideoTracks\n   * @returns {Array<Track>} - The parsed adaptive video tracks\n   * @private\n   */\n  _getParsedAdaptiveVideoTracks(): Array<Track> {\n    //TODO check adaptation in safari hls\n    const videoTracks = this._videoElement.videoTracks;\n    const parsedTracks = [];\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        const settings = {\n          //TODO calculate width/height/bandwidth\n          id: videoTracks[i].id,\n          active: videoTracks[i].selected,\n          label: videoTracks[i].label,\n          language: videoTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new VideoTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed audio tracks\n   * @function _getParsedAudioTracks\n   * @returns {Array<AudioTrack>} - The parsed audio tracks\n   * @private\n   */\n  _getParsedAudioTracks(): Array<AudioTrack> {\n    const audioTracks = this._videoElement.audioTracks;\n    const parsedTracks = [];\n    if (audioTracks) {\n      for (let i = 0; i < audioTracks.length; i++) {\n        const settings = {\n          id: audioTracks[i].id,\n          active: audioTracks[i].enabled,\n          label: audioTracks[i].label,\n          language: audioTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new AudioTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed text tracks\n   * @function _getParsedTextTracks\n   * @returns {Array<PKTextTrack>} - The parsed text tracks\n   * @private\n   */\n  _getParsedTextTracks(): Array<PKTextTrack> {\n    const textTracks = this._videoElement.textTracks;\n    const parsedTracks = [];\n    if (textTracks) {\n      for (let i = 0; i < textTracks.length; i++) {\n        const settings = {\n          kind: textTracks[i].kind,\n          active: textTracks[i].mode === 'showing',\n          label: textTracks[i].label,\n          language: textTracks[i].language,\n          index: i\n        };\n        if (settings.language || settings.label) {\n          parsedTracks.push(new PKTextTrack(settings));\n        }\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Select a video track\n   * @function selectVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    if (this._isProgressivePlayback()) {\n      this._selectProgressiveVideoTrack(videoTrack);\n    } else {\n      this.selectAdaptiveVideoTrack(videoTrack);\n    }\n  }\n\n  /**\n   * Select a progressive video track\n   * @function _selectProgressiveVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  _selectProgressiveVideoTrack(videoTrack: VideoTrack): void {\n    let videoTracks = this._progressiveSources;\n    if ((videoTrack instanceof VideoTrack) && videoTracks && videoTracks[videoTrack.index]) {\n      let currentTime = this._videoElement.currentTime;\n      let paused = this._videoElement.paused;\n      this._sourceObj = videoTracks[videoTrack.index];\n      this._eventManager.listenOnce(this._videoElement, Html5EventType.LOADED_DATA, () => {\n        if (Env.browser.name === 'Android Browser') {\n          // In android browser we have to seek only after some playback.\n          this._eventManager.listenOnce(this._videoElement, Html5EventType.DURATION_CHANGE, () => {\n            this._videoElement.currentTime = currentTime;\n          });\n          this._eventManager.listenOnce(this._videoElement, Html5EventType.SEEKED, () => {\n            this._onTrackChanged(videoTrack);\n            if (paused) {\n              this._videoElement.pause();\n            }\n          });\n          this._videoElement.play();\n        } else {\n          this._eventManager.listenOnce(this._videoElement, Html5EventType.SEEKED, () => {\n            this._onTrackChanged(videoTrack);\n          });\n          this._videoElement.currentTime = currentTime;\n          if (!paused) {\n            this._videoElement.play();\n          }\n        }\n      });\n      this._videoElement.src = this._sourceObj ? this._sourceObj.url : \"\";\n    }\n  }\n\n  /**\n   * Select a native video track\n   * @function selectAdaptiveVideoTrack\n   * @param {VideoTrack} videoTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  selectAdaptiveVideoTrack(videoTrack: VideoTrack): void {\n    const videoTracks = this._videoElement.videoTracks;\n    if ((videoTrack instanceof VideoTrack)\n      && videoTracks\n      && videoTracks[videoTrack.index]) {\n      this._disableVideoTracks();\n      videoTracks[videoTrack.index].selected = true;\n      this._onTrackChanged(videoTrack);\n    }\n  }\n\n  /**\n   * Select an audio track\n   * @function selectAudioTrack\n   * @param {AudioTrack} audioTrack - the  audio track to select\n   * @returns {void}\n   * @public\n   */\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    const audioTracks = this._videoElement.audioTracks;\n    if ((audioTrack instanceof AudioTrack)\n      && audioTracks\n      && audioTracks[audioTrack.index]) {\n      this._removeNativeAudioTrackChangeListener();\n      this._disableAudioTracks();\n      audioTracks[audioTrack.index].enabled = true;\n      this._onTrackChanged(audioTrack);\n      this._addNativeAudioTrackChangeListener();\n    }\n  }\n\n  /**\n   * Remove the onchange listenr of the video element AudioTrackList.\n   * @private\n   * @returns {void}\n   */\n  _removeNativeAudioTrackChangeListener(): void {\n    if (this._videoElement.audioTracks) {\n      this._eventManager.unlisten(this._videoElement.audioTracks, 'change');\n    }\n  }\n\n  /**\n   * Add the onchange listenr of the video element AudioTrackList.\n   * @private\n   * @returns {void}\n   */\n  _addNativeAudioTrackChangeListener(): void {\n    if (this._videoElement.audioTracks) {\n      this._eventManager.listen(this._videoElement.audioTracks, 'change', () => this._onNativeAudioTrackChange());\n    }\n  }\n\n  /**\n   * Handler of the video element AudioTrackList onchange event.\n   * @private\n   * @returns {void}\n   */\n  _onNativeAudioTrackChange(): void {\n    const pkAudioTracks = this._playerTracks.filter(track => track instanceof AudioTrack);\n    const getActivePKAudioTrackIndex = () => {\n      const activeAudioTrack = pkAudioTracks.find(track => track.active === true);\n      return (activeAudioTrack ? activeAudioTrack.index : -1);\n    };\n    const getActiveVidAudioTrackIndex = () => {\n      for (let i = 0; i < this._videoElement.audioTracks.length; i++) {\n        const audioTrack = this._videoElement.audioTracks[i];\n        if (audioTrack.enabled) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    NativeAdapter._logger.debug('Video element audio track change');\n    const vidIndex = getActiveVidAudioTrackIndex();\n    const pkIndex = getActivePKAudioTrackIndex();\n    if (vidIndex !== pkIndex) {\n      const pkAudioTrack = pkAudioTracks.find(track => track.index === vidIndex);\n      if (pkAudioTrack) {\n        NativeAdapter._logger.debug('Native selection of track, update the player audio track (' + pkIndex + ' -> ' + vidIndex + ')');\n        this._onTrackChanged(pkAudioTrack);\n      }\n    }\n  }\n\n  /**\n   * Select a text track\n   * @function selectTextTrack\n   * @param {PKTextTrack} textTrack - The playkit text track\n   * @returns {void}\n   * @public\n   */\n  selectTextTrack(textTrack: PKTextTrack): void {\n    const textTracks = this._videoElement.textTracks;\n    if ((textTrack instanceof PKTextTrack)\n      && (textTrack.kind === 'subtitles' || textTrack.kind === 'captions')\n      && textTracks) {\n      this._removeNativeTextTrackChangeListener();\n      const selectedTrack = Array.from(textTracks).find(track => track ? track.language === textTrack.language : false);\n      if (selectedTrack) {\n        this._disableTextTracks();\n        selectedTrack.mode = 'showing';\n        NativeAdapter._logger.debug('Text track changed', selectedTrack);\n        this._onTrackChanged(textTrack);\n        this._addNativeTextTrackChangeListener();\n      }\n    }\n  }\n\n  /**\n   * Remove the onchange listenr of the video element TextTrackList.\n   * @private\n   * @returns {void}\n   */\n  _removeNativeTextTrackChangeListener(): void {\n    if (this._videoElement.textTracks) {\n      this._eventManager.unlisten(this._videoElement.textTracks, 'change');\n    }\n  }\n\n  /**\n   * Add the onchange listenr of the video element TextTrackList.\n   * @private\n   * @returns {void}\n   */\n  _addNativeTextTrackChangeListener(): void {\n    if (this._videoElement.textTracks) {\n      this._eventManager.listen(this._videoElement.textTracks, 'change', () => this._onNativeTextTrackChange());\n    }\n  }\n\n  /**\n   * Handler of the video element TextTrackList onchange event.\n   * @private\n   * @returns {void}\n   */\n  _onNativeTextTrackChange(): void {\n    const pkTextTracks = this._playerTracks.filter(track => track instanceof PKTextTrack);\n    const pkOffTrack = pkTextTracks.find(track => track.language === 'off');\n    const getActivePKTextTrackIndex = () => {\n      const activeTextTrack = pkTextTracks.find(track => track.active === true);\n      return (activeTextTrack ? activeTextTrack.index : -1);\n    };\n    const getActiveVidTextTrackIndex = () => {\n      for (let i = 0; i < this._videoElement.textTracks.length; i++) {\n        const textTrack = this._videoElement.textTracks[i];\n        if (textTrack.mode === 'showing') {\n          return i;\n        }\n      }\n      return -1;\n    };\n    NativeAdapter._logger.debug('Video element text track change');\n    const vidIndex = getActiveVidTextTrackIndex();\n    const pkIndex = getActivePKTextTrackIndex();\n\n    if (vidIndex !== pkIndex) {\n      // In case no text track with 'showing' mode\n      // we need to set the off track\n      if (vidIndex == -1) {\n        if (pkOffTrack) {\n          NativeAdapter._logger.debug('Native selection of track, update the player text track (' + pkIndex + ' -> off)');\n          this._onTrackChanged(pkOffTrack);\n        }\n      } else {\n        // In case the text track on the video element is\n        // different then the text track of the player\n        // we need to set the correct one\n        const pkTextTrack = pkTextTracks.find(track => track.index === vidIndex);\n        if (pkTextTrack) {\n          NativeAdapter._logger.debug('Native selection of track, update the player text track (' + pkIndex + ' -> ' + vidIndex + ')');\n          this._onTrackChanged(pkTextTrack);\n        }\n      }\n    }\n  }\n\n  /**\n   * Add the onaddtrack listenr of the video element TextTrackList.\n   * @private\n   * @returns {void}\n   */\n  _addNativeTextTrackAddedListener(): void {\n    if (!(this._config && this._config.playback && this._config.playback.useNativeTextTrack) && this._videoElement.textTracks) {\n      this._eventManager.listen(this._videoElement.textTracks, 'addtrack', () => this._onNativeTextTrackAdded());\n    }\n  }\n\n  /**\n   * Handler of the video element TextTrackList onaddtrack event.\n   * @private\n   * @returns {void}\n   */\n  _onNativeTextTrackAdded(): void {\n    this._playerTracks = this._getParsedTracks();\n    this._trigger(CustomEventType.TRACKS_CHANGED, {tracks: this._playerTracks});\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    this._disableTextTracks();\n  }\n\n  /**\n   * Enables adaptive bitrate\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  enableAdaptiveBitrate(): void {\n    NativeAdapter._logger.warn('Enabling adaptive bitrate is not supported for native playback');\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * For progressive playback will always returns false.\n   * For adaptive playback will always returns true.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  isAdaptiveBitrateEnabled(): boolean {\n    return !this._isProgressivePlayback();\n  }\n\n  /**\n   * Disables all the existing video tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableVideoTracks(): void {\n    let videoTracks = this._videoElement.videoTracks;\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        videoTracks[i].selected = false;\n      }\n    }\n  }\n\n  /**\n   * Disables all the existing audio tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableAudioTracks(): void {\n    let audioTracks = this._videoElement.audioTracks;\n    if (audioTracks) {\n      for (let i = 0; i < audioTracks.length; i++) {\n        audioTracks[i].enabled = false;\n      }\n    }\n  }\n\n  /**\n   * Disables all the existing text tracks.\n   * @private\n   * @returns {void}\n   */\n  _disableTextTracks(): void {\n    let textTracks = this._videoElement.textTracks;\n    if (textTracks) {\n      for (let i = 0; i < textTracks.length; i++) {\n        textTracks[i].mode = 'disabled';\n      }\n    }\n  }\n\n  /**\n   * Returns the live edge\n   * @returns {number} - live edge\n   * @private\n   */\n  _getLiveEdge(): number {\n    if (this._videoElement.seekable.length) {\n      return this._videoElement.seekable.end(this._videoElement.seekable.length - 1);\n    } else if (this._videoElement.buffered.length) {\n      return this._videoElement.buffered.end(this._videoElement.buffered.length - 1);\n    } else {\n      return this._videoElement.duration;\n    }\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  seekToLiveEdge(): void {\n    try {\n      this._videoElement.currentTime = this._getLiveEdge();\n    } catch\n      (e) {\n      return;\n    }\n  }\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  isLive(): boolean {\n    return this._videoElement.duration === Infinity;\n  }\n\n  /**\n   * Handling live duration change (as safari doesn't trigger durationchange event on live playback)\n   * @function _handleLiveDurationChange\n   * @returns {void}\n   * @private\n   */\n  _handleLiveDurationChange(): void {\n    this._liveDurationChangeInterval = setInterval(() => {\n      const liveEdge = this._getLiveEdge();\n      if (this._liveEdge !== liveEdge) {\n        this._liveEdge = liveEdge;\n        this._videoElement.dispatchEvent(new window.Event(Html5EventType.DURATION_CHANGE));\n      }\n    }, 2000);\n  }\n\n  /**\n   * Get the start time of DVR window in live playback in seconds.\n   * @returns {Number} - start time of DVR window.\n   * @public\n   */\n  getStartTimeOfDvrWindow(): number {\n    if (this.isLive() && this._videoElement.seekable.length) {\n      return this._videoElement.seekable.start(0);\n    } else {\n      return 0;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/media-source/adapters/native-adapter.js","//@flow\n\n/**\n * Calculates the most suitable source to the container size\n * @function getSuitableSourceForResolution\n * @param {Array<Object>} tracks - The tracks\n * @param {number} width - The width to calculate with\n * @param {number} height - The height to calculate with\n * @returns {Object} - The most suitable source to the container size\n */\nfunction getSuitableSourceForResolution(tracks: Array<Object>, width: number, height: number): ?Object {\n  let mostSuitableWidth = null;\n  if (height && tracks) {\n    let mostSuitableWidthTracks = [];\n    let minWidthDiff = Infinity;\n    for (let track of tracks) { // first filter the most width suitable\n      let widthDiff = Math.abs(track.width - width);\n      if (widthDiff < minWidthDiff) {\n        minWidthDiff = widthDiff;\n        mostSuitableWidthTracks = [track];\n      } else if (widthDiff === minWidthDiff) {\n        mostSuitableWidthTracks.push(track);\n      }\n    }\n    let videoRatio = width / height;\n    let mostSuitableWidthAndRatioTracks = mostSuitableWidthTracks;\n    let minRatioDiff = Infinity;\n    for (let track of mostSuitableWidthTracks) {  // filter the most ratio suitable from the width filter results\n      if (track.height) {\n        let ratioDiff = Math.abs(track.width / track.height - videoRatio);\n        if (ratioDiff < minRatioDiff) {\n          minRatioDiff = ratioDiff;\n          mostSuitableWidthAndRatioTracks = [track];\n        } else if (ratioDiff === minRatioDiff) {\n          mostSuitableWidthAndRatioTracks.push(track);\n        }\n      }\n    }\n    let maxBandwidth = 0;\n    for (let track of mostSuitableWidthAndRatioTracks) { // select the top bitrate from the ratio filter results\n      if (track.bandwidth > maxBandwidth || !track.bandwidth) {\n        maxBandwidth = track.bandwidth || maxBandwidth;\n        mostSuitableWidth = track;\n      }\n    }\n  }\n  return mostSuitableWidth;\n}\n\nexport {getSuitableSourceForResolution}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/resolution.js","// @flow\nimport BaseDrmProtocol from './base-drm-protocol'\nimport Error from '../error/error'\n\nexport default class FairPlay extends BaseDrmProtocol {\n  static _logger = BaseDrmProtocol.getLogger('FairPlay');\n  static _keySession: any;\n  static _KeySystem: string = \"com.apple.fps.1_0\";\n  static _WebkitEvents = {\n    NEED_KEY: 'webkitneedkey',\n    KEY_MESSAGE: 'webkitkeymessage',\n    KEY_ADDED: 'webkitkeyadded',\n    KEY_ERROR: 'webkitkeyerror'\n  };\n  static _errorCallback: Function;\n\n  /**\n   * FairPlay playback supports in case 2 conditions are met:\n   * 1. The environment supports FairPlay playback.\n   * 2. The drm data of the source object contains entry with FairPlay scheme.\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @return {boolean} - Whether FairPlay can be play on the current environment.\n   */\n  static canPlayDrm(drmData: Array<Object>): boolean {\n    FairPlay._logger.debug(\"Can play DRM scheme of: \" + BaseDrmProtocol.DrmScheme.FAIRPLAY);\n    return BaseDrmProtocol.DrmSupport.isProtocolSupported(BaseDrmProtocol.DrmScheme.FAIRPLAY, drmData);\n  }\n\n  /**\n   * Sets the FairPlay playback.\n   * @param {HTMLVideoElement} videoElement - The video element to manipulate.\n   * @param {Array<Object>} drmData - The drm data.\n   * @param {any} errorCallback - player error object\n   * @returns {void}\n   */\n  static setDrmPlayback(videoElement: HTMLVideoElement, drmData: Array<Object> = [], errorCallback: Function): void {\n    FairPlay._logger.debug(\"Sets DRM playback\");\n    videoElement.addEventListener(FairPlay._WebkitEvents.NEED_KEY, FairPlay._onWebkitNeedKey.bind(null, drmData), false);\n    FairPlay._errorCallback = errorCallback;\n  }\n\n  static _onWebkitNeedKey(drmData: Array<Object>, event: any): void {\n    FairPlay._logger.debug(\"Webkit need key triggered\");\n    let fpDrmData = drmData.find((drmEntry) => drmEntry.scheme === BaseDrmProtocol.DrmScheme.FAIRPLAY);\n    if (!fpDrmData || FairPlay._keySession) {\n      return;\n    }\n    let fpCertificate = fpDrmData.certificate;\n    let videoElement = event.target;\n    let initData = event.initData;\n    let contentId = FairPlay._extractContentId(initData);\n    let aCertificate = FairPlay._base64DecodeUint8Array(fpCertificate);\n\n    initData = FairPlay._concatInitDataIdAndCertificate(initData, contentId, aCertificate);\n\n    if (!videoElement.webkitKeys) {\n      let keySystem = FairPlay._selectKeySystem();\n      FairPlay._logger.debug(\"Sets media keys\");\n      videoElement.webkitSetMediaKeys(new window.WebKitMediaKeys(keySystem));\n    }\n    if (!videoElement.webkitKeys) {\n      FairPlay._onError(Error.Code.COULD_NOT_CREATE_MEDIA_KEYS);\n    }\n    FairPlay._logger.debug(\"Creates session\");\n    FairPlay._keySession = videoElement.webkitKeys.createSession('video/mp4', initData);\n    if (!FairPlay._keySession) {\n      FairPlay._onError(Error.Code.COULD_NOT_CREATE_KEY_SESSION);\n    }\n    FairPlay._keySession.contentId = contentId;\n    FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_MESSAGE, FairPlay._onWebkitKeyMessage.bind(null, fpDrmData), false);\n    FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_ADDED, FairPlay._onWebkitKeyAdded, false);\n    FairPlay._keySession.addEventListener(FairPlay._WebkitEvents.KEY_ERROR, FairPlay._onWebkitKeyError, false);\n  }\n\n  static destroy(): void {\n    FairPlay._keySession = null;\n  }\n\n  static _onWebkitKeyMessage(drmData: Object, event: any): void {\n    FairPlay._logger.debug(\"Webkit key message triggered\");\n    let message = event.message;\n    let request = new XMLHttpRequest();\n    request.responseType = \"text\";\n    request.addEventListener(\"load\", FairPlay._licenseRequestLoaded, false);\n    request.addEventListener(\"error\", () => FairPlay._onError(Error.Code.LICENSE_REQUEST_FAILED), false);\n    let params = FairPlay._base64EncodeUint8Array(message);\n    request.open('POST', drmData.licenseUrl, true);\n    request.setRequestHeader(\"Content-type\", \"application/json\");\n    FairPlay._logger.debug(\"Ready for license request\");\n    request.send(params);\n  }\n\n  static _onWebkitKeyAdded(): void {\n    FairPlay._logger.debug(\"Decryption key was added to session\");\n  }\n\n  static _onWebkitKeyError(): void {\n    FairPlay._logger.error(\"A decryption key error was encountered\");\n  }\n\n  static _licenseRequestLoaded(event: any): void {\n    FairPlay._logger.debug(\"License request loaded\");\n    let request = event.target;\n    let keyText = request.responseText.trim();\n    let responseObj = {};\n    try {\n      responseObj = JSON.parse(keyText);\n    } catch (error) {\n      FairPlay._onError(Error.Code.BAD_FAIRPLAY_RESPONSE, error);\n    }\n    let isValidResponse = FairPlay._validateResponse(responseObj);\n    if (isValidResponse.valid) {\n      let key = FairPlay._base64DecodeUint8Array(responseObj.ckc);\n      FairPlay._keySession.update(key);\n    } else {\n      FairPlay._onError(Error.Code.BAD_FAIRPLAY_RESPONSE, isValidResponse);\n    }\n  }\n\n  static _onError(code: number, data?: Object): void {\n    FairPlay._errorCallback(new Error(Error.Severity.CRITICAL, Error.Category.DRM, code, data));\n  }\n\n  static _validateResponse(responseObj: Object): Object {\n    if ((responseObj.message && responseObj.message.indexOf(\"error\") > 0)\n      || responseObj.reference === null\n      || responseObj.status_code === 500) {\n      return { //todo: create & edit an error object\n        valid: false,\n        details: \"internal server error\" // would be ERROR.INTERNAL or something like that\n      };\n    } else if (responseObj.ckc === \"\") {\n      return {\n        valid: false,\n        details: \"ckc is missing\" // would be ERROR.MISSING_CKC or something like that\n      };\n    } else {\n      return {\n        valid: true\n      };\n    }\n  }\n\n  static _extractContentId(initData: Uint8Array): string {\n    let link = document.createElement('a');\n    link.href = FairPlay._arrayToString(initData);\n    return link.hostname;\n  }\n\n  static _selectKeySystem(): ?string {\n    let keySystem = null;\n    if (window.WebKitMediaKeys.isTypeSupported(FairPlay._KeySystem, \"video/mp4\")) {\n      keySystem = FairPlay._KeySystem;\n    } else {\n      FairPlay._logger.warn(\"Key System not supported\");\n    }\n    return keySystem;\n  }\n\n  static _arrayToString(array: Uint8Array): string {\n    return String.fromCharCode.apply(null, new Uint16Array(array.buffer));\n  }\n\n  static _base64DecodeUint8Array(input: string): Uint8Array {\n    let raw = window.atob(input);\n    let rawLength = raw.length;\n    let array = new Uint8Array(new ArrayBuffer(rawLength));\n    for (let i = 0; i < rawLength; i++) {\n      array[i] = raw.charCodeAt(i);\n    }\n    return array;\n  }\n\n  static _concatInitDataIdAndCertificate(initData: Uint8Array, id: string | Uint16Array, cert: Uint8Array): Uint8Array {\n    if (typeof id === \"string\") {\n      id = FairPlay._stringToArray(id);\n    }\n    let offset = 0;\n    let buffer = new ArrayBuffer(initData.byteLength + 4 + id.byteLength + 4 + cert.byteLength);\n    let dataView = new DataView(buffer);\n\n    let initDataArray = new Uint8Array(buffer, offset, initData.byteLength);\n    initDataArray.set(initData);\n    offset += initData.byteLength;\n\n    dataView.setUint32(offset, id.byteLength, true);\n    offset += 4;\n\n    let idArray = new Uint8Array(buffer, offset, id.byteLength);\n    idArray.set(id);\n    offset += idArray.byteLength;\n\n    dataView.setUint32(offset, cert.byteLength, true);\n    offset += 4;\n\n    let certArray = new Uint8Array(buffer, offset, cert.byteLength);\n    certArray.set(cert);\n\n    return new Uint8Array(buffer, 0, buffer.byteLength);\n  }\n\n  static _stringToArray(string: string): Uint16Array {\n    let buffer = new ArrayBuffer(string.length * 2);\n    let array = new Uint16Array(buffer);\n    for (let i = 0, strLen = string.length; i < strLen; i++) {\n      array[i] = string.charCodeAt(i);\n    }\n    return array;\n  }\n\n  static _base64EncodeUint8Array(input: Uint8Array): string {\n    let keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    let output = \"\";\n    let chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    let i = 0;\n    while (i < input.length) {\n      chr1 = input[i++];\n      chr2 = i < input.length ? input[i++] : Number.NaN;\n      chr3 = i < input.length ? input[i++] : Number.NaN;\n\n      enc1 = chr1 >> 2;\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      enc4 = chr3 & 63;\n\n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n      output += keyStr.charAt(enc1) + keyStr.charAt(enc2) +\n        keyStr.charAt(enc3) + keyStr.charAt(enc4);\n    }\n    return output;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drm/fairplay.js","// @flow\nimport Env from '../utils/env'\nimport getLogger from '../utils/logger'\nimport {DrmScheme} from './drm-scheme'\n\nconst NOT_SUPPORTED: string = 'not_supported_drm_playback';\n\nexport default class DrmSupport {\n  static _logger = getLogger('DrmSupport');\n  static _Browsers: Object = {\n    Safari: () => {\n      const device = Env.device.type;\n      const os = Env.os.name;\n      if (!device && os === 'Mac OS') {\n        return DrmScheme.FAIRPLAY;\n      }\n      return NOT_SUPPORTED;\n    },\n    Chrome: () => {\n      const device = Env.device.type;\n      const os = Env.os.name;\n      if (!device || os === 'Android') {\n        return DrmScheme.WIDEVINE;\n      }\n      return NOT_SUPPORTED;\n    },\n    Firefox: () => {\n      const device = Env.device.type;\n      if (!device) {\n        return DrmScheme.WIDEVINE;\n      }\n      return NOT_SUPPORTED;\n    },\n    Edge: () => {\n      const device = Env.device.type;\n      if (!device) {\n        return DrmScheme.PLAYREADY;\n      }\n      return NOT_SUPPORTED;\n    },\n    IE: () => {\n      const device = Env.device.type;\n      const os = Env.os.name;\n      const osVersion = Env.os.version;\n      if (!device && os === 'Windows' && Number.parseFloat(osVersion) >= 8.1) {\n        return DrmScheme.PLAYREADY;\n      }\n      return NOT_SUPPORTED;\n    },\n    'Mobile Safari': () => {\n      const majorVersion = Env.browser.major;\n      if (majorVersion >= 11) {\n        return DrmScheme.FAIRPLAY;\n      }\n      return NOT_SUPPORTED;\n    }\n  };\n\n  /**\n   * Checks if a certain DRM scheme is supported in the current environment.\n   * @param {string} scheme - The drm scheme.\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @return {boolean} - Whether scheme can be play on the current environment.\n   */\n  static isProtocolSupported(scheme: string, drmData: Array<Object>): boolean {\n    const browser = Env.browser.name;\n    if (typeof DrmSupport._Browsers[browser] === 'function') {\n      let drmScheme = DrmSupport._Browsers[browser]();\n      DrmSupport._logger.debug(\"Supported DRM scheme for current environment is: \" + drmScheme);\n      return (drmScheme === scheme && !!(drmData.find((drmEntry) => drmEntry.scheme === scheme)));\n    }\n    return false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drm/drm-support.js","// @flow\nimport * as Utils from '../../../utils/util'\nimport * as EncodingSources from '../../../assets/encoding-sources.json'\nimport {Html5EventType} from '../../../event/event-type'\n\nconst WAIT_TIME: number = 500;\n\nconst testVideoElement: HTMLVideoElement = Utils.Dom.createElement('video');\ntestVideoElement.src = EncodingSources.Base64Mp4Source;\n// For iOS devices needs to turn the playsinline attribute on\ntestVideoElement.setAttribute('playsinline', '');\n\nexport default class Html5AutoPlayCapability implements ICapability {\n  static _playPromiseResult: Promise<*>;\n\n  /**\n   * Runs the test for autoplay capability.\n   * @public\n   * @static\n   * @returns {void}\n   */\n  static runCapability(): void {\n    Html5AutoPlayCapability._playPromiseResult = new Promise((resolve) => {\n      Html5AutoPlayCapability._setMuted(false);\n      if (Html5AutoPlayCapability._isDataSaverMode()) {\n        resolve({autoplay: false, mutedAutoPlay: false});\n      } else {\n        Html5AutoPlayCapability._getPlayPromise()\n          .then(() => resolve({autoplay: true, mutedAutoPlay: true}))\n          .catch(() => {\n            Html5AutoPlayCapability._setMuted(true);\n            Html5AutoPlayCapability._getPlayPromise()\n              .then(() => resolve({autoplay: false, mutedAutoPlay: true}))\n              .catch(() => resolve({autoplay: false, mutedAutoPlay: false}));\n          });\n      }\n    });\n  }\n\n  /**\n   * Gets the test result for autoplay capability.\n   * @returns {Promise<CapabilityResult>} - The result object for autoplay capability.\n   * @static\n   * @public\n   */\n  static getCapability(): Promise<CapabilityResult> {\n    return Html5AutoPlayCapability._playPromiseResult\n      .then(res => {\n        // If autoplay is not allowed - try again and return the updated result\n        if (!res.autoplay) {\n          Html5AutoPlayCapability.runCapability();\n          return Html5AutoPlayCapability._playPromiseResult;\n        }\n        return res;\n      });\n  }\n\n  /**\n   * Checks if the device is in data saver mode.\n   * @returns {boolean} - If the device is in data saver mode.\n   * @private\n   */\n  static _isDataSaverMode(): boolean {\n    if (\"connection\" in navigator) { // $FlowFixMe\n      return (navigator.connection.saveData === true);\n    }\n    return false;\n  }\n\n  /**\n   * Gets the play promise.\n   * @return {Promise<*>} - Play promise which resolved or rejected.\n   * @private\n   */\n  static _getPlayPromise(): Promise<*> {\n    return testVideoElement.play() || Html5AutoPlayCapability._forcePromiseReturnValue();\n  }\n\n  /**\n   * Sets the test video element muted value.\n   * @param {boolean} muted - The muted value.\n   * @private\n   * @returns {void}\n   * @static\n   */\n  static _setMuted(muted: boolean): void {\n    if (muted) {\n      testVideoElement.muted = true;\n      testVideoElement.setAttribute('muted', '');\n    } else {\n      testVideoElement.muted = false;\n      testVideoElement.removeAttribute('muted');\n    }\n  }\n\n  /**\n   * For browsers which are not supported promise return value from play()\n   * request we are simulate the same behaviour.\n   * @return {Promise<*>} - Play promise which resolved or rejected.\n   * @private\n   * @static\n   */\n  static _forcePromiseReturnValue(): Promise<*> {\n    return new Promise((resolve, reject) => {\n      const supported = setTimeout(() => {\n        reject();\n      }, WAIT_TIME);\n      testVideoElement.addEventListener(Html5EventType.PLAYING, () => {\n        clearTimeout(supported);\n        resolve();\n      });\n      testVideoElement.addEventListener(Html5EventType.ERROR, () => {\n        clearTimeout(supported);\n        reject();\n      });\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/capabilities/html5-autoplay.js","module.exports = {\n\t\"Base64Mp4Source\": \"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/encoding-sources.json\n// module id = 46\n// module chunks = 0","// @flow\nimport * as Utils from '../../../utils/util'\n\nexport default class Html5IsSupportedCapability implements ICapability {\n  static _vid: HTMLVideoElement = Utils.Dom.createElement('video');\n  static _result: boolean;\n\n  /***\n   * Runs the test for isSupported capability.\n   * @public\n   * @static\n   * @returns {void}\n   */\n  static runCapability(): void {\n    try {\n      Html5IsSupportedCapability._vid.volume = 0.5;\n      Html5IsSupportedCapability._result = !!Html5IsSupportedCapability._vid.canPlayType;\n    } catch (e) {\n      Html5IsSupportedCapability._result = false;\n    }\n  }\n\n  /**\n   * Gets the test result for isSupported capability.\n   * @returns {Promise<CapabilityResult>} - The result object for isSupported capability.\n   * @static\n   * @public\n   */\n  static getCapability(): Promise<CapabilityResult> {\n    return Promise.resolve({isSupported: Html5IsSupportedCapability._result});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./engines/html5/capabilities/html5-is-supported.js","//@flow\nimport Player from '../player'\nimport EventManager from '../event/event-manager'\nimport State from './state'\nimport {StateType} from './state-type'\nimport {Html5EventType, CustomEventType} from '../event/event-type'\nimport FakeEvent from '../event/fake-event'\nimport getLogger from '../utils/logger'\n\n/**\n * This class responsible to manage all the state machine of the player.\n * @classdesc\n */\nexport default class StateManager {\n  /**\n   * The logger of the class.\n   * @member\n   * @type {any}\n   * @private\n   */\n  _logger: any;\n  /**\n   * Reference to the actual player.\n   * @member\n   * @type {Player}\n   * @private\n   */\n  _player: Player;\n  /**\n   * The event manager of the class.\n   * @member\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * Holds the current state of the player.\n   * @member\n   * @type {State}\n   * @private\n   */\n  _curState: State;\n  /**\n   * Holds the previous state of the player.\n   * @member\n   * @type {State | null}\n   * @private\n   */\n  _prevState: State | null;\n  /**\n   * Holds the time of the beginning of the last buffering (waiting event)\n   * @member\n   * @type {number | null}\n   * @private\n   */\n  _lastWaitingTime: ?number | null;\n  /**\n   * Holds the state history of the player.\n   * @member\n   * @type {Array<State>}\n   * @private\n   */\n  _history: Array<State>;\n  /**\n   * The possible transitions from one state to another.\n   * @type {Array<Transition>}\n   * @private\n   */\n  _transitions: Transition = {\n    [StateType.IDLE]: {\n      [Html5EventType.LOAD_START]: () => {\n        this._updateState(StateType.LOADING);\n        this._dispatchEvent();\n      },\n      [Html5EventType.PLAY]: () => {\n        this._updateState(StateType.BUFFERING);\n        this._dispatchEvent();\n      }\n    },\n    [StateType.LOADING]: {\n      [Html5EventType.LOADED_METADATA]: () => {\n        this._updateState(StateType.PAUSED);\n        this._dispatchEvent();\n      },\n      [Html5EventType.ERROR]: () => {\n        this._updateState(StateType.IDLE);\n        this._dispatchEvent();\n      }\n    },\n    [StateType.PAUSED]: {\n      [Html5EventType.PLAY]: () => {\n        this._updateState(StateType.PLAYING);\n        this._dispatchEvent();\n      },\n      [Html5EventType.PLAYING]: () => {\n        this._updateState(StateType.PLAYING);\n        this._dispatchEvent();\n      },\n      [Html5EventType.ENDED]: () => {\n        this._updateState(StateType.IDLE);\n        this._dispatchEvent();\n      }\n    },\n    [StateType.PLAYING]: {\n      [Html5EventType.PAUSE]: () => {\n        this._updateState(StateType.PAUSED);\n        this._dispatchEvent();\n      },\n      [Html5EventType.WAITING]: () => {\n        this._updateState(StateType.BUFFERING);\n        this._lastWaitingTime = this._player.currentTime;\n        this._dispatchEvent();\n      },\n      [Html5EventType.ENDED]: () => {\n        this._updateState(StateType.IDLE);\n        this._dispatchEvent();\n      },\n      [Html5EventType.ERROR]: () => {\n        this._updateState(StateType.IDLE);\n        this._dispatchEvent();\n      }\n    },\n    [StateType.BUFFERING]: {\n      [Html5EventType.PLAYING]: () => {\n        this._updateState(StateType.PLAYING);\n        this._dispatchEvent();\n      },\n      [Html5EventType.PAUSE]: () => {\n        this._updateState(StateType.PAUSED);\n        this._dispatchEvent();\n      },\n      [Html5EventType.SEEKED]: () => {\n        if (this._prevState && this._prevState.type === StateType.PLAYING) {\n          this._updateState(StateType.PLAYING);\n          this._dispatchEvent();\n        }\n      },\n      [Html5EventType.TIME_UPDATE]: () => {\n        if (this._player.currentTime !== this._lastWaitingTime\n          && this._prevState && this._prevState.type === StateType.PLAYING) {\n          this._lastWaitingTime = null;\n          this._updateState(StateType.PLAYING);\n          this._dispatchEvent();\n        }\n      }\n    }\n  };\n\n  /**\n   * @constructor\n   * @param {Player} player - Reference to the player.\n   */\n  constructor(player: Player) {\n    this._player = player;\n    this._logger = getLogger(\"StateManager\");\n    this._eventManager = new EventManager();\n    this._history = [];\n    this._prevState = null;\n    this._curState = new State(StateType.IDLE);\n    this._attachListeners();\n  }\n\n  /**\n   * Register to all necessary events which impacts on the player state.\n   * @private\n   * @returns {void}\n   */\n  _attachListeners(): void {\n    this._eventManager.listen(this._player, Html5EventType.ERROR, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.ENDED, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.PLAY, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.LOAD_START, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.PLAYING, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.LOADED_METADATA, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.PAUSE, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.WAITING, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.SEEKED, this._doTransition.bind(this));\n    this._eventManager.listen(this._player, Html5EventType.TIME_UPDATE, this._doTransition.bind(this));\n  }\n\n  /**\n   * Performs a state transition depends on the event which occurs in the player system.\n   * @param {FakeEvent} event - The event occurs in the player system.\n   * @private\n   * @returns {void}\n   */\n  _doTransition(event: FakeEvent): void {\n    if (event.type !== Html5EventType.TIME_UPDATE || (this._curState === StateType.BUFFERING && event.type === Html5EventType.TIME_UPDATE )){\n      this._logger.debug('Do transition request', event.type); // don't show most of 'timeupdate' events\n    }\n    let transition = this._transitions[this._curState.type];\n    if (typeof transition[event.type] === 'function') {\n      transition[event.type]();\n    }\n  }\n\n  /**\n   * Updates the player's state.\n   * @param {string} type - The type of the new state.\n   * @private\n   * @returns {void}\n   */\n  _updateState(type: string): void {\n    if (this._curState.type !== type) {\n      this._curState.duration = Date.now() / 1000;\n      this._history.push(this._curState);\n      this._prevState = this._curState;\n      this._curState = new State(type);\n      this._logger.debug(`Switch player state: from ${this._prevState.type} to ${this._curState.type}`)\n    }\n  }\n\n  /**\n   * Fires the playerStateChanged event after state has been changed.\n   * @private\n   * @returns {void}\n   */\n  _dispatchEvent(): void {\n    let event = new FakeEvent(CustomEventType.PLAYER_STATE_CHANGED, ({\n      'oldState': this._prevState,\n      'newState': this._curState\n    }: StateChanged));\n    this._player.dispatchEvent(event);\n  }\n\n  /**\n   * Destroys the state manager.\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this._history = [];\n    this._eventManager.destroy();\n  }\n\n  /**\n   * Resets the state manager.\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._history = [];\n  }\n\n  /**\n   * Getter to the current state of the player.\n   * @public\n   * @returns {State} - The current state object\n   */\n  get currentState(): State {\n    return this._curState;\n  }\n\n  /**\n   * Getter to the previous state of the player.\n   * @public\n   * @returns {State|null} - The previous state object, or null if such doesn't exists\n   */\n  get previousState(): State | null {\n    return this._prevState;\n  }\n\n  /**\n   * Getter to the state history of the player.\n   * @public\n   * @returns {Array.<State>} - The full states history objects\n   */\n  get history(): Array<State> {\n    return this._history;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state/state-manager.js","//@flow\n\n/**\n * This class describes a player state.\n * @classdesc\n */\nexport default class State {\n  /**\n   * The type of the state.\n   * Can be one of those describes in states.js\n   * @member\n   * @type {string}\n   * @public\n   */\n  type: string;\n  /**\n   * The duration that the player was in this state.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _duration: number;\n  /**\n   * The timestamp that this state started.\n   * @member\n   * @type {number}\n   * @private\n   */\n  _timestamp: number;\n\n  /**\n   * @constructor\n   * @param {string} type - The type of the state.\n   */\n  constructor(type: string) {\n    this.type = type;\n    this._duration = 0;\n    this._timestamp = Date.now() / 1000;\n  }\n\n  /**\n   * Getter for the duration of the state.\n   * @returns {number} - The duration of the state\n   */\n  get duration(): number {\n    return this._duration;\n  }\n\n  /**\n   * Setter for the duration of the state.\n   * @param {number} endTime - The timestamp of the next state.\n   */\n  set duration(endTime: number): void {\n    this._duration = endTime - this._timestamp;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./state/state.js","// @flow\nimport {TrackType} from './track-type'\nimport {LabelOptions} from './label-options'\n\nconst LabelToTrackMap = {\n  [LabelOptions.AUDIO]: TrackType.AUDIO,\n  [LabelOptions.CAPTIONS]: TrackType.TEXT,\n  [LabelOptions.QUALITIES]: TrackType.VIDEO\n};\n\nexport {LabelToTrackMap};\n\n\n\n// WEBPACK FOOTER //\n// ./track/label-to-track-map.js","// @flow\n\nconst LabelOptions = {\n  AUDIO: 'audio',\n  CAPTIONS: 'captions',\n  QUALITIES: 'qualities'\n};\n\nexport {LabelOptions};\n\n\n\n// WEBPACK FOOTER //\n// ./track/label-options.js","// @flow\nimport Middleware from './middleware'\nimport BaseMiddleware from './base-middleware'\n\n/**\n * The playback middleware.\n */\nexport default class PlaybackMiddleware {\n  /**\n   * The actions of the playback middleware.\n   * @static\n   */\n  static Actions: { [action: string]: string } = {\n    PLAY: 'play',\n    PAUSE: 'pause'\n  };\n  /**\n   * The middleware implementation.\n   * @private\n   * @member\n   */\n  _middleware: Middleware;\n\n  /**\n   * @constructor\n   */\n  constructor() {\n    this._middleware = new Middleware(PlaybackMiddleware.Actions);\n  }\n\n  /**\n   * Registers a playback middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n  use(middlewareInstance: BaseMiddleware): void {\n    this._middleware.use(middlewareInstance);\n  }\n\n  /**\n   * Runs a play chain.\n   * @param {Function} callback - The last play handler in the chain.\n   * @public\n   * @returns {void}\n   */\n  play(callback: Function): void {\n    this._middleware.run(PlaybackMiddleware.Actions.PLAY, callback);\n  }\n\n  /**\n   * Runs a pause chain.\n   * @param {Function} callback - The last pause handler in the chain.\n   * @public\n   * @returns {void}\n   */\n  pause(callback: Function): void {\n    this._middleware.run(PlaybackMiddleware.Actions.PAUSE, callback);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/playback-middleware.js","// @flow\nimport MultiMap from '../utils/multi-map'\nimport BaseMiddleware from './base-middleware'\nimport getLogger from '../utils/logger'\n\n/**\n * Generic middleware implementation.\n */\nexport default class Middleware {\n  /**\n   * The registered middlewares.\n   * @private\n   * @member\n   */\n  _middlewares: MultiMap<*>;\n  /**\n   * The actions supported by the middleware.\n   * @private\n   * @member\n   */\n  _actions: { [action: string]: string };\n  /**\n   * The logger of the middleware.\n   * @private\n   * @member\n   */\n  _logger: any;\n\n  /**\n   * @constructor\n   * @param {Object} actions - The actions for the middleware.\n   */\n  constructor(actions: { [action: string]: string }) {\n    this._actions = actions;\n    this._middlewares = new MultiMap();\n    this._logger = getLogger(\"Middleware\");\n  }\n\n  /**\n   * Registers a middleware instance to the middleware chain.\n   * @param {BaseMiddleware} middlewareInstance - The middleware instance.\n   * @public\n   * @returns {void}\n   */\n  use(middlewareInstance: BaseMiddleware): void {\n    for (let action in this._actions) {\n      let apiAction = this._actions[action];\n      // $FlowFixMe\n      if (typeof middlewareInstance[apiAction] === 'function') {\n        this._logger.debug(`Register <${middlewareInstance.id}> for action ${apiAction}`);\n        // $FlowFixMe\n        this._middlewares.push(apiAction, middlewareInstance[apiAction].bind(middlewareInstance));\n      }\n    }\n  }\n\n  /**\n   * Runs a middleware chain for a specific action.\n   * @param {string} action - The action to run.\n   * @param {Function} callback - The callback function.\n   * @public\n   * @returns {void}\n   */\n  run(action: string, callback: Function): void {\n    this._logger.debug(\"Start middleware chain for action \" + action);\n    let middlewares = this._middlewares.get(action);\n    this._executeMiddleware(middlewares, () => {\n      this._logger.debug(\"Finish middleware chain for action \" + action);\n      callback();\n    });\n  }\n\n  /**\n   * Executes all the middlewares one by one.\n   * @param {Array<Function>} middlewares - The middlewares for a specific action.\n   * @param {Function} callback - The callback function.\n   * @private\n   * @returns {void}\n   */\n  _executeMiddleware(middlewares: Array<Function>, callback: Function): void {\n    // eslint-disable-next-line no-unused-vars\n    const composition = middlewares.reduceRight((next, fn) => v => {\n      fn(next);\n    }, callback);\n    composition();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./middleware/middleware.js","module.exports = {\n\t\"logLevel\": \"ERROR\",\n\t\"sources\": {\n\t\t\"options\": {\n\t\t\t\"forceRedirectExternalStreams\": false\n\t\t},\n\t\t\"metadata\": {}\n\t},\n\t\"plugins\": {},\n\t\"playback\": {\n\t\t\"audioLanguage\": \"\",\n\t\t\"textLanguage\": \"\",\n\t\t\"useNativeTextTrack\": false,\n\t\t\"volume\": 1,\n\t\t\"startTime\": -1,\n\t\t\"playsinline\": true,\n\t\t\"preload\": \"none\",\n\t\t\"autoplay\": false,\n\t\t\"allowMutedAutoPlay\": true,\n\t\t\"muted\": false,\n\t\t\"options\": {\n\t\t\t\"html5\": {\n\t\t\t\t\"hls\": {},\n\t\t\t\t\"dash\": {}\n\t\t\t}\n\t\t},\n\t\t\"preferNative\": {\n\t\t\t\"hls\": false,\n\t\t\t\"dash\": false\n\t\t},\n\t\t\"streamPriority\": [\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"hls\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"dash\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"engine\": \"html5\",\n\t\t\t\t\"format\": \"progressive\"\n\t\t\t}\n\t\t]\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./player-config.json\n// module id = 54\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./style.css\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/style.css\n// module id = 55\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".playkit-container {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  color: #fff;\\n  outline: none;\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  -webkit-tap-highlight-color: transparent;\\n}\\n\\n.playkit-engine {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  object-fit: contain;\\n}\\n\\n.playkit-engine video::-webkit-media-controls-panel,\\n.playkit-engine video::-webkit-media-controls-panel-container,\\n.playkit-engine video::-webkit-media-controls-start-playback-button,\\n.playkit-engine video::-webkit-media-controls-play-button {\\n  display: none;\\n  -webkit-appearance: none\\n}\\n\\n.playkit-poster {\\n  position: absolute;\\n  display: block;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background-size: contain;\\n  background-position: center center;\\n  background-repeat: no-repeat;\\n  background-color: #000;\\n}\\n\\n.playkit-subtitles {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  right: 0;\\n  left: 0;\\n}\\n\\n.playkit-black-cover {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  background-color: black;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader!./assets/style.css\n// module id = 56\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader/lib/css-base.js\n// module id = 57\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/style-loader/lib/addStyles.js\n// module id = 58\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/style-loader/lib/urls.js\n// module id = 59\n// module chunks = 0","//@flow\nimport Error from '../error/error'\nimport * as Utils from '../utils/util'\nimport {Parser, StringDecoder} from './text-track-display'\nimport {TrackType} from './track-type';\nimport TextTrack from './text-track';\nimport Track from './track';\nimport {CustomEventType, Html5EventType} from '../event/event-type';\nimport FakeEvent from '../event/fake-event';\nimport getLogger from '../utils/logger';\nimport EventManager from '../event/event-manager';\nimport FakeEventTarget from '../event/fake-event-target';\nimport {Cue} from \"./vtt-cue\";\nimport Player from \"../player\";\n\ntype CueStatusType = { [status: string]: number };\n\n/**\n * enum for cues statuses\n * @const\n * @type {Object}\n */\nconst CuesStatus: CueStatusType = {\n  'NOT_DOWNLOADED': 1,\n  'DOWNLOADING': 2,\n  'DOWNLOADED': 3\n};\n\nconst SRT_POSTFIX: string = 'srt';\n\nconst VTT_POSTFIX: string = 'vtt';\n\nexport const ExternalCaptionsEventType: { [event: string]: string } = {\n  NATIVE_TEXT_TRACK_ADDED: 'nativetexttrackadded'\n};\n\nclass ExternalCaptionsHandler extends FakeEventTarget {\n  /**\n   * The external captions handler class logger.\n   * @type {any}\n   * @static\n   * @private\n   */\n  static _logger: any = getLogger('ExternalCaptionsHandler');\n  /**\n   * Index that specifies the last cue that is playing / played in the text track cue array.\n   * @type {number}\n   * @private\n   */\n  _externalCueIndex: number = 0;\n  /**\n   * the player object.\n   * @type {Player}\n   * @private\n   */\n  _player: Player;\n  /**\n   * event manager for the external caption handler\n   * @type {EventManager}\n   * @private\n   */\n  _eventManager: EventManager;\n  /**\n   * a map that holds the current cues that are in process. process may be in download or that the cues are being parsed.\n   * @type {Object}\n   * @private\n   */\n  _textTrackModel: Object = {};\n  /**\n   * array of the active text cues of current track\n   * @type {Array<Cue>}\n   * @private\n   */\n  _activeTextCues: Array<Cue> = [];\n  /**\n   * indicates if a current external (non native) track is active or not.\n   * @type {boolean}\n   * @private\n   */\n  _isTextTrackActive: boolean = false;\n  /**\n   * indicates the last player time in the last time update event.\n   * @type {number}\n   * @private\n   */\n  _lastTimeUpdate: number = 0;\n\n  /**\n   * constructor\n   * @param {Player} player - the player object.\n   */\n  constructor(player: Player) {\n    super();\n    this._player = player;\n    this._eventManager = new EventManager();\n  }\n\n  /**\n   * selects external track start listening to cues\n   * @returns {void}\n   * @public\n   */\n  hideTextTrack(): void {\n    // only if external text track was active we need to hide it.\n    if (this._isTextTrackActive) {\n      this._eventManager.unlisten(this._player, Html5EventType.TIME_UPDATE);\n      this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_CUE_CHANGED, {cues: []}));\n      this._activeTextCues = [];\n    }\n  }\n\n  /**\n   * get external tracks (native and/or player module tracks)\n   * @returns {Array<TextTrack>} returns an array with the new external tracks\n   * @param {Array<Track>} tracks array with the player text tracks.\n   * @public\n   */\n  getExternalTracks(tracks: Array<Track>): Array<TextTrack> {\n    const captions = this._player.config.sources.captions;\n    if (!captions) {\n      return [];\n    }\n    this._eventManager.listen(this._player, this._player.Event.SEEKED, (e) => this._maybeSetExternalCueIndex(e));\n    const textTracks = tracks.filter(track => track instanceof TextTrack)\n    let textTracksLength = textTracks.length || 0;\n    const newTextTracks = [];\n    captions.forEach(caption => {\n      const track = new TextTrack({\n        active: false,\n        index: textTracksLength++,\n        kind: \"subtitles\",\n        label: caption.label,\n        language: caption.language,\n        external: true,\n      });\n      const sameLangTrack = textTracks.find(textTrack => caption.language === textTrack.language);\n      this._textTrackModel[caption.language] = {\n        cuesStatus: CuesStatus.NOT_DOWNLOADED,\n        cues: [],\n        url: caption.url,\n        type: caption.type\n      };\n      if (!sameLangTrack) {\n        if (this._player.config.playback.useNativeTextTrack) {\n          this._addNativeTextTrack(track);\n        }\n        newTextTracks.push(track);\n      } else {\n        ExternalCaptionsHandler._logger.warn('duplicated language, taking the inbend option. Language: ', sameLangTrack.language);\n      }\n    });\n    return newTextTracks;\n  }\n\n  /**\n   * selects external track start listening to cues\n   * @param {TextTrack} textTrack - selected text track\n   * @returns {void}\n   * @public\n   */\n  selectTextTrack(textTrack: TextTrack): void {\n    if (this._textTrackModel[textTrack.language]) {\n      if (this._textTrackModel[textTrack.language].cuesStatus === CuesStatus.DOWNLOADED && !this._player.config.playback.useNativeTextTrack) {\n        textTrack.active = true;\n        this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_TRACK_CHANGED, {selectedTextTrack: textTrack}));\n        this._setTextTrack(textTrack);\n      } else if (this._textTrackModel[textTrack.language].cuesStatus === CuesStatus.NOT_DOWNLOADED) {\n        textTrack.active = true;\n        if (!this._player.config.playback.useNativeTextTrack) {\n          this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_TRACK_CHANGED, {selectedTextTrack: textTrack}));\n        }\n        this._downloadAndParseCues(textTrack).then(() => {\n          this._textTrackModel[textTrack.language].cuesStatus = CuesStatus.DOWNLOADED;\n          if (this._player.config.playback.useNativeTextTrack) {\n            this._addCuesToNativeTextTrack(textTrack, this._textTrackModel[textTrack.language].cues);\n          } else {\n            this._setTextTrack(textTrack);\n          }\n        });\n      }\n    }\n  }\n\n  /**\n   * resets the handler\n   * @returns {void}\n   */\n  reset(): void {\n    this._textTrackModel = {};\n    this._activeTextCues = [];\n    this._eventManager.removeAll();\n  }\n\n  /**\n   * destroy function\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this._textTrackModel = {};\n    this._eventManager.destroy();\n    this._activeTextCues = [];\n  }\n\n  /**\n   * Make a request to download a caption and parse it's content to cues.\n   * @param {TextTrack} textTrack - download and parse the cues of the text track\n   * @returns {Promise<any>} - resolves when the request returns and the caption string is parsed to cues.\n   * @private\n   */\n  _getCuesString(textTrack: TextTrack): Promise<*> {\n    return new Promise((resolve, reject) => {\n      const track = this._textTrackModel[textTrack.language];\n      const captionType = track.type || this._getFileType(track.url);\n      if (![SRT_POSTFIX, VTT_POSTFIX].includes(captionType)) {\n        reject(new Error(Error.Severity.RECOVERABLE, Error.Category.TEXT, Error.Code.UNKOWN_FILE_TYPE, {captionType: captionType}))\n      }\n      Utils.Http.execute(track.url, {}, 'GET').then(response => {\n        resolve(captionType === SRT_POSTFIX ? this._convertSrtToVtt(response) : response);\n      }).catch(error => {\n        reject(new Error(Error.Severity.RECOVERABLE, Error.Category.TEXT, Error.Code.HTTP_ERROR, error.payload));\n      })\n    });\n  }\n\n  /**\n   * this calls the VTTCue parser and parse the .vtt captions string into vttCues objects\n   * @param {string} vttStr - a string in a .vtt format to parse into VTTCues\n   * @returns {Promise<*>} - parsed cues array\n   * @private\n   */\n  _parseCues(vttStr: string): Promise<*> {\n    return new Promise((resolve, reject) => {\n      const parser = new Parser(window, StringDecoder());\n      const cues = [];\n      parser.oncue = cue => cues.push(cue);\n      parser.onflush = () => {\n        ExternalCaptionsHandler._logger.debug('finished parsing external cues');\n        resolve(cues);\n      };\n      parser.parse(vttStr);\n      parser.flush();\n      parser.onparsingerror(e => reject(e))\n    })\n  }\n\n  /**\n   * converts a .SRT string into .VTT string\n   * @param {string} str - a string in a .SRT format\n   * @returns {string} - a string in a .VTT format\n   * @private\n   */\n  _convertSrtToVtt(str: string): string {\n    return str.replace(/(\\d\\d:\\d\\d:\\d\\d).(\\d\\d\\d) --> (\\d\\d:\\d\\d:\\d\\d).(\\d\\d\\d)/g, (match, part1, part2, part3, part4) => {\n      return `${part1},${part2} --> ${part3},${part4}`;\n    });\n  }\n\n  /**\n   * resolves with a caption object that contains all the caption data\n   * start the parsing, creation and addition of the external captions.\n   * @param {TextTrack} textTrack - create a single caption. when the process ends, this._textTrackModel is updated with\n   * DOWNLOADED status\n   * @returns {Promise<any>} - a promise that the action ended\n   * @private\n   */\n  _downloadAndParseCues(textTrack: TextTrack): Promise<*> {\n    this._textTrackModel[textTrack.language].cuesStatus = CuesStatus.DOWNLOADING;\n    return new Promise((resolve) => {\n      this._getCuesString(textTrack)\n        .then(vttString => this._parseCues(vttString))\n        .then(cuesArray => {\n          this._textTrackModel[textTrack.language].cues = cuesArray;\n          resolve();\n        });\n    });\n  }\n\n  /**\n   * getting the file extension\n   * @param {string} url - the url of the file\n   * @returns {string} type of the file\n   * @private\n   */\n  _getFileType(url: string): string {\n    return url.split(/[#?]/)[0].split('.').pop().trim();\n  }\n\n  /**\n   * callback for the 'timeupdate' event. on each time update this runs and checks if the active text cues array\n   * was changed.\n   * @param {TextTrack} track - the text track that that is currently displayed (active)\n   * @returns {void}\n   * @private\n   */\n  _handleCaptionOnTimeUpdate(track: TextTrack): void {\n    const currentTime = this._player.currentTime;\n    if (currentTime){\n      if (this._activeTextCues.length > 0 && currentTime < this._activeTextCues[this._activeTextCues.length - 1].startTime) {\n        this._activeTextCues = [];\n        this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_CUE_CHANGED, {cues: []}));\n      } else {\n        if (Math.abs(currentTime - this._lastTimeUpdate) > 1) {\n          this._maybeSetExternalCueIndex();\n        }\n        const cues = this._textTrackModel[track.language].cues;\n        let activeCuesChanged = false;\n        for (let activeTextCuesIndex = 0; activeTextCuesIndex < this._activeTextCues.length; activeTextCuesIndex++) {\n          const cue = this._activeTextCues[activeTextCuesIndex];\n          if (currentTime < cue.startTime || cue.endTime < currentTime) {\n            this._activeTextCues.splice(activeTextCuesIndex, 1);\n            activeCuesChanged = true;\n          }\n        }\n        while (this._externalCueIndex < cues.length && currentTime > cues[this._externalCueIndex].startTime) {\n          this._activeTextCues.push(cues[this._externalCueIndex]);\n          this._externalCueIndex++;\n          activeCuesChanged = true;\n        }\n        if (activeCuesChanged) {\n          this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_CUE_CHANGED, {cues: this._activeTextCues}));\n        }\n      }\n      // sometimes the timeupdate event is fired before the seeked event - so we need to know the user seeked.\n      this._lastTimeUpdate = currentTime;\n    }\n  }\n\n  /**\n   * updating the index of the text cues to the right location after a user seeked.\n   * @returns {void}\n   * @private\n   */\n  _maybeSetExternalCueIndex(): void {\n    const textTrack = this._player.getTracks(TrackType.TEXT).find(track => track instanceof TextTrack && track.active && track.external);\n    if (textTrack && textTrack.external) {\n      const cues = this._textTrackModel[textTrack.language].cues;\n      let i = 0;\n      while (this._player.currentTime > cues[i].startTime && i < cues.length) {\n        i++;\n      }\n      this._externalCueIndex = i;\n    }\n  }\n\n  /**\n   * adding cues to an existing text element in a video tag\n   * @param {TextTrack} textTrack - adding cues to an exiting text track element\n   * @param {Array<Cue>} cues - the cues to be added\n   * @return {void}\n   */\n  _addCuesToNativeTextTrack(textTrack: TextTrack, cues: Array<Cue>): void {\n    const videoElement = this._player.getVideoElement();\n    if (videoElement) {\n      const track = Array.from(videoElement.textTracks).find(track => track ? track.language === textTrack.language : false);\n      if (track) {\n        cues.forEach(cue => track.addCue(cue));\n      }\n    }\n  }\n\n  /**\n   * adds a new text track element to the video element or set an existing one\n   * (when adding a text track with existing language to the video element it will remove all its cues)\n   * @param {TextTrack} textTrack - the playkit text track object to be added\n   * @returns {void}\n   */\n  _addNativeTextTrack(textTrack: TextTrack): void {\n    const videoElement = this._player.getVideoElement();\n    if (videoElement) {\n      const sameLanguageTrackIndex = Array.from(videoElement.textTracks).findIndex(track => track ? track.language === textTrack.language : false);\n      if (sameLanguageTrackIndex > -1) {\n        const domTrack = videoElement.textTracks[sameLanguageTrackIndex];\n        if (domTrack.cues) {\n          Object.values(domTrack.cues).forEach(cue => domTrack.removeCue(cue));\n        }\n      } else {\n        videoElement.addTextTrack(\"subtitles\", textTrack.label || textTrack.language, textTrack.language);\n      }\n      this.dispatchEvent(new FakeEvent(ExternalCaptionsEventType.NATIVE_TEXT_TRACK_ADDED));\n    }\n  }\n\n  /**\n   * triggering the text track changed event and start listening to the time update on the player (for the the external text track).\n   * @param {TextTrack} textTrack - text track to be set\n   * @returns {void}\n   * @private\n   */\n  _setTextTrack(textTrack: TextTrack): void {\n    if (!this._player.config.playback.useNativeTextTrack) {\n      this._isTextTrackActive = true;\n      ExternalCaptionsHandler._logger.debug('External text track changed', textTrack);\n      this._activeTextCues = [];\n      this.dispatchEvent(new FakeEvent(CustomEventType.TEXT_CUE_CHANGED, {cues: this._activeTextCues}));\n      this._eventManager.listen(this._player, Html5EventType.TIME_UPDATE, () => this._handleCaptionOnTimeUpdate(textTrack));\n    }\n  }\n}\n\nexport {ExternalCaptionsHandler};\n\n\n\n// WEBPACK FOOTER //\n// ./track/external-captions-handler.js"],"sourceRoot":""}